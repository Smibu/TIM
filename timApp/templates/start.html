{% extends 'base.html' %}
{% block title %}Welcome{% endblock %}
{% block head %}
    {{ super() }}
{% endblock %}

{% block mainctrl %}tim-start{% endblock %}

{% block content %}
    <div class="row">
        <h1 class="text-center">TIM - The Interactive Material</h1>
    </div>

    <div class="row">
        <div class="col-md-8 col-md-offset-2">
            <div class="row">
                <div class="col-md-8">
                    <a href="/view/tim/TIM-esittely">
                        <img class="img-responsive" src="{{ url_for('static', filename='images/responsive.jpg') }}"/>
                    </a>
                </div>

                <div class="col-md-4">
                    {% if session.user_id %}
                        <h3>Get started</h3>
                        <ul class="list-unstyled">
                            <li class="h5"><a href="/view/{{ current_user.get_personal_folder().path }}">My documents</a></li>
                            <li class="h5"><a href="/view/">All documents</a></li>
                            <li class="h5"><a ng-click="$ctrl.enableCreate()" href="#">Create a new document</a></li>
                            <li class="h5"><a ng-click="$ctrl.enableDocList()" href="#">Available courses</a></li>
                        </ul>
                        <bootstrap-panel ng-if="$ctrl.creatingNew"
                                         title="Create a new document"
                                         show-close="true"
                                         close-fn="$ctrl.cancelCreate()">
                            <create-item item-title="My document"
                                         item-location="{{ current_user.get_personal_folder().path }}"
                                         item-type="document">
                            </create-item>
                        </bootstrap-panel>
                        <tagged-document-list ng-if="$ctrl.docListOpen"></tagged-document-list>
                    {% elif session.altlogin == "signup2" %}
                        <form method="POST" action="/altsignup2">
                            <p>
                                Welcome to TIM! We need just a few more details to get you started.
                            </p>
                            <input type="hidden" name="token" value="{{ session.token }}">

                            <div class="form-group">
                                <label for="username">User name</label>
                                <p id="username">{{ session.user_name }}</p>
                            </div>
                            <div class="form-group">
                                <label for="realname">Real name</label>
                                <input class="form-control" id="realname" name="realname" type="text"
                                       value="{{ session.real_name }}">
                            </div>
                            <div class="form-group">
                                <label>Email</label>

                                <p>{{ session.email }}</p>
                            </div>
                            <div class="form-group">
                                <label for="password">New password</label>
                                <input class="form-control" id="password" name="password" type="password">
                            </div>
                            <div class="form-group">
                                <label for="passconfirm">Repeat new password</label>
                                <input class="form-control" id="passconfirm" name="passconfirm" type="password">
                            </div>
                            <button class="wideButton" type="submit">Create account</button>
                        </form>
                    {% else %}
                        <h3>Get started</h3>
                        <p>To log in or sign up, use the "Log in" button at the top.</p>
                        <ul class="list-unstyled">
                            <li><a href="/view/">Browse all documents</a></li>
                        </ul>
                    {% endif %}
                </div>
            </div>

            <div class="row">
                <div class="col-md-3 col-md-offset-3">
                    <h4>TIM</h4>
                    <ul class="list-unstyled">
                        <li><a href="/view/tim/TIM-esittely">Esittely</a></li>
                        <li><a href="/view/tim/TIM-ohjeet">Ohjeet <sup>(*)</sup></a></li>
                    </ul>
                </div>
                <div class="col-md-3">
                    <h4>Esimerkkejä <sup>(*)</sup></h4>
                    <ul class="list-unstyled">
                        <li><a href="/view/tim/Esimerkkeja-TIMin-mahdollisuuksista">TIMin mahdollisuuksia</a></li>
                        <li><a href="/view/tim/Eri-ohjelmointikielia">Eri ohjelmointikieliä</a></li>
                        <li><a href="/view/tim/muita-esimerkkeja">Käyttö eri oppiaineissa</a></li>
                    </ul>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4 col-md-offset-4 text-muted text-center">
                    <sup>(*)</sup> vaatii kirjautumisen
                </div>
            </div>
        </div>
    </div>
{% endblock %}
