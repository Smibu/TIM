{% extends "base.html" %}
{% block title %}Settings{% endblock %}
{% block customcss %}
    {# The logic for custom CSS is dynamic on settings page, so we disable it here. #}
{% endblock %}
{% block head %}
    {{ super() }}
    <script>
        var settings = {{ prefs|tojson }};
    </script>
    <script src="{{ url_for('static', filename='scripts/settingsView/settingsCtrl.js') }}"></script>
{% endblock %}
{% block content %}
    <div ng-controller="SettingsCtrl">
        <form ng-submit="submit('{{ request.path + 'save' }}')">
            {% if css_files %}
                <span>Available custom styles:</span>
            {% else %}
                <span>There are no available custom styles.</span>
            {% endif %}
            <br>
            {% for css_file in css_files %}
                <label><input type="checkbox"
                              name="settings.css_files.{{ css_file.name }}"
                              ng-model="settings.css_files.{{ css_file.name }}"
                              ng-change="submit('{{ request.path + 'save' }}')"
                              ng-disabled="saving">
                    <a href="{{ url_for('static', filename='gen/css/' + css_file.name + '.css') }}">
                        {{ css_file.name }}</a> - {{ css_file.desc }}
                </label><br>
            {% endfor %}
            <label>Custom CSS:<br><textarea class="docEditor" ng-model="settings.custom_css"></textarea></label><br>
            <button type="submit" ng-disabled="saving">Save custom CSS</button>
            <span ng-show="saving">Saving...</span>
        </form>
    </div>
{% endblock %}