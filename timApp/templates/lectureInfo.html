{% extends "base.html" %}
{% block title %}Info{% endblock %}
{% block head %}
    {{ super() }}

    <script src="{{ url_for('bower.static', filename='ace-builds/src-min-noconflict/ace.js') }}"></script>
    <script src="{{ url_for('bower.static', filename='angular-ui-ace/ui-ace.js') }}"></script>
    <script src="{{ url_for('static', filename='scripts/checkModules.js') }}"></script>

    <script>

        var modules = checkModules([
            {% for dep in jsMods %}
                "{{ dep|safe}}",
            {% endfor %}
        ]);

    </script>

    <script src="{{ url_for('static', filename='scripts/Chart.min.js') }}"></script>
    <script src="{{ url_for('static', filename='scripts/timApp.js') }}"></script>
    <script src="{{ url_for('static', filename='scripts/controllers/lectureInfoController.js') }}"></script>
    <script src="{{ url_for('static', filename='scripts/createDialog.js') }}"></script>
    <script src="{{ url_for('static', filename='scripts/showChartDirective.js') }}"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/lectureInfo.css') }}">

    <script>
        var docId = {{docId|tojson|safe}};
        var lectureId = {{lectureId|tojson|safe}};
        var lectureCode = {{lectureCode|tojson|safe}};
        var lectureStartTime = {{lectureStartTime|tojson|safe}};
        var lectureEndTime = {{lectureEndTime|tojson|safe}};
    </script>

{% endblock %}
{% block content %}
    <div ng-app="timApp" ng-controller="LectureInfoController">
        <h1 ng-bind="lectureCode"></h1>

        <div>
            <p>Start time: </p>

            <p ng-bind="lectureStartTime"></p>

            <p>End time:</p>

            <p ng-bind="lectureEndTime"></p>
        </div>

        <p>Lecture wall messages:</p>
        <label>
            <textarea data-ng-model="msg" readonly id="lectureInfoWall"></textarea>
        </label>

        <h3>Find answers</h3>
        <label>UserName
            <input type="text" ng-model="userName">
        </label>

        <input type="button" ng-click="drawCharts()" value="Show answers">

        <div>
            <div ng-repeat="question in questions">
                <show-chart-directive canvas='answerChart{{ "{{question.question_id }}" }}'
                                      control='dynamicAnswerShowControls[$index]' class="chart"></show-chart-directive>
                <canvas id='answerChart{{ "{{question.question_id }}" }}' width='400' height='300'></canvas>
            </div>
        </div>

        <div id="answersDiv"></div>
        <div style="margin-top: 10em">
            <h3>Delete lecture</h3>
            <input type="button" ng-click="deleteLecture()" value="Delete lecture">
        </div>
    </div>
{% endblock %}

