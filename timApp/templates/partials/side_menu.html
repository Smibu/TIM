<div ng-controller="SidebarMenuCtrl as sbmctrl" ng-cloak>
    <div class="btn btn-default btn-sm pull-left" ng-click="sbmctrl.showSidebar()" title="Show menu">
        <i class="glyphicon glyphicon-menu-hamburger" title="Click to open sidebar-menu"></i>
    </div>
    <uib-tabset id="menuTabs" active="active" class="hidden-sm hidden-xs">
        {% if not hide_links %}
        <uib-tab index="6" select="sbmctrl.bookmarkTabSelected(true)"
                 deselect="sbmctrl.bookmarkTabSelected(false)"
                 ng-show="sbmctrl.users.isLoggedIn()">
            <uib-tab-heading>
                <i class="glyphicon glyphicon-bookmark"></i>
            </uib-tab-heading>
            <h5>Bookmarks</h5>
            <bookmarks data="sbmctrl.bookmarks"></bookmarks>
        </uib-tab>

        <uib-tab index="1">
            <uib-tab-heading>
                <i class="glyphicon glyphicon-cog"></i>
            </uib-tab-heading>
            <h5>Customize</h5>
            <a href="/settings">Customize TIM</a>
            {% if route and item.rights.manage %}
                <h5>Document settings</h5>
                <button class="timButton" ng-click="vctrl.editSettingsPars()">Edit settings</button>
            {% endif %}
            <div ng-show="lctrl.lectureSettings.inLecture">
                <h5>Lecture settings</h5>
                <div class="checkbox">
                    <label>
                        <input type="checkbox" ng-model="lctrl.lectureSettings.useWall"> Show wall
                    </label>
                </div>
                <div ng-show="!isLecturer" class="checkbox">
                    <label>
                        <input type="checkbox" ng-model="lctrl.lectureSettings.useQuestions"> Show questions
                    </label>
                </div>
                <div ng-show="lctrl.isLecturer" class="checkbox">
                    <label>
                        <input type="checkbox" ng-model="lctrl.lectureSettings.useAnswers"> Show answers
                    </label>
                </div>
                <div ng-show="lctrl.isLecturer" class="checkbox">
                    <label>
                        <input type="checkbox" ng-model="lctrl.lectureSettings.useNotPollingDialog"> Show 'not polling' dialog
                    </label>
                </div>
            </div>
        </uib-tab>
        {% endif %}

        {% if headers %}
            <uib-tab index="0">
                <uib-tab-heading>
                    <i class="glyphicon glyphicon-book"></i>
                </uib-tab-heading>
                <h5>Index <a href="#" title="Go to top" class="pull-right">Go to top</a></h5>
                {% include 'partials/content.html' %}
            </uib-tab>
        {% endif %}

        {% if not hide_links %}
        <uib-tab index="2" ng-show="lctrl.lectureSettings.lectureMode" select="sbmctrl.toggleLectures()">
            <uib-tab-heading>
                <i class="glyphicon glyphicon-education"></i>
            </uib-tab-heading>
            {% raw %}
            <h5>Current Lectures</h5>
            <ul>
                <li ng-repeat="lecture in sbmctrl.currentLecturesList">
                    <a href="{{ lecture.target }}">{{ lecture.lecture_code }}</a>
                    <button ng-if="lctrl.lectureId != lecture.lecture_id" style="margin-left: 5px;" value="Join"
                            ng-click="$emit('joinLecture', lecture)">Join
                    </button>
                </li>
                <li ng-show="sbmctrl.currentLecturesList.length == 0"><p>No current lectures</p></li>
            </ul>
            <h5>Coming Lectures</h5>
            <ul>
                <li ng-repeat="lecture in sbmctrl.futureLecturesList">
                    <a href="{{ lecture.target }}">{{ lecture.lecture_code }}</a>
                </li>
                <li ng-show="sbmctrl.futureLecturesList.length == 0"><p>No coming lectures</p></li>
            </ul>
            <h5>Past Lectures</h5>
            <ul>
                <li ng-repeat="lecture in sbmctrl.pastLecturesList">
                    <a href="{{ lecture.target }}">{{ lecture.lecture_code }}</a>
                </li>
                <li ng-show="sbmctrl.pastLecturesList.length == 0"><p>No past lectures</p></li>
            </ul>
            {% endraw %}
        </uib-tab>

        <uib-tab index="3" ng-show="lctrl.isLecturer" select="sbmctrl.toggleQuestions()">
            <uib-tab-heading>
                <i class="glyphicon glyphicon-question-sign"></i>
            </uib-tab-heading>
            {% raw %}
            <h5>Lecture questions</h5>
            <ul>
                <li ng-repeat="question in sbmctrl.lectureQuestions">
                    <a ng-click="lctrl.showQuestion(question.questionId)">{{
                        question.questionTitle
                        }}</a>
                </li>
                <li ng-show="sbmctrl.lectureQuestions.length == 0"><p>No lecture questions</p></li>
            </ul>
            <h5>Material questions</h5>
            <ul>
                <li ng-repeat="question in sbmctrl.materialQuestions">
                    <a>{{ question.question }}</a>
                </li>
                <li ng-show="sbmctrl.materialQuestions.length == 0"><p>No material questions</p></li>
            </ul>
            {% endraw %}
        </uib-tab>

        <uib-tab index="4" ng-show="lctrl.lectureSettings.inLecture && !lctrl.isLecturer" select="lctrl.getQuestionManually()">
            <uib-tab-heading>
                <i class="glyphicon glyphicon-question-sign"></i>
            </uib-tab-heading>
            Loading question manually...
        </uib-tab>

        <uib-tab index="5" ng-show="lctrl.isLecturer && lctrl.lectureSettings.inLecture">
            <uib-tab-heading>
                <i class="glyphicon glyphicon-user"></i>
            </uib-tab-heading>
            <h5>People logged-in: <span
                    ng-bind="lctrl.lecturerTable.length + lctrl.studentTable.length">None</span></h5>
            {% raw %}
            <h5>Lecturers (<span ng-bind="lctrl.lecturerTable.length">None</span>)</h5>
            <ul>
                <li ng-repeat="lecturer in lctrl.lecturerTable">
                    {{ lecturer.name }} > {{ lecturer.active }}
                </li>
            </ul>
            <h5>Students (<span ng-bind="lctrl.studentTable.length">None</span>)</h5>
            <p ng-show="lctrl.lecturerTable.length == 0">No lecturers</p>
            <ul>
                <li ng-repeat="person in lctrl.studentTable track by $index">
                    {{ person.name }} > {{ person.active }}
                </li>
            </ul>
            <p ng-show="lctrl.studentTable.length == 0">No students</p>
            {% endraw %}
        </uib-tab>
        {% endif %}
    </uib-tabset>
</div>
