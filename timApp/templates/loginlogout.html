<div class="viewLogin">
{% if session.user_id %}
    <a class="loggedintext" href="/">Logged in as: {{ session.real_name }} ({{ session.user_name }})</a>
    {% else %}
        <a class="loggedintext" href="/login">Log in</a>
        {% if session.altlogin == "signup" %}
        <form method="POST" action="/altsignup">
            <p class="loginwelcome">
                Welcome to TIM! Please fill in your email address to sign up.<br>
                You will receive a confirmation email with your first password.<br>
                You can also use this form to recover a lost password, or to change
                your user name.
            </p>
            <div class="loginFieldDiv">
                <label for="email" class="loginFieldLabel">Email</label> 
                <input name="email" type="text" class="loginFieldInput">
            </div>
            <div class="loginButtonDiv">
                <button type="submit">Sign up</button>
            </div>
        </form>
        {% endif %}
        {% if session.altlogin == "signup2" %}
        <form method="POST" action="/altsignup2">
            <p class="loginwelcome">
                Welcome to TIM! We need just a few more details to get you started.
            </p>
                <input type="hidden" name="token" value="{{ session.token }}">
            <div class="loginFieldDiv">
                <label for="name" class="loginFieldLabel">User name</label> 
                <span name="name" class="loginFieldInput">{{ session.user_name }}</span>
            </div>
            <div class="loginFieldDiv">
                <label for="realname" class="loginFieldLabel">Real name</label> 
                <input name="realname" class="loginFieldInput" type="text" value="{{ session.real_name }}">
            </div>
            <div class="loginFieldDiv">
                <label for="email" class="loginFieldLabel">Email</label> 
                <span name="email" class="loginFieldStatic"> {{ session.email }}</span>
            </div>
            <div class="loginFieldDiv">
                <label for="password" class="loginFieldLabel">New password</label> 
                <input name="password" class="loginFieldInput" type="password">
            </div>
            <div class="loginFieldDiv">
                <label for="passconfirm" class="loginFieldLabel">Repeat new password</label> 
                <input name="passconfirm" class="loginFieldInput" type="password">
            </div>
            <div class="loginButtonDiv">
                <button type="submit">Create account</button>
            </div>
        </form>
        {% endif %}
        {% if session.altlogin == "login" %}
        <form method="POST" action="/altlogin">
            <p class="loginwelcome">
            Welcome to TIM! Please enter your email address and password to log in.
            </p>
            <div class="loginFieldDiv">
                <label for="email" class="loginFieldLabel">Email</label> 
                <input name="email" class="loginFieldInput" type="email" value="{{session.email}}">
            </div>
            <div class="loginFieldDiv">
                <label for="password" class="loginFieldLabel">Password</label> 
                <input name="password" class="loginFieldInput" type="password">
            </div>
            <div class="loginButtonDiv">
                <button type="submit">Login</button>
            </div>
        </form>
        {% endif %}
    {% endif %}
</div>
