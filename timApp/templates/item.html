{% extends 'base.html' %}
{%- macro active(endpoint) -%}
    {%- if request.endpoint == endpoint -%}
        class="active"
    {%- endif -%}
{%- endmacro -%}
{% block ngmodules %}
    {{ super() }}
    {{ ['ngFileUpload']|map('map_format', "'%s'")|join(', ')|safe }},
{% endblock %}
{% block ngscripts %}
    {{ super() }}
    <script src="{{ url_for('bower.static', filename='ng-file-upload/ng-file-upload-all.min.js') }}"></script>
{% endblock %}
{% block head %}
    {{ super() }}
    <script>
        var item = {{item|tojson}};
        var breadcrumbs = {{item.parents_to_root|tojson}};
    </script>
    <script src="{{ url_for('static', filename='scripts/breadcrumbs.js') }}"></script>
{% endblock %}
{% block header %}
    {{ super() }}
    {% if not hide_links %}
        <div class="pull-right">
            {% block languages %}
            {% endblock %}
        </div>
    <div class="nav nav-tabs">    {% block itemlinks %}
        <li role="presentation" {{ active('view_page.view_document') }}><a id="headerView" href="/view/{{ item.path }}">View</a></li>
        {% if item.rights.manage %}
             <li role="presentation" {{ active('manage_page.manage') }}><a id="headerManage" href="/manage/{{ item.path }}">Manage</a></li>
        {% endif %}
    {% endblock %}</div>
        <div ng-controller="Breadcrumbs" ng-show="crumbs" class="ng-cloak">
            <ol class="breadcrumb">
                <li ng-repeat="c in crumbs | orderBy:'-'">
                    <a href="/{{ route or 'view' }}/{{ '{{ c.path | escape }}' }}">{{ '{{ c.title }}' }}</a>
                </li>
                <li class="active">{{ '{{ item.title }}' }}</li>
            </ol>
        </div>
    {% endif %}
{% endblock %}
