requirejs.config({
    baseUrl: '/static/scripts/node_modules',
    paths: {
        // TIM modules
        'tim': '/static/scripts/build',

        // 3rd party modules
        'ace': 'ace/lib/ace',
        'angular': 'angular/angular',
        'angular-eonasdan-datetimepicker': 'angular-eonasdan-datetimepicker/dist/angular-eonasdan-datetimepicker',
        'angular-messages': 'angular-messages/angular-messages',
        'angular-sanitize': 'angular-sanitize/angular-sanitize',
        'angular-timer': 'angular-timer/dist/angular-timer',
        'angular-ui-bootstrap': 'angular-ui-bootstrap/dist/ui-bootstrap-tpls',
        'eonasdan-bootstrap-datetimepicker': 'eonasdan-bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min',
        'humanize-duration': 'humanize-duration/humanize-duration',
        'jquery': 'jquery/dist/jquery',
        'katex': 'katex/dist/katex.min',
        'katex-auto-render': 'katex/dist/contrib/auto-render.min',
        'ng-file-upload': 'ng-file-upload/dist/ng-file-upload',
        'ngstorage': 'ngstorage/ngstorage',
        'oclazyload': 'oclazyload/dist/oclazyload',
        'ui-grid': 'angular-ui-grid/ui-grid',

        // plugin modules
        'cs': '/cs',
        'mcq': '/mcq',
        'mmcq': '/mmcq',
        'static/scripts/jquery.ui.touch-punch.min': '/static/scripts/jquery.ui.touch-punch.min',
        'static/scripts/timHelper': '/static/scripts/build/timHelper',
        'svn': '/svn',
    },
    packages: [{
        name: 'moment',
        location: 'moment',
        main: 'moment'
    }],
    shim: {
        // 3rd party modules
        'angular': {exports: 'angular'},
        'angular-eonasdan-datetimepicker': {deps: ['angular', 'eonasdan-bootstrap-datetimepicker']},
        'angular-messages': {deps: ['angular']},
        'angular-sanitize': {deps: ['angular']},
        'angular-timer': {deps: ['angular']},
        'angular-ui-bootstrap': {deps: ['angular']},
        'katex-auto-render': {deps: ['katex']},
        'ng-file-upload': {deps: ['angular']},
        'oclazyload': {deps: ['angular']},

        // TIM modules
        'tim/answerbrowser3': {deps: ['tim/app', 'tim/timTiming']},
        'tim/breadcrumbs': {deps: ['tim/app']},
        'tim/controllers/reviewController': {deps: ['tim/app', 'jquery']},
        'tim/controllers/startController': {deps: ['tim/app']},
        'tim/controllers/view/viewctrl': {
            deps: [
                'ngstorage',
                'tim/app',
                'tim/controllers/view/areas',
                'tim/controllers/view/clipboard',
                'tim/controllers/view/editing',
                'tim/controllers/view/eventhandlers',
                'tim/controllers/view/index',
                'tim/controllers/view/interceptor',
                'tim/controllers/view/math',
                'tim/controllers/view/notes',
                'tim/controllers/view/parhelpers',
                'tim/controllers/view/parmenu',
                'tim/controllers/view/questions',
                'tim/controllers/view/readings',
                'tim/controllers/view/refpopup',
                'tim/directives/popupMenu',
                'tim/services/parCompiler',
            ]
        },
        'tim/controllers/view/areas': {deps: ['tim/app']},
        'tim/controllers/view/clipboard': {deps: ['tim/app']},
        'tim/controllers/view/editing': {deps: ['tim/app']},
        'tim/controllers/view/eventhandlers': {deps: ['tim/app']},
        'tim/controllers/view/index': {deps: ['tim/app', 'tim/marktree']},
        'tim/controllers/view/interceptor': {deps: ['tim/app', 'tim/timTiming']},
        'tim/controllers/view/math': {deps: ['tim/app']},
        'tim/controllers/view/notes': {deps: ['tim/app']},
        'tim/controllers/view/parhelpers': {deps: ['tim/app']},
        'tim/controllers/view/parmenu': {deps: ['tim/app']},
        'tim/controllers/view/questions': {deps: ['tim/app']},
        'tim/controllers/view/readings': {deps: ['tim/app']},
        'tim/controllers/view/refpopup': {deps: ['tim/app']},
        'tim/directives/bookmarks': {deps: ['tim/app', 'tim/directives/focusMe']},
        'tim/directives/bootstrapPanel': {deps: ['tim/app']},
        'tim/directives/createItem': {deps: ['tim/app', 'tim/services/slugify']},
        'tim/directives/focusMe': {deps: ['tim/app']},
        'tim/directives/loginMenu': {deps: ['tim/app']},
        'tim/directives/popupMenu': {deps: ['tim/app']},
        'tim/draggable': {deps: ['tim/app']},
        'tim/manageView/manageCtrl': {deps: ['tim/app']},
        'tim/marktree': {exports: 'globals'},
        'tim/services/slugify': {deps: ['tim/app']},
        'tim/services/userService': {deps: ['tim/app']},
        'tim/settingsView/settingsCtrl': {deps: ['tim/app']},
        'tim/sidebarMenuCtrl': {deps: ['tim/app', 'tim/services/userService', 'jquery']},
        'tim/timApp': {deps: ['tim/app']},
        'tim/timTiming': {deps: []},
        'tim/userlistController': {deps: ['tim/app']},

        // plugin modules
        'cs/js/dir': {deps: ['angular']},
        'mcq/script2': {deps: ['angular', 'mcq/SimpleDirective']},
        'mcq/SimpleDirective': {exports: 'globals'},
        'mmcq/script2': {deps: ['angular', 'mmcq/SimpleDirective']},
        'mmcq/SimpleDirective': {exports: 'globals'},
        'svn/video/js/video': {deps: ['angular']},
    }
});

requirejs([
    'angular',
    'tim/answerbrowser3',
    'tim/breadcrumbs',
    'tim/controllers/reviewController',
    'tim/controllers/startController',
    'tim/controllers/view/viewctrl',
    'tim/directives/bookmarks',
    'tim/directives/bootstrapPanel',
    'tim/directives/createItem',
    'tim/directives/loginMenu',
    'tim/directives/rightsEditor',
    'tim/manageView/manageCtrl',
    'tim/parEditor',
    'tim/settingsView/settingsCtrl',
    'tim/sidebarMenuCtrl',
    'tim/timApp',
    'tim/userlistController',
], (angular) => {
    angular.bootstrap(document, ['timApp']);
});
