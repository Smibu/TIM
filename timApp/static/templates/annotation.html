<!-- Pop over element --><span class="annotation-element" ><span ng-show="show" ng-click="updateVelpZIndex()"
                                                                ng-class="['annotation-info', 'emphasise', 'default', {neutral: points == 0, negative: points<0, positive: points > 0}]">
    <span class="fulldiv">
        <span class="div-90 annTopSection">
            <p><span class="annHeader"><strong>{{ velp }}</strong></span></p>
            <p><a class="username" href="mailto:{{ email }}">{{ annotator }}</a>
                    <span class="timestamp" title="{{ creationtime }}">{{ timesince }}</span></p>
            <p><label>Points: <input type="number" ng-model="points" ng-value="points" ng-disabled="checkRights()"
                                     ng-change="changePoints(points)"/></label></p>
        </span>

        <span class="div-10">
            <span title="Close" class="float-right glyphicon glyphicon-remove clickable-icon closeAnn"
                  ng-click="toggleAnnotation()"></span>
        </span>
    </span>
    <span class="fulldiv">
        <ul class="comments">
            <li ng-repeat="comment in comments">
                <p>{{ comment["content"] }}
                    <span class="comment-info"><a class="username" title="{{ comment.commenter_real_name }}"
                   href="mailto:{{ comment.commenter_email }}">
                    {{ comment.commenter_username }}</a>
                   <span class="timestamp" title="{{ comment.comment_time }}">{{ comment.comment_relative_time }}</span>
                    </span>
                </p>
                <!--strong>{{ comment["commenter_username"] }}</strong-->
                </li>
        </ul>
        <textarea placeholder="Add comment" ng-model="newComment" autofocus></textarea>
    </span>

    <div>
        <form class="form-inline adjustAnnForm">
            <div class="form-group">
                <label>Visible to:</label>
                <select ng-model="visible_options.value" ng-disabled="checkRights()"
                        ng-options="v as visible_options.names[v-1] for v in visible_options.values">
                </select>
                <div ng-class="['annqmark', 'glyphicon', 'glyphicon-question-sign', 'clickable-icon']"
                     uib-popover="'Just me' means that the annotation is visible only to yourself. 'Document owner' refers to the person or group who has been named as the document owner. 'Teachers' refers to the users that have teacher access to this document. 'Everyone' means that the annotation is visible to everyone who can view the assessed content."
                     popover-placement="left">
                </div>
            </div>
        </form>
    </div>
    <span>
        <button class="saveChanges timButton" ng-disabled="!checkIfChanged()" ng-click="saveChanges()">Save changes
        </button>
    </span><span class="annDelAnnotation" title="Delete annotation"
                 ng-class="['delAnnotation', 'float-right', 'glyphicon', 'glyphicon-trash', 'clickable-icon', {hide: comments.length > 1} ]"
                 ng-hide="checkRights()"
                 ng-click="deleteAnnotation()"></span>
</span></span><!--
Highlighted text--><span ng-click="toggleAnnotation()" ng-class="['highlighted', 'clickable', 'emphasise', 'default',
{neutral: points == 0, negative: points < 0, positive: points > 0}]" ng-transclude="true"></span>