var COMPILED=!0,goog=goog||{};goog.global=this;goog.DEBUG=!0;goog.LOCALE="en";goog.provide=function(a){if(!COMPILED){if(goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');delete goog.implicitNamespaces_[a];for(var b=a;(b=b.substring(0,b.lastIndexOf(".")))&&!goog.getObjectByName(b);)goog.implicitNamespaces_[b]=!0}goog.exportPath_(a)};goog.setTestOnly=function(a){if(COMPILED&&!goog.DEBUG)throw a=a||"",Error("Importing test-only code into non-debug environment"+a?": "+a:".");};
COMPILED||(goog.isProvided_=function(a){return!goog.implicitNamespaces_[a]&&!!goog.getObjectByName(a)},goog.implicitNamespaces_={});goog.exportPath_=function(a,b,d){a=a.split(".");d=d||goog.global;!(a[0]in d)&&d.execScript&&d.execScript("var "+a[0]);for(var i;a.length&&(i=a.shift());)!a.length&&goog.isDef(b)?d[i]=b:d=d[i]?d[i]:d[i]={}};goog.getObjectByName=function(a,b){for(var d=a.split("."),i=b||goog.global,l;l=d.shift();)if(goog.isDefAndNotNull(i[l]))i=i[l];else return null;return i};
goog.globalize=function(a,b){var d=b||goog.global,i;for(i in a)d[i]=a[i]};goog.addDependency=function(a,b,d){if(!COMPILED){for(var i,a=a.replace(/\\/g,"/"),l=goog.dependencies_,A=0;i=b[A];A++)l.nameToPath[i]=a,a in l.pathToNames||(l.pathToNames[a]={}),l.pathToNames[a][i]=!0;for(i=0;b=d[i];i++)a in l.requires||(l.requires[a]={}),l.requires[a][b]=!0}};goog.ENABLE_DEBUG_LOADER=!0;
goog.require=function(a){if(!COMPILED&&!goog.isProvided_(a)){if(goog.ENABLE_DEBUG_LOADER){var b=goog.getPathFromDeps_(a);if(b){goog.included_[b]=!0;goog.writeScripts_();return}}a="goog.require could not find: "+a;goog.global.console&&goog.global.console.error(a);throw Error(a);}};goog.basePath="";goog.nullFunction=function(){};goog.identityFunction=function(a){return a};goog.abstractMethod=function(){throw Error("unimplemented abstract method");};
goog.addSingletonGetter=function(a){a.getInstance=function(){return a.instance_||(a.instance_=new a)}};
!COMPILED&&goog.ENABLE_DEBUG_LOADER&&(goog.included_={},goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var a=goog.global.document;return"undefined"!=typeof a&&"write"in a},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var a=goog.global.document.getElementsByTagName("script"),b=a.length-1;0<=b;--b){var d=a[b].src,i=d.lastIndexOf("?"),i=
-1==i?d.length:i;if("base.js"==d.substr(i-7,7)){goog.basePath=d.substr(0,i-7);break}}},goog.importScript_=function(a){var b=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;!goog.dependencies_.written[a]&&b(a)&&(goog.dependencies_.written[a]=!0)},goog.writeScriptTag_=function(a){return goog.inHtmlDocument_()?(goog.global.document.write('<script type="text/javascript" src="'+a+'"><\/script>'),!0):!1},goog.writeScripts_=function(){function a(l){if(!(l in i.written)){if(!(l in i.visited)&&(i.visited[l]=
!0,l in i.requires))for(var v in i.requires[l])if(!goog.isProvided_(v))if(v in i.nameToPath)a(i.nameToPath[v]);else throw Error("Undefined nameToPath for "+v);l in d||(d[l]=!0,b.push(l))}}var b=[],d={},i=goog.dependencies_,l;for(l in goog.included_)i.written[l]||a(l);for(l=0;l<b.length;l++)if(b[l])goog.importScript_(goog.basePath+b[l]);else throw Error("Undefined script input");},goog.getPathFromDeps_=function(a){return a in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[a]:null},goog.findBasePath_(),
goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js"));
goog.typeOf=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var d=Object.prototype.toString.call(a);if("[object Window]"==d)return"object";if("[object Array]"==d||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==d||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b};goog.propertyIsEnumerableCustom_=function(a,b){if(b in a)for(var d in a)if(d==b&&Object.prototype.hasOwnProperty.call(a,b))return!0;return!1};goog.propertyIsEnumerable_=function(a,b){return a instanceof Object?Object.prototype.propertyIsEnumerable.call(a,b):goog.propertyIsEnumerableCustom_(a,b)};goog.isDef=function(a){return void 0!==a};goog.isNull=function(a){return null===a};
goog.isDefAndNotNull=function(a){return null!=a};goog.isArray=function(a){return"array"==goog.typeOf(a)};goog.isArrayLike=function(a){var b=goog.typeOf(a);return"array"==b||"object"==b&&"number"==typeof a.length};goog.isDateLike=function(a){return goog.isObject(a)&&"function"==typeof a.getFullYear};goog.isString=function(a){return"string"==typeof a};goog.isBoolean=function(a){return"boolean"==typeof a};goog.isNumber=function(a){return"number"==typeof a};
goog.isFunction=function(a){return"function"==goog.typeOf(a)};goog.isObject=function(a){a=goog.typeOf(a);return"object"==a||"array"==a||"function"==a};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.removeUid=function(a){"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(b){}};goog.UID_PROPERTY_="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36);goog.uidCounter_=0;
goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(a){var b=goog.typeOf(a);if("object"==b||"array"==b){if(a.clone)return a.clone();var b="array"==b?[]:{},d;for(d in a)b[d]=goog.cloneObject(a[d]);return b}return a};goog.bindNative_=function(a,b,d){return a.call.apply(a.bind,arguments)};
goog.bindJs_=function(a,b,d){if(!a)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(d,i);return a.apply(b,d)}}return function(){return a.apply(b,arguments)}};goog.bind=function(a,b,d){goog.bind=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bindNative_:goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(a,b){var d=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,d);return a.apply(this,b)}};goog.mixin=function(a,b){for(var d in b)a[d]=b[d]};goog.now=Date.now||function(){return+new Date};
goog.globalEval=function(a){if(goog.global.execScript)goog.global.execScript(a,"JavaScript");else if(goog.global.eval)if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),"undefined"!=typeof goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_)goog.global.eval(a);else{var b=goog.global.document,d=b.createElement("script");d.type="text/javascript";d.defer=!1;d.appendChild(b.createTextNode(a));b.body.appendChild(d);
b.body.removeChild(d)}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;goog.getCssName=function(a,b){var d=function(a){return goog.cssNameMapping_[a]||a},i;i=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?d:function(a){for(var a=a.split("-"),b=[],i=0;i<a.length;i++)b.push(d(a[i]));return b.join("-")}:function(a){return a};return b?a+"-"+i(b):i(a)};goog.setCssNameMapping=function(a,b){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=b};
!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(a,b){var d=b||{},i;for(i in d)var l=(""+d[i]).replace(/\$/g,"$$$$"),a=a.replace(RegExp("\\{\\$"+i+"\\}","gi"),l);return a};goog.exportSymbol=function(a,b,d){goog.exportPath_(a,b,d)};goog.exportProperty=function(a,b,d){a[b]=d};goog.inherits=function(a,b){function d(){}d.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new d;a.prototype.constructor=a};
goog.base=function(a,b,d){var i=arguments.callee.caller;if(i.superClass_)return i.superClass_.constructor.apply(a,Array.prototype.slice.call(arguments,1));for(var l=Array.prototype.slice.call(arguments,2),A=!1,v=a.constructor;v;v=v.superClass_&&v.superClass_.constructor)if(v.prototype[b]===i)A=!0;else if(A)return v.prototype[b].apply(a,l);if(a[b]===i)return a.constructor.prototype[b].apply(a,l);throw Error("goog.base called from a method of one name to a method of a different name");};
goog.scope=function(a){a.call(goog.global)};var plt={compiler:{}};plt.compiler.throwError={};plt.compiler.Program={};plt.compiler.comment={};plt.compiler.couple={};plt.compiler.defFunc={};plt.compiler.defVar={};plt.compiler.defVars={};plt.compiler.defStruct={};plt.compiler.beginExpr={};plt.compiler.lambdaExpr={};plt.compiler.localExpr={};plt.compiler.letrecExpr={};plt.compiler.letExpr={};plt.compiler.letStarExpr={};plt.compiler.condExpr={};plt.compiler.caseExpr={};plt.compiler.andExpr={};
plt.compiler.orExpr={};plt.compiler.callExpr={};plt.compiler.ifExpr={};plt.compiler.whenUnlessExpr={};plt.compiler.symbolExpr={};plt.compiler.literal={};plt.compiler.quotedExpr={};plt.compiler.unquotedExpr={};plt.compiler.quasiquotedExpr={};plt.compiler.unquoteSplice={};plt.compiler.requireExpr={};plt.compiler.provideStatement={};plt.compiler.unsupportedExpr={};plt.compiler.pinfo={};plt.compiler.getBasePinfo={};plt.compiler.isExpression={};plt.compiler.isDefinition={};plt.compiler.env={};
plt.compiler.emptyEnv={};plt.compiler.localEnv={};plt.compiler.globalEnv={};plt.compiler.moduleBinding={};plt.compiler.functionBinding={};plt.compiler.constantBinding={};plt.compiler.structBinding={};plt.compiler.unnamedEnv={};window.plt=window.plt||{};plt.compiler=plt.compiler||{};
(function(){function a(a,b,d){b.source=b.source||"<unknown>";a.args=a.args.map(function(a){if("string"===typeof a)return a;if(a instanceof H)return'["span", [["class", "SchemeValue-Symbol"]], '+a.val+"]";if(void 0!==a.location)return{text:a.text,type:"ColoredPart",loc:a.location.toString(),toString:function(){return a.text}};if(void 0!==a.locations)return{text:a.text,type:"MultiPart",solid:a.solid,locs:a.locations.map(function(a){return a.toString()}),toString:function(){return a.text}}});a={type:"moby-failure",
"dom-message":["span",[["class","Error"]],["span",[["class",d||"Message"]]].concat(d?[["span",[["class","Error.reason"]],a.toString()],["span",[["class",(d||"message")+("Error-GenericReadError"===d?".locations":".otherLocations")]]]]:a.args.map(function(a){return a.toString()})),["br",[],""],["span",[["class","Error.location"]],["span",[["class","location-reference"],["style","display:none"]],["span",[["class","location-offset"]],(b.startChar+1).toString()],["span",[["class","location-line"]],b.startRow.toString()],
["span",[["class","location-column"]],b.startCol.toString()],["span",[["class","location-span"]],b.span.toString()],["span",[["class","location-id"]],b.source.toString()]]]],"structured-error":JSON.stringify({message:d?!1:a.args,location:b.toString()})};throw JSON.stringify(a);}function b(a){k.call(this);this.txt=a;this.toString=function(){return";"+this.txt}}function d(a,b,d,j){k.call(this);this.name=a;this.args=b;this.body=d;this.stx=j;this.toString=function(){return"(define ("+this.name.toString()+
" "+this.args.join(" ")+")\n    "+this.body.toString()+")"}}function i(a,b,d){k.call(this);this.name=a;this.expr=b;this.stx=d;this.toString=function(){return"(define "+this.name.toString()+" "+this.expr.toString()+")"}}function l(a,b,d){k.call(this);this.names=a;this.expr=b;this.stx=d;this.toString=function(){return"(define-values ("+this.names.join(" ")+") "+this.expr.toString()+")"}}function A(a,b,d){k.call(this);this.name=a;this.fields=b;this.stx=d;this.toString=function(){return"(define-struct "+
this.name.toString()+" ("+this.fields.toString()+"))"}}function v(a,b){k.call(this);this.exprs=a;this.stx=b;this.toString=function(){return"(begin "+this.exprs.join(" ")+")"}}function S(a,b,d){k.call(this);this.args=a;this.body=b;this.stx=d;this.toString=function(){return"(lambda ("+this.args.join(" ")+") "+this.body.toString()+")"}}function E(a,b,d){k.call(this);this.defs=a;this.body=b;this.stx=d;this.toString=function(){return"(local ("+this.defs.toString()+") "+this.body.toString()+")"}}function I(a,
b,d){k.call(this);this.expr=a;this.clauses=b;this.stx=d;this.toString=function(){return"(case "+this.expr.toString()+"\n    "+this.clauses.join("\n    ")+")"}}function n(a,b,d){k.call(this);this.func=a;this.args=b;this.stx=d;this.toString=function(){return"("+[this.func].concat(this.args).join(" ")+")"}}function P(a,b,d,j){k.call(this);this.predicate=a;this.consequence=b;this.alternative=d;this.stx=j;this.toString=function(){return"(if "+this.predicate.toString()+" "+this.consequence.toString()+" "+
this.alternative.toString()+")"}}function N(a,b,d){k.call(this);this.predicate=a;this.exprs=b;this.stx=d;this.toString=function(){return"("+this.stx[0]+" "+this.predicate.toString()+" "+this.exprs.toString()+")"}}function H(a,b){k.call(this);this.val=a;this.stx=b}function Q(a){k.call(this);this.val=a;this.toString=function(){if(!0===this.val)return"#t";if(!1===this.val)return"#f";if(this.val instanceof Char){var a=this.val.val;return"\u0008"===a?"#\\backspace":"\t"===a?"#\\tab":"\n"===a?"#\\newline":
" "===a?"#\\space":"\v"===a?"#\\vtab":this.val.toWrittenString()}return types.toWrittenString(this.val)}}function L(a){k.call(this);this.val=a;this.toString=function(){function a(b){b=b.val;if("quasiquote"===b)b="`";else if("quote"===b)b="'";else if("unquote"===b)b=",";else{if("unquote-splicing"!==b)throw"impossible quote-like string";b=",@"}return b}function b(d){return d instanceof Array&&2===d.length&&d[0]instanceof H&&("quasiquote"===d[0].val||"quote"===d[0].val||"unquote"===d[0].val||"unquote-splicing"===
d[0].val)?a(d[0]).concat(b(d[1])):d instanceof Array?d.reduce(function(a,d){return a.concat(b(d))},"(").concat(")"):d.toString()}return"'"+b(this.val)}}function M(a){k.call(this);this.val=a;this.toString=function(){return","+this.val.toString()}}function O(a){k.call(this);this.val=a;this.toString=function(){return this.val instanceof Array?"`("+this.val.toString()+")":"`"+this.val.toString()}}function F(a){k.call(this);this.val=a;this.toString=function(){return",@"+this.val.toString()}}function R(a,
b){k.call(this);this.spec=a;this.stx=b;this.toString=function(){return"(require "+this.spec.toString()+")"}}function t(a,b){k.call(this);this.clauses=a;this.stx=b;this.toString=function(){return"(provide "+this.clauses.toString()+")"}}function T(a,b,d){k.call(this);this.val=a;this.errorMsg=b;this.errorSpan=d;this.toString=function(){return this.val.toString()}}function K(a,b,d,j){this.name=a;this.moduleSource=b;this.permissions=d;this.loc=j;this.toString=function(){return this.name};return this}function B(a,
b,d,j,k,i,x){this.name=a;this.moduleSource=b;this.minArity=d;this.isVarArity=j;this.permissions=k;this.isCps=i;this.loc=x;this.toString=function(){return this.name};return this}function J(a,b,d,j,k,i,x,y,l){this.name=a;this.moduleSource=b;this.fields=d;this.constructor=j;this.predicate=k;this.accessors=i;this.mutators=x;this.permissions=y;this.loc=l;this.toString=function(){return this.name};return this}function G(a){var b=this;this.bindings=a||j();this.lookup=function(a){return this.bindings.containsKey(a)?
this.bindings.get(a):!1};this.peek=function(a){return 0==a?this:this instanceof D?"IMPOSSIBLE - peeked at an emptyEnv!":this.parent.peek(a-1)};this.contains=function(a){return!1!==this.lookup(a)};this.keys=this.bindings.keys;this.extend=function(a){this.bindings.put(a.name,a);return new plt.compiler.env(this.bindings)};this.extendFunction=function(a,b,d,j,x){return this.extend(new B(a,b,d,j,[],!1,x))};this.extendConstant=function(a,b,d){return this.extend(new K(a,b,[],d))};this.lookup_context=function(a){return a.context instanceof
G?a.context.contains(a)?a.context.lookup(a):!1:b.contains(a)?b.lookup(a):!1};this.extendEnv_moduleBinding=function(a){return a.bindings.reduceRight(function(a,b){return a.extend(b)},this)};this.toString=function(){return this.bindings.values().reduce(function(a,b){return a+"\n  |---"+b.name},"")}}function D(){G.call(this);this.lookup=function(a){return new plt.compiler.unboundStackReference(a)}}function V(a){G.call(this);this.parent=a;this.lookup=function(a,b){return this.parent.lookup(a,b+1)}}function z(a,
b,d){G.call(this);this.name=a;this.boxed=b;this.parent=d;this.lookup=function(a,b){return a===this.name?new plt.compiler.localStackReference(a,this.boxed,b):this.parent.lookup(a,b+1)}}function w(a,b,d){G.call(this);this.names=a;this.boxed=b;this.parent=d;this.lookup=function(a,b){var d=this.names.indexOf(a);return-1<d?new plt.compiler.globalStackReference(a,b,d):this.parent.lookup(a,b+1)}}var r=function(a){var b=function(){};b.prototype=a;return new b},k=function(){this.toString=function(){return this.val.toString()};
this.location=null};b.prototype=r(k.prototype);d.prototype=r(k.prototype);i.prototype=r(k.prototype);l.prototype=r(k.prototype);A.prototype=r(k.prototype);v.prototype=r(k.prototype);S.prototype=r(k.prototype);E.prototype=r(k.prototype);I.prototype=r(k.prototype);n.prototype=r(k.prototype);P.prototype=r(k.prototype);N.prototype=r(k.prototype);H.prototype=r(k.prototype);Q.prototype=r(k.prototype);Vector.prototype.toString=Vector.prototype.toWrittenString=function(){var a=this.elts.filter(function(a){return void 0!==
a}),b=a[a.length-1];return"#("+this.elts.map(function(a){return void 0===a?b:a})+")"};L.prototype=r(k.prototype);M.prototype=r(k.prototype);O.prototype=r(k.prototype);F.prototype=r(k.prototype);R.prototype=r(k.prototype);t.prototype=r(k.prototype);T.prototype=r(k.prototype);var j=types.makeLowLevelEqHash;plt.compiler.keywords="cond,else,let,case,let*,letrec,quote,quasiquote,unquote,unquote-splicing,local,begin,if,or,and,when,unless,lambda,\u03bb,define,define-struct,define-values".split(",");D.prototype=
r(G.prototype);V.prototype=r(G.prototype);z.prototype=r(G.prototype);w.prototype=r(G.prototype);plt.compiler.defaultModuleResolver=function(a){for(var b=0;b<plt.compiler.knownModules.length;b++)if(plt.compiler.knownModules[b].name===a)return plt.compiler.knownModules[b];return!1};plt.compiler.moduleGuess=function(a){return plt.compiler.knownModules.reduce(function(b,d){var j;j=d.name;if(0===j.length)j=a.length;else if(0===a.length)j=j.length;else{for(var k=[],i=0;i<=a.length;i++)k[i]=[i];for(var x=
0;x<=j.length;x++)k[0][x]=x;for(i=1;i<=a.length;i++)for(x=1;x<=j.length;x++)k[i][x]=a.charAt(i-1)==j.charAt(x-1)?k[i-1][x-1]:Math.min(k[i-1][x-1]+1,Math.min(k[i][x-1]+1,k[i-1][x]+1));j=k[a.length][j.length]}return j<b.distance?{name:d.name,distance:j}:b},{name:a,distance:5})};plt.compiler.defaultModulePathResolver=function(a){var b=a.toString().split("/"),d=b[0];b.slice(1).join();return-1<plt.compiler.knownCollections.indexOf(d)&&plt.compiler.defaultModuleResolver(a.toString())||/^wescheme\/\w+$/.exec(a)};
plt.compiler.throwError=a;plt.compiler.Program=k;plt.compiler.comment=b;plt.compiler.couple=function(a,b){this.first=a;this.second=b;this.toString=function(){return"("+this.first.toString()+" "+this.second.toString()+")"}};plt.compiler.defFunc=d;plt.compiler.defVar=i;plt.compiler.defVars=l;plt.compiler.defStruct=A;plt.compiler.beginExpr=v;plt.compiler.lambdaExpr=S;plt.compiler.localExpr=E;plt.compiler.letrecExpr=function(a,b,d){this.bindings=a;this.body=b;this.stx=d;this.toString=function(){return"(letrec ("+
this.bindings.toString()+") ("+this.body.toString()+"))"}};plt.compiler.letExpr=function(a,b,d){this.bindings=a;this.body=b;this.stx=d;this.toString=function(){return"(let ("+this.bindings.toString()+") ("+this.body.toString()+"))"}};plt.compiler.letStarExpr=function(a,b,d){this.bindings=a;this.body=b;this.stx=d;this.toString=function(){return"(let* ("+this.bindings.toString()+") ("+this.body.toString()+"))"}};plt.compiler.condExpr=function(a,b){this.clauses=a;this.stx=b;this.toString=function(){return"(cond\n    "+
this.clauses.join("\n    ")+")"}};plt.compiler.caseExpr=I;plt.compiler.andExpr=function(a,b){this.exprs=a;this.stx=b;this.toString=function(){return"(and "+this.exprs.join(" ")+")"}};plt.compiler.orExpr=function(a,b){this.exprs=a;this.stx=b;this.toString=function(){return"(or "+this.exprs.toString()+")"}};plt.compiler.callExpr=n;plt.compiler.ifExpr=P;plt.compiler.whenUnlessExpr=N;plt.compiler.symbolExpr=H;plt.compiler.literal=Q;plt.compiler.quotedExpr=L;plt.compiler.unquotedExpr=M;plt.compiler.quasiquotedExpr=
O;plt.compiler.unquoteSplice=F;plt.compiler.requireExpr=R;plt.compiler.provideStatement=t;plt.compiler.unsupportedExpr=T;plt.compiler.pinfo=function(b,d,k,i,l,n,x,y,Z,h,f,c,g,e){this.env=b||new D;this.modules=d||[];this.usedBindingsHash=k||j();this.freeVariables=i||[];this.gensymCounter=l||0;this.providedNames=n||j();this.definedNames=x||j();this.sharedExpressions=y||j();this.withLocationEmits=Z||!0;this.allowRedefinition=h||!1;this.moduleResolver=f||plt.compiler.defaultModuleResolver;this.modulePathResolver=
c||plt.compiler.defaultModulePathResolver;this.currentModulePath=g||"";this.declaredPermissions=e||[];this.isRedefinition=function(c){return this.env.lookup(c)};this.usedBindings=this.usedBindingsHash.values;this.accumulateDeclaredPermission=function(c,a){this.declaredPermissions=[[c,a]].concat(this.declaredPermissions);return this};this.accumulateSharedExpression=function(c,a){this.sharedExpressions.put(makeLabeledTranslation(this.gensymCounter,a),c);return this};this.accumulateDefinedBinding=function(c){if(-1<
plt.compiler.keywords.indexOf(c.name))a(new types.Message([new types.ColoredPart(c.name,c.loc),": this is a reserved keyword and cannot be used as a variable or function name"]),c.loc);else if(!this.allowRedefinition&&this.isRedefinition(c.name)){var g=this.env.lookup(c.name);g.loc?a(new types.Message([new types.ColoredPart(c.name,c.loc),": this name has a ",new types.ColoredPart("previous definition",g.loc)," and cannot be re-defined"]),c.loc):a(new types.Message([new types.ColoredPart(c.name,c.loc),
": this name has a ","previous definition"," and cannot be re-defined"]),c.loc)}else return this.env.extend(c),this.definedNames.put(c.name,c),this};this.accumulateDefinedBindings=function(c,a){var g=this;c.forEach(function(c){g.accumulateDefinedBinding(c,a)});return this};this.accumulateModuleBindings=function(c){var a=this;c.forEach(function(c){a.env.extend(c)});return this};this.accumulateModule=function(c){this.modules=[c].concat(this.modules);return this};this.accumulateBindingUse=function(c){var a=
this.usedBindingsHash.get(c.name);(!a||!a.moduleSource)&&this.usedBindingsHash.put(c.name,c);return this};this.accumulateFreeVariableUse=function(c){this.freeVariables=-1<this.freeVariables.indexOf(c)?this.freeVariables:[c].concat(this.freeVariables);return this};this.gensym=function(c){return[this,new H(c+this.gensymCounter++)]};this.permissions=function(){return this.usedBindings().reduce(function(c,a){return(a instanceof B||a instanceof K)&&0<a.permissions.length?c.concat(a.permissions):c},[]).filter(function(c,
a,g){return g.indexOf(c)===a})};this.getExposedBindings=function(){function c(e){function h(c){return f.definedNames.get(c)}f.definedNames.containsKey(e.symbl)||a(new types.Message(["provided-name-not-defined: ",e.symbl]));var b=g(b,f.definedNames.get(e.symbl));return e instanceof plt.compiler.provideBindingStructId?[h(b.constructor),h(b.predicate)].concat(b.accessors.map(h),b.mutators.map(h)):[b]}function g(c,f){if(c instanceof plt.compiler.provideBindingStructId&&!(f instanceof J))a(new types.Message(["provided-structure-not-structure: ",
f.symbl]));else return f}var f=this;bindings=bindings.reduce(function(a,g){return a.concat(c(g))},[]);return bindings.map(function(c){var a=f.declaredPermissions.filter(function(a){return a[0]===c.name});c.permissions=a.map(function(c){return c[1]});return c})};this.toString=function(){var c;c="pinfo-------------\n**env****: "+this.env.toString();c+="\n**modules**: "+this.modules.join(",");c+="\n**used bindings**: "+this.usedBindings();c+="\n**free variables**: "+this.freeVariables.join(",");c+="\n**gensym counter**: "+
this.gensymCounter;c+="\n**provided names**: "+this.providedNames.values();c+="\n**defined names**: "+this.definedNames.values();return c+="\n**permissions**: "+this.permissions()}};plt.compiler.getBasePinfo=function(a){var b="null,empty,true,false,eof,pi,e,js-undefined,js-null".split(",").reduce(function(a,b){return a.extendConstant(b.toString(),'"moby/toplevel"',!1)},new D),d=new plt.compiler.pinfo,b=plt.compiler.topLevelModules.reduceRight(function(a,b){return a.extendEnv_moduleBinding(b)},b);
"moby"===a?d.env=b.extendEnv_moduleBinding(mobyModuleBinding):"base"===a&&(d.env=b);return d};plt.compiler.isExpression=function(a){return!(a instanceof i||a instanceof l||a instanceof A||a instanceof d||a instanceof t||a instanceof T||a instanceof R)};plt.compiler.isDefinition=function(a){return a instanceof i||a instanceof l||a instanceof A||a instanceof d};plt.compiler.env=G;plt.compiler.emptyEnv=D;plt.compiler.localEnv=z;plt.compiler.globalEnv=w;plt.compiler.moduleBinding=function(a,b){this.name=
a;this.bindings=b};plt.compiler.functionBinding=B;plt.compiler.constantBinding=K;plt.compiler.structBinding=J;plt.compiler.unnamedEnv=V})();plt.compiler.lex={};plt.compiler.sexpToString={};window.plt=window.plt||{};plt.compiler=plt.compiler||{};
(function(){function a(a){return/\s/.test(a)}function b(a){return"("===a||")"===a||"["===a||"]"===a||"{"===a||"}"===a}function d(a,b){return"("===a&&")"===b||"["===a&&"]"===b||"{"===a&&"}"===b}function i(a){return"("===a?")":"["===a?"]":"{"===a?"}":")"===a?"(":"]"===a?"[":"}"===a?"{":t(new types.Message(["otherDelim: Unknown delimiter: ",a]))}function l(b,y){var d;if(y<b.length)for(d=b.charAt(y);a(d)&&y<b.length;)"\n"===d?(k++,j=0):j++,d=b.charAt(++y);return y}function A(a){return a instanceof Array?
"("+a.map(A).toString()+")":a.toString()}function v(a,b){W=j;U=k;var d=b,b=l(a,b),h=a.charAt(b);b>=a.length&&(q=b,t(new types.Message([C,":",U.toString(),":",(W-1).toString(),": read: (found end-of-file)"]),new p(W-1,U,b-2,2),"Error-GenericReadError"));return K.test(h)?t(new types.Message(["read: expected an open '",i(h),"' to open ",new types.ColoredPart(" "+h+" ",new p(j,U,d,1))]),new p(j,U,d,1)):T.test(h)?S(a,b):'"'===h?E(a,b):"#"===h?I(a,b):";"===h?H(a,b):J.test(h)?Q(a,b):L(a,b)}function S(a,
b){function n(a,c,g){a=v(a,c);c=a.location.end().startChar+1;if(a instanceof F&&"."==a.val){if(aa){var f=new types.Message(["A syntax list may have only 2 `.'s"]);t(f,g[Y].location)}aa=Y?g.length:!1;Y=Y||g.length}a instanceof M||(a.parent=g,g.push(a));return c}function h(a,c,g){if(0===c){var f=new types.Message(["A `.' cannot be the first element in a syntax list"]);t(f,a[c].location)}if(c===a.length-1||g===a.length-1)f=new types.Message(["A `.' cannot be the last element in a syntax list"]),t(f,
a[g||c].location);if(g)if(2!==g-c)f=new types.Message(["Two `.'s may only surround one syntax item"]),t(f,a[g].location);else return a.slice(c+1,c+2).concat(a.slice(0,c),a.slice(g+1));a[c+1]instanceof Array||(f=new types.Message(["A `.' must be followed by a syntax list, but found ",new types.ColoredPart("something else",a[c+1].location)]),t(f,a[c+1].location));if(a.length>c+2)f=new types.Message(["A `.' followed by a syntax list must be followed by a closing delimeter, but found ",new types.ColoredPart("something else",
a[c+2].location)]),t(f,a[c+1].location);else return a.slice(0,c).concat(a[c+1],a.slice(c+2))}function f(a){if(/expected a .+ to (close|open)/.exec(a)||/unexpected/.exec(a)||/syntax list/.exec(a)||/bad syntax/.exec(a)||/bad character constant/.exec(a))throw a;var c=JSON.parse(JSON.parse(a)["structured-error"]).location;u=new p(Number(c.column),Number(c.line),Number(c.offset)-1,Number(c.span));b=q;o=a;return b}var c=j,g=k,e=b,o=!1,u=new p(c,g,e,1),s=a.charAt(b++),Y=!1,aa=!1;j++;var $=[];r.push(s);for(b=
l(a,b);b<a.length&&!K.test(a.charAt(b));){"\n"===a.charAt(b)&&(k++,j=0);try{b=n(a,b,$)}catch(ca){b=f(ca)}b=l(a,b)}if(b>=a.length){var ba=new types.Message(["read: expected a closing '",i(s),"' to close ",new types.ColoredPart(" "+s.toString()+" ",new p(c,g,e,1))]);t(ba,u)}d(s,a.charAt(b))||(ba=new types.Message(["read: expected a closing '",i(s),"' to close ",new types.ColoredPart(" "+s.toString()+" ",new p(c,g,e,1))," but found a ",new types.ColoredPart(" "+a.charAt(b).toString()+" ",new p(j,k,b,
1))]),t(ba,new p(j,k,b,1)));j++;b++;if(o)throw q=b,o;if(Y||aa)$=h($,Y,aa);$.location=new p(c,g,e,b-e);return $}function E(a,b){var d=j,h=k,f=b,c=/^\"[^\"]*(\\\"[^\"]*)*[^\\]\"|\"\"/.test(a.slice(b)),g=/^\"[^\"]*(\\"[^\"]*)*/.exec(a.slice(f))[0];b++;j++;for(var e,o="";b<a.length&&'"'!==a.charAt(b);){e=a.charAt(b++);"\n"===e?(k++,j=0):j++;if("\\"===e){j++;e=a.charAt(b++);if(b>=a.length)break;switch(!0){case /a/.test(e):e="\u0007";break;case /b/.test(e):e="\u0008";break;case /t/.test(e):e="\t";break;
case /n/.test(e):e="\n";break;case /v/.test(e):e="\v";break;case /f/.test(e):e="\u000c";break;case /r/.test(e):e="\r";break;case /e/.test(e):e="'";break;case /\n/.test(e):e="";break;case /[\"\'\\]/.test(e):break;case /[xuU]/.test(e):var u="x"===e?G:"u"===e?D:z;u.test(a.slice(b))||(q=f+g.length+1,t(new types.Message([C,":",h.toString(),":",d.toString(),": read: no hex digit following \\"+e+" in string"]),new p(d,h,f,b-f+1),"Error-GenericReadError"));u=u.exec(a.slice(b))[1];e=String.fromCharCode(parseInt(u,
16));b+=u.length;j+=u.length;break;case w.test(a.slice(b-1)):u=w.exec(a.slice(b-1))[1];e=String.fromCharCode(parseInt(u,8));b+=u.length-1;j+=u.length-1;break;default:q=f+g.length+1,t(new types.Message([C,":",h.toString(),":",d.toString(),": read: unknown escape sequence \\"+e+" in string"]),new p(d,h,f,b-f),"Error-GenericReadError")}}o+=e}c||(q=f+g.length,t(new types.Message([C,":",h.toString(),":",d.toString(),": read: expected a closing '\"'"]),new p(d,h,f,1),"Error-GenericReadError"));c=new O(new types.string(o));
b++;j++;c.location=new p(d,h,f,b-f);return c}function I(a,b){function d(a,g){var b=new types.Message([C,":",k.toString(),":",(j-1).toString(),a]);t(b,new p(h,f,c,g.length+1),"Error-GenericReadError")}var h=j,f=k,c=b,g;b++;j++;if(b<a.length){var e=a.charAt(b).toLowerCase(),e=RegExp('^(((fl|fx|s|hash|hasheq)[[({])|((rx|px)#{0,1}"))',"g").exec(a.slice(b)),o=/^(!(?!\/)|reader|lang[\s]{0,1})/.exec(a.slice(b)),u=/^(c|C)(i|I|s|S)/.exec(a.slice(b)),s=RegExp("^([0-9]*)[[({]","g").exec(a.slice(b));if(e&&0<
e[0].length){s=v(a,b+e[0].length-1);g=e[0].length;o=e[0].replace(/[\(\[\{\"|#\"]/g,"");switch(o){case "fl":o="flvectors";break;case "fx":o="fxvectors";break;case "s":o="structs";break;case "hash":case "hasheq":o="hashtables";break;case "px":case "rx":o="regular expressions";break;default:throw"IMPOSSIBLE: unsupportedMatch captured something it shouldn't: "+o;}o=new types.Message([C,":",k.toString(),":","0",": read-syntax: literal "+o+" not allowed"]);g=new R(s,o,g);g.location=new p(h,f,c,e[0].length+
s.location.span);return g}if(o&&0<o[0].length)d(": read: #"+o[0].trim()+" not enabled in the current context",o[0]);else{if(u&&0<u[0].length)return X="cs"===u[0].toLowerCase(),j+=2,v(a,b+2);if(s&&0<s[0].length)return e=s[1]?parseInt(s[1]):"",g=e.toString().length,b+=g,j+=g,g=S(a,b),o=""===e?g.length:parseInt(s[1]),g.length>o&&(e=new types.Message(["read: vector length "+o+" is too small, ",g.length+" value"+(1<g.length?"s":"")," provided"]),t(e,new p(h,f,c,s[0].length))),b+=g.location.span,g=new O(new Vector(o,
g)),g.location=new p(h,f,c,b-c),g;s=/^(hasheq|hash|fl|fx|\d+|true|false|[tfeibdox]|\<\<|[\\\"\%\:\&\|\;\!\`\,\']|)/i.exec(a.slice(b))[0];o=a.charAt(b+s.length);e=s.charAt(0).toLowerCase();switch(e){case "\\":g=n(a,b-1);b+=g.location.span-1;break;case '"':d(": byte strings are not supported in WeScheme",'#"');case "%":g=L(a,b);g.val="#"+g.val;b+=g.location.span;break;case ":":g=L(a,b-1);o=new types.Message([C,":",k.toString(),":","0",": read-syntax: Keyword internment is not supported in WeScheme"]);
g=new R(g.val,o,g.location.span);b+=g.val.length-1;break;case "&":j++;s=v(a,b+1);e=new F("box");g=[e,s];b+=s.location.span+1;e.location=new p(h,f,c,b-c);break;case "|":b--;g=P(a,b);b+=g.location.span+1;break;case ";":g=N(a,b+1);b+=g.location.span+1;break;case "!":g=H(a,b-1);b+=g.location.span;break;case "`":case ",":case "'":g=Q(a,b);g.location.startChar--;g.location.span++;q=b+g.location.span;e=new types.Message([C,":",f.toString(),":",(j-1).toString()," read: WeScheme does not support the '#"+e+
"' notation for ",","===e?"unsyntax":"'"===e?"syntax":"quasisyntax"]);t(e,g.location);break;case "<<":g=E(a,b-1);b+=g.location.span;break;case "e":case "i":case "b":case "o":case "d":case "x":j--;g=L(a,b-1);b+=g.location.span-1;break;case "true":case "false":case "t":case "f":if(!B.exec(o)){g=new O("t"===e||"true"===s);b+=s.length;j+=s.length;break}default:q=b,e=new types.Message([C,":",k.toString(),":",(j-1).toString(),": read: bad syntax `#",s+o,"'"]),t(e,new p(h,f,c,(s+o).length+1),"Error-GenericReadError")}}}else q=
b,t(new types.Message([C,":",k.toString(),":",(j-1).toString(),": read: bad syntax `#'"]),new p(h,f,c,b-c),"Error-GenericReadError");g.location=new p(h,f,c,b-c);return g}function n(d,y){var i=j,h=k,f=y,y=y+2;j++;for(var c="",g=!0,e;y<d.length&&"#\\"!==d.slice(y,y+2)&&(g||!a(d.charAt(y))&&!b(d.charAt(y)));)g=!1,j++,c+=d.charAt(y++);var g=/(backspace|tab|newline|space|vtab)[^a-zA-Z]*/i,o=g.exec(c);g.test(c)?(c="backspace"===c?"\u0008":"tab"===c?"\t":"newline"===c?"\n":"space"===c?" ":"vtab"===c?"\v":
"Impossible: unknown special char was matched by special char!",y=f+2+o[1].length):/^[0-9].*/.test(c)&&w.test(c)&&w.exec(c)[0]===c&&256>parseInt(w.exec(c)[0],8)&&31<parseInt(w.exec(c)[0],8)?(o=/[0-7]+/.exec(c)[0],c=String.fromCharCode(parseInt(o,8)),y=f+2+o.length):/[uU]/.test(c)&&(e="u"===c.charAt(0)?D:V)&&e.test(c.slice(1))?(o=e.exec(c.slice(1))[0],j+=o.length-c.length+1,c=String.fromCharCode(parseInt(o,16)),y=f+3+o.length):1===c.length||/[^\u00C0-\u1FFF\u2C00-\uD7FF\w]$/.test(c.charAt(1))?(c=c.charAt(0),
y=f+3):t(new types.Message([C,":",h.toString(),":",(i-1).toString(),": read: bad character constant: #\\",c]),new p(i-1,h,f,y-f),"Error-GenericReadError");c=new O(new types["char"](c));c.location=new p(i,h,f,y-f);return c}function P(a,b){var d=j,h=k,f=b,b=b+2;j+=2;for(var c="";b+1<a.length&&!("|"===a.charAt(b)&&"#"===a.charAt(b+1));)"\n"===a.charAt(b)&&(k++,j=0),c+=a.charAt(b),b++,j++;b+1>=a.length&&t(new types.Message(["read: Unexpected EOF when reading a multiline comment"]),new p(d,h,f,b-f));b++;
j++;c=new M(c);c.location=new p(d,h,f,b-f);return c}function N(a,b){for(var d=j++,h=k,f=b,c;(b=l(a,b))&&b+1<a.length&&(c=v(a,b))&&c instanceof M;)b=c.location.endChar;b+1>=a.length&&(q=b,t(new types.Message([C,":",h.toString(),":",(d-1).toString(),": read: expected a commented-out element for `#;' (found end-of-file)"]),new p(d-1,h,b-2,2),"Error-GenericReadError"));var g=new M("("+c.toString()+")"),b=c.location.endChar;g.location=new p(d,h,f,b-f);return g}function H(a,b){var d=j,h=k,f=b;b++;j++;for(var c=
"";b<a.length&&"\n"!==a.charAt(b);)c+=a.charAt(b),j++,b++;b>a.length&&(q=b,t(new types.Message(["read: Unexpected EOF when reading a line comment"]),new p(d,h,f,b-f)));c=new M(c);c.location=new p(d,h,f,b+1-f);k++;j=0;return c}function Q(a,b){function d(a){q=a+1;t(new types.Message([C,":",f.toString(),":",h.toString(),": read: expected an element for"+("'"==e?" quoting ":"`"==e?" quasiquoting ":","==e?" unquoting ":",@"==e?" unquoting ":""),e," (found end-of-file)"]),new p(h,f,c,e.length),"Error-GenericReadError")}
var h=j,f=k,c=b,g,e=a.charAt(b),o="'"==e?new F("quote"):"`"==e?new F("quasiquote"):"";b+1>=a.length&&d(b);b++;j++;","==e&&("@"==a.charAt(b)?(b++,j++,e+="@",o=new F("unquote-splicing")):o=new F("unquote"));for(o.location=new p(j-1,f,c,b-c);!g||g instanceof M;){b=l(a,b);try{g=v(a,b)}catch(u){/read\: \(found end-of-file\)/.test(u)&&d(b);if(g=/expected a .* to open \",\"(.)\"/.exec(u))q=b+1,t(new types.Message([C,":",k.toString(),":",j.toString(),": read: unexpected `"+g[1]+"'"]),new p(j,k,b,1),"Error-GenericReadError");
throw u;}b=g.location.end().startChar+1}o=[o,g];g=g.location.end().startChar+1-c;o.location=new p(h,f,c,g);return o}function L(a,b){var d=j,h=k,f=b,c=RegExp("(\\|(.|\\n)*\\||\\\\(.|\\n)|[^\\(\\)\\{\\}\\[\\]\\,\\'\\`\\s\\\"\\;])+","mg").exec(a.slice(b))[0],g=/\.*\\+$/.exec(c);g&&0<g[0].length%2&&(q=b=a.length,t(new types.Message([C,":",k.toString(),":",d.toString(),": read: EOF following `\\' in symbol"]),new p(d,h,f,b-f),"Error-GenericReadError"));b+=c.length;j+=c.length;for(var g="",e=0;e<c.length;e++)"\\"==
c.charAt(e)&&e++,g+=c.charAt(e);g=g.split("|");if(0===g.length%2){q=a.length;var o=c.slice(0,c.length-(g[g.length-1].length+1)),u=f+o.length;j=d;for(e=0;e<o.length;e++)"\n"===a.charAt(b)?(k++,j=0):j++;t(new types.Message([C,":",k.toString(),":",j.toString(),": read: unbalanced `|'"]),new p(j,k,u,a.length-u),"Error-GenericReadError")}e=g.reduce(function(a,c,b){return a+(b%2||X?c:c.toLowerCase())},"");"\n"===e&&(k++,j=0);o=RegExp("^$|[\\(\\)\\{\\}\\[\\]\\,\\'\\`\\s\\\"\\\\]","g");e=/^.*\\[\d]*.*|\|[\d]*\|/.test(c)||
o.test(e)?"|"+e+"|":e;c=new F(e);if(1===g.length&&!/^[a-zA-Z\-\?]+$/.test(e))try{var s=jsnums.fromString(e,!0);if(s||0===s)s instanceof Object&&(s.stx=e,s.location=new p(d,h,f,b-f)),c=new O(s)}catch(i){q=b,s=new types.Message([C,":",h.toString(),":",d.toString(),": read: "+i.message]),t(s,new p(d,h,f,b-f),"Error-GenericReadError")}c.stx=e;c.location=new p(d,h,f,b-f);return c}var M=plt.compiler.comment,O=plt.compiler.literal,F=plt.compiler.symbolExpr,R=plt.compiler.unsupportedExpr,t=plt.compiler.throwError,
T=/[(\u005B\u007B]/,K=/[)\u005D\u007D]/,B=/^[^(\u005B\u007B)\u005D\u007D\s]+/,J=/[\'`,]/,G=/^([0-9a-f]{1,2})/i,D=/^([0-9a-f]{1,4})/i,V=/^([0-9a-f]{1,6})/i,z=/^([0-9a-f]{1,8})/i,w=/^([0-7]{1,3})/i,r,k,j,W,U,C,X,q,p=function(a,b,d,h,f){this.startCol=a;this.startRow=b;this.startChar=d;this.span=h;this.source=f||C;this.endCol=j;this.endRow=k;this.endChar=d+h;this.start=function(){return new p("","",this.startChar,1)};this.end=function(){return new p("","",this.startChar+this.span-1,1)};this.toString=
function(){return"Loc("+this.startCol+", "+this.startRow+", "+(this.startChar+1)+","+this.span+")"};this.toVector=function(){return new types.vector(['"'+this.source+'"',this.startChar+1,this.startRow,this.startCol,this.span])};this.toString=function(){return{line:this.startRow.toString(),id:this.source,span:this.span.toString(),offset:(this.startChar+1).toString(),column:this.startCol.toString()}}};Array.prototype.toString=function(){return this.join(" ")};plt.compiler.lex=function(a,b,d){var h=
(new Date).getTime();try{var f,c=0;W=j=0;U=k=1;X=!0;C=b||"<definitions>";var g,b=[];r=[];for(c=l(a,0);c<a.length;)g=v(a,c),g instanceof M||b.push(g),c=l(a,g.location.startChar+g.location.span);b.location=new p(W,U,0,c,C);f=b}catch(e){throw console.log("LEXING ERROR"),e;}a=(new Date).getTime();d&&(console.log("Lexed in "+Math.floor(a-h)+"ms"),console.log(f),console.log(A(f)));return f};plt.compiler.sexpToString=A})();plt.compiler.parse={};window.plt=window.plt||{};plt.compiler=plt.compiler||{};
(function(){function a(a){return a instanceof w}function b(a){return a instanceof Array&&1<=a.length}function d(a,c){a=a instanceof w?a.val:a;c=c instanceof w?c.val:c;return a===c}function i(a){return a.map(function(a){return E(a)?I(a):!E(a)&&!J(a)&&!D(a)?n(a):J(a)?G(a):D(a)?V(a):m(new types.Message(["Not a Definition, Expression, Library Require, or Provide"]),a.location)})}function l(a){return 0===a.length?[]:!b(a)?m(new types.Message(["The sexp is not a list of definitions or expressions: "+a]),
a.location):i(a)}function A(c){return b(c)&&a(c[0])&&d("define-struct",c[0])}function v(c){return b(c)&&a(c[0])&&d("define",c[0])}function S(c){return b(c)&&a(c[0])&&d("define-values",c[0])}function E(a){return A(a)||v(a)||S(a)}function I(a){function c(a){2>a.length&&m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected the structure name after define-struct, but nothing's there"]),a.location);a[1]instanceof w||m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),
": expected the structure name after define-struct, but found ",new types.ColoredPart("something else",a[1].location)]),a.location);3>a.length&&m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected at least one field name (in parentheses) after the ",new types.ColoredPart("structure name",a[1].location),", but nothing's there"]),a.location);a[2]instanceof Array||m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected at least one field name (in parentheses) after the ",
new types.ColoredPart("structure name",a[1].location),", but found ",new types.ColoredPart("something else",a[2].location)]),a.location);a[2].forEach(function(c){c instanceof w||m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a field name, but found ",new types.ColoredPart("something else",c.location)]),a.location)});if(3<a.length){var b=a.slice(3).map(function(a){return a.location}),g=1===a[2].length?"field name":"field names",f=b.length+" extra "+(1===b.length?"part":
"parts");m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected nothing after the ",new types.ColoredPart(g,a[2].location),", but found ",new types.MultiPart(f,b,!1)]),a.location)}return new aa(K(a[1]),a[2].map(K),a)}function b(a){2>a.length&&m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expects a list of variables and a body, but found neither"]),a.location);3>a.length&&m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expects a list of variables and a body, but found only ",
new types.ColoredPart("one part",a[1].location)]),a.location);a[1]instanceof Array||m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expects a list of variables and a body, but found ",new types.ColoredPart("something else",a[1].location)]),a.location);if(3<a.length){var c=a.slice(3).map(function(a){return a.location}),g=c.length+" extra "+(1===c.length?"part":"parts"),c=new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expects a list of variables and a body, but found ",
new types.MultiPart(g,c,!1)]);m(c,a.location)}return new Y(a[1].map(K),n(a[2]),a)}function g(a){2>a.length&&m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a variable, or a function name and its variables (in parentheses), after define, but nothing's there"]),a.location);if(a[1]instanceof Array){0===a[1].length&&m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a name for the function within ",new types.ColoredPart("the parentheses",a[1].location)]),
a.location);a[1][0]instanceof w||m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a function name after the open parenthesis but found ",new types.ColoredPart("something else",a[1][0].location)]),a.location);a[1].forEach(function(c){c instanceof w||m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a variable but found ",new types.ColoredPart("something else",c.location)]),a.location)});3>a.length&&m(new types.Message([new types.ColoredPart(a[0].val,
a[0].location),": expected an expression for the function body, but nothing's there"]),a.location);if(3<a.length){var c=a.slice(3).map(function(a){return a.location}),b=c.length+" extra "+(1===c.length?"part":"parts");m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected only one expression for the function body, but found ",new types.MultiPart(b,c,!1)]),a.location)}c=a[1].slice(1).map(K);c.location=a[1].location;return new u(K(a[1][0]),c,n(a[2]),a)}if(a[1]instanceof w)return 3>
a.length&&m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected an expression after the variable ",new types.ColoredPart(a[1].val,a[1].location)," but nothing's there"]),a.location),3<a.length&&(c=a.slice(3).map(function(a){return a.location}),b=c.length+" extra "+(1===c.length?"part":"parts"),m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected only one expression after the variable ",new types.ColoredPart(a[1].val,a[1].location),", but found ",
new types.MultiPart(b,c,!1)]),a.location)),new s(K(a[1]),n(a[2]),a);m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a variable but found ",new types.ColoredPart("something else",a[1].location)]),a.location)}var f=A(a)?c(a):v(a)?g(a):S?b(a):m(new types.Message([": expected to find a definition, but found: "+a]),a.location);f.location=a.location;return f}function n(a){return b(a)?P(a):T(a)}function P(c){function g(a){d(a[0],"unquote")&&m(new types.Message(["misuse of a comma or 'unquote, not under a quasiquoting backquote"]),
a.location,"Error-GenericSyntacticError");d(a[0],"unquote-splicing")&&m(new types.Message(["misuse of a ,@ or unquote-splicing, not under a quasiquoting backquote"]),a.location,"Error-GenericSyntacticError");d(a[0],"else")&&m(new types.Message([new types.ColoredPart(a[0].val,a.location),": not allowed ",new types.ColoredPart("here",a.location),", because this is not a question in a clause"]),a.location);return b(a)?new e(n(a[0]),a.slice(1).map(n),a[0]):m(new types.Message(["function call sexp"]),
a.location)}function f(a){1===a.length&&m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected at least one variable (in parentheses) after lambda, but nothing's there"]),a.location);a[1]instanceof Array||m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected at least one variable (in parentheses) after lambda, but found ",new types.ColoredPart("something else",a[1].location)]),a.location);a[1].forEach(function(c){c instanceof w||(c=new types.Message([new types.ColoredPart(a[0].val,
a[0].location),": expected a list of variables after lambda, but found ",new types.ColoredPart("something else",c.location)]),m(c,a.location))});2===a.length&&m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected an expression for the function body, but nothing's there"]),a.location);if(3<a.length){var c=a.slice(3).map(function(a){return a.location}),b=c.length+" extra "+(1===c.length?"part":"parts"),c=new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected only one expression for the function body, but found ",
new types.MultiPart(b,c,!1)]);m(c,a.location)}c=a[1].map(K);c.location=a[1].location;return new Z(c,n(a[2]),a[0])}function o(a){1===a.length&&m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected at least one definition (in square brackets) after local, but nothing's there"]),a.location);a[1]instanceof Array||m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a collection of definitions, but given ",new types.ColoredPart("something else",a[1].location)]),
a[1].location);a[1].forEach(function(c){E(c)||m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a definition, but given ",new types.ColoredPart("something else",c.location)]),c.location)});2===a.length&&m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a single body, but found none"]),a.location);if(3<a.length){var c=a.slice(3).map(function(a){return a.location}),b=c.length+" extra "+(1===c.length?"part":"parts");m(new types.Message([new types.ColoredPart(a[0].val,
a[0].location),": expected a single body, but found ",new types.MultiPart(b,c,!1)]),a.location)}return new X(a[1].map(I),n(a[2]),a[0])}function u(a){3>a.length&&m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected an expression after the bindings, but nothing's there"]),a.location);a[1]instanceof Array||m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a key/value pair, but given ",new types.ColoredPart("something else",a[1].location)]),a.location);
a[1].forEach(function(c){B(c)||m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a key/value pair, but given ",new types.ColoredPart("something else",c.location)]),c.location)});2===a.length&&m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected an expression after the bindings, but nothing's there"]),a.location);if(3<a.length){var c=a.slice(3).map(function(a){return a.location}),b=c.length+" extra "+(1===c.length?"part":"parts");m(new types.Message([new types.ColoredPart(a[0].val,
a[0].location),": expected a single body, but found ",new types.MultiPart(b,c,!1)]),a.location)}return new C(a[1].map(L),n(a[2]),a[0])}function s(a){1===a.length&&m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected at least one binding (in parentheses) after let, but nothing's there"]),a.location);a[1]instanceof Array||m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected sequence of key value pairs, but given ",new types.ColoredPart("something else",
a[1].location)]),a[1].location);a[1].forEach(function(c){B(c)||m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a key/value pair, but given ",new types.ColoredPart("something else",c.location)]),c.location)});if(3<a.length){var c=a.slice(3).map(function(a){return a.location}),b=c.length+" extra "+(1===c.length?"part":"parts");m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a single body, but found ",new types.MultiPart(b,c,!1)]),a.location)}2===
a.length&&m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a single body, but found none"]),a.location);return new W(a[1].map(L),n(a[2]),a)}function i(a){1===a.length&&m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected an expression after the bindings, but nothing's there"]),a.location);if(!(a[1]instanceof Array)){var c=new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected sequence of key/value pairs, but given ",new types.ColoredPart("something else",
a[1].location)]);m(c,a.location)}a[1].forEach(function(c){B(c)||m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a key/value pair, but given ",new types.ColoredPart("something else",c.location)]),c.location)});2===a.length&&m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a single body, but found none"]),a.location);if(3<a.length){var c=a.slice(3).map(function(a){return a.location}),b=c.length+" extra "+(1===c.length?"part":"parts");m(new types.Message([new types.ColoredPart(a[0].val,
a[0].location),": expected a single body, but found ",new types.MultiPart(b,c,!1)]),a.location)}c=a[1].map(L);c.location=a[1].location;return new U(c,n(a[2]),a[0])}function l(a){4>a.length&&m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a test, a consequence, and an alternative, but all three were not found"]),a.location);if(4<a.length){var c=a.slice(1).map(function(a){return a.location});m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected only a test, a consequence, and an alternative, ",
"but found ",new types.MultiPart("more than three of these",c,!1)]),a.location)}return new k(n(a[1]),n(a[2]),n(a[3]),a[0])}function Y(a){function c(a){return b(a)?a.map(c):a instanceof Array&&0===a.length?a:T(a)}2>a.length&&m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a single argument, but did not find one."]),a.location);if(2<a.length){var g=a.slice(1).map(function(a){return a.location});m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a single argument, but found ",
new types.MultiPart("more than one.",g,!1)]),a.location)}return new h(c(a[1]))}return function(){var b=c[0];a(b)?d("\u03bb",b)?b=f(c):d("lambda",b)?b=f(c):d("local",b)?b=o(c):d("letrec",b)?b=u(c):d("let",b)?b=s(c):d("let*",b)?b=i(c):d("cond",b)?b=H(c):d("case",b)?b=Q(c):d("if",b)?b=l(c):d("begin",b)?(2>c.length&&(b=new types.Message([new types.ColoredPart(c[0].val,c[0].location),": Inside a begin, expected to find a body, but nothing was found."]),m(b,c.location)),b=new j(c.slice(1).map(n),c[0])):
d("and",b)?(3>c.length&&m(new types.Message([new types.ColoredPart(c[0].val,c[0].location),": expected at least 2 arguments, but given ",1===c.length?"0":new types.ColoredPart((c.length-1).toString(),c[1].location)]),c.location),b=new q(c.slice(1).map(n),c[0])):d("or",b)?(3>c.length&&m(new types.Message([new types.ColoredPart(c[0].val,c[0].location),": expected at least 2 arguments, but given ",1===c.length?"0":new types.ColoredPart((c.length-1).toString(),c[1].location)]),c.location),b=new p(c.slice(1).map(n),
c[0])):b=d("when",b)?N(c):d("unless",b)?N(c):d("quote",b)?Y(c):d("quasiquote",b)?R(c):d("unquote",b)?M(c):d("unquote-splicing",b)?O(c):g(c):b=g(c);b.location=c.location;return b}()}function N(a){3>a.length&&m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected at a test and at least one result after "+a[0]+", but nothing's there"]),a.location);var c=a.slice(2),b=new o(n(a[1]),l(c),a[0]);c.location=c[0].location;b.location=a.location;return b}function H(c){1===c.length&&m(new types.Message([new types.ColoredPart(c[0].val,
c[0].location),": expected at least one clause after cond, but nothing's there"]),c.location);var b=[c[0].location,c.location.start(),c.location.end()];c.slice(1).forEach(function(a){var g=[a.location.start(),a.location.end()];a instanceof Array||m(new types.Message([new types.MultiPart(c[0].val,b,!0),": expected a clause with a question and an answer, but found ",new types.ColoredPart("something else",a.location)]),a.location);0===a.length&&m(new types.Message([new types.MultiPart(c[0].val,b,!0),
": expected a clause with a question and an answer, but found an ",new types.MultiPart("empty part",g,!0)]),a.location);1===a.length&&m(new types.Message([new types.MultiPart(c[0].val,b,!0),": expected a clause with a question and an answer, but found a ",new types.MultiPart("clause",g,!0)," with only ",new types.MultiPart("one part",[a[0].location],!1)]),a.location);if(2<a.length){var f=a.map(function(a){return a.location}),e=f.length+" parts";m(new types.Message([new types.MultiPart(c[0].val,b,
!0),": expected a clause with a question and an answer, but found ",new types.MultiPart("a clause",g,!0)," with ",new types.MultiPart(e,f,!1)]),a.location)}});var g=c.slice(1).length,f=c.slice(1).map(function(a){var c=n(a[0]),b=n(a[1]),b=new r(c,b);-1<plt.compiler.keywords.indexOf(c.val)&&"else"!==c.val&&m(new types.Message([new types.ColoredPart(c.val,c.location),": expected an open parenthesis before ",c.val,", but found none"]),c.location);c.isClause=!0;b.location=a.location;return b});c.slice(1).forEach(function(f,
e){a(f[0])&&d(f[0],"else")&&e<g-1&&m(new types.Message([new types.MultiPart("cond",b,!0),": ","found an ",new types.ColoredPart("else clause",f.location)," that isn't the last clause in its cond expression; there is ",new types.ColoredPart("another clause",c[e+2].location)," after it"]),f.location)});return new x(f,c[0])}function Q(c){if(1===c.length){var b=new types.Message([new types.ColoredPart(c[0].val,c[0].location),": expected at least one clause after case, but nothing's there"]);m(b,c.location)}var g=
[c[0].location,c.location.start(),c.location.end()];2===c.length&&(b=new types.Message([new types.MultiPart(c[0].val,g,!0),": expected a clause with at least one choice (in parentheses) and an answer after the expression, but nothing's there"]),m(b,c.location));b=c.slice(2);b.forEach(function(a){var b=[a.location.start(),a.location.end()];if(!(a instanceof Array)){var f=new types.Message([new types.MultiPart(c[0].val,g,!0),": expected a clause with at least one choice (in parentheses), but found ",
new types.ColoredPart("something else",a.location)]);m(f,c.location)}0===a.length&&(f=new types.Message([new types.MultiPart(c[0].val,g,!0),": expected at least one choice (in parentheses) and an answer, but found an ",new types.ColoredPart("empty part",a.location)]),m(f,c.location));a[0]instanceof Array||a[0]instanceof w&&d(a[0],"else")||(f=new types.Message([new types.MultiPart(c[0].val,g,!0),": expected 'else', or at least one choice in parentheses, but found ",new types.ColoredPart("something else",
a.location)]),m(f,c.location));1===a.length&&(f=new types.Message([new types.MultiPart(c[0].val,g,!0),": expected a clause with a question and an answer, but found a ",new types.MultiPart("clause",b,!0)," with only ",new types.ColoredPart("one part",a[0].location)]),m(f,c.location));2<a.length&&(a=a.map(function(a){return a.location}),f=a.length+" parts",f=new types.Message([new types.MultiPart(c[0].val,g,!0),": expected only one expression for the answer in the case clause, but found a ",new types.MultiPart("clause",
b,!0)," with ",new types.MultiPart(f,a,!1)]),m(f,c.location))});var f=b.length,e=b.map(function(c){var b=a(c[0])&&"else"===c[0].val?c[0]:new h(c[0]),g=n(c[1]),g=new r(b,g);b.isClause=!0;g.location=c.location;return g});b.forEach(function(b,e){if(a(b[0])&&"else"===b[0].val&&e<f-1){var h=new types.Message([new types.MultiPart("case",g,!0),": found an ",new types.ColoredPart("else clause",b.location),"that isn't the last clause in its case expression; there is ",new types.ColoredPart("another clause",
c[e+2].location)," after it"]);m(h,c.location)}});return new y(n(c[1]),e,c[0])}function L(a){if(B(a)){var c=new r(K(a[0]),n(a[1]));c.location=a.location;c.stx=a;return c}m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a sequence of key/value pairs, but given ",new types.ColoredPart("something else",a[0].location)]),a.location)}function M(a,c){if("undefined"===typeof c)m(new types.Message(["misuse of a comma or 'unquote, not under a quasiquoting backquote"]),a.location,
"Error-GenericSyntacticError");else if(2!==a.length)m(new types.Message(["Inside an unquote, expected to find a single argument, but found "+(a.length-1)]),a.location);else{if(1===c){var b=new f(n(a[1]));b.location=a[1].location;return b}if(1<c)return b=new f(F(a[1],c-1)),b.location=a[1].location,b;m(new types.Message(["ASSERTION FAILURE: depth should have been undefined, or a natural number"]),a.location)}}function O(a,c){if("undefined"===typeof c)m(new types.Message(["misuse of a ,@ or unquote-splicing, not under a quasiquoting backquote"]),
a.location,"Error-GenericSyntacticError");else if(2!==a.length)m(new types.Message(["Inside an unquote-splicing, expected to find a single argument, but found "+(a.length-1)]),a.location);else{if(1===c){var b=new g(n(a[1]));b.location=a[1].location;return b}if(1<c)return b=new g(F(a[1],c-1)),b.location=a[1].location,b;m(new types.Message(["ASSERTION FAILURE: depth should have been undefined, or a natural number"]),a.location)}}function F(a,c){if(b(a)&&"unquote"===a[0].val)return M(a,c);if(b(a)&&"unquote-splicing"===
a[0].val)return O(a,c);if(b(a)&&"quasiquote"===a[0].val)return R(a,c);if(b(a)){var g=a.map(function(a){return F(a,c)});g.location=a.location;return g}return 0===c?n(a):function(){var c=new h(a);c.location=a.location;return c}()}function R(a,g){g="undefined"===typeof g?0:g;2>a.length&&m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a single argument, but did not find one "]),a.location);if(2<a.length){var f=a.slice(1).map(function(a){return a.location});m(new types.Message([new types.ColoredPart(a[0].val,
a[0].location),": expected a single argument, but found ",new types.MultiPart("more than one.",f,!1)]),a.location)}b(a[1])&&d(a[1][0],"unquote-splicing")&&m(new types.Message(["misuse of ,@ or `unquote-splicing' within a quasiquoting backquote"]),a.location);f=F(a[1],g+1);f.location=a[1].location;f=new c(f);f.location=a.location;return f}function t(a){function c(){var b=new z(0);b.location=a.location;return b}var b=a.val,g=i(b.elts.filter(function(a){return void 0!==a})),f=0===g.length?c():g[g.length-
1],g=b.elts.map(function(a){return void 0===a?f:n(a)}),b=new w("vector"),g=new e(b,g);b.location=g.location=a.location;return g}function T(c){var b=c instanceof ba?c:types.isVector(c.val)?t(c):a(c)?c:c instanceof z?c:d("quote",c)?new h(c):d("empty",c)?new e(new w("list"),[]):new e(null,[]);b.location=c.location;return b}function K(c){return a(c)?c:m(new types.Message(["ID"]),c.location)}function B(a){return b(a)&&2===a.length}function J(c){return b(c)&&a(c[0])&&d(c[0],"require")}function G(a){if(2>
a.length){var c=new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a module name after `require', but found nothing"]);m(c,a.location)}a[1]instanceof Array&&d(a[1][0],"lib")?(3>a[1].length&&(c=a[1].slice(1).length,c=new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected at least two strings after ",new types.ColoredPart("lib",a[1][0].location)," but found only ",c+(1===c?" part":" parts")]),m(c,a.location)),a[1].slice(1).forEach(function(c){types.isString(c.val)||
(c=new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a string for a library collection, but found ",new types.ColoredPart("something else",str.location)]),m(c,a.location))})):a[1]instanceof Array&&d(a[1][0],"planet")?(c=new types.Message([new types.ColoredPart(a[0].val,a[0].location),": Importing PLaneT pacakges is not supported at this time"]),m(c,a.location)):a[1]instanceof w||types.isString(a[1].val)||(c=new types.Message([new types.ColoredPart(a[0].val,a[0].location),
": expected a module name as a string or a `(lib ...)' form, but found ",new types.ColoredPart("something else",a[1].location)]),m(c,a.location));c=new $(a[1],a[0]);c.location=a.location;return c}function D(c){return b(c)&&a(c[0])&&d(c[0],"provide")}function V(a){var c=a.slice(1).map(function(c){if(c instanceof w||c instanceof Array&&2==c.length&&c[0]instanceof w&&d(c[0],"struct-out")&&c[1]instanceof w)return c;c=new types.Message([new types.ColoredPart(a[0].val,a[0].location),": I don't recognize the syntax of this ",
new types.ColoredPart("clause",c.location)]);m(c,a.location)}),c=new ca(c,a[0]);c.location=a.location;return c}var z=plt.compiler.literal,w=plt.compiler.symbolExpr,r=plt.compiler.couple,k=plt.compiler.ifExpr,j=plt.compiler.beginExpr,W=plt.compiler.letExpr,U=plt.compiler.letStarExpr,C=plt.compiler.letrecExpr,X=plt.compiler.localExpr,q=plt.compiler.andExpr,p=plt.compiler.orExpr,x=plt.compiler.condExpr,y=plt.compiler.caseExpr,Z=plt.compiler.lambdaExpr,h=plt.compiler.quotedExpr,f=plt.compiler.unquotedExpr,
c=plt.compiler.quasiquotedExpr,g=plt.compiler.unquoteSplice,e=plt.compiler.callExpr,o=plt.compiler.whenUnlessExpr,u=plt.compiler.defFunc,s=plt.compiler.defVar,Y=plt.compiler.defVars,aa=plt.compiler.defStruct,$=plt.compiler.requireExpr,ca=plt.compiler.provideStatement,ba=plt.compiler.unsupportedExpr,m=plt.compiler.throwError;plt.compiler.parse=function(a,c){var b=(new Date).getTime();try{var g=l(a);g.location=a.location}catch(f){throw console.log("PARSING ERROR"),f;}var e=(new Date).getTime();c&&(console.log("Parsed in "+
Math.floor(e-b)+"ms"),console.log(g));return g}})();plt.compiler.topLevelModules={};plt.compiler.knownModules={};plt.compiler.knownCollections={};window.plt=window.plt||{};plt.compiler=plt.compiler||{};
(function(){function a(a){return function(b){b[3]=b[3]||[];b[4]=b[4]||!1;b[5]=b[5]||!1;return new d(b[0],a,b[1],b[2],b[3],b[4],b[5])}}var b=plt.compiler.moduleBinding,d=plt.compiler.functionBinding,i=plt.compiler.constantBinding,l=new b("moby/runtime/kernel/misc",[["verify-boolean-branch-value",2],["throw-cond-exhausted-error",1],["'check-operator-is-function",3],["print-values",0]].map(a('"moby/runtime/kernel/misc"'))),A=new b("moby/foreign",[["get-js-object",2,!1,["android.permission.FOREIGN-FUNCTION-INTERFACE"]]].map(a('"moby/foreign"'))),
v=new b("world-effects",[["make-effect:none",0,!1],["make-effect:beep",0,!1,["android.permission.VIBRATE"]],["make-effect:play-dtmf-tone",2,!1],["make-effect:send-sms",2,!1,["android.permission.SEND-SMS"]],["make-effect:play-sound",1,!1,["android.permission.INTERNET"]],["make-effect:stop-sound",1,!1],["make-effect:pause-sound",1,!1],["make-effect:set-sound-volume",1,!1],["make-effect:set-beep-volume",1,!1],["make-effect:raise-sound-volume",0,!1],["make-effect:lower-sound-volume",1,!1],["make-effect:set-wake-lock",
1,!1,["android.permission.WAKE-LOCK"]],["make-effect:release-wake-lock",1,!1,["android.permission.WAKE-LOCK"]],["make-effect:pick-playlist",1,!1],["make-effect:pick-random",2,!1]].map(a('"moby/world-effects"'))),S=new b("world-config",[["on-tick",1,!0],["initial-effect",1,!1],["on-key",1,!1],["on-key!",2,!1],["on-mouse",1,!1],["on-tap",1,!1],["on-tilt",1,!1],["on-redraw",1,!1],["to-draw",1,!1],["on-draw",2,!1],["stop-when",1,!1]].map(a('"moby/world-handlers"'))),E=[["START",14,!1],["test-frame",1,
!1],["sine",1,!1],["cosine",1,!1],["tangent",1,!1]],I=new b("bootstrap/bootstrap-teachpack",E.map(a('"bootstrap/bootstrap-teachpack"'))),n=new b("bootstrap2011/bootstrap-teachpack",E.map(a('"bootstrap2011/bootstrap-teachpack"'))),P=new b("bootstrap2012/bootstrap-teachpack",E.map(a('"bootstrap2012/bootstrap-teachpack"'))),N=new b("bootstrap2012/bootstrap-tilt-teachpack",E.map(a('"bootstrap2012/bootstrap-tilt-teachpack"'))),H=new b("bootstrap2014/bootstrap-teachpack",E.map(a('"bootstrap2014/bootstrap-teachpack"'))),
Q=new b("bootstrap2014/bootstrap-tilt-teachpack",E.map(a('"bootstrap2014/bootstrap-tilt-teachpack"'))),L=new b("bootstrap2015/bootstrap-teachpack",E.map(a('"bootstrap2015/bootstrap-teachpack"'))),E=new b("bootstrap2015/bootstrap-tilt-teachpack",E.map(a('"bootstrap2015/bootstrap-tilt-teachpack"'))),M=new b("bootstrap/cage-teachpack",[["start",1,!1]].map(a('"bootstrap/cage-teachpack"'))),O=new b("bootstrap2011/cage-teachpack",[["start",1,!1]].map(a('"bootstrap2011/cage-teachpack"'))),F=new b("bootstrap2012/cage-teachpack",
[["start",1,!1]].map(a('"bootstrap2012/cage-teachpack"'))),R=new b("bootstrap2014/cage-teachpack",[["start",1,!1]].map(a('"bootstrap2014/cage-teachpack"')));cageTeachpack2015=new b("bootstrap2015/cage-teachpack",[["start",1,!1]].map(a('"bootstrap2015/cage-teachpack"')));var t=new b("bootstrap/function-teachpack",[["start",1,!1]].map(a('"bootstrap/function-teachpack"'))),T=new b("bootstrap2011/function-teachpack",[["start",1,!1]].map(a('"bootstrap2011/function-teachpack"'))),K=new b("bootstrap2012/function-teachpack",
[["start",1,!1]].map(a('"bootstrap2012/function-teachpack"'))),B=new b("bootstrap2014/function-teachpack",[["start",1,!1]].map(a('"bootstrap2014/function-teachpack"'))),J=new b("bootstrap2015/function-teachpack",[["start",1,!1]].map(a('"bootstrap2015/function-teachpack"'))),G=new b("location",[["get-latitude",0,!1,["android.permission.LOCATION"]],["get-longitude",0,!1,["android.permission.LOCATION"]],["get-altitude",0,!1,["android.permission.LOCATION"]],["get-bearing",0,!1,["android.permission.LOCATION"]],
["get-speed",0,!1,["android.permission.LOCATION"]],["location-distance",0,!1,["android.permission.LOCATION"]]].map(a('"moby/geolocation"'))),D=new b("tilt",[["get-x-acceleration",0,!1,["android.permission.TILT"]],["get-y-acceleration",0,!1,["android.permission.TILT"]],["get-z-acceleration",0,!1,["android.permission.TILT"]],["get-azimuth",0,!1,["android.permission.TILT"]],["get-pitch",0,!1,["android.permission.TILT"]],["get-roll",0,!1,["android.permission.TILT"]]].map(a('"moby/tilt"'))),V=new b("telephony",
[["get-signal-strength",0,!1,["android.permission.TELEPHONY"]]].map(a('"moby/net"'))),z=new b("net",[["get-url",1,!1,["android.permission.INTERNET"]]].map(a('"moby/net"'))),w=new b("parser",[["xml->s-sexp",1,!1]].map(a('"moby/parser"'))),r=new b("jsworld",[["js-big-bang",1,!1],["big-bang",1,!1],["js-div",0,!1],["js-p",0,!1],["js-button",2,!1],["js-button!",2,!1],["js-node",1,!1],["js-text",1,!1],["js-select",2,!1],["js-img",1,!1,["android.permission.INTERNET"]]].map(a('"moby/jsworld"'))),v=new b("world",
S.bindings.concat(v.bindings,"key=?,play-sound,animate,big-bang,make-color,color?,color-red,color-green,color-blue,color-alpha,empty-scene,empty-image,scene+line,put-image,place-image,place-image/align,circle,star,polygon,radial-star,star-polygon,nw:rectangle,rectangle,regular-polygon,rhombus,square,triangle,triangle/sas,triangle/sss,triangle/ass,triangle/ssa,triangle/aas,triangle/asa,triangle/saa,right-triangle,isosceles-triangle,ellipse,line,add-line,overlay,overlay/xy,overlay/align,underlay,underlay/xy,underlay/align,beside,beside/align,above,above/align,rotate,scale,scale/xy,crop,frame,flip-horizontal,flip-vertical,text,text/font,video/url,bitmap/url,image-url,image?,image=?,image-width,image-height,mouse-event?,mouse=?,image->color-list,color-list->image,color-list->bitmap,image-baseline,mode?,image-color?,name->color,x-place?,y-place?,angle?,side-count?,step-count?".split(",").map(function(a){var b=
-1<["video/url","bitmap/url","image-url"].indexOf(a)?["android.permission.INTERNET"]:[];return new i(a,'"moby/world"',b,!1)}))),b=new b("moby/topLevel",[["<",2,!0],["<=",2,!0],["=",2,!0],[">",2,!0],[">=",2,!0],["=~",3],["number->string",1],["even?",1],["odd?",1],["positive?",1],["negative?",1],["number?",1],["rational?",1],["quotient",2],["remainder",2],["numerator",1],["denominator",1],["integer?",1],["real?",1],["abs",1],["acos",1],["add1",1],["angle",1],["asin",1],["atan",1,!0],["ceiling",1],["complex?",
1],["conjugate",1],["cos",1],["cosh",1],["denominator",1],["even?",1],["exact->inexact",1],["exact?",1],["exp",1],["expt",2],["floor",1],["gcd",1,!0],["imag-part",1],["inexact->exact",1],["inexact?",1],["integer->char",1],["integer-sqrt",1],["integer?",1],["lcm",1,!0],["log",1],["magnitude",1],["make-polar",2],["make-rectangular",2],["max",1,!0],["min",1,!0],["modulo",2],["negative?",1],["number?",1],["numerator",1],["odd?",1],["positive?",1],["random",1],["rational?",1],["real-part",1],["real?",
1],["round",1],["sgn",1],["sin",1],["sinh",1],["sqr",1],["sqrt",1],["sub1",1],["tan",1],["zero?",1],["+",0,!0],["-",1,!0],["*",0,!0],["/",1,!0],["num-mean",1,!0],["num-median",1,!0],["num-mode",1,!0],["not",1],["false?",1],["boolean?",1],["boolean=?",2],["symbol->string",1],["symbol=?",2],["symbol?",1],["append",0,!0],["assq",2],["assv",2],["assoc",2],["caaar",1],["caadr",1],["caar",1],["cadar",1],["cadddr",1],["caddr",1],["cadr",1],["car",1],["cddar",1],["cdddr",1],["cddr",1],["cdr",1],["cdaar",
1],["cdadr",1],["cdar",1],["cons?",1],["list?",1],["cons",2],["empty?",1],["length",1],["list",0,!0],["list*",1,!0],["range",3],["list-ref",2],["remove",2],["remove-all",2],["member",2],["member?",2],["memq",2],["memv",2],["null?",1],["pair?",1],["rest",1],["reverse",1],["first",1],["second",1],["third",1],["fourth",1],["fifth",1],["sixth",1],["seventh",1],["eighth",1],["make-list",2],["box",1],["unbox",1],["set-box!",2],["box?",1],["make-posn",2],["posn-x",1],["posn-y",1],["posn?",1],["char->integer",
1],["char-alphabetic?",1],["char-ci<=?",2,!0],["char-ci<?",2,!0],["char-ci=?",2,!0],["char-ci>=?",2,!0],["char-ci>?",2,!0],["char-downcase",1],["char-lower-case?",1],["char-numeric?",1],["char-upcase",1],["char-upper-case?",1],["char-whitespace?",1],["char<=?",2,!0],["char<?",2,!0],["char=?",2,!0],["char>=?",2,!0],["char>?",2,!0],["char?",1],["format",1,!0],["list->string",1],["make-string",2],["replicate",2],["string",0,!0],["string->list",1],["string->number",1],["string->symbol",1],["string-alphabetic?",
1],["string-append",0,!0],["string-ci<=?",2,!0],["string-ci<?",2,!0],["string-ci=?",2,!0],["string-ci>=?",2,!0],["string-ci>?",2,!0],["string-copy",1],["string-length",1],["string-lower-case?",1],["string-numeric?",1],["string-ref",2],["string-upper-case?",1],["string-whitespace?",1],["string<=?",2,!0],["string<?",2,!0],["string=?",2,!0],["string>=?",2,!0],["string>?",2,!0],["string?",1],["substring",3],["string-ith",2],["int->string",1],["string->int",1],["explode",1],["implode",1],["eof-object?",
1],["=~",3],["eq?",2],["equal?",2],["equal~?",3],["eqv?",2],["error",2],["identity",1],["struct?",1],["current-seconds",0],["andmap",1,!0],["apply",2,!0],["argmax",2],["argmin",2],["build-list",2],["build-string",2],["compose",0,!0],["filter",2],["foldl",2,!0],["foldr",2,!0],["map",1,!0],["for-each",1,!0],["memf",2],["ormap",1,!0],["procedure?",1],["quicksort",2],["sort",2],["void",0,!0],["xml->s-exp",1],["build-vector",2],["make-vector",1,!0],["vector",0,!0],["vector-length",1],["vector-ref",2],
["vector-set!",3],["vector->list",1],["list->vector",1],["vector?",1],["printf",1,!0],["display",1],["write",1],["newline",0],["call/cc",1],["procedure-arity",1],["check-expect",2],["EXAMPLE",2],["check-within",3],["check-error",2],["make-hasheq",0],["make-hash",0],["hash-set!",3],["hash-ref",3],["hash-remove!",2],["hash-map",2],["hash-for-each",2],["hash?",1],["raise",1],["undefined?",1],["values",0,!0],["make-struct-type",4,!0],["make-struct-field-accessor",2,!0],["make-struct-field-mutator",2,
!0],["current-continuation-marks",0,!1],["continuation-mark-set->list",2,!1],["scheme->prim-js",1,!1],["prim-js->scheme",1,!1],["procedure->cps-js-fun",1,!1],["procedure->void-js-fun",1,!1],["js-===",2,!1],["js-get-named-object",1,!1],["js-get-field",2,!0],["js-set-field!",3,!1],["js-typeof",1,!1],["js-instanceof",2,!1],["js-call",2,!0],["js-new",1,!0],["js-make-hash",0,!0],["make-world-config",2,!0],["make-bb-info",2,!1],["bb-info?",1,!1],["bb-info-change-world",1,!1],["bb-info-toplevel-node",1,
!1],["make-effect-type",4,!0],["effect?",1,!1],["world-with-effects",2,!1],["make-render-effect-type",4,!0],["render-effect-type?",1],["render-effect?",1],["make-render-effect-type",4,!0],["values",0,!0],["sleep",0,!0],["current-inexact-milliseconds",0,!1],["make-exn",2,!1],["exn-message",1,!1],["exn-continuation-marks",1,!1]].map(a('"moby/toplevel"')));plt.compiler.topLevelModules=[b,l,,r,v];plt.compiler.knownCollections=["bootstrap","bootstrap2011","bootstrap2012","bootstrap2014","bootstrap2015"];
plt.compiler.knownModules=[l,r,A,v,I,n,P,H,L,N,Q,E,M,O,F,R,cageTeachpack2015,t,T,K,B,J,G,D,V,z,w,b]})();plt.compiler.desugar={};plt.compiler.analyze={};window.plt=window.plt||{};plt.compiler=plt.compiler||{};
(function(){function a(a,b){var c={};a.forEach(function(a){a instanceof n?c[a.val]?q(new types.Message([new types.ColoredPart(b.toString(),b.location),": found ",new types.ColoredPart("a variable",a.location)," that is already used ",new types.ColoredPart("here",c[a.val].location)]),a.location):c[a.val]=a:q("expected identifier "+a.val,a.location)})}function b(a,b){var c=plt.compiler.defaultModuleResolver(b),g=(new plt.compiler.emptyEnv).extendEnv_moduleBinding(c);[a.func].concat(a.args).forEach(function(a){a.context=
g});return a}function d(a,f,c){var a=new I(new types.string(a.toString())),g=new n("verify-boolean-branch-value"),a=new J(a),f=new J(new I(f.toVector())),e=new J(new I(c.location.toVector())),d=new z(g,[a,f,c,e]);d.location=g.location=c.location;a.location=f.location=e.location=c.location;b(d,"moby/runtime/kernel/misc");return d}function i(a,f,c){f=[[],f||new plt.compiler.pinfo];f=a.reduce(function(a,f){var h=f.desugar(a[1]);if(plt.compiler.isExpression(f)&&c){var d=new n("print-values"),s=new z(d,
[h[0]]);d.location=s.location=h[0].location;h[0]=s;b(s,"moby/runtime/kernel/misc")}h[0].length?a[0]=a[0].concat(h[0]):a[0].push(h[0]);return[a[0],h[1]]},f);f[0].location=a.location;return f}function l(a,b,c){var g="undefined"!=typeof a.location?a.location:a instanceof Array&&"undefined"!=typeof a[0].location?a[0].location:q(types.Message(["ASSERTION FAILURE: couldn't find a usable location"]),new Location(0,0,0,0)),a=a.map(function(a){if(0===c&&a instanceof V)a=a.desugar(b,c);else{var e=a instanceof
Array?l(a,c,c)[0]:a.desugar(b,c)[0],a=new n("list"),e=new z(a,[e]);a.parent=e;e.location=a.location=g;a=[e,b]}return a[0]}),e=new n("append");e.location=g;a=new z(e,a);a.location=g;return[a,b]}function A(a,b,c,g,e){return new y(a,b,c,g,[],!1,e)}function v(a){this.symbl=a}function S(a,b){var c=b.env,g=c.bindings.keys(),e=types.makeLowLevelEqHash();g.forEach(function(a){e.put(a,c.bindings.get(a))});g=new plt.compiler.env(e);g=a.args.reduce(function(a,c){return a.extend(new x(c.val,!1,[],c.location))},
g);b.env=g;b=a.body.analyzeUses(b,g);b.env=c;return b}function E(a,b){var c=function(a,c){return a.reduce(function(a,c){return c.collectDefinitions(a)},c)}(a,b),c=function(a,c){return a.reduce(function(a,c){return c.collectProvides(a)},c)}(a,c);return function(a,c){return a.reduce(function(a,c){return c.analyzeUses(a,a.env)},c)}(a,c)}var I=plt.compiler.literal,n=plt.compiler.symbolExpr,P=plt.compiler.Program,N=plt.compiler.couple,H=plt.compiler.ifExpr,Q=plt.compiler.beginExpr,L=plt.compiler.letExpr,
M=plt.compiler.letStarExpr,O=plt.compiler.letrecExpr,F=plt.compiler.localExpr,R=plt.compiler.andExpr,t=plt.compiler.orExpr,T=plt.compiler.condExpr,K=plt.compiler.caseExpr,B=plt.compiler.lambdaExpr,J=plt.compiler.quotedExpr,G=plt.compiler.unquotedExpr,D=plt.compiler.quasiquotedExpr,V=plt.compiler.unquoteSplice,z=plt.compiler.callExpr,w=plt.compiler.whenUnlessExpr,r=plt.compiler.defFunc,k=plt.compiler.defVar,j=plt.compiler.defVars,W=plt.compiler.defStruct,U=plt.compiler.requireExpr,C=plt.compiler.provideStatement,
X=plt.compiler.unsupportedExpr,q=plt.compiler.throwError,p=plt.compiler.structBinding,x=plt.compiler.constantBinding,y=plt.compiler.functionBinding,Z=plt.compiler.moduleBinding;P.prototype.desugar=function(a){return[this,a]};r.prototype.desugar=function(b){a([this.name].concat(this.args),this.stx[0],this.location);this.args.forEach(function(a){a instanceof n||q(new types.Message([new types.ColoredPart(this.stx.val,this.stx.location),": expected a variable but found ",new types.ColoredPart("something else",
a.location)]),sexp.location)});var b=this.body.desugar(b),f=new r(this.name,this.args,b[0],this.stx);f.location=this.location;return[f,b[1]]};k.prototype.desugar=function(a){if(this.expr instanceof B){var b=new r(this.name,this.expr.args,this.expr.body,this.stx);b.location=this.location;return b.desugar(a)}a=this.expr.desugar(a);b=new k(this.name,a[0],this.stx);b.location=this.location;return[b,a[1]]};j.prototype.desugar=function(a){var a=this.expr.desugar(a),b=new j(this.names,a[0],this.stx);b.location=
this.location;return[b,a[1]]};W.prototype.desugar=function(a){var b=this,c=["make-"+this.name.val,this.name.val+"?",this.name.val+"-ref",this.name.val+"-set!"].map(function(a){return new n(a)}),g=new n("make-struct-type"),e=[new J(new n(this.name.val)),new I(!1),new I(this.fields.length),new I(0)],d=new z(g,e);[d,g].concat(c,e).forEach(function(a){a.location=b.location});var c=new j([this.name].concat(c),d,this.stx),u=[c];c.location=this.location;this.fields.forEach(function(a,c){var g=new n("make-struct-field-accessor"),
e=[new n(b.name.val+"-ref"),new I(c),new J(new n(a.val))],h=new z(g,e),d=new n(b.name.val+"-"+a.val),o=new k(d,h);[o,g,h,d].concat(e).forEach(function(c){c.location=a.location});u.push(o)});return[u,a]};Q.prototype.desugar=function(a){var a=i(this.exprs,a),b=new Q(a[0],this.stx);b.location=this.location;return[b,a[1]]};B.prototype.desugar=function(b){this.stx&&a(this.args,this.stx,this.location);var b=this.body.desugar(b),f=new B(this.args,b[0],this.stx);f.location=this.location;return[f,b[1]]};F.prototype.desugar=
function(a){var b=i(this.defs,a),a=this.body.desugar(b[1]),b=new F(b[0],a[0],this.stx);b.location=this.location;return[b,a[1]]};z.prototype.desugar=function(a){this.func||q(new types.Message([new types.ColoredPart("( )",this.location),": expected a function, but nothing's there"]),this.location);var a=i([this.func].concat(this.args),a),b=new z(a[0][0],a[0].slice(1),this.stx);b.location=this.location;return[b,a[1]]};H.prototype.desugar=function(a){var a=i([this.predicate,this.consequence,this.alternative],
a),b=d(this.stx,this.stx.location,a[0][0]),b=new H(b,a[0][1],a[0][2],this.stx);b.location=this.location;return[b,a[1]]};w.prototype.desugar=function(a){var b=new Q(this.exprs,this.stx),c=new n("void"),g=new z(c,[],this.stx),e="when"===this.stx.val?b:g,d="when"===this.stx.val?g:b;b.location=this.exprs.location;c.location=g.location=this.location;a=i([this.predicate,e,d],a);b=new H(a[0][0],a[0][1],a[0][2],this.stx);b.location=this.location;return[b,a[1]]};O.prototype.desugar=function(a){a=(new F(this.bindings.map(function(a){var c=
new k(a.first,a.second,a.stx);c.location=a.location;return c}),this.body,this.stx)).desugar(a);a[0].location=this.location;return a};L.prototype.desugar=function(a){var b=this.bindings.map(function(a){return a.first}),c=this.bindings.map(function(a){return a.second}),b=new B(b,this.body,this.stx),c=new z(b,c);b.location=c.location=this.location;return c.desugar(a)};M.prototype.desugar=function(a){function b(a,g){var e=new L([g],a,g.stx);e.location=g.location;return e}return 0===this.bindings.length?
this.body.desugar(a):this.bindings.reduceRight(b,this.body).desugar(a)};T.prototype.desugar=function(a){var f=new n("throw-cond-exhausted-error"),c=new J(new I(this.location.toVector())),g=b(new z(f,[c]),"moby/runtime/kernel/misc");(new n("if")).location=this.stx.location;g.location=f.location=c.location=this.location;for(f=this.clauses.length-1;-1<f;f--)this.clauses[f].first instanceof n&&"else"===this.clauses[f].first.val&&(this.clauses[f].first.val="true"),g=new H(this.clauses[f].first,this.clauses[f].second,
g,this.stx),g.location=this.location;return g.desugar(a)};K.prototype.desugar=function(a){var b=this,c=new n("if");c.location=b.location;var a=a.gensym("val"),g=a[1],e=a[0].gensym("x"),a=e[0],d=e[1],u=new n("void"),i=[g,d,u],e=this.clauses,j=e[this.clauses.length-1];j.first instanceof n&&"else"===j.first.val?(u=j.second,e.pop()):(u=new z(u,[],b.stx),u.location=b.location);var j=new n("equal?"),k=new z(j,[d,g],c),l=new B([d],k,c),i=i.concat([j,k,l]),g=new N(g,this.expr),e=e.reduceRight(function(a,
g){var e=new n("ormap"),d=new z(e,[l,g.first],b.stx),h=new H(d,g.second,a,c);i=i.concat([e,d,g.first,h]);return h},u),e=new L([g],e,c),i=i.concat([g,e]);i.forEach(function(a){a.location=b.location});return e.desugar(a)};R.prototype.desugar=function(a){function b(a){var e=d(c.stx,c.stx.location,a[0]),h=2<a.length?b(a.slice(1)):d(c.stx,c.stx.location,a[1]),a=new I(!1),e=new H(e,h,a,g);[a,g,e].forEach(function(a){return a.location=c.location});return e}var c=this,g=new n("if"),a=i(this.exprs,a),e=a[0],
a=a[1],e=b(e);e.location=c.location;return[e,a]};t.prototype.desugar=function(a){function b(a,e){var h=a[0],i=e.gensym("tmp"),j=i[1],k=new n("if");j.notOriginalSource=!0;h.stx&&"if"!==h.stx.val&&(k.location=h.location,h.stx=k);e=i[0];h=new N(j,d(c.stx,c.stx.location,h));2==a.length?i=d(g,c.stx.location,a[1]):(k=b(a.slice(1),e),i=k[0],e=k[1]);i=new H(j,j,i,new n("if"));k=new L([h],i,g);[g,j,h,i,i.stx,k].forEach(function(a){return a.location=c.location});return k.desugar(e)}var c=this,g=new n("or"),
a=i(this.exprs,a),e=a[0],a=a[1];return b(e,a)};J.prototype.desugar=function(a){"undefined"===typeof this.location&&q(new types.Message(["ASSERTION ERROR: Every quotedExpr should have a location"]),loc);return function(a,c){return function(b){if(b instanceof z||b instanceof J||b instanceof X)return b.desugar(a);if(b instanceof n||b instanceof I||b instanceof Array)return b=new J(b),b.location=c,[b,a];q(new types.Message(["ASSERTION ERROR: Found an unexpected item in a quotedExpr"]),c)}}(a,this.location)(this.val)};
G.prototype.desugar=function(a,b){if("undefined"===typeof b)q(new types.Message(["misuse of a ', not under a quasiquoting backquote"]),this.location);else{if(1===b)return this.val.desugar(a);if(1<b){var c=this.val instanceof Array?l(this.val,a,b-1)[0]:this.val.desugar(a,b-1)[0],g=new J(new n("unquote")),e=new n("list"),c=[g,c],d=new z(e,c);g.location=this.location;g.parent=c;e.location=this.location;e.parent=d;d.location=this.location;return[d,a]}q(new types.Message(["ASSERTION FAILURE: depth should have been undefined, or a natural number"]),
this.location)}};V.prototype.desugar=function(a,b){if("undefined"===typeof b)q(new types.Message(["misuse of a ,@, not under a quasiquoting backquote"]),this.location);else{if(1===b)return this.val.desugar(a);if(1<b){var c=this.val instanceof Array?l(this.val,a,b-1)[0]:this.val.desugar(a,b-1)[0],g=new J(new n("unquote-splicing")),e=new n("list"),c=[g,c],d=new z(e,c);g.location=this.location;g.parent=c;e.location=this.location;e.parent=d;d.location=this.location;return[d,a]}q(new types.Message(["ASSERTION FAILURE: depth should have been undefined, or a natural number"]),
this.location)}};D.prototype.desugar=function(a,b){b="undefined"===typeof b?0:b;if(0<=b){var c;c=this.val instanceof Array?l(this.val,a,b+1)[0]:this.val.desugar(a,b+1)[0]}else q(new types.Message(["ASSERTION FAILURE: depth should have been undefined, or a natural number"]),this.location);if(0==b)return[c,a];var g=new J(new n("quasiquote")),e=[g,c],d=new n("list"),i=new z(d,e);g.parent=e;g.location=this.location;c.parent=e;d.parent=i;d.location=this.location;i.location=this.location;return[i,a]};n.prototype.desugar=
function(a){if(!this.isClause&&"else"===this.val){var b=this.parent&&this.parent[0]===this?this.parent.location:this.location;q(new types.Message([new types.ColoredPart(this.val,b),": not allowed ",new types.ColoredPart("here",b),", because this is not a question in a clause"]),b)}this.parent&&this.parent[0]!==this&&"define"===this.val&&(b=new types.Message([new types.ColoredPart(this.val,this.location),": not allowed inside an expression"]),q(b,this.location));!this.parent&&-1<plt.compiler.keywords.indexOf(this.val)&&
"else"!==this.val&&q(new types.Message([new types.ColoredPart(this.val,this.location),": expected an open parenthesis before ",this.val,", but found none"]),this.location);"."===this.val&&(b=new types.Message([this.location.source,":",this.location.startRow.toString(),":",this.location.startCol.toString(),": read: '.' is not supported as a symbol in WeScheme"]),q(b,this.location,"Error-GenericReadError"));return[this,a]};X.prototype.desugar=function(){this.location.span=this.errorSpan;q(this.errorMsg,
this.location,"Error-GenericReadError")};P.prototype.collectDefinitions=function(a){return a};r.prototype.collectDefinitions=function(a){this.args.forEach(function(a){-1<plt.compiler.keywords.indexOf(a.val)&&q(new types.Message([new types.ColoredPart(a.val,a.location),": this is a reserved keyword and cannot be used as a variable or function name"]),a.location)});var b=A(this.name.val,!1,this.args.length,!1,this.name.location);return a.accumulateDefinedBinding(b,this.location)};k.prototype.collectDefinitions=
function(a){var b=this.expr instanceof B?A(this.name.val,!1,this.expr.args.length,!1,this.name.location):new x(this.name.val,!1,[],this.name.location);return a.accumulateDefinedBinding(b,this.location)};j.prototype.collectDefinitions=function(a){var b=this,c=function(a){return b.stx[1].val+"-"+a.val},g=function(a){return"set-"+b.stx[1].val+"-"+a.val+"!"};if("define-struct"===b.stx[0].val){var e=b.stx[1].val,d=b.stx[2],i="make-"+e,j=e+"?",c=d.map(c),k=d.map(g),g=b.stx[1].location,c=new p(e,!1,d,i,
j,c,k,null,b.stx[1].location),d=A(i,!1,d.length,!1,g),j=A(j,!1,1,!1,g),i=A(e+"-set!",!1,1,!1,g),e=A(e+"-ref",!1,1,!1,g);return a.accumulateDefinedBindings([c,e,d,j,i],b.location)}return this.names.reduce(function(a,c){var g=new x(c.val,!1,[],c.location);return a.accumulateDefinedBinding(g,b.location)},a)};U.prototype.collectDefinitions=function(a){function b(a){return(a=a.match(/^wescheme\/(\w+)$/))?a[1]:!1}function c(){var a=plt.compiler.moduleGuess(d.spec.toString()),a=new types.Message(["Found require of the module ",
new types.ColoredPart(d.spec.toString(),d.spec.location),", but this module is unknown.",a.name===d.spec.toString()?"":" Did you mean '"+a.name+"'?"]);q(a,d.spec.location,"Error-UnknownModule")}function g(c){var b=window.COLLECTIONS[c].provides.map(function(a){a=new x(a,new n(c),!1);a.imported=!0;return a}),g=new Z(c,b);i=a.accumulateModule(g).accumulateModuleBindings(b)}var e=this.spec instanceof I?this.spec.val.toString():this.spec.toString(),d=this,i;!a.modulePathResolver(e,a.currentModulePath)&&
!b(e)&&c(e);var j=window.location.protocol+"//"+window.location.host+(b(e)?"/loadProject?publicId="+b(e):"/js/mzscheme-vm/collects/"+e+".js");console.log(j);window.COLLECTIONS&&window.COLLECTIONS[e]?g(e):jQuery.ajax({url:j,success:function(a){try{if(b(e)){var h=(0,eval)("("+a+")");void 0===window.COLLECTIONS&&(window.COLLECTIONS=[]);var i=plt.compiler.lex(h.source.src,e),j=plt.compiler.parse(i),k=plt.compiler.desugar(j)[0],u=plt.compiler.analyze(k),l=plt.compiler.compile(k,u);window.COLLECTIONS[e]=
{name:e,bytecode:(0,eval)("("+l.bytecode+")"),provides:l.provides}}else eval(a);a?g(e):c(e)}catch(n){if("moby-failure"===n.type)throw n;a=new types.Message(["A network error occured when trying to load ",new types.ColoredPart(d.spec.toString(),d.spec.location),". Please check your connection and try again."]);q(a,d.spec.location,"Error-NetworkError")}},error:function(){c(e)},async:!1});return i};P.prototype.collectProvides=function(a){return a};C.prototype.collectProvides=function(a){function b(c){a.providedNames.put(c,
new v(c))}return this.clauses.reduce(function(a,g){if(g instanceof n){if(a.definedNames.containsKey(g.val))return b(g.val),a;var e=new types.Message(["The name '",new types.ColoredPart(g.toString(),g.location),"', is not defined in the program, and cannot be provided."]);q(e,g.location)}else if(g instanceof Array){if(a.definedNames.containsKey(g[1].val)&&a.definedNames.get(g[1].val)instanceof p)return e=a.definedNames.get(g[1].val),[e.name,e.constructor,e.predicate].concat(e.accessors,e.mutators).forEach(b),
a;q(new types.Message(["The struct '",new types.ColoredPart(g[1].toString(),g[1].location),"', is not defined in the program, and cannot be provided"]),g.location)}else throw"Impossible: all invalid provide clauses should have been filtered out!";},a)};P.prototype.analyzeUses=function(a){return a};k.prototype.analyzeUses=function(a){a.env.extend(this.expr instanceof B?A(this.name.val,!1,this.expr.args.length,!1,this.location):new x(this.name.val,!1,[],this.name.location));return this.expr.analyzeUses(a,
a.env)};j.prototype.analyzeUses=function(a){this.names.forEach(function(b){a.env.extend(new x(b.val,!1,[],b.location))});return this.expr.analyzeUses(a,a.env)};r.prototype.analyzeUses=function(a){a.env=a.env.extend(A(this.name.val,!1,this.args.length,!1,this.name.location));return S(this,a)};B.prototype.analyzeUses=function(a){return S(this,a)};Q.prototype.analyzeUses=function(a,b){return this.exprs.reduce(function(a,g){return g.analyzeUses(a,b)},a)};F.prototype.analyzeUses=function(a,b){var c=this.defs.reduce(function(a,
c){return c.analyzeUses(a,b)},a);return this.body.analyzeUses(c,c.env)};z.prototype.analyzeUses=function(a,b){return[this.func].concat(this.args).reduce(function(c,g){return g instanceof Array?g.reduce(function(a,c){return c.analyzeUses(a,a.env)},a):g.analyzeUses(c,b)},a)};H.prototype.analyzeUses=function(a,b){return[this.predicate,this.consequence,this.alternative].reduce(function(a,g){return g.analyzeUses(a,b)},a)};n.prototype.analyzeUses=function(a,b){(-1<plt.compiler.keywords.indexOf(this.val)&&
(!this.parent||this.parent[0]!==this)||this.parent instanceof N)&&q(new types.Message([new types.ColoredPart(this.val,this.location),": expected an open parenthesis before ",this.val,", but found none"]),this.location);var c=b.lookup_context(this.val);return c?(this.bindingLoc=c.loc,a.accumulateBindingUse(c,a)):a.accumulateFreeVariableUse(this.val,a)};plt.compiler.desugar=function(a,b,c){var g=(new Date).getTime();try{var e=i(a,b,!0),d=e[0]}catch(j){throw console.log("DESUGARING ERROR"),j;}a=(new Date).getTime();
c&&(console.log("Desugared in "+Math.floor(a-g)+"ms"),console.log(d),console.log(d.toString()));return e};plt.compiler.analyze=function(a,b){var c=(new Date).getTime();try{var g=E(a,plt.compiler.getBasePinfo("base"))}catch(e){throw console.log("ANALYSIS ERROR"),e;}var d=(new Date).getTime();b&&console.log("Analyzed in "+Math.floor(d-c)+"ms");return g};plt.compiler.provideBindingId=v;plt.compiler.provideBindingStructId=function(a){this.symbl=a}})();plt.compiler.compile={};
plt.compiler.localStackReference={};plt.compiler.globalStackReference={};plt.compiler.unboundStackReference={};window.plt=window.plt||{};plt.compiler=plt.compiler||{};
(function(){function a(){}function b(a,b,e){this.name=a;this.isBoxed=b;this.depth=e}function d(a,b,e){this.name=a;this.pos=e;this.depth=b}function i(a){this.name=a}function l(a){return types.isString(a)&&void 0!==a.chars?'"'+a.toString()+'"':a.toBytecode?a.toBytecode():a}function A(a){for(var a=a.toString().replace(/\|/g,""),b="",e="{;};[;];,;';`; ;\\;\"".split(";"),d=0;d<a.length;d++)b+=(-1<e.indexOf(a.charAt(d))?"\\":"")+a.charAt(d);return b=b.replace(/\n/g,"\\n")}function v(a){f.call(this);this.name=
a;this.toBytecode=function(){return'{"$":"global-bucket","value":"'+A(this.name)+'"}'}}function S(a,b,e,d){f.call(this);this.$="module-variable";this.modidx=a;this.sym=b;this.pos=e;this.phase=d;this.toBytecode=function(){return'{"$":"module-variable","sym":'+this.sym.toBytecode()+',"modidx":'+this.modidx.toBytecode()+',"pos":'+this.pos+',"phase":'+this.phase+"}"}}function E(a,b,e){f.call(this);this.numLifts=a;this.topLevels=b;this.stxs=e;this.toBytecode=function(){return'{"$":"prefix","num-lifts":'+
this.numLifts+',"toplevels":['+this.topLevels.map(function(a){return l(a)}).join(",")+'],"stxs":['+this.stxs.map(l)+"]}"}}function I(a,b,e){f.call(this);this.maxLetDepth=a;this.prefix=b;this.code=e;this.toBytecode=function(){return'{"$":"compilation-top","max-let-depth":'+this.maxLetDepth+',"prefix":'+this.prefix.toBytecode()+',"compiled-indirects":[],"code":'+this.code.toBytecode()+"}"}}function n(a,b,e,d,h){f.call(this);this.depth=a;this.pos=b;this.constant=e;this.ready=d;this.loc=h;this.toBytecode=
function(){return'{"$":"toplevel","depth":'+this.depth.toString()+',"pos":'+this.pos.toString()+',"const?":'+this.constant+',"ready?":'+this.ready+',"loc":'+(this.loc&&this.loc.toVector().toBytecode())+"}"}}function P(a){f.call(this);this.forms=a;this.toBytecode=function(){return'{"$":"seq","forms":['+this.forms.map(l).join(",")+"]}"}}function N(a,b){f.call(this);this.ids=a;this.rhs=b;this.toBytecode=function(){return'{"$":"def-values","ids":['+this.ids.map(l).join(",")+'],"body":'+this.rhs.toBytecode()+
"}"}}function H(a,b,e,d,h,i,j,k,n,p){f.call(this);this.name=a;this.flags=e;this.numParams=d;this.paramTypes=h;this.rest=i;this.body=p;this.closureMap=j;this.maxLetDepth=n;this.closureTypes=k;this.operatorAndRandLocs=b;this.toBytecode=function(){return'{"$":"lam","name":'+this.name.toBytecode()+',"locs":['+this.operatorAndRandLocs.map(l).join(",")+'],"flags":['+this.flags.map(l).join(",")+'],"num-params":'+this.numParams+',"param-types":['+this.paramTypes.map(l).join(",")+'],"rest?":'+this.rest+',"closure-map":['+
this.closureMap.map(l).join(",")+'],"closure-types":['+this.closureTypes.map(l).join(",")+'],"max-let-depth":'+this.maxLetDepth+',"body":'+this.body.toBytecode()+"}"}}function Q(a,b,e){f.call(this);this.count=a;this.boxes=b;this.body=e;this.toBytecode=function(){return'{"$":"let-void","count":'+l(this.count)+',"boxes?":'+l(this.boxes)+',"body":'+this.body.toBytecode()+"}"}}function L(a,b,e,d,h){f.call(this);this.count=a;this.pos=b;this.boxes=e;this.rhs=d;this.body=h;this.toBytecode=function(){return'{"$":"install-value","count":'+
l(this.count)+',"pos":'+l(this.pos)+',"boxes?":'+l(this.boxes)+',"rhs":'+this.rhs.toBytecode()+',"body":'+this.body.toBytecode()+"}"}}function M(a,b,e,d,h){f.call(this);this.unbox=a||!1;this.pos=b;this.clear=e;this.flonum=h;this.otherClears=d;this.toBytecode=function(){return'{"$":"localref","unbox?":'+this.unbox+',"pos":'+this.pos+',"clear":'+this.clear+',"other-clears?":'+this.otherClears+',"flonum?":'+this.flonum+"}"}}function O(a,b){f.call(this);this.rator=a;this.rands=b;this.toBytecode=function(){return'{"$":"application","rator":'+
this.rator.toBytecode()+',"rands":['+this.rands.map(l).join(",")+"]}"}}function F(a,b,e){f.call(this);this.testExpr=a;this.thenExpr=b;this.elseExpr=e;this.toBytecode=function(){return'{"$":"branch","test":'+this.testExpr.toBytecode()+',"then":'+this.thenExpr.toBytecode()+',"else":'+this.elseExpr.toBytecode()+"}"}}function R(a,b,e){f.call(this);this.$="with-cont-mark";this.key=a;this.val=b;this.body=e;this.toBytecode=function(){return'{"$":"with-cont-mark","key":'+(new G(new D(this.key))).toBytecode()+
',"val":'+(new G(this.val)).toBytecode()+',"body":'+this.body.toBytecode()+"}"}}function t(a,b){f.call(this);this.$="req";this.reqs=a;this.dummy=b;this.toBytecode=function(){return'{"$":"req","reqs":'+(this.reqs instanceof G?'"'+this.reqs.val+'"':this.reqs.toBytecode())+',"dummy":'+this.dummy.toBytecode()+"}"}}function T(a,b){this.path=a;this.base=b;f.call(this);this.toBytecode=function(){return'{"$":"module-path","path":'+l(this.path)+',"base":'+l(this.base)+"}"}}function K(a,b,e){function d(a){return 1>=
a.length?a:e(a[0],a[1])?d(a.slice(1)):[a[0]].concat(d(a.slice(1)))}return d(a.sort(function(a,c){return b(a,c)?-1:b(c,a)}))}function B(a,b){var e=a[0],d=a[1],f=a[2],d=b.compile(f,d),h=d[0],d=d[1];return[[h].concat(e),d,f]}function J(a,b){var e=function(a){var b=a.modules.reduce(function(a,b){return a.concat(b.bindings)},[]),c=a.usedBindingsHash.values().filter(function(a){return a.moduleSource&&-1===b.indexOf(a)}),c=b.concat(c),a=a.freeVariables.concat(a.definedNames.keys()),g=K(a,function(a,b){return a<
b},function(a,b){return a==b}),a=[!1].concat(g.map(function(a){return new v(a)}),c.map(function(a){var b=S,c;c=a.imported?!1:new T(!1,!1);c=new T(a.moduleSource,c);return new b(c,new D(a.name),-1,0)})),c=[!1].concat(g,c.map(function(a){return a.name}));return[new E(0,a,[]),new plt.compiler.globalEnv(c,!1,new plt.compiler.emptyEnv)]}(b),d=e[0],f=e[1],h=a.filter(plt.compiler.isDefinition),e=a.filter(function(a){return a instanceof y}),i=a.filter(plt.compiler.isExpression),j=e.reduceRight(B,[[],b,f]),
e=j[0],b=j[1],j=h.reduceRight(B,[[],b,f]),h=j[0],b=j[1],f=i.reduceRight(B,[[],b,f]),i=f[0],b=f[1],e=new P([].concat(e,h,i));return{bytecode:"/* runtime-version: local-compiler-summer2014 */\n"+(new I(0,d,e)).toBytecode(),permissions:b.permissions(),provides:b.providedNames.keys()}}var G=plt.compiler.literal,D=plt.compiler.symbolExpr,V=plt.compiler.Program,z=plt.compiler.ifExpr,w=plt.compiler.beginExpr,r=plt.compiler.localExpr,k=plt.compiler.andExpr,j=plt.compiler.orExpr,W=plt.compiler.lambdaExpr,
U=plt.compiler.quotedExpr,C=plt.compiler.callExpr,X=plt.compiler.defFunc,q=plt.compiler.defVar,p=plt.compiler.defVars,x=plt.compiler.defStruct,y=plt.compiler.requireExpr,Z=plt.compiler.provideStatement,h=function(a){var b=function(){};b.prototype=a;return new b};G.prototype.toBytecode=function(){return'{"$":"constant","value":'+(this.val.toBytecode?this.val.toBytecode():!0===this.val?"true":!1===this.val?"false":this.toString())+"}"};D.prototype.toBytecode=function(){return'types.symbol("'+A(this.val)+
'")'};Vector.prototype.toBytecode=function(){return"types.vector(["+this.elts.join(",")+"])"};Array.prototype.toBytecode=function(){return"types."+(0===this.length?"EMPTY":"list(["+this.map(l).join(",")+"])")};jsnums.Rational.prototype.toBytecode=function(){return"types.rational("+l(this.n)+", "+l(this.d)+")"};jsnums.BigInteger.prototype.toBytecode=function(){return'types.bignum("'+this.toString()+'")'};jsnums.FloatPoint.prototype.toBytecode=function(){var a=this.toString();"+nan.0"===a&&(a="NaN");
"+inf.0"===a&&(a="Infinity");"-inf.0"===a&&(a="-Infinity");return'types["float"]('+a+")"};jsnums.Complex.prototype.toBytecode=function(){return"types.complex("+l(this.r)+", "+l(this.i)+")"};Char.prototype.toBytecode=function(){return"types['char'](String.fromCharCode("+this.val.charCodeAt(0)+"))"};b.prototype=h(a.prototype);d.prototype=h(a.prototype);i.prototype=h(a.prototype);var f=function(){this.toBytecode=function(){console.log(this);throw"IMPOSSIBLE - generic bytecode toBytecode method was called";
}};v.prototype=h(f.prototype);S.prototype=h(f.prototype);(function(){f.call(this)}).prototype=h(f.prototype);(function(a,b,e){f.call(this);this.datum=a;this.wraps=b;this.certs=e}).prototype=h(f.prototype);(function(a){this.encoded=a;f.call(this)}).prototype=h(f.prototype);E.prototype=h(f.prototype);(function(){f.call(this)}).prototype=h(f.prototype);(function(){f.call(this)}).prototype=h(f.prototype);(function(a){f.call(this);this.v=a;this.toBytecode=function(){return'{"$":"indirect","v":'+this.v.toBytecode()+
"}"}}).prototype=h(f.prototype);I.prototype=h(f.prototype);(function(a,b,e,d,h,i,j){f.call(this);this.name=a;this.src=b;this.srcName=e;this.nomSrc=d;this.srcPhase=h;this.insp=j;this.isProtected=i}).prototype=h(f.prototype);n.prototype=h(f.prototype);P.prototype=h(f.prototype);N.prototype=h(f.prototype);(function(a,b,e,d){f.call(this);this.$="def-values";this.ids=a;this.rhs=b;this.prefix=e;this.maxLetDepth=d;this.toBytecode=function(){return'{"$":"def-values","ids":['+this.ids.toBytecode().join(",")+
'],"rhs":'+this.rhs.toBytecode()+',"prefix":'+this.prefix.toBytecode()+',"max-let-depth":'+this.maxLetDepth.toBytecode()+"}"}}).prototype=h(f.prototype);(function(a,b,e,d){f.call(this);this.ids=a;this.rhs=b;this.prefix=e;this.maxLetDepth=d}).prototype=h(f.prototype);(function(a,b,e,d,h,i,j,k,l,n,p,m){f.call(this);this.name=a;this.selfModidx=b;this.prefix=e;this.provides=d;this.requires=h;this.body=i;this.syntaxBody=j;this.unexported=k;this.maxLetDepth=l;this.dummy=n;this.langInfo=p;this.internalContext=
m;this.toBytecode=function(){return'{"$":"mod","name":'+this.name.toBytecode()+',"self-modidx":'+this.selfModidx.toBytecode()+',"prefix":'+this.prefix.toBytecode()+',"provides":'+this.provides.toBytecode()+',"requires":'+(this.requires&&this.requires.toVector().toBytecode())+',"body":'+this.body.toBytecode()+',"stx-body":'+this.syntaxBody.toBytecode()+',"max-let-depth":'+this.maxLetDepth.toBytecode()+"}"}}).prototype=h(f.prototype);H.prototype=h(f.prototype);(function(a,b){f.call(this);this.code=
a;this.genId=b;this.toBytecode=function(){return'{"$":"closure","code":'+this.code.toBytecode()+',"gen-id":'+this.genId.toBytecode()+"}"}}).prototype=h(f.prototype);(function(a,b){f.call(this);this.name=a;this.clauses=b;this.toBytecode=function(){return'{"$":"case-lam","name":'+this.name.toBytecode()+',"clauses":'+this.clauses.toBytecode()+"}"}}).prototype=h(f.prototype);(function(a,b,e){f.call(this);this.rhs=a;this.body=b;this.flonum=e;this.toBytecode=function(){return'{"$": "let-one","rhs":'+this.rhs.toBytecode()+
',"body":'+this.body.toBytecode()+',"flonum":'+this.flonum.toBytecode()+"}"}}).prototype=h(f.prototype);Q.prototype=h(f.prototype);(function(a,b){f.call(this);this.procs=a;this.body=b;this.toBytecode=function(){return'{"$":"let-rec","procs":'+this.procs.toBytecode()+',"body":'+this.body.toBytecode()+"}"}}).prototype=h(f.prototype);L.prototype=h(f.prototype);(function(a,b){f.call(this);this.pos=a;this.body=b;this.toBytecode=function(){return'{"$":"boxenv","pos":'+this.pos.toBytecode()+',"body":'+this.body.toBytecode()+
"}"}}).prototype=h(f.prototype);M.prototype=h(f.prototype);(function(a,b,e){f.call(this);this.depth=a;this.pos=b;this.midpt=e}).prototype=h(f.prototype);O.prototype=h(f.prototype);F.prototype=h(f.prototype);R.prototype=h(f.prototype);(function(a){f.call(this);this.seq=a;this.toBytecode=function(){return'{"$":"beg0","seq":'+this.seq.toBytecode()+"}"}}).prototype=h(f.prototype);(function(a){f.call(this);this.forms=a;this.toBytecode=function(){return'{"$":"splice","forms":'+this.forms.toBytecode()+"}"}}).prototype=
h(f.prototype);(function(a){f.call(this);this.topLevel=a;this.toBytecode=function(){return'{"$":"varref","top-level":'+this.topLevel.toBytecode()+"}"}}).prototype=h(f.prototype);(function(a,b,e){f.call(this);this.id=a;this.rhs=b;this.undefOk=e;this.toBytecode=function(){return'{"$":"assign","id":'+this.id.toBytecode()+',"rhs":'+this.rhs.toBytecode()+',"undef-ok":'+this.undefOk.toBytecode()+"}"}}).prototype=h(f.prototype);(function(a,b){f.call(this);this.proc=a;this.args=b;this.toBytecode=function(){return'{"$":"apply-values","proc":'+
this.proc.toBytecode()+',"args":'+this.args.toBytecode()+"}"}}).prototype=h(f.prototype);(function(a){f.call(this);this.id=a;this.toBytecode=function(){return'{"$":"primval","id":'+this.id.toBytecode()+"}"}}).prototype=h(f.prototype);t.prototype=h(f.prototype);(function(a,b,e){this.bool1=a;this.bool2=b;this.alist=e;f.call(this)}).prototype=h(f.prototype);(function(a,b,e){this.amt=a;this.src=b;this.dest=e;f.call(this)}).prototype=h(f.prototype);(function(a){this.val=a;f.call(this)}).prototype=h(f.prototype);
(function(a){this.sym=a;f.call(this)}).prototype=h(f.prototype);(function(a,b,e,d,h){this.path=a;this.phase=b;this.srcPhase=e;this.prefix=h;this.exceptions=d;f.call(this)}).prototype=h(f.prototype);(function(){f.call(this)}).prototype=h(f.prototype);(function(a){this.value=a;f.call(this)}).prototype=h(f.prototype);(function(a,b,e,d,h){this.path=a;this.phase=b;this.exportName=d;this.nominalExportName=h;f.call(this)}).prototype=h(f.prototype);(function(a,b,e,d){this.path=a;this.exportName=b;this.nominalPath=
e;this.nominalExportName=d;f.call(this)}).prototype=h(f.prototype);(function(a,b){this.path=a;this.nominalPath=b;f.call(this)}).prototype=h(f.prototype);(function(a,b){this.path=a;this.exportName=b;f.call(this)}).prototype=h(f.prototype);(function(a){this.path=a;f.call(this)}).prototype=h(f.prototype);(function(a,b,e,d,h,i,j){this.phase=a;this.kind=b;this.unmarshals=d;this.renames=h;this.markRenames=i;this.plusKern=j;f.call(this)}).prototype=h(f.prototype);T.prototype=h(f.prototype);V.prototype.freeVariables=
function(a){return a};z.prototype.freeVariables=function(a,b){return this.alternative.freeVariables(this.consequence.freeVariables(this.predicate.freeVariables(a,b),b),b)};w.prototype.freeVariables=function(a,b){return this.exprs.reduceRight(function(a,c){return c.freeVariables(a,b)},a)};D.prototype.freeVariables=function(a,b){return b.lookup(this.val,0)instanceof i&&-1==a.indexOf(this)?a.concat([this]):a};r.prototype.freeVariables=function(a,b){var e=this.defs.reduce(function(a,b){return(b instanceof
p?b.names:[b.name]).concat(a)},[]).reduce(function(a,b){return new plt.compiler.localEnv(b.val,!0,a)},b);return this.defs.reduce(function(a,b){if(b instanceof X){var c=b.args.reduce(function(a,b){return new plt.compiler.localEnv(b.val,!1,a)},e);return b.body.freeVariables(a,c)}return b instanceof x?a:b.expr.freeVariables(a,e)},this.body.freeVariables(a,e))};k.prototype.freeVariables=function(a,b){return this.exprs.reduceRight(function(a,c){return c.freeVariables(a,b)},a)};j.prototype.freeVariables=
function(a,b){return this.exprs.reduceRight(function(a,c){return c.freeVariables(a,b)},a)};W.prototype.freeVariables=function(a,b){var e=this.args.slice(0).reverse().reduce(function(a,b){return new plt.compiler.localEnv(b.val,!1,a)},b);return this.body.freeVariables(a,e)};U.prototype.freeVariables=function(a){return a};C.prototype.freeVariables=function(a,b){return this.func.freeVariables(a,b).concat(this.args).reduceRight(function(a,c){return c.freeVariables(a,b)},a)};V.prototype.compile=function(a,
b){return[this,b]};X.prototype.compile=function(a,b){var e=this.name.compile(a,b),d=e[0],b=e[1],e=(new W(this.args,this.body)).compile(a,b,!1,this.name),f=e[0],b=e[1];return[new N([d],f),b]};q.prototype.compile=function(a,b){var e=this.name.compile(a,b),d=e[0],b=e[1],e=this.expr.compile(a,b),f=e[0],b=e[1];return[new N([d],f),b]};p.prototype.compile=function(a,b){var e=this.names.reduceRight(B,[[],b,a]),d=e[0],b=e[1],e=this.expr.compile(a,b),f=e[0],b=e[1];return[new N(d,f),b]};w.prototype.compile=
function(a,b){var e=this.exprs.reduceRight(B,[[],b,a]),d=e[1];return[new P(e[0]),d]};W.prototype.compile=function(a,g,e,f){function h(a,b){return a.map(function(a){return-1<b.indexOf(a)?a:!1})}function j(a,b){return new plt.compiler.localEnv(b,!1,a)}void 0===e&&(e=!0);freeVarsInBody=this.body.freeVariables([],this.args.map(function(a){return a.val}).reduce(j,new plt.compiler.emptyEnv));var k=function(a,c,e){var g=c.map(function(a){return e.lookup(a.val,0)}),f=function(a,b){return 0===b.length?!1:
a(b[0])?b[0]:f(a,b.slice(1))},k=function(a){return a.depth};if(c=f(function(a){return a instanceof i},g))throw"Can't produce closure; I don't know where "+c.name+" is bound.";var l=K(g.filter(function(a){return a instanceof b}),function(a,b){return a.depth<b.depth},function(a,b){return a.depth===b.depth}),c=l.map(k),n=g.filter(function(a){return a instanceof d}),g=K(n.map(k),function(a,b){return a<b},function(a,b){return a===b}),a=a.reverse().map(function(a){return a.val}).reduce(j,e),a=l.reverse().reduce(function(a,
b){return b.isBoxed?new plt.compiler.localEnv(b.name,!0,a):j(a,b.name)},a),a=g.reverse().reduce(function(a,b){var c=n.filter(function(a){return a.depth===b}).map(function(a){return a.name}),c=h(e.peek(b).names,c);return new plt.compiler.globalEnv(c,!1,a)},a);return[g.concat(c),a]}(this.args.slice(0),freeVarsInBody,a),a=k[0],k=this.body.compile(k[1],g),g=k[0],k=k[1];return[new H(e?[]:new D(f),[e?this.stx:f].concat(this.args).map(function(a){return a.location.toVector()}),[],this.args.length,this.args.map(function(){return new D("val")}),
!1,a,a.map(function(){return new D("val/ref")}),0,g),k]};r.prototype.compile=function(a,b){function e(a,b,c,g){if(0===a.length)return d.body.compile(h,b);var f=a[0].compile(c,b),i=f[0].rhs,b=f[1],f=a[0]instanceof p?a[0].names.length:1,a=e(a.slice(1),b,c,g+f);newBody=a[0];b=a[1];return[new L(f,g,!0,i,newBody),b]}if(0===this.defs.length)return this.body.compile(a,b);var d=this,f=this.defs.reduce(function(a,b){return a.concat(b instanceof p?b.names:b.name)},[]),h=f.reverse().reduce(function(a,b){return new plt.compiler.localEnv(b.val,
!0,a)},a),i=e(this.defs,b,h,0),j=i[0],b=i[1];return[new Q(f.length,!0,j),b]};C.prototype.compile=function(a,b){var e=this.args.reduce(function(a){return new plt.compiler.unnamedEnv(a)},a),d=this.func.compile(e,b),f=d[0],e=this.args.reduceRight(B,[[],b,e])[0],d=d[1],f=new O(f,e),e=[this.func.location].concat(this.args.map(function(a){return a.location})).concat(this.location).map(function(a){return a.toVector()});return[new R(new D("moby-application-position-key"),e,new R(new D("moby-stack-record-continuation-mark-key"),
this.location.toVector(),f)),d]};z.prototype.compile=function(a,b){var e=this.predicate.compile(a,b)[0],d=this.consequence.compile(a,b)[0],f=this.alternative.compile(a,b),h=f[1];return[new F(e,d,f[0]),h]};D.prototype.compile=function(a,g){var e=a.lookup(this.val,0);if(e instanceof b)e=new M(e.isBoxed,e.depth,!1,!1,!1);else if(e instanceof d)e=new n(e.depth,e.pos,!1,!1,this.location);else{if(e instanceof i)throw"Couldn't find '"+this.val+"' in the environment";throw"IMPOSSIBLE: env.lookup failed for '"+
this.val+"'! A reference should be added to the environment!";}return[e,g]};U.prototype.compile=function(a,b){function e(a){return a instanceof G?e(a.val):a instanceof Array?a.map(e):a}result=new G(e(this.val));return[result,b]};Z.prototype.compile=function(){};y.prototype.compile=function(a,b){return[new t(this.spec,new n(0,0,!1,!1,!1)),b]};plt.compiler.localStackReference=b;plt.compiler.globalStackReference=d;plt.compiler.unboundStackReference=i;plt.compiler.compile=function(a,b,e){var d=(new Date).getTime();
try{var f=J(a,b)}catch(h){throw console.log("COMPILATION ERROR"),h;}a=(new Date).getTime();e&&(console.log("Compiled in "+Math.floor(a-d)+"ms"),console.log(JSON.stringify(f)));return f}})();
