<!DOCTYPE html>
<html lang="en">
<head>
    

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="/static/stylesheet.css">
        <script src="/static/scripts/jquery-1.11.1.min.js"></script>
        <script src="/static/scripts/angular-file-upload-shim.min.js"></script>
        <script src="/static/scripts/angular/angular.min.js"></script>
        <script src="/static/scripts/angular/angular-sanitize.min.js"></script>
        <script src="/static/scripts/angular-file-upload.min.js"></script>
        <!--[if lt IE 9]>
        <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->

        <title>Ohjelmointi 1 - TIM</title>
    
<script src="/static/scripts/checkModules.js"></script>


<script src=" http://tim-beta.it.jyu.fi/cs/js/dir.js"> </script>

<script src=" http://tim-beta.it.jyu.fi/svn/video/js/video.js"> </script>


<script>
    
    var modules = checkModules( [
                                 
                                 "csApp",
                                 
                                 "videoApp",
                                 
                                 "ngSanitize",
                                 
                                 "angularFileUpload",
                                 
                                'ngTouch'
                                 ]);

                             var EditApp = angular.module("controller", modules );
</script>

<script src="/static/scripts/src-min/ace.js"> </script>
<!-- <script src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> -->
<script src="/static/scripts/view_html.js"></script>


<link rel="stylesheet" href="http://tim-beta.it.jyu.fi/cs/css/cs.css">



<link rel="stylesheet" href="/static/css/harmaa_varjo.css">

<link rel="stylesheet" href="/static/css/harmaa_tausta.css">

<link rel="stylesheet" href="/static/css/reunukset.css">


<style type="text/css">
asd
</style>
<script>
        var jsonDoc = [];
        var docId = JSON.parse(1);
        var docName = "Ohjelmointi 1";
        var version = {"hash": "6e80a1d7ec147c9e9b1c316375d0daa3cf452e78", "message": "Document 1: Modified as whole", "timestamp": "19 hours ago", "user": "vesal"};
</script>

</head>
<body>
<div id="header">
    
        <div class="viewLogin">
    
        <span>Logged in as:  (vesal)</span>
        <form method="POST" action="/logout">
            <input type="submit" value="Logout">
        </form>
    
</div>
        <a href="/">Main page</a>
        
            <a href="/settings">Customize TIM</a>
        
    
</div>

    

<div class="material">
    <h1>Ohjelmointi 1</h1>
    
    <div ng-app="timApp">
    
    <div id="par-0" class="paragraph">
        <h1 id="esipuhe-v2.0">Esipuhe v2.0</h1>
    </div>
    
    <div id="par-1" class="paragraph">
        <p>uuu 1</p>
    </div>
    
    <div id="par-2" class="paragraph">
        <p>Tämä moniste on luentomoniste kurssille Ohjelmointi 1. Luentomoniste tarkoittaa sitä, että sen ei ole tarkoitus korvata kunnon kirjaa, vaan esittää asiat suurinpiirtein samassa järjestyksessä ja samassa valossa kuin ne esitetään luennolla. Jotta moniste ei paisuisi kohtuuttomasti, ei asioita käsitellä missään nimessä täydellisesti. Siksi opiskelun tueksi tarvitaan jokin hyvä aihetta käsittelevä kirja, sekä rutkasti ennakkoluulotonta asennetta ottaa asioista itse selvää. Tuorein tieto löytyy tietenkin netistä - kunhan muistaa lähdekritiikin. On myös huomattava, että useimmat saatavilla olevat kirjat keskittyvät hyvin paljon tiettyyn ohjelmointikieleen — erityisesti aloittelijoille tarkoitetut. Osin tämä on luonnollista, koska ihmisetkin tarvitsevat jonkin yhteisen kielen kommunikoidakseen toisen kanssa. Siksi ohjelmoinnin aloittaminen ilman, että ensin opetellaan jonkun kielen perusteet, on aika haastavaa.</p>
    </div>
    
    <div id="par-3" class="paragraph">
        <p>Jäsentämisen selkeyden takia kirjoissa käsitellään yleensä yksi aihe perusteellisesti alusta loppuun. Aloittaessaan puhumaan lapsi ei kuitenkaan ole kykeneväinen omaksumaan kaikkea tietyn lauserakenteen kieliopista yhdellä kertaa. Vastaavasti ohjelmoinnin alkeita kahlattaessa vastaanottokyky ei vielä riitä kaikkien kikkojen käsittämiseen. Tässä monisteessa ja luennolla asioiden käsittelyjärjestys on sellainen, että asioista annetaan ensin esimerkkejä tai johdatellaan niiden tarpeeseen, ja sitten jonkin verran selitetään mistä oli kyse. Tästä syystä tästä monisteesta saa yhden näkemyksen mukaisen pintaraapaisun asioille ja kirjoista ja nettilähteistä asiaa on syvennettävä.</p>
    </div>
    
    <div id="par-4" class="paragraph">
        <p>Tässä monisteessa käytetään esimerkkikielenä <em>C#</em>-kieltä. Kuitenkin nimenomaan esimerkkinä, koska monisteen rakenne ja esimerkit voisivat olla aivan samanlaisia mille tahansa muullekin ohjelmointikielelle. Tärkeintä on nimenomaan ohjelmoinnin ajattelutavan oppiminen. Kielen vaihtaminen toiseen samansukuiseen kieleen on ennemmin verrattavissa Savon murteen vaihtamisen Turun murteeseen, kuin suomen kielen vaihtamisen ruotsin kieleen. Toisin sanoen, jos yhdellä kielellä on oppinut ohjelmoimaan, kykenee jo lukemaan toisella kielellä kirjoitettuja ohjelmia pienen harjoittelun jälkeen. Toisella kielellä kirjoittaminen on hieman haastavampaa, mutta samat rakenteet sielläkin toistuvat. Ohjelmointikielet tulevat ja menevät. Tätäkin vastaavaa kurssia on pidetty Jyväskylän yliopistossa seuraavilla kielillä: Fortran, Pascal, C, C++, Java ja nyt C#. Joissakin yliopistoissa aloituskielenä on Python.</p>
    </div>
    
    <div id="par-5" class="paragraph">
        <p>Ohjelmointia on täysin mahdotonta oppia pelkästään kirjoja lukemalla. Siksi kurssi sisältää luentojen ohella myös viikoittaisten harjoitustehtävien (demojen) tekemistä, ohjattua pääteharjoittelua tietokoneluokassa sekä harjoitustyön tekemisen. Näistä lisätietoa, samoin kuin kurssilla käytettävien työkalujen hankkimisesta ja asentamisesta löytyy kurssin kotisivuilta:</p>
    </div>
    
    <div id="par-6" class="paragraph">
        <blockquote>
<p><a href="https://trac.cc.jyu.fi/projects/ohj1" class="uri">https://trac.cc.jyu.fi/projects/ohj1</a></p>
</blockquote>
    </div>
    
    <div id="par-7" class="paragraph">
        <p>Tämä moniste perustuu Martti Hyvösen ja Vesa Lappalaisen syksyllä 2009 kirjoittamaan <em>Ohjelmointi 1</em> -monisteeseen, joka osaltaan sai muotonsa monen eri kirjoittajan työn tuloksena aina 80-luvulta alkaen. Suurimman panoksen monisteeseen ovat antaneet Timo Männikkö ja Vesa Lappalainen.</p>
    </div>
    
    <div id="par-8" class="paragraph">
        <blockquote>
<p>Jyväskylässä 2.1.2013<br><br><em>Martti Hyvönen, Vesa Lappalainen, Antti-Jussi Lakanen</em></p>
</blockquote>
    </div>
    
    <div id="par-9" class="paragraph">
        <h1 id="esipuhe-v2.1">Esipuhe v2.1</h1>
    </div>
    
    <div id="par-10" class="paragraph">
        <p>Monisteen uusin versio on kirjoitettu TIM-järjestelmään (The Interactive Material). Ideana on, että useita asioita pääsee heti kokeilemaan ilman mitään ohjelmien asentamista. Tämä toivottavasti helpottaa hieman aloituskynnystä. Valitettavasti käyttämämme tekniikka (tai oikestaan kurssille valittu kieli ja aliohjelmakirjastot) eivät anna mahdollisuutta interaktiivisten pelien tekemiseen, joten oikeata ohjelmointia varten joudumme kuitenkin asentamaan ohjelmointityökaluja, tässä tapauksessa Visual Studion ja JyPelin. Näistä myöhemmin tässä monisteessa ja kurssin materiaalissa.</p>
    </div>
    
    <div id="par-11" class="paragraph">
        <blockquote>
<p>Jyväskylässä 29.8.2014 <em>Vesa Lappalainen, Antti-Jussi Lakanen</em></p>
</blockquote>
    </div>
    
    <div id="par-12" class="paragraph">
        <h1 id="johdanto">0. Johdanto</h1>
    </div>
    
    <div id="par-13" class="paragraph">
        <p>Vaikka kurssi onkin tehty "peliohjelmointi"-kurssiksi, on 90% sen sisällöstä täysin samaa asiaa minkä ohjelmointikurssin kanssa tahansa. Jos joku ei halua tehdä kurssin harjoitustyönä peliä, voi toki tehdä myös minkä tahansa muun pienen ohjelman.</p>
    </div>
    
    <div id="par-14" class="paragraph">
        <h2 id="kurssin-sisällöstä-ja-tavoitteista">0.1 Kurssin sisällöstä ja tavoitteista</h2>
    </div>
    
    <div id="par-15" class="paragraph">
        <p>Pikaisen idean (englanniksi) tämän kurssin sisältöön saat katsomalla videon siitä, miten tehdään alle 5 minuutissa *Galaksit räjähtää - peli. Jos katsot alla olevia videoita, älä pelkää ettet osaa (vielä), vaan katso mitä sinun pitää kurssin aikana oppia ja opitkin.</p>
    </div>
    
    <div id="par-16" class="paragraph">
        <div id='1.V2' data-plugin='/showVideo'><video-runner 
footer='Video 1: GalaxyTrip less than 5 minutes, Demonstrated in SIGCSE11 symposium. Antti-Jussi Lakanen/Vesa Lappalainen'
height='300'
width='400'
iframe='True'
user_id='vesal'
taskid='1.V2'
file='//www.youtube.com/embed/cHJ73xVOFD4'

></video-runner></div>
    </div>
    
    <div id="par-17" class="paragraph">
        <p>Jos haluat samasta aiheesta pidemmän version (suomeksi), niin katso video:</p>
    </div>
    
    <div id="par-18" class="paragraph">
        <div id='1.V1' data-plugin='/showVideo'><video-runner 
footer='Video 2: Galaksit räjähtää: Pelin tekeminen 45 minuutissa, Antti-Jussi Lakanen, Levels-tapahtuma 9.4.2011'
height='300'
width='400'
iframe='True'
user_id='vesal'
taskid='1.V1'
file='//www.youtube.com/embed/R3KgCkuMEs4'

></video-runner></div>
    </div>
    
    <div id="par-19" class="paragraph">
        <p>Seuraavista videoista näet millaisia pelejä kursseilla on tehty:</p>
    </div>
    
    <div id="par-20" class="paragraph">
        <div id='1.V3' data-plugin='/showVideo'><video-runner 
footer='Video 3: Ohjelmointi 1, kevät 2014 harjoitustöitä'
height='300'
width='400'
iframe='True'
user_id='vesal'
taskid='1.V3'
file='//www.youtube.com/embed/zF46zbTxdPM'

></video-runner></div>
    </div>
    
    <div id="par-21" class="paragraph">
        <div id='1.V4' data-plugin='/showVideo'><video-runner 
footer='Video 4: Nuorten peliohjelmointikurssi (1 viikko), kesä 2013'
height='300'
width='400'
iframe='True'
user_id='vesal'
taskid='1.V4'
file='//www.youtube.com/embed/sXCCd2NqSoQ'

></video-runner></div>
    </div>
    
    <div id="par-22" class="paragraph">
        <h2 id="kurssin-osaamistavoitteet">0.2 Kurssin osaamistavoitteet</h2>
    </div>
    
    <div id="par-23" class="paragraph">
        <p>Kurssin aluksi sinun oletetaan osaavan tietokoneen käyttöä. Tuttuja asioita pitäisi olla mm: erilaisten editorien käyttö, pikanäppäimet sekä mielellään komentorivi. Toki nykypäivänä valitettavasti komentorivi ei ole kovin käytetty ja sitä voit kerrata esimerkiksi kurssin <a href="https://trac.cc.jyu.fi/projects/ohj1/wiki/komentorivi2">Wiki-sivuilta</a> tai <a href="http://users.jyu.fi/~nieminen/ohj1/materiaalia/tyokaluohjeet/komentorivi_selviytyminen.html">Paavon selviytymisoppaasta</a>.</p>
    </div>
    
    <div id="par-24" class="paragraph">
        <p>Aikaisempaa ohjelmointikokemusta sinulla ei tarvitse olla.</p>
    </div>
    
    <div id="par-25" class="paragraph">
        <p>Kurssin aikana sinun on tarkoitus oppia seuraavia asioita (osaamisen taso sovelletulla Bloomin asteikolla: 1=muistaa, 2=ymmärtää, 3=osaa soveltaa, 4=osaa analysoida, 5=osaa arvioida, 6=osaa luoda)</p>
    </div>
    
    <div id="par-26" class="paragraph">
        <table>
<thead>
<tr class="header">
<th align="left">Osattava asia</th>
<th align="center">1</th>
<th align="center">2</th>
<th align="center">3</th>
<th align="center">4</th>
<th align="center">5</th>
<th align="center">6</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Rakenteisen ohjelmoinnin perusajatus</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">o</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left">Algoritminen ajattelu</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">o</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="left">C#-kielen perusteet</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">o</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left">Peräkkäisyys</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">o</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="left">Muuttujat</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">o</td>
</tr>
<tr class="even">
<td align="left">Aliohjelmat ja funktiot</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">o</td>
</tr>
<tr class="odd">
<td align="left">Parametrin välitys</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">o</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left">Ehtolauseet</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">o</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="left">Silmukat</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">o</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left">Taulukot</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">o</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="left">Tiedostot ohjelmasta käytettynä</td>
<td align="center"></td>
<td align="center">o</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left">Olioiden käyttö</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">o</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="left">Yksikkötestit (TDD)</td>
<td align="center"></td>
<td align="center">o</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left">Debuggerin käyttö</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">o</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="left">Lukujärjestelmät, ASCII-koodi</td>
<td align="center"></td>
<td align="center">o</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left">Rekursio</td>
<td align="center">o</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="left">Dokumentointi ja sen lukeminen</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">o</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody>
</table>
    </div>
    
    <div id="par-27" class="paragraph">
        <p>Muista katsoa myös <a href="http://tim.it.jyu.fi/view/13376">kurssin videohakemistoa</a>.</p>
    </div>
    
    <div id="par-28" class="paragraph">
        <h2 id="tim-käyttöohjeita">0.3 TIM-käyttöohjeita</h2>
    </div>
    
    <div id="par-29" class="paragraph">
        <p>Tämä TIM-pohjainen moniste koostuu erilaisista interaktiivista osista. Videoihin jo varmaan edellä tutustuitkin. Laitteesi kapasiteetin säästämiseksi videot kannattaa sulkea katsomisen jälkeen.</p>
    </div>
    
    <div id="par-30" class="paragraph">
        <p>TIM-monisteessa kannattaa aina olla kirjaantuneena (Login), niin voit seurata <em>omaa</em> edistymistäsi. Kirjaantuneille monisteen oikeassa reunassa näkyy punaisia palkkeja niissä kohti, mitä et ole vielä lukenut. Kun olet lukenut (ja ymmärtänyt :-) jonkin tekstinpätkän, klikkaa punaista palkkia palkin poistamiseksi. Näin näet helposti mitä kohtia sinulla on vielä käymättä. Erityisesti tästä on hyötyä jos hyppelet monistetta eri järjestyksessä kuin missä se on kirjoitettu. Palkki voi olla myös keltainen silloin, kun olet lukenut kappaleen, mutta sen sisältö on muuttunut viimeisen lukemisesi jälkeen. Klikkaa tämäkin pois jos sisäistät muutetun tekstin.</p>
    </div>
    
    <div id="par-31" class="paragraph">
        <p>Oikeassa reunassa on myös <code>Note/Comment</code> -painike, mistä voit lisätä itsellesi muisiinpanoja kuhunkin kappaleeseen liittyen. Käytä tätä ominaisuutta ahkerasti. Voit laittaa huomioita itsellesi tai huomauttaa jos jonkin kappaleen sisältö on epäselvä tai virheellinen.<br>Anna mielellään tällaisessa tapauksessa myös korjausehdotus.</p>
    </div>
    
    <div id="par-32" class="paragraph">
        <p>Edellisissä videoissa ohjelmia kirjoitettiin <em>Visual Studio</em> -nimisessä ohjelmointi-ympäristössä (IDE = <em>Integrated Development Environment</em>). TIMissä on itsessään pieni sisäänrakennettu ympäristö, jolla voi tehdä yksinkertaisia tehtäviä, esimerkiksi:</p>
    </div>
    
    <div id="par-33" class="paragraph">
        <div id='1.punainenympyra' data-plugin='/csPlugin'><cs-jypeli-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f4a7970656c692f4a7970656c692e6373222c20227265706c616365223a2022494e5345525420594f555220434f44452048455245222c202274797065223a20226a7970656c69222c2022757365725f6964223a2022766573616c222c20227461736b4944223a2022312e70756e61696e656e796d70797261222c202275736572636f6465223a202220202020202020204c6576656c2e4261636b67726f756e642e436f6c6f72203d20436f6c6f722e426c61636b3b5c6e2020202020202020506879736963734f626a6563742070616c6c6f203d206e657720506879736963734f626a656374283230302c3230302c53686170652e436972636c65293b5c6e202020202020202070616c6c6f2e436f6c6f72203d20436f6c6f722e5265643b5c6e20202020202020204164642870616c6c6f293b222c20227374656d223a2022416a6120656e73696e20616c6c61206f6c657661206b6f6f6469207061696e616d616c6c6120416a612d7061696e696b657474612e20204d757574612073697474656e206b6f6f646961206e69696e2c206574745c75303065342070616c6c6f206f6e2070756e61696e656e2e2020416a6120757564656c6c65656e2e204d75757461207669656c5c7530306534207461757374612073696e6973656b73692e222c20226d6178726f7773223a20223230222c20226279436f6465223a202220202020202020204c6576656c2e4261636b67726f756e642e436f6c6f72203d20436f6c6f722e426c61636b3b5c6e2020202020202020506879736963734f626a6563742070616c6c6f203d206e657720506879736963734f626a656374283230302c3230302c53686170652e436972636c65293b5c6e202020202020202070616c6c6f2e436f6c6f72203d20436f6c6f722e59656c6c6f773b5c6e20202020202020204164642870616c6c6f293b227d</cs-jypeli-runner></div>
    </div>
    
    <div id="par-34" class="paragraph">
        <p>Tehtävälaatikon alla on <em>Näytä koko koodi</em>-linkki, jota painamalla näet kaiken sen koodin, mitä ohjelman takia tarvitaan. Voit edelleen muutella ohjelmaa, mutta et voi kirjoittaa "väärään" paikkaan. Samasta linkistä voit piilottaa "ylimääräisen koodin".</p>
    </div>
    
    <div id="par-35" class="paragraph">
        <p><em>Alusta</em>-linkistä voit "nollata" oman vastauksesi ja aloittaa uudelleen mallista. Kokeile kumpaakin linkkiä.</p>
    </div>
    
    <div id="par-36" class="paragraph">
        <p>Tehtävä voisi jatkua vielä niin, että: Lisää ennen <code>Add(pallo)</code>-riviä rivi</p>
    </div>
    
    <div id="par-37" class="paragraph">
        <pre><code>       pallo.Position = new Vector(150, 100);</code></pre>
    </div>
    
    <div id="par-38" class="paragraph">
        <p>Kokeile tätäkin, eli copy/paste yllä oleva koodi siihen isompaan koodiin <code>Add(pallo)</code> rivin yläpuolelle. Kokeile myös, mitä tapahtuu jos kirjoitat värissä <code>Red</code> pienillä kirjaimilla. Korjaa takaisin <code>Red</code> ja kokeile mitä vaikuttaa, kun vaihtaa <code>Vector</code>issa olevia arvoja.</p>
    </div>
    
    <div id="par-39" class="paragraph">
        <h1 id="mitä-ohjelmointi-on">1. Mitä ohjelmointi on?</h1>
    </div>
    
    <div id="par-40" class="paragraph">
        <p>Ohjelmointi on yksinkertaisimmillaan toimintaohjeiden antamista ennalta määrätyn toimenpiteen suorittamista varten. Ohjelmoinnin kaltaista toimintaa esiintyy jokaisen ihmisen arkielämässä lähes päivittäin. Algoritmista esimerkkinä voisi olla se, että annamme jollekulle puhelimessa ajo-ohjeet, joiden avulla hänen tulee päästä perille ennestään vieraaseen paikkaan. Tällöin luomme sarjan ohjeita ja komentoja, jotka ohjaavat toimenpiteen suoritusta. Nykyisin navigaattori lukee ohjeista aina seuraavan kun sitä tarvitaan. Vastaavalla tavalla ohjelmassakin tulee olemaan kohta missä suoritus on mennossa. Alkeellista ohjelmointia on tavallaan myös mikroaaltouunin käyttäminen, sillä tällöin uunille annetaan ohjeet siitä, kuinka kauan ja kuinka suurella teholla sen tulee toimia.</p>
    </div>
    
    <div id="par-41" class="paragraph">
        <p>Kaikissa edellisissä esimerkeissä oli siis kyse yksikäsitteisten ohjeiden antamisesta. Kuitenkin esimerkit käsittelivät hyvinkin erilaisia viestintätilanteita. Ihmisten välinen kommunikaatio, mikroaaltouunin kytkimien kiertäminen tai nappien painaminen, samoin kuin digiboxin ajastaminen kaukosäätimellä, ovat ohjelmoinnin kannalta toisiinsa rinnastettavissa, mutta ne tapahtuvat eri työvälineitä käyttäen. Ohjelmoinnissa työvälineiden valinta riippuu asetetun tehtävän ratkaisuun käytettävissä olevista välineistä. Ihmisten välinen kommunikaatio voi tapahtua puhumalla, kirjoittamalla tai näiden yhdistelmänä. Samoin ohjelmoinnissa voidaan usein valita erilaisia toteutustapoja tehtävän luonteesta riippuen.</p>
    </div>
    
    <div id="par-42" class="paragraph">
        <p>Vaikka ohjelmointia käytännössä tehdään suurelta osin tietokoneella, on silti kynä ja paperia syytä aina olla esillä. Ohjelmoinnin suurin vaikeus aloittelijalle onkin siinä, että ei malteta istua <strong>kynän ja paperin</strong> kanssa ja miettiä mitä ollaan tekemässä. Jos esimerkiksi pitää tehdä laivanupotuspeli, pitää ensin pelata useita kertoa peliä, jotta hahmottuu, mitä kaikkia asioita tulee aikanaan vastaan.</p>
    </div>
    
    <div id="par-43" class="paragraph">
        <p>Ohjelmoinnissa on olemassa eri tasoja riippuen siitä, minkälaista työvälinettä tehtävän ratkaisuun käytetään. Pitkälle kehitetyt korkean tason työvälineet mahdollistavat työskentelyn käsitteillä ja ilmaisuilla, jotka parhaimmillaan muistuttavat luonnollisen kielen käyttämiä käsitteitä ja ilmaisuja, kun taas matalan tason työvälineillä työskennellään hyvin yksinkertaisilla ja alkeellisilla käsitteillä ja ilmaisuilla.</p>
    </div>
    
    <div id="par-44" class="paragraph">
        <p>Eräänä esimerkkinä ohjelmoinnista voidaan pitää sokerikakun valmistukseen kirjoitettua ohjetta:</p>
    </div>
    
    <div id="par-45" class="paragraph">
        <pre><code>Sokerikakku

6       munaa
1,5 dl  sokeria
1,5 dl  jauhoja
1,5 tl  leivinjauhetta

1.  Vatkaa sokeri ja munat vaahdoksi.
2.  Sekoita jauhot ja leivinjauhe.
3.  Sekoita muna-sokerivaahto ja jauhoseos.
4.  Paista 45 min 175°C lämpötilassa.</code></pre>
    </div>
    
    <div id="par-46" class="paragraph">
        <p>Valmistusohje on ilmiselvästi kirjoitettu ihmistä varten, vieläpä sellaista ihmistä, joka tietää leipomisesta melko paljon. Jos sama ohje kirjoitettaisiin ihmiselle, joka ei eläessään ole leiponut mitään, ei edellä esitetty ohje olisi alkuunkaan riittävä, vaan siinä täytyisi huomioida useita leipomiseen liittyviä niksejä: uunin ennakkoon lämmittäminen, vaahdon vatkauksen salat, yms.</p>
    </div>
    
    <div id="par-47" class="paragraph">
        <p>Koneelle kirjoitettavat ohjeet poikkeavat merkittävästi ihmisille kirjoitetuista ohjeista. Kone ei osaa automaattisesti kysyä neuvoa törmätessään uuteen ja ennalta arvaamattomaan tilanteeseen. Se toimii täsmälleen niiden ohjeiden mukaan, jotka sille on annettu, olivatpa ne vallitsevassa tilanteessa mielekkäitä tai eivät. Kone toistaa saamiaan toimintaohjeita uskollisesti sortumatta ihmisille tyypilliseen luovuuteen. Näin ollen tämän päivän ohjelmointikielillä koneelle tarkoitetut ohjeet on esitettävä hyvin tarkoin määritellyssä muodossa ja niissä on pyrittävä ottamaan huomioon kaikki mahdollisesti esille tulevat tilanteet. [MÄN]</p>
    </div>
    
    <div id="par-48" class="paragraph">
        <h1 id="ensimmäinen-c-ohjelma">2. Ensimmäinen C#-ohjelma</h1>
    </div>
    
    <div id="par-49" class="paragraph">
        <h2 id="ohjelman-kirjoittaminen">2.1 Ohjelman kirjoittaminen</h2>
    </div>
    
    <div id="par-50" class="paragraph">
        <p>C#-ohjelmia (lausutaan <em>c sharp</em>) voi kirjoittaa millä tahansa tekstieditorilla. Tekstieditoreja on kymmeniä, ellei satoja, joten yhden nimeäminen on vaikeaa. Osa on kuitenkin suunniteltu varta vasten ohjelmointia ajatellen. Tällaiset tekstieditorit osaavat muotoilla ohjelmoijan kirjoittamaa lähdekoodia (tai lyhyesti koodia) automaattisesti siten, että lukeminen on helpompaa ja siten ymmärtäminen ja muokkaaminen nopeampaa. Ohjelmoijien suosimia ovat mm. <em>Vim,</em> <em>Emacs, ConTEXT</em> <em>ja</em> <em>NotePad++</em>, mutta monet muutkin ovat varmasti hyviä. Monisteen alun esimerkkien kirjoittamiseen soveltuu hyvin mikä tahansa tekstieditori.</p>
    </div>
    
    <div id="par-51" class="paragraph">
        <div class="huomautus">
<p><em>Koodi, lähdekoodi =</em> Ohjelmoijan tuottama tiedosto, josta varsinainen ohjelma muutetaan kääntämällä tai tulkkaamalla tietokoneen ymmärtämäksi konekieleksi.</p>
</div>
    </div>
    
    <div id="par-52" class="paragraph">
        <p>Kirjoitetaan tekstieditorilla alla olevan mukainen C#-ohjelma ja tallennetaan se vaikka nimellä HelloWorld.cs. Tiedoston tarkenteeksi (eli niin sanottu tiedostopääte) on sovittu juuri tuo .cs, mikä tulee käytetyn ohjelmointikielen nimestä, joten tälläkin kurssilla käytämme sitä. Kannattaa olla tarkkana tiedostoa tallennettaessa, sillä jotkut tekstieditorit yrittävät oletuksena tallentaa kaikki tiedostot tarkenteella .txt ja tällöin tiedoston nimi voi helposti tulla muotoon HelloWorld.cs.txt.</p>
    </div>
    
    <div id="par-53" class="paragraph">
        <div id='1.helloeka' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b226279436f6465223a20227075626c696320636c6173732048656c6c6f576f726c645c6e7b5c6e202020207075626c69632073746174696320766f6964204d61696e28295c6e202020207b5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c2248656c6c6f20576f726c64215c22293b5c6e202020207d5c6e7d222c20227461736b4944223a2022312e68656c6c6f656b61222c2022757365725f6964223a2022766573616c222c202275736572636f6465223a20227075626c696320636c6173732048656c6c6f576f726c645c6e7b5c6e202020207075626c69632073746174696320766f6964204d61696e28295c6e202020207b5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c2248656c6c6f20576f726c64215c22293b5c6e202020207d5c6e7d227d</cs-runner></div>
    </div>
    
    <div id="par-54" class="paragraph">
        <p>Tämän ohjelman pitäisi tulostaa näytölle teksti</p>
    </div>
    
    <div id="par-55" class="paragraph">
        <pre><code>Hello World!</code></pre>
    </div>
    
    <div id="par-56" class="paragraph">
        <p>Voidaksemme kokeilla ohjelmaa käytännössä, täytyy se ensiksi kääntää tietokoneen ymmärtämään muotoon.</p>
    </div>
    
    <div id="par-57" class="paragraph">
        <div class="huomautus">
<p><em>Kääntäminen =</em> Kirjoitetun lähdekoodin muuntaminen suoritettavaksi ohjelmaksi.</p>
</div>
    </div>
    
    <div id="par-58" class="paragraph">
        <p>Esimerkkejä muilla ohjelmointikielillä kirjoitetusta HelloWorld -ohjelmasta löydät vaikkapa:</p>
    </div>
    
    <div id="par-59" class="paragraph">
        <blockquote>
<p><a href="http://www2.latech.edu/~acm/HelloWorld.html" class="uri">http://www2.latech.edu/~acm/HelloWorld.html</a>.</p>
</blockquote>
    </div>
    
    <div id="par-60" class="paragraph">
        <div id='1.omanimi' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b22686561646572223a2022546568745c7530306534765c75303065342031222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a612e6373222c2022757365725f6964223a2022766573616c222c2022726f7773223a202232222c20227461736b4944223a2022312e6f6d616e696d69222c20227374656d223a20224d7575746120616c6c61206f6c65766161206b6f6f64696e206f736161206e69696e2c206574745c75303065342073652074756c6f73746161206f6d616e206e696d657369206a61206f736f697474656573692e222c202275736572636f6465223a2022202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c2248656c6c6f20576f726c64215c2229222c20227265706c616365223a2022436f6e736f6c65222c20226279436f6465223a2022202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c2248656c6c6f20576f726c64215c22293b227d</cs-runner></div>
    </div>
    
    <div id="par-61" class="paragraph">
        <h2 id="ohjelman-kääntäminen-ja-ajaminen">2.2 Ohjelman kääntäminen ja ajaminen</h2>
    </div>
    
    <div id="par-62" class="paragraph">
        <p>Jotta ohjelman kääntäminen ja suorittaminen onnistuu, täytyy koneelle olla asennettuna joku C#-sovelluskehitin. Mikäli käytät Windowsia, niin aluksi riittää hyvin Microsoft .NET SDK (Software Development Kit, suom. kehitystyökalut). Muiden käyttöjärjestelmien tapauksessa sovelluskehittimeksi käy esimerkiksi <em>Novell Mono</em>. Hyvin monet tämän kurssin harjoituksista on tehtävissä Mono-sovelluskehittimellä, mutta tämän monisteen ohjeet ja esimerkit tullaan käsittelemään Windows-ympäristössä. Edelleen, Jypeli-kirjaston <em>kaikkien</em> ominaisuuksien käyttäminen on mahdollista vain Windows-ympäristössä.</p>
    </div>
    
    <div id="par-63" class="paragraph">
        <p>Esimerkiksi tämä käyttämäsi TIM-ympäristö on toteuteutettu (Python, Haskell ja Javascript-kielillä) niin, että ruutuun kirjoittamasi teksti annetaan Linux-palvelimelle, joka tallettaa tiedoston tilapäistiedostoon ja kääntää sen edellä mainitulla Mono-kääntäjällä. Jos käännös menee virheittä, syntynyt konekielinen ohjelma ajetaan Linux-palvelimessa ja kaapataan ohjelman tuottama tulostus ja näytetään se selaimen ruudussa. Nämä vaiheet vievät yhteensä muutaman sekunnin.</p>
    </div>
    
    <div id="par-64" class="paragraph">
        <p>Seuraavaksi opettelemme tekemään nämä vaiheet käsin, jotta ymmärtäisimme paremmin mitä taustalla tapahtuu.</p>
    </div>
    
    <div id="par-65" class="paragraph">
        <p>Lisätietoa .NET-kehitystyökaluista ja asentamisesta löytyy kurssin kotisivuilta:</p>
    </div>
    
    <div id="par-66" class="paragraph">
        <blockquote>
<p><a href="https://trac.cc.jyu.fi/projects/ohj1/wiki/dotnet-tyokalut" class="uri">https://trac.cc.jyu.fi/projects/ohj1/wiki/dotnet-tyokalut</a>.</p>
</blockquote>
    </div>
    
    <div id="par-67" class="paragraph">
        <p>Kun sovelluskehitin on asennettu, käynnistetään komentorivi (<code>Command Prompt</code>, lyhyemmin <code>cmd</code>) ja siirrytään siihen hakemistoon, johon <code>HelloWorld.cs</code> tiedosto on tallennettu. Ohjelma käännetään nyt komennolla:</p>
    </div>
    
    <div id="par-68" class="paragraph">
        <pre><code>csc HelloWorld.cs</code></pre>
    </div>
    
    <div id="par-69" class="paragraph">
        <p>Komento <code>csc</code> tulee sanoista <em>C Sharp Compiler</em> (compiler = kääntäjä). Kääntämisen jälkeen hakemistoon ilmestyy <code>HelloWorld.exe</code>-niminen tiedosto, joka voidaan ajaa kuten mikä tahansa ohjelma syöttämällä ohjelman nimi:</p>
    </div>
    
    <div id="par-70" class="paragraph">
        <pre><code>HelloWorld</code></pre>
    </div>
    
    <div id="par-71" class="paragraph">
        <p>Ohjelman tulisi nyt tulostaa näyttöön teksti <code>Hello World!</code>, kuten alla olevassa kuvassa.</p>
    </div>
    
    <div id="par-72" class="paragraph">
        <div class="figure">
<img src="/csimages/ohj1/luentomonistecsUusin_htm_m16b63f32.png" alt="Kuva 1: Ohjelman kääntäminen ja ajaminen Windowsin komentorivillä."><p class="caption">Kuva 1: Ohjelman kääntäminen ja ajaminen Windowsin komentorivillä.</p>
</div>
    </div>
    
    <div id="par-73" class="paragraph">
        <p>Huomaa, että käännettäessä kirjoitetaan koko tiedoston nimi .cs-tarkentimen kanssa.</p>
    </div>
    
    <div id="par-74" class="paragraph">
        <p>Jos saat virheilmoituksen</p>
    </div>
    
    <div id="par-75" class="paragraph">
        <pre><code>'csc' is not recognized as an internal or external command, 
operable program or batch file.</code></pre>
    </div>
    
    <div id="par-76" class="paragraph">
        <p>niin kääntäjäohjelmaa <code>csc.exe</code> ei silloin löydy niin sanotusta <em>hakupolusta</em>. Ohjelman lisääminen hakupolkuun onnistuu komennolla:</p>
    </div>
    
    <div id="par-77" class="paragraph">
        <pre><code>set PATH=%WINDIR%\Microsoft.NET\Framework\v4.0.30319;%path%</code></pre>
    </div>
    
    <div id="par-78" class="paragraph">
        <p>Jotta kääntäjää ei tarvitsisi joka kerta lisätä hakupolkuun, voi sen lisätä siihen pysyvästi. Esimerkiksi Windows 7:ssä tämä tapahtuu seuraavasti.</p>
    </div>
    
    <div id="par-79" class="paragraph">
        <p>Klikkaa Oma tietokone -kuvaketta hiiren oikealla painikkeella ja valitse <strong>Ominaisuudet</strong> (Properties). Valitse sitten vasemmalta Advanced system settings ja Advanced-välilehdeltä Environment variables. Ylemmästä laatikosta valitse muuttuja PATH ja paina <strong>Muokkaa</strong>. Siirry rivin Variable value loppuun, kirjoita puolipiste (;) ja heti perään polku</p>
    </div>
    
    <div id="par-80" class="paragraph">
        <pre><code>%WINDIR%\Microsoft.NET\Framework\v4.0.30319</code></pre>
    </div>
    
    <div id="par-81" class="paragraph">
        <p>XP:ssä vastaavasti Oma tietokone → Ominaisuudet → Lisäasetukset → Ympäristömuuttujat.</p>
    </div>
    
    <div id="par-82" class="paragraph">
        <h2 id="ohjelman-rakenne">2.3 Ohjelman rakenne</h2>
    </div>
    
    <div id="par-83" class="paragraph">
        <p>Vaikka ensimmäisen ohjelmamme "ainoa oleellinen rivi" onkin</p>
    </div>
    
    <div id="par-84" class="paragraph">
        <pre><code>      System.Console.WriteLine("Hello World!");</code></pre>
    </div>
    
    <div id="par-85" class="paragraph">
        <p>tarvitaan C#-kielessä tämän ympärillä tietoa siitä, mihin ohjelman osaan lause kuuluu sekä mistä kohti ohjelma pitää käynnistää. Tämä hieman "turhaan" lisää ohjelmakoodin pituutta. Joissakin kielissä tulostavaan ohjelmaan riittää pelkkä tulostuslause. Rivimäärien ero pienenee ohjelman koon kasvaessa.</p>
    </div>
    
    <div id="par-86" class="paragraph">
        <p>Kirjoittamamme ohjelma <code>HelloWorld.cs</code> (tai oikeastaan kirjoittamamme tekstitiedosto) on melkein yksinkertaisin mahdollinen C#-ohjelma. Alla yksinkertaisimman ohjelman kaksi ensimmäistä riviä.</p>
    </div>
    
    <div id="par-87" class="paragraph">
        <pre><code>public class HelloWorld
{</code></pre>
    </div>
    
    <div id="par-88" class="paragraph">
        <p>Ensimmäisellä rivillä määritellään <em>luokka</em> (class) jonka nimi on HelloWorld. Tässä vaiheessa riittää ajatella luokkaa "kotina" <em>aliohjelmille</em>. Aliohjelmista puhutaan lisää hieman myöhemmin. Toisaalta luokkaa voidaan verrata "piparkakkumuottiin"-se on rakennusohje olioiden (eli "piparkakkujen") luomista varten. Ohjelman ajamisen aikana olioita syntyy tarvittaessa luokkaan kirjoitetun koodin avulla. Olioita voidaan myös tuhota. Yhdellä luokalla voidaan siis tehdä monta samanlaista oliota, aivan kuten yhdellä piparkakkumuotilla voidaan tehdä monta samanlaista (melkein samannäköistä) piparia.</p>
    </div>
    
    <div id="par-89" class="paragraph">
        <p>Jokaisessa C#-ohjelmassa on vähintään yksi luokka, mutta luokkia voi olla enemmänkin. Luokan, jonka sisään ohjelma kirjoitetaan, on hyvä olla samanniminen kuin tiedoston nimi. Jos tiedoston nimi on <code>HelloWorld.cs</code>, on suositeltavaa, että luokan nimi on myös <code>HelloWorld</code>, kuten meidän esimerkissämme. Tässä vaiheessa ei kuitenkaan vielä kannata liikaa vaivata päätänsä sillä, mikä luokka oikeastaan on, se selviää tarkemmin myöhemmin.</p>
    </div>
    
    <div id="par-90" class="paragraph">
        <div class="huomautus">
<p>Huomaa! C#:ssa <em>ei</em> samasteta isoja ja pieniä kirjaimia. Ole siis tarkkana kirjoittaessasi luokkien nimiä.</p>
</div>
    </div>
    
    <div id="par-91" class="paragraph">
        <div class="huomautus">
<p>Huomaa! Vahva suositus (ja tämän kurssin tapa) on, että luokka alkaa isolla alkukirjaimella, ja ettei skandeja käytetä luokan nimessä.</p>
</div>
    </div>
    
    <div id="par-92" class="paragraph">
        <p>Luokan edessä oleva <code>public</code>-sana on eräs <em>saantimääre</em> (eng. <em>access modifier</em>). Saantimääreen avulla luokka voidaan asettaa rajoituksetta tai osittain muiden (luokkien) saataville, tai piilottaa kokonaan. Sana <code>public</code> tarkoittaa, että luokka on muiden luokkien näkökulmasta <em>julkinen</em>, kuten luokat useimmiten ovat. Muita saantimääreitä ovat <code>protected</code>, <code>internal</code> ja <code>private</code>.</p>
    </div>
    
    <div id="par-93" class="paragraph">
        <p>Määreen voi myös jättää kirjoittamatta luokan eteen, jolloin luokan määreeksi tulee automaattisesti <code>internal</code>. Puhumme aliohjelmista myöhemmin, mutta mainittakoon, että vastaavasti, jos aliohjelmasta jättää määreen kirjoittamatta, tulee siitä <code>private</code>. Tällä kurssilla kuitenkin harjoitellaan kirjoittamaan julkisia luokkia (ja aliohjelmia), jolloin <code>public</code>-sana kirjoitetaan lähes aina <strong>luokan</strong> ja <strong>aliohjelman</strong> eteen. Huomaa kuitenkin että kun jatkossa tulee puhetta olion muuttujista (eli <em>attribuuteista</em>), niin niiden eteen kirjoitetaan lähes poikkeuksetta <code>private</code>.</p>
    </div>
    
    <div id="par-94" class="paragraph">
        <div class="huomautus">
<p>Luokat ja aliohjelmat esitellään yleensä <code>public</code>. Attribuutit <code>private</code>.</p>
</div>
    </div>
    
    <div id="par-95" class="paragraph">
        <p>Toisella rivillä on oikealle auki oleva <em>aaltosulku</em> <code>{</code>. Useissa ohjelmointikielissä yhteen liittyvät asiat ryhmitellään tai kootaan aaltosulkeiden sisälle. Oikealle auki olevaa aaltosulkua sanotaan aloittavaksi aaltosuluksi ja tässä tapauksessa se kertoo kääntäjälle, että tästä alkaa <code>HelloWorld</code>-luokkaan liittyvät asiat. Jokaista aloittavaa aaltosulkua kohti täytyy olla vasemmalle auki oleva lopettava aaltosulku <code>}</code>. <code>HelloWorld</code>-luokan lopettava aaltosulku on rivillä viisi, joka on samalla ohjelman viimeinen rivi. Aaltosulkeiden rajoittamaa aluetta kutsutaan <em>lohkoksi</em> (block).</p>
    </div>
    
    <div id="par-96" class="paragraph">
        <pre><code>public static void Main()
{</code></pre>
    </div>
    
    <div id="par-97" class="paragraph">
        <p>Rivillä kolme määritellään (tai oikeammin <em>esitellään</em>) uusi aliohjelma nimeltä <code>Main</code>. Nimensä ansiosta se on tämän luokan pääohjelma. Sanat <code>static</code> ja <code>void</code> kuuluvat aina <code>Main</code>-aliohjelman esittelyyn. Paneudumme niihin tarkemmin hieman myöhemmin, mutta sanottakoon tässä kohtaa, että static tarkoittaa, että aliohjelma on <em>luokkakohtainen</em> (vastakohtana <em>oliokohtainen</em>, jolloin <code>static</code>-sanaa ei kirjoiteta). Vastaavasti <code>void</code> merkitsee, ettei aliohjelma palauta mitään tietoa.</p>
    </div>
    
    <div id="par-98" class="paragraph">
        <p>Samoin kuin luokan, niin myös pääohjelman sisältö kirjoitetaan aaltosulkeiden sisään. C#:ssa ohjelmoijan kirjoittaman koodin suorittaminen alkaa aina käynnistettävän luokan pääohjelmasta (<code>Main</code>). Toki sisäisesti ehtii tapahtua paljon asioita jo ennen tätä.</p>
    </div>
    
    <div id="par-99" class="paragraph">
        <pre><code>System.Console.WriteLine("Hello World!");</code></pre>
    </div>
    
    <div id="par-100" class="paragraph">
        <p>Rivillä neljä tulostetaan näytölle <code>Hello World!</code>. C#:ssa tämä tapahtuu pyytämällä .NET-ympäristön mukana tulevan luokkakirjaston <code>System</code>-luokkakirjaston <code>Console</code>-luokkaa tulostamaan <code>WriteLine()</code>-<em>metodilla</em> (method).</p>
    </div>
    
    <div id="par-101" class="paragraph">
        <div class="huomautus">
<p>Huomaa! Viitattaessa aliohjelmiin on kirjallisuudessa usein tapana kirjoittaa aliohjelman nimen perään sulut. Kirjoitustyyli korostaa, että kyseessä on aliohjelma, mutta asiayhteydestä riippuen sulut voi myös jättää kirjoittamatta (mutta ei siis ohjelmakoodissa). Tässä monisteessa käytetään pääsääntöisesti jälkimmäistä tapaa, tilanteesta riippuen.</p>
</div>
    </div>
    
    <div id="par-102" class="paragraph">
        <p>Kirjastoista, olioista ja metodeista puhutaan lisää kohdassa 4.1 ja luvussa 8. Tulostettava merkkijono kirjoitetaan sulkeiden sisälle lainausmerkkeihin (<code>Shift + 2</code>). Tämä rivi on myös tämän ohjelman ainoa <em>lause</em> (statement). Lauseiden voidaan ajatella olevan yksittäisiä toimenpiteitä, joista ohjelma koostuu. Jokainen lause päättyy C#:ssa puolipisteeseen. Koska lauseen loppuminen ilmoitetaan puolipisteellä, ei C#:n syntaksissa (syntax) "tyhjillä merkeillä" (white space), kuten rivinvaihdoilla ja välilyönneillä ole merkitystä ohjelman toiminnan kannalta. Ohjelmakoodin luettavuuden kannalta niillä on kuitenkin suuri merkitys. Huomaa, että puolipisteen unohtaminen on yksi yleisimmistä ohjelmointivirheistä ja tarkemmin sanottuna <em>syntaksivirheistä.</em></p>
    </div>
    
    <div id="par-103" class="paragraph">
        <div class="huomautus">
<p><em>Syntaksi</em> = Tietyn ohjelmointikielen (esimerkiksi C#:n) kielioppisäännöstö.</p>
</div>
    </div>
    
    <div id="par-104" class="paragraph">
        <div id='1.nimiJaOsoite' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b22686561646572223a2022546568745c7530306534765c75303065342032222c20227461736b4944223a2022312e6e696d694a614f736f697465222c20227374656d223a20224b69726a6f69746120616c6c65206b6f6b6f6e61696e656e2043232d6f686a656c6d612c206a6f6b612074756c6f73746161206e696d657369206a61206f736f697474656573692e204b6f6b65696c65206f686a656c6d616e20746f696d696e7461612e222c2022757365725f6964223a2022766573616c222c20226d6178726f7773223a202238227d</cs-runner></div>
    </div>
    
    <div id="par-105" class="paragraph">
        <div id='1.valilyonti' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b22686561646572223a2022546568745c7530306534765c75303065342033222c2022757365725f6964223a2022766573616c222c20227461736b4944223a2022312e76616c696c796f6e7469222c202275736572636f6465223a20227075626c696320636c617373205479686a69615c6e7b5c6e202020207075626c69632073746174696320766f6964204d61696e28295c6e202020207b5c6e20202020202020696e742061203d20333b5c6e2020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c22613a6e206172766f206f6e205c22202b2061293b205c6e20202020202020612b2b3b5c6e2020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c226a61206e7974207365206f6e207968745c75303065342069736f6d70693a205c22202b2061293b205c6e202020207d5c6e7d20222c20227374656d223a20224b6f6b65696c65206d6968696e206b61696b6b69696e206b6f687469696e20766f6974206b6f6f6469737361206c61697474616120796c696d5c75303065345c7530306534725c75303065346973656e20765c75303065346c696c795c75303066366e6e696e20746169206a6f706120726976696e76616968646f6e206e69696e2c206574745c7530306534206f686a656c6d6120746f696d6969207669656c5c7530306534206f696b65696e2e222c20226d6178726f7773223a20223130222c20226279436f6465223a20227075626c696320636c617373205479686a69615c6e7b5c6e202020207075626c69632073746174696320766f6964204d61696e28295c6e202020207b5c6e20202020202020696e742061203d20333b5c6e2020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c22613a6e206172766f206f6e205c22202b2061293b205c6e20202020202020612b2b3b5c6e2020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c226a61206e7974207365206f6e207968745c75303065342069736f6d70693a205c22202b2061293b205c6e202020207d5c6e7d20227d</cs-runner></div>
    </div>
    
    <div id="par-106" class="paragraph">
        <div class="pluginError">Plugin mmcqq error: Plugin does not exist.</div>
    </div>
    
    <div id="par-107" class="paragraph">
        <h3 id="virhetyypit">2.3.1 Virhetyypit</h3>
    </div>
    
    <div id="par-108" class="paragraph">
        <p>Ohjelmointivirheet voidaan jakaa karkeasti <em>syntaksivirheisiin</em> ja <em>loogisiin virheisiin</em>.</p>
    </div>
    
    <div id="par-109" class="paragraph">
        <p>Edellä kokeilit välilyönnin paikkaa ja mihin sen voi laittaa. Silloin kun ohjelma ei kääntynyt, oli kyseessä syntaksivirhe. Silloin kun ohjelma toimi, mutta tekstinä näytti erilaiselta, on kyseessä oikeastaan kirjoitustyylin virhe (tai mielipide-ero).</p>
    </div>
    
    <div id="par-110" class="paragraph">
        <p>Syntaksivirhe estää ohjelman kääntymisen vaikka merkitys eli <em>semantiikka</em> olisikin periaatteessa oikein. Siksi ne huomataankin aina viimeistään ohjelmaa käännettäessä. Syntaksivirhe voi olla esimerkiksi joku kirjoitusvirhe tai puolipisteen unohtaminen lauseen lopusta.</p>
    </div>
    
    <div id="par-111" class="paragraph">
        <p>Loogisissa virheissä semantiikka, eli merkitys, on väärin. Ne on vaikeampi huomata, sillä ohjelma kääntyy semanttisista virheistä huolimatta. Ohjelma voi jopa näyttää toimivan täysin oikein. Jos looginen virhe ei löydy <em>testauksessakaan</em> (testing), voivat seuraukset ohjelmistosta riippuen olla tuhoisia. Tässä yksi tunnettu esimerkki loogisesta virheestä:</p>
    </div>
    
    <div id="par-112" class="paragraph">
        <blockquote>
<p><a href="http://money.cnn.com/magazines/fortune/fortune_archive/2000/02/07/272831/index.htm" class="uri">http://money.cnn.com/magazines/fortune/fortune_archive/2000/02/07/272831/index.htm</a>.</p>
</blockquote>
    </div>
    
    <div id="par-113" class="paragraph">
        <h3 id="kääntäjän-virheilmoitusten-tulkinta">2.3.2 Kääntäjän virheilmoitusten tulkinta</h3>
    </div>
    
    <div id="par-114" class="paragraph">
        <p>Alla on esimerkki syntaksivirheestä <code>HelloWorld</code>-ohjelmassa.</p>
    </div>
    
    <div id="par-115" class="paragraph">
        <div id='1.Writeline' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b226279436f6465223a20227075626c696320636c6173732048656c6c6f576f726c645c6e7b5c6e202020207075626c69632073746174696320766f6964204d61696e28295c6e202020207b5c6e202020202020202053797374656d2e436f6e736f6c652e57726974656c696e65285c2248656c6c6f20576f726c64215c22293b5c6e202020207d5c6e7d222c20227461736b4944223a2022312e57726974656c696e65222c2022757365725f6964223a2022766573616c222c202275736572636f6465223a20227075626c696320636c6173732048656c6c6f576f726c645c6e7b5c6e202020207075626c69632073746174696320766f6964204d61696e28295c6e202020207b5c6e202020202020202053797374656d2e436f6e736f6c652e57726974656c696e65285c2248656c6c6f20576f726c64215c22293b5c6e202020207d5c6e7d227d</cs-runner></div>
    </div>
    
    <div id="par-116" class="paragraph">
        <p>Ohjelmassa on pieni kirjoitusvirhe, joka on (ilman apuvälineitä) melko hankala huomata. Tutkitaan csc-kääntäjän antamaa virheilmoitusta.</p>
    </div>
    
    <div id="par-117" class="paragraph">
        <pre><code>HelloWorld.cs(5,17): error CS0117: 'System.Console' does not
contain a definition for 'Writeline'</code></pre>
    </div>
    
    <div id="par-118" class="paragraph">
        <p>Kääntäjä kertoo, että tiedostossa <code>HelloWorld.cs</code> rivillä 5 ja sarakkeessa 17 on seuraava virhe: <code>System.Console</code>-luokka ei tunne <code>Writeline</code>-komentoa. Tämä onkin aivan totta, sillä <code>WriteLine</code> kirjoitetaan isolla L:llä. Korjattuamme tuon ohjelma toimii jälleen.</p>
    </div>
    
    <div id="par-119" class="paragraph">
        <p>Valitettavasti virheilmoituksen sisältö ei aina kuvaa ongelmaa kovinkaan hyvin. Alla olevassa esimerkissä on erehdytty laittamaan puolipiste väärään paikkaan. Koita ensin itse löytää mihin, ennenkuin jatkat tai kokeilet.</p>
    </div>
    
    <div id="par-120" class="paragraph">
        <div id='1.puolipistevaarin' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b226279436f6465223a20227075626c696320636c6173732048656c6c6f576f726c645c6e7b5c6e202020207075626c69632073746174696320766f6964204d61696e28293b5c6e202020207b5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c2248656c6c6f20576f726c64215c22293b5c6e202020207d5c6e7d222c20227461736b4944223a2022312e70756f6c69706973746576616172696e222c2022757365725f6964223a2022766573616c222c202275736572636f6465223a20227075626c696320636c6173732048656c6c6f576f726c645c6e7b5c6e202020207075626c69632073746174696320766f6964204d61696e28295c6e202020207b5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c2256657361215c22293b5c6e202020207d5c6e7d227d</cs-runner></div>
    </div>
    
    <div id="par-121" class="paragraph">
        <p>Virheilmoitus, tai oikeastaan virheilmoitukset, näyttävät kääntäjästä riippuen esimerkiksi seuraavalta.</p>
    </div>
    
    <div id="par-122" class="paragraph">
        <pre><code>HelloWorld.cs(4,3): error CS1519: Invalid token '{' in class,
struct, or interface member declaration
HelloWorld.cs(5,26): error CS1519: Invalid token '(' in class,       
struct, or interface member declaration
HelloWorld.cs(7,1): error CS1022: Type or namespace definition,
or end-of-file expected</code></pre>
    </div>
    
    <div id="par-123" class="paragraph">
        <p>Ensimmäinen virheilmoitus osoittaa riville 4, vaikka todellisuudessa ongelma on rivillä 3. Toisin sanoen, näistä virheilmoituksista ei ole meille tässä tilanteessa lainkaan apua, päinvastoin, ne kehottavat tekemään jotain, mitä emme halua.</p>
    </div>
    
    <div id="par-124" class="paragraph">
        <div id='1.virheita' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b22686561646572223a2022546568745c7530306534765c75303065342034222c2022757365725f6964223a2022766573616c222c20227461736b4944223a2022312e7669726865697461222c20227374656d223a20224b6f6b65696c65206564656c6c5c7530306534206f6c65766961206a61206d75697461206d6168646f6c6c697369612076697268657479797070656a5c753030653420616c6c61206f6c657661616e206f686a656c6d61616e2e204d7569737461206574745c753030653420616c757374612d6c696e6b6973745c75303065342073616174206f686a656c6d616e207461617320746f696d6976616b73692e222c20226d6178726f7773223a20223130222c20226279436f6465223a20227075626c696320636c6173732056697268656974615c6e7b5c6e202020207075626c69632073746174696320766f6964204d61696e28295c6e202020207b5c6e20202020202020696e742061203d20353b20202f2f2056616968646120745c7530306534685c75303065346e206b6f6b65656b73692069736f20415c6e2020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c22613a6e206172766f206f6e205c22202b2061293b205c6e202020207d5c6e7d20227d</cs-runner></div>
    </div>
    
    <div id="par-125" class="paragraph">
        <h3 id="tyhjät-merkit-white-spaces">2.3.3 Tyhjät merkit (White spaces)</h3>
    </div>
    
    <div id="par-126" class="paragraph">
        <p>Kuten aikasemmassa tehtävässä kokeilimme, esimerkkinämme ollut HelloWorld-ohjelma voitaisiin, ilman että sen toiminta muuttuisi, vaihtoehtoisesti kirjoittaa myös seuraavassa muodossa.</p>
    </div>
    
    <div id="par-127" class="paragraph">
        <div id='1.rivitsekaisin' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b226279436f6465223a20222020207075626c696320636c6173732048656c6c6f576f726c645c6e20202020202020202020202020202020202020202020202020202020207b5c6e5c6e5c6e20202020202020207075626c69632073746174696320766f6964204d61696e28295c6e20202020207b5c6e53797374656d2e436f6e736f6c652e57726974654c696e65285c2248656c6c6f20576f726c64215c22293b5c6e202020202020207d5c6e5c6e5c6e2020207d222c20227461736b4944223a2022312e726976697473656b616973696e222c2022757365725f6964223a2022766573616c222c202275736572636f6465223a20222020207075626c696320636c6173732048656c6c6f576f726c645c6e20202020202020202020202020202020202020202020202020202020207b5c6e5c6e5c6e20202020202020207075626c69632073746174696320766f6964204d61696e28295c6e20202020207b5c6e53797374656d2e436f6e736f6c652e57726974654c696e65285c2248656c6c6f20576f726c64215c22293b5c6e202020202020207d5c6e5c6e5c6e2020207d227d</cs-runner></div>
    </div>
    
    <div id="par-128" class="paragraph">
        <p>Edelleen, koodi voitaisiin kirjoittaa myös seuraavasti.</p>
    </div>
    
    <div id="par-129" class="paragraph">
        <div id='1.rivitsekaisin2' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b226279436f6465223a20227075626c696320636c6173732048656c6c6f576f726c64207b207075626c69632073746174696320766f6964204d61696e2829207b5c6e53797374656d2e436f6e736f6c652e57726974654c696e65285c2248656c6c6f20576f726c64215c22293b207d207d222c20227461736b4944223a2022312e726976697473656b616973696e32222c2022757365725f6964223a2022766573616c222c202275736572636f6465223a20227075626c696320636c6173732048656c6c6f576f726c64207b207075626c69632073746174696320766f6964204d61696e2829207b5c6e53797374656d2e436f6e736f6c652e57726974654c696e65285c2248656c6c6f20576f726c64215c22293b207d207d227d</cs-runner></div>
    </div>
    
    <div id="par-130" class="paragraph">
        <p>Tai jopa niin, että koko koodi on yhdellä rivillä, kokeile.</p>
    </div>
    
    <div id="par-131" class="paragraph">
        <p>Vaikka molemmat yllä olevista esimerkeistä ovat syntaksiltaan oikein, eli ne noudattavat C#:n kielioppisääntöjä, on niiden luettavuus huomattavasti heikompi kuin alkuperäisen ohjelmamme. C#:ssa on yhteisesti sovittuja koodauskäytänteet (<em>code conventions</em>), jotka määrittelevät, miten ohjelmakoodia tulisi kirjoittaa. Kun kaikki kirjoittavat samalla tavalla, on muiden koodin lukeminen helpompaa. Tämän monisteen esimerkit on pyritty kirjoittamaan näiden käytänteiden mukaisesti. Linkkejä koodauskäytänteisiin löytyy kurssin wiki-sivulta osoitteesta</p>
    </div>
    
    <div id="par-132" class="paragraph">
        <blockquote>
<p><a href="https://trac.cc.jyu.fi/projects/ohj1/wiki/CsKoodausKaytanteet" class="uri">https://trac.cc.jyu.fi/projects/ohj1/wiki/CsKoodausKaytanteet</a></p>
</blockquote>
    </div>
    
    <div id="par-133" class="paragraph">
        <p>Merkkijono kirjoitetaan lainausmerkkien <code>"</code> väliin. Merkkijonoja käsiteltäessä välilyönneillä, tabulaattoreilla ja rivinvaihdoilla on kuitenkin merkitystä. Vertaa alla olevia tulostuksia.</p>
    </div>
    
    <div id="par-134" class="paragraph">
        <div id='1.helloperus' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a2022436f6e736f6c65222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a612e6373222c2022757365725f6964223a2022766573616c222c202275736572636f6465223a2022202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c2248656c6c6f20576f726c64215c22293b222c20227461736b4944223a2022312e68656c6c6f7065727573222c20226279436f6465223a2022202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c2248656c6c6f20576f726c64215c22293b227d</cs-runner></div>
    </div>
    
    <div id="par-135" class="paragraph">
        <p>Yllä oleva rivi tulostaa</p>
    </div>
    
    <div id="par-136" class="paragraph">
        <pre><code>Hello World </code></pre>
    </div>
    
    <div id="par-137" class="paragraph">
        <p>kun taas alla oleva rivi tulostaa:</p>
    </div>
    
    <div id="par-138" class="paragraph">
        <pre><code>H e l l o W o r l d !</code></pre>
    </div>
    
    <div id="par-139" class="paragraph">
        <div id='1.helloharva' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a2022436f6e736f6c65222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a612e6373222c2022757365725f6964223a2022766573616c222c202275736572636f6465223a2022202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c22482065206c206c206f2020202057206f2072206c206420215c22293b222c20227461736b4944223a2022312e68656c6c6f6861727661222c20226279436f6465223a2022202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c22482065206c206c206f2020202057206f2072206c206420215c22293b227d</cs-runner></div>
    </div>
    
    <div id="par-140" class="paragraph">
        <p>Lukemisen helpottamiseksi tyhjiä merkkejä käytetään rivien alussa sisentämään lohkoja. Tapana on, että jokaisen aloittavan aaltosulun jälkeen sisennetään koodia 4 yksikköä ja vastaavisti saman verran tullaan takaisin lopettavan aaltosulun jälkeen. parina olevat aaltosulut pyritään (C#-tyylissä) laittamaan samaan sarakkeeseen. Yleensä IDEt osaavat muotoilla koodin ja tätä ominaisuutta kannattaa käyttää jos ei itse osaa muotoilla koodia kauniisti.</p>
    </div>
    
    <div id="par-141" class="paragraph">
        <h2 id="kommentointi">2.4 Kommentointi</h2>
    </div>
    
    <div id="par-142" class="paragraph">
        <blockquote>
<p>“Good programmers use their brains, but good guidelines save us having to think out every case.” -Francis Glassborow</p>
</blockquote>
    </div>
    
    <div id="par-143" class="paragraph">
        <p>Lähdekoodia on usein vaikea ymmärtää pelkkää ohjelmointikieltä lukemalla. Tämän takia koodin sekaan voi ja pitää lisätä selosteita eli <em>kommentteja</em>. Kommentit ovat sekä koodin kirjoittajaa itseään varten että tulevia ohjelman lukijoita ja ylläpitäjiä varten. Monet asiat voivat kirjoitettaessa tuntua ilmeisiltä, mutta jo viikon päästä saakin ähkäillä, että miksihän tuonkin tuohon kirjoitin.</p>
    </div>
    
    <div id="par-144" class="paragraph">
        <p>Kääntäjä jättää kommentit huomioimatta, joten ne eivät vaikuta ohjelman toimintaan. C#:ssa on kolmenlaisia kommentteja.</p>
    </div>
    
    <div id="par-145" class="paragraph">
        <pre><code>// Yhden rivin kommentti</code></pre>
    </div>
    
    <div id="par-146" class="paragraph">
        <p>Yhden rivin kommentti alkaa kahdella vinoviivalla (//). Sen vaikutus kestää koko rivin loppuun.</p>
    </div>
    
    <div id="par-147" class="paragraph">
        <pre><code>/* Tämä   kommentti
   on usean
   rivin
   pituinen */</code></pre>
    </div>
    
    <div id="par-148" class="paragraph">
        <p>Vinoviivalla ja asteriskilla alkava (<code>/*</code>) kommentti kestää niin kauan kunnes vastaan tulee asteriski ja vinoviiva (<code>*/</code>). Huomaa, ettei asteriskin ja vinoviivan väliin tule välilyöntiä.</p>
    </div>
    
    <div id="par-149" class="paragraph">
        <div id='1.puolipistevaarin' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b22686561646572223a2022546568745c7530306534765c75303065342035222c2022757365725f6964223a2022766573616c222c20227461736b4944223a2022312e70756f6c69706973746576616172696e222c202275736572636f6465223a20227075626c696320636c6173732048656c6c6f576f726c645c6e7b5c6e202020207075626c69632073746174696320766f6964204d61696e28295c6e202020207b5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c2256657361215c22293b5c6e202020207d5c6e7d222c20227374656d223a20224b6f6b65696c65206572696c6169736961206b6f6d6d656e7474656a61207365757261617661616e206f686a656c6d61616e20657269207061696b6b6f6968696e2e222c20226279436f6465223a20227075626c696320636c6173732048656c6c6f576f726c645c6e7b5c6e202020207075626c69632073746174696320766f6964204d61696e28295c6e202020207b5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c2248656c6c6f20576f726c64215c22293b5c6e202020207d5c6e7d227d</cs-runner></div>
    </div>
    
    <div id="par-150" class="paragraph">
        <p>Esimerkiksi kommenttijonon <code>/* kissa */</code> voit kirjoittaa kaikkiin samoihin paikkoihin, mihin aikaisemmassa harjoituksessa pystyit laittamaan välilyönnin. Vastaavasti et voi kirjoittaa jonoa paikkoihin johon ei saa laittaa välilyöntiä.</p>
    </div>
    
    <div id="par-151" class="paragraph">
        <h3 id="dokumentointi">2.4.1 Dokumentointi</h3>
    </div>
    
    <div id="par-152" class="paragraph">
        <p>Kolmas kommenttityyppi on <em>dokumentaatiokommentti</em>. Dokumentaatiokommenteissa on tietty syntaksi, ja tätä noudattamalla voidaan dokumentaatiokommentit muuttaa sellaiseen muotoon, että kommentteihin perustuvaa yhteenvetoa on mahdollista tarkastella esimerkiksi nettiselaimen avulla tai tuottaa siitä siisti paperituloste.</p>
    </div>
    
    <div id="par-153" class="paragraph">
        <p>Dokumentaatiokommentti olisi syytä kirjoittaa ennen jokaista luokkaa, pääohjelmaa, aliohjelmaa ja metodia (aliohjelmista ja metodeista puhutaan myöhemmin). Lisäksi jokainen C#-tiedosto pitäisi alkaa aina dokumentaatiokommentilla, josta selviää tiedoston tarkoitus, tekijä ja versio.</p>
    </div>
    
    <div id="par-154" class="paragraph">
        <p>Dokumentaatiokommentit kirjoitetaan siten, että rivin alussa on aina aina <strong>kolme</strong> vinoviivaa (<code>Shift + 7</code>). Jokainen seuraava dokumentaatiokommenttirivi aloitetaan siis myöskin kolmella vinoviivalla.</p>
    </div>
    
    <div id="par-155" class="paragraph">
        <pre><code>/// Tämä
/// on
/// dokumentaatiokommentti </code></pre>
    </div>
    
    <div id="par-156" class="paragraph">
        <p>Dokumentoiminen tapahtuu <em>tagien</em> avulla. Jos olet joskus kirjoittanut HTML-sivuja, on merkintätapa sinulle tuttu. Dokumentaatiokommentit alkavat aloitustagilla, muotoa <code>&lt;esimerkki&gt;</code>, jonka perään tulee kommentin asiasisältö. Kommentti loppuu lopetustagiin, muotoa <code>&lt;/esimerkki&gt;</code>, siis muuten sama kuin aloitustagi, mutta ensimmäisen kulmasulun jälkeen on yksi vinoviiva.</p>
    </div>
    
    <div id="par-157" class="paragraph">
        <p>C#-tageja ovat esimerkiksi <code>&lt;summary&gt;</code>, jolla ilmoitetaan pieni yhteenveto kommenttia seuraavasta koodilohkosta (esimerkiksi pääohjelma tai metodi). Yhteenveto päättyy <code>&lt;/summary&gt;</code> -lopetustagiin.</p>
    </div>
    
    <div id="par-158" class="paragraph">
        <p>Ohjelman kääntämisen yhteydessä dokumentaatiotagit voidaan kirjoittaa erilliseen <em>XML</em>-tiedostoon, josta ne voidaan edelleen muuntaa helposti selattaviksi HTML-sivuiksi. Tageja voi keksiä itsekin lisää, mutta tämän kurssin tarpeisiin riittää hyvin suositeltujen tagien luettelo. Tiedot suositelluista tageista löytyvät C#:n dokumentaatiosta:</p>
    </div>
    
    <div id="par-159" class="paragraph">
        <blockquote>
<p><a href="http://msdn.microsoft.com/en-us/library/5ast78ax.aspx" class="uri">http://msdn.microsoft.com/en-us/library/5ast78ax.aspx</a></p>
</blockquote>
    </div>
    
    <div id="par-160" class="paragraph">
        <p>Voisimme kirjoittaa nyt C#-kommentit HelloWorld-ohjelman alkuun seuraavasti:</p>
    </div>
    
    <div id="par-161" class="paragraph">
        <div id='1.kommenttiesimerkki' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b226279436f6465223a20222f2f2f2040617574686f722020416e7474692d4a75737369204c616b616e656e5c6e2f2f2f204076657273696f6e2032382e382e323031325c6e2f2f2f5c6e2f2f2f203c73756d6d6172793e5c6e2f2f2f204573696d65726b6b696f686a656c6d612c206a6f6b612074756c6f737461612074656b7374696e205c2248656c6c6f20576f726c64215c225c6e2f2f2f203c2f73756d6d6172793e5c6e5c6e7075626c696320636c6173732048656c6c6f576f726c645c6e7b5c6e20202f2f2f203c73756d6d6172793e5c6e20202f2f2f20505c75303065345c75303065346f686a656c6d612c206a6f6b6120686f697461612076617273696e616973656e2074756c6f7374616d6973656e2e5c6e20202f2f2f203c2f73756d6d6172793e5c6e20202f2f2f203c706172616d206e616d653d5c22617267735c223e4569206b5c753030653479745c753030663673735c75303065343c2f706172616d3e5c6e20207075626c69632073746174696320766f6964204d61696e28737472696e675b5d2061726773295c6e20207b202f2f2053756f726974757320616c6b6161207369697320745c753030653473745c75303065342c206f686a656c6d616e205c22656e74727920706f696e745c225c6e202020202f2f207365757261617661206c617573652074756c6f737461612072757564756c6c655c6e2020202053797374656d2e436f6e736f6c652e57726974654c696e65285c2248656c6c6f20576f726c64215c22293b5c6e20207d202f2f204f686a656c6d616e2073756f726974757320705c75303065345c75303065347474797920745c7530306534685c75303065346e5c6e7d222c20227461736b4944223a2022312e6b6f6d6d656e7474696573696d65726b6b69222c2022757365725f6964223a2022766573616c222c202275736572636f6465223a20222f2f2f2040617574686f722020416e7474692d4a75737369204c616b616e656e5c6e2f2f2f204076657273696f6e2032382e382e323031325c6e2f2f2f5c6e2f2f2f203c73756d6d6172793e5c6e2f2f2f204573696d65726b6b696f686a656c6d612c206a6f6b612074756c6f737461612074656b7374696e205c2248656c6c6f20576f726c64215c225c6e2f2f2f203c2f73756d6d6172793e5c6e5c6e7075626c696320636c6173732048656c6c6f576f726c645c6e7b5c6e20202f2f2f203c73756d6d6172793e5c6e20202f2f2f20505c75303065345c75303065346f686a656c6d612c206a6f6b6120686f697461612076617273696e616973656e2074756c6f7374616d6973656e2e5c6e20202f2f2f203c2f73756d6d6172793e5c6e20202f2f2f203c706172616d206e616d653d5c22617267735c223e4569206b5c753030653479745c753030663673735c75303065343c2f706172616d3e5c6e20207075626c69632073746174696320766f6964204d61696e28737472696e675b5d2061726773295c6e20207b202f2f2053756f726974757320616c6b6161207369697320745c753030653473745c75303065342c206f686a656c6d616e205c22656e74727920706f696e745c225c6e202020202f2f207365757261617661206c617573652074756c6f737461612072757564756c6c655c6e2020202053797374656d2e436f6e736f6c652e57726974654c696e65285c2248656c6c6f20576f726c64215c22293b5c6e20207d202f2f204f686a656c6d616e2073756f726974757320705c75303065345c75303065347474797920745c7530306534685c75303065346e5c6e7d227d</cs-runner></div>
    </div>
    
    <div id="par-162" class="paragraph">
        <p>Ohjelman alussa kerrotaan kohteen tekijän nimi. Tämän jälkeen tulee ensimmäinen dokumentaatiokommentti (huomaa kolme vinoviivaa), joka on lyhyt ja ytimekäs kuvaus tästä luokasta. Huomaa, että jossain dokumentaation tiivistelmissä näytetään vain tuo ensimmäinen virke. [DOC] [HYV]</p>
    </div>
    
    <div id="par-163" class="paragraph">
        <p>Dokumenttikommettien ansiosta ohjelmasta saadaan aikanaan vastaava dokumentaatio kuin <a href="http://kurssit.it.jyu.fi/npo/material/latest/documentation/html/annotated.html">Jyplistä</a>.</p>
    </div>
    
    <div id="par-164" class="paragraph">
        <p><em>Dokumentointi on erittäin keskeinen osa ohjelmistotyötä</em>. Luokkien ja koodirivien määrän kasvaessa dokumentointi helpottaa niin omaa työskentelyä kuin tulevien käyttäjien ja ylläpitäjien tehtävää. Dokumentoinnin tärkeys näkyy muun muassa siinä, että jopa 40-60% ylläpitäjien ajasta kuluu muokattavan ohjelman ymmärtämiseen. [KOSK][KOS]</p>
    </div>
    
    <div id="par-165" class="paragraph">
        <h1 id="algoritmit">3. Algoritmit</h1>
    </div>
    
    <div id="par-166" class="paragraph">
        <blockquote>
<p>“First, solve the problem. Then, write the code.” - John Johnson</p>
</blockquote>
    </div>
    
    <div id="par-167" class="paragraph">
        <h2 id="mikä-on-algoritmi">3.1 Mikä on algoritmi?</h2>
    </div>
    
    <div id="par-168" class="paragraph">
        <p>Pyrittäessä kirjoittamaan koneelle kelpaavia ohjeita joudutaan suoritettavana oleva toimenpide kirjaamaan sarjana yksinkertaisia toimenpiteitä. Toimenpidesarjan tulee olla yksikäsitteinen, eli sen tulee joka tilanteessa tarjota yksi ja vain yksi tapa toimia, eikä siinä saa esiintyä ristiriitaisuuksia. Yksikäsitteistä kuvausta tehtävän ratkaisuun tarvittavista toimenpiteistä kutsutaan algoritmiksi.</p>
    </div>
    
    <div id="par-169" class="paragraph">
        <p>Ohjelman kirjoittaminen voidaan aloittaa hahmottelemalla tarvittavat algoritmit eli kirjaamalla lista niistä toimenpiteistä, joita tehtävän suoritukseen tarvitaan:</p>
    </div>
    
    <div id="par-170" class="paragraph">
        <pre><code>Kahvin keittäminen:

1.  Täytä pannu vedellä.
2.  Keitä vesi.
3.  Lisää kahvijauhot.
4.  Anna tasaantua.
5.  Tarjoile kahvi.</code></pre>
    </div>
    
    <div id="par-171" class="paragraph">
        <p>Algoritmi on yleisesti ottaen mahdollisimman pitkälle tarkennettu toimenpidesarja, jossa askel askeleelta esitetään yksikäsitteisessä muodossa ne toimenpiteet, joita asetetun ongelman ratkaisuun tarvitaan.</p>
    </div>
    
    <div id="par-172" class="paragraph">
        <h2 id="tarkentaminen">3.2 Tarkentaminen</h2>
    </div>
    
    <div id="par-173" class="paragraph">
        <p>Kun tarkastellaan lähes mitä tahansa tehtävänantoa, huomataan, että tehtävän suoritus koostuu selkeästi toisistaan eroavista osatehtävistä. Se, miten yksittäinen osatehtävä ratkaistaan, ei vaikuta muiden osatehtävien suorittamiseen. Vain sillä, että kukin osasuoritus tehdään, on merkitystä. Esimerkiksi pannukahvinkeitossa jokainen osatehtävä voidaan jakaa edelleen osasiin:</p>
    </div>
    
    <div id="par-174" class="paragraph">
        <pre><code>Kahvinkeitto:

1.  Täytä pannu vedellä:
  1.1.  Pistä pannu hanan alle.
  1.2.  Avaa hana.
  1.3.  Anna veden valua, kunnes vettä on riittävästi.
  1.4   Sulje hana.
2.  Keitä vesi:
  2.1.  Aseta pannu hellalle.
  2.2.  Kytke virta keittolevyyn.
  2.3.  Anna lämmetä, kunnes vesi kiehuu.
  2.4   Sammuta virta.
3.  Lisää kahvinporot:
  3.1.  Mittaa kahvinporot.
  3.2.  Sekoita kahvinporot kiehuvaan veteen.
4.  Anna tasaantua:
  4.1.  Odota, kunnes suurin osa valmiista kahvista on vajonnut
        pannun pohjalle.
5.  Tarjoile kahvi:
  5.1.  Tämä sitten onkin jo oma tarinansa...</code></pre>
    </div>
    
    <div id="par-175" class="paragraph">
        <p>Edellä esitetyn kahvinkeitto-ongelman ratkaisu esitettiin jakamalla ratkaisu viiteen osavaiheeseen. Ratkaisun algoritmi sisältää viisi toteutettavaa lausetta. Kun näitä viittä lausetta tarkastellaan lähemmin, osoittautuu, että niistä kukin on edelleen jaettavissa osavaiheisiin, eli ratkaisun pääalgoritmi voidaan jakaa edelleen alialgoritmeiksi, joissa askel askeleelta esitetään, kuinka kukin osatehtävä ratkaistaan.</p>
    </div>
    
    <div id="par-176" class="paragraph">
        <p>Algoritmien kirjoittaminen osoittautuu hierarkkiseksi prosessiksi, jossa aluksi tehtävä jaetaan osatehtäviin, joita edelleen tarkennetaan, kunnes kukin osatehtävä on niin yksinkertainen, ettei sen suorittamisessa enää ole mitään moniselitteistä.</p>
    </div>
    
    <div id="par-177" class="paragraph">
        <h2 id="yleistäminen">3.3 Yleistäminen</h2>
    </div>
    
    <div id="par-178" class="paragraph">
        <p>Eräs tärkeä algoritmien kirjoittamisen vaihe on yleistäminen. Tällöin valmiiksi tehdystä algoritmista pyritään paikantamaan kaikki alunperin annetusta tehtävästä riippuvat tekijät, ja pohditaan voitaisiinko ne kenties kokonaan poistaa tai korvata joillakin yleisemmillä tekijöillä.</p>
    </div>
    
    <div id="par-179" class="paragraph">
        <h2 id="harjoitus">3.4 Harjoitus</h2>
    </div>
    
    <div id="par-180" class="paragraph">
        <p>Tarkastele edellä esitettyä algoritmia kahvin keittämiseksi ja luo vastaava algoritmi teen keittämiseksi. Vertaile algoritmeja: mitä samaa ja mitä eroa niissä on? Onko mahdollista luoda algoritmi, joka yksiselitteisesti selviäisi sekä kahvin että teen keitosta? Onko mahdollista luoda algoritmi, joka saman tien selviytyisi maitokaakosta ja rommitotista?</p>
    </div>
    
    <div id="par-181" class="paragraph">
        <h2 id="peräkkäisyys">3.5 Peräkkäisyys</h2>
    </div>
    
    <div id="par-182" class="paragraph">
        <p>Kuten luvussa 1 olevassa reseptissä ja muissakin ihmisille kirjoitetuissa ohjeissa, niin myös tietokoneelle esitetyt ohjeet luetaan ylhäältä alaspäin, ellei muuta ilmoiteta. Esimerkiksi ohjeen lumiukon piirtämisestä voisi esittää yksinkertaistettuna alla olevalla tavalla.</p>
    </div>
    
    <div id="par-183" class="paragraph">
        <pre><code>Piirrä säteeltään 20cm kokoinen ympyrä koordinaatiston pisteeseen (20, 80)
Piirrä säteeltään 15cm kokoinen ympyrä edellisen ympyrän päälle
Piirrä säteeltään 10cm kokoinen ympyrä edellisen ympyrän päälle</code></pre>
    </div>
    
    <div id="par-184" class="paragraph">
        <p>Yllä oleva koodi ei ole vielä mitään ohjelmointikieltä, mutta se sisältää jo ajatuksen siitä kuinka lumiukko voitaisiin tietokoneella piirtää. Piirrämme lumiukon C#-ohjelmointikielellä seuraavassa luvussa.</p>
    </div>
    
    <div id="par-185" class="paragraph">
        <p>Otetaan seuraavaksi esimerkki eräästä algoritmista. Oletetaan että sinulla on tilanne, missä on taulukko lukuja ja kaikille taulukon luvuille pitäisi saada sama arvo kuin taulukon ensimmäiselle luvulle. Voit seuraavassa tehtävässä tehdä tälle "algoritmin" käyttämällä Tauno-ohjelmaa (=TAUlukot NOhevasti).</p>
    </div>
    
    <div id="par-186" class="paragraph">
        <p>Taunossa raahaa taulukon alkioita niin, että sinulla on lopuksi haluamasi tulos. Katso samalla minkälaista koodia Tauno sinulle generoi. Tämä on C#-kielinen <em>algoritmi</em> tehtävän tekemiseksi. Jos haluat aloittaa Tauno-tehtävän alusta, piilota ja näytä Tauno uudelleen.</p>
    </div>
    
    <div id="par-187" class="paragraph">
        <div id='1.kaikkisamaksi' data-plugin='/taunoPlugin'><cs-tauno-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f5461756e6f2f4b6173697474656c652e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022544f444f3a2054455354495420544148414e222c202275736572636f6465223a20222020202020202020696e7420613b5c6e202020202020202061203d20745b305d3b5c6e2020202020202020745b305d203d20745b355d3b5c6e2020202020202020745b355d203d20613b5c6e202020202020202061203d20745b315d3b5c6e2020202020202020745b315d203d20745b345d3b5c6e2020202020202020745b345d203d20613b222c20227374656d223a2022546565205461756e6f6c6c61206f686a656c6d612c206a6f6c6c61206b61696b6b6920616c6b696f74206f7661742073616d6f6a61206b75696e207461756c756b6f6e20766173656d6d616e70756f6c656973696e20616c6b696f2e222c202274797065223a2022636f6e736f6c652f636f6d74657374222c20226d6178726f7773223a20223130222c20226279436f6465223a2022222c2022686561646572223a2022546568745c7530306534765c75303065342036222c2022706c616365686f6c646572223a20224e5c753030653479745c753030653420656e73696e205461756e6f2c2074656520746568745c7530306534765c7530306534206a61206b6f70696f692073697474656e205461756e6f6e206b6f6f646920745c7530306534685c75303065346e222c20227461756e6f74797065223a2022707461756e6f222c20227461736b4944223a2022312e6b61696b6b6973616d616b7369222c20227265706c616365223a2022544f444f3a204b6f70696f69222c20226279436f646531223a20222f2f5c6e202020202f2f2f202020202035352c2034342c2033332c20322c20352c2039207c2035352c2035352c2035352c2035352c2035352c2035355c6e202020202f2f2f202020202032332c2034352c2031322c20392c20332c2037207c2032332c2032332c2032332c2032332c2032332c203233227d</cs-tauno-runner></div>
    </div>
    
    <div id="par-188" class="paragraph">
        <p>Mieti onko edellä tekemäsi Tauno-vastaus sellainen, missä suoritettavien lauseiden järjestyksen saisi vaihtaa? Jos on, koodi on <em>rinnakkaistuvaa</em>, jos järjestyksen vaihtaminen taas rikkoisi "algortimin", niin koodi on puhtaasti <em>peräkkäistä</em>.</p>
    </div>
    
    <div id="par-189" class="paragraph">
        <h1 id="yksinkertainen-graafinen-c-ohjelma">4. Yksinkertainen graafinen C#-ohjelma</h1>
    </div>
    
    <div id="par-190" class="paragraph">
        <p>Seuraavissa esimerkeissä käytetään Jyväskylän yliopistossa kehitettyä <em>Jypeli-ohjelmointikirjastoa.</em> Alunperin kirjasto suunniteltiin ja toteutettiin <em>Nuorten Peliohjelmointi</em> -kurssille, mutta sen todettiin hyvin sopivan myös Ohjelmointi 1 -tasoiselle kurssille. Kirjaston voit ladata koneelle osoitteesta</p>
    </div>
    
    <div id="par-191" class="paragraph">
        <blockquote>
<p><a href="https://trac.cc.jyu.fi/projects/npo/wiki/LataaJypeli" class="uri">https://trac.cc.jyu.fi/projects/npo/wiki/LataaJypeli</a>,</p>
</blockquote>
    </div>
    
    <div id="par-192" class="paragraph">
        <p>josta löytyy myös ohjeet kirjaston asennukseen ja käyttöön. Huomaa, että tietokoneellasi tulee olla asennettuna .NET Framework 4 sekä XNA Game Studio 4, jotta graafinen ohjelma voidaan kääntää. .NET-frameworkin asennusohjeet löytyvät osoitteesta</p>
    </div>
    
    <div id="par-193" class="paragraph">
        <blockquote>
<p><a href="https://trac.cc.jyu.fi/projects/ohj1/wiki/dotnet-tyokalut" class="uri">https://trac.cc.jyu.fi/projects/ohj1/wiki/dotnet-tyokalut</a>.</p>
</blockquote>
    </div>
    
    <div id="par-194" class="paragraph">
        <p>Vaikka tässä kohtaa emme vielä Visual Studio -kehitysympäristöä tarvitsekaan, on sen asentaminen tässä kohtaa myös viisasta, sillä Visual Studio tulisi olla asennettuna ennen XNA:n ja Jypelin asentamista.</p>
    </div>
    
    <div id="par-195" class="paragraph">
        <h2 id="mikä-on-kirjasto">4.1 Mikä on kirjasto?</h2>
    </div>
    
    <div id="par-196" class="paragraph">
        <p>C#-ohjelmat koostuvat luokista. Luokat taas sisältävät metodeja (ja aliohjelmia/funktioita), jotka suorittavat tehtäviä ja mahdollisesti palauttavat arvoja suoritettuaan näitä tehtäviä. Metodi voisi esimerkiksi laskea kahden luvun summan ja palauttaa tuloksen tai piirtää ohjelmoijan haluaman kokoisen ympyrän. Samaan asiaan liittyviä metodeja kootaan luokkaan ja luokkia kootaan edelleen kirjastoiksi. Idea kirjastoissa on, ettei kannata tehdä uudelleen sitä minkä joku on jo tehnyt. Toisin sanoen, pyörää ei kannata keksiä uudelleen.</p>
    </div>
    
    <div id="par-197" class="paragraph">
        <p>C#-ohjelmoijan kannalta oleellisin kirjasto on .NET Framework luokkakirjasto. Luokkakirjaston dokumentaatioon (documentation) kannattaa tutustua, sillä sieltä löytyy monia todella hyödyllisiä metodeja. Dokumentaatio löytyy Microsoftin sivuilta osoitteesta</p>
    </div>
    
    <div id="par-198" class="paragraph">
        <blockquote>
<p><a href="http://msdn.microsoft.com/en-us/library/ms229335.aspx" class="uri">http://msdn.microsoft.com/en-us/library/ms229335.aspx</a>.</p>
</blockquote>
    </div>
    
    <div id="par-199" class="paragraph">
        <div class="huomautus">
<p><em>Luokkadokumentaatio =</em> Sisältää tiedot kaikista kirjaston luokista ja niiden metodeista (ja aliohjelmista). Löytyy useimmiten ainakin WWW-muodossa.</p>
</div>
    </div>
    
    <div id="par-200" class="paragraph">
        <h2 id="jypeli-kirjasto">4.2 Jypeli-kirjasto</h2>
    </div>
    
    <div id="par-201" class="paragraph">
        <p>Jypeli-kirjaston kehittäminen aloitettiin Jyväskylän yliopistossa keväällä 2009. Tämän monisteen esimerkeissä käytetään versiota 4. Jypeli-kirjastoon on kirjoitettu valmiita luokkia ja metodeja siten, että esimerkiksi fysiikan ja matematiikan ilmiöiden, sekä pelihahmojen ja liikkeiden ohjelmointi lopulliseen ohjelmaan on helpompaa.</p>
    </div>
    
    <div id="par-202" class="paragraph">
        <h2 id="esimerkki-lumiukko">4.3 Esimerkki: Lumiukko</h2>
    </div>
    
    <div id="par-203" class="paragraph">
        <p>Piirretään lumiukko käyttämällä Jypeli-kirjastoa. Mallikoodin vasemmassa reunassa juoksee myös rivinumerointi, joka ei kuulu koodiin, mutta helpottaa lukemista.</p>
    </div>
    
    <div id="par-204" class="paragraph">
        <pre><code>01 // Otetaan käyttöön Jyväskylän yliopiston Jypeli-kirjasto
02 using Jypeli;
03 
04 /// @author  Vesa Lappalainen, Antti-Jussi Lakanen 
05 /// @version 22.12.2011
06 ///
07 ///
08 /// &lt;summary&gt;
09 /// Luokka, jossa harjoitellaan piirtämistä lisäämällä ympyröitä ruudulle
10 /// &lt;/summary&gt;
11 public class Lumiukko : PhysicsGame
12 {
13
14   /// &lt;summary&gt;
15   /// Pääohjelmassa laitetaan "peli" käyntiin Jypelille tyypilliseen tapaan    
16   /// &lt;/summary&gt;
17   public static void Main()
18   {
19     using (Lumiukko peli = new Lumiukko())
20     {
21       peli.Run();
22     }
23   }
24   
25   /// &lt;summary&gt;
26   /// Piirretään oliot ja zoomataan kamera niin että kenttä näkyy kokonaan.
27   /// &lt;/summary&gt;
28   public override void Begin()
29   {
30     Camera.ZoomToLevel();
31     Level.Background.Color = Color.Black;
32     
33     PhysicsObject p1 = new PhysicsObject(2*100, 2*100, Shape.Circle);
34     p1.Y = Level.Bottom + 200;
35     Add(p1);
36     
37     PhysicsObject p2 = new PhysicsObject(2 * 50, 2 * 50, Shape.Circle);
38     p2.Y = p1.Y + 100 + 50;
39     Add(p2);
40     
41     PhysicsObject p3 = new PhysicsObject(2 * 30, 2 * 30, Shape.Circle);
42     p3.Y = p2.Y + 50 + 30;
43     Add(p3);
44   }
45 }</code></pre>
    </div>
    
    <div id="par-205" class="paragraph">
        <p>Ajettaessa ohjelman tulisi piirtää yksinkertainen lumiukko keskelle ruutua, kuten alla olevassa kuvassa.</p>
    </div>
    
    <div id="par-206" class="paragraph">
        <div id='1.k2' data-plugin='/showImage'><img width="280" src="/csimages/ohj1/luentomonistecsUusin_htm_m793342fb.png">
<p class="footer">Kuva 2: Lumiukko Jypeli-kirjaston avulla piirrettynä</p>
</div>
    </div>
    
    <div id="par-207" class="paragraph">
        <p>Jatkoa varten hieman lyhennämme ohjelmaa ja aina samanlaisena toistuvan pääohjelman kirjoitamme omaan erilliseen tiedostoonsa. Näin voimme paremmin keskittyä pelkästään itse ongelmaan. Kokeile lisätä lumiukkoon neljäs pallo.</p>
    </div>
    
    <div id="par-208" class="paragraph">
        <div id='1.lumiukko' data-plugin='/csPlugin'><cs-jypeli-runner>xxxHEXJSONxxx7b22686561646572223a2022546568745c7530306534765c75303065342037222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f4a7970656c692f4a7970656c692e6373222c202274797065223a20226a7970656c69222c2022757365725f6964223a2022766573616c222c20227461736b4944223a2022312e6c756d69756b6b6f222c20227265706c616365223a2022494e5345525420594f555220434f44452048455245222c20227374656d223a20224c69735c75303065345c7530306534206c756d69756b6b6f6f6e206e656c6a5c7530306534732070616c6c6f222c20226d6178726f7773223a20223235222c20226279436f6465223a2022202020202020202043616d6572612e5a6f6f6d546f4c6576656c28293b202f2f207461692043616d6572612e5a6f6f6d546f416c6c4f626a6563747328293b5c6e20202020202020204c6576656c2e4261636b67726f756e642e436f6c6f72203d20436f6c6f722e426c61636b3b5c6e20202020202020205c6e2020202020202020506879736963734f626a656374207031203d206e657720506879736963734f626a6563742820322a3130302c20322a3130302c2053686170652e436972636c65293b5c6e202020202020202070312e58203d20303b2070312e59203d204c6576656c2e426f74746f6d202b203230303b5c6e2020202020202020416464287031293b5c6e20202020202020205c6e2020202020202020506879736963734f626a656374207032203d206e657720506879736963734f626a6563742820322a35302c20322a35302c2053686170652e436972636c6520293b5c6e202020202020202070322e58203d20303b2070322e59203d2070312e59202b20313030202b2035303b5c6e2020202020202020416464287032293b5c6e20202020202020205c6e2020202020202020506879736963734f626a656374207033203d206e657720506879736963734f626a6563742820322a33302c20322a33302c2053686170652e436972636c6520293b5c6e202020202020202070332e58203d20303b2070332e59203d2070322e59202b203530202b2033303b5c6e2020202020202020416464287033293b227d</cs-jypeli-runner></div>
    </div>
    
    <div id="par-209" class="paragraph">
        <h3 id="ohjelman-suoritus">4.3.1 Ohjelman suoritus</h3>
    </div>
    
    <div id="par-210" class="paragraph">
        <p>Ohjelman suoritus aloitetaan aina pääohjelmasta ja sitten edetään rivi riviltä ylhäältä alaspäin ohjelman loppuun niin kauan kuin lauseita riittää. Ohjelmassa voi olla myös rakenteita, joissa toistetaan tiettyjä rivejä useampaan. Pääohjelmassa (samoin kuin kaikissa muissakin aliohjelmissa) voi olla myös aliohjelmakutsuja jolloin siirrytään pääohjelmasta suorittamaan aliohjelmaa ja palataan sitten takaisin pääohjelman (kutsuvan aliohjelman) suoritukseen. Aliohjelmista puhutaan enemmän luvussa 6. Itse asiassa edellisissä esimerkeissäkin kutsu <code>Add(p1))</code> oli aliohjelmakutsu.</p>
    </div>
    
    <div id="par-211" class="paragraph">
        <h3 id="ohjelman-oleellisemmat-kohdat">4.3.2 Ohjelman oleellisemmat kohdat</h3>
    </div>
    
    <div id="par-212" class="paragraph">
        <p>Tarkastellaan ohjelman oleellisempia kohtia.</p>
    </div>
    
    <div id="par-213" class="paragraph">
        <pre><code>02 using Jypeli;</code></pre>
    </div>
    
    <div id="par-214" class="paragraph">
        <p>Aluksi meidän täytyy kertoa kääntäjälle, että haluamme ottaa käyttöön koko Jypeli-kirjaston. Nyt Jypeli-kirjaston kaikki luokat (ja niiden metodit) ovat käytettävissämme. Itse asiassa meidän ei olisi pakko kirjoittaa tätä <code>using</code>-lausetta. Mutta jos jätämme sen pois, ei kääntäjä enää tunne mikä on esimerkiksi sana <code>PhysicsGame</code>. Ongelma voitaisiin kiertää sanomalla että se löytyy kirjastosta <code>Jypeli</code>:</p>
    </div>
    
    <div id="par-215" class="paragraph">
        <pre><code>11 public class Lumiukko : Jypeli.PhysicsGame</code></pre>
    </div>
    
    <div id="par-216" class="paragraph">
        <p>Ja samalla tavalla <code>Jypeli.</code> pitäisi lisätä kaikkien muidenkin <code>Jypeli</code>ssä olevien sanojen eteen. Eli helpotamme omaa kirjoittamista sanomalla että käytetään <code>Jypeli</code>ä. Itse asiassa jos olisimme <code>HelloWorld.cs</code> -tiedostossa sanoneet alussa:</p>
    </div>
    
    <div id="par-217" class="paragraph">
        <pre><code>using System;</code></pre>
    </div>
    
    <div id="par-218" class="paragraph">
        <p>olisi riittänyt kirjoittaa tulostamista varten:</p>
    </div>
    
    <div id="par-219" class="paragraph">
        <pre><code>    Console.WriteLine("Hello World!");</code></pre>
    </div>
    
    <div id="par-220" class="paragraph">
        <p>Mutta jatketaan ohjelman tutkimista:</p>
    </div>
    
    <div id="par-221" class="paragraph">
        <pre><code>08 /// &lt;summary&gt;
09 /// Luokka, jossa harjoitellaan piirtämistä lisäämällä ympyröitä ruudulle
10 /// &lt;/summary&gt;
11 public class Lumiukko : PhysicsGame
12 {</code></pre>
    </div>
    
    <div id="par-222" class="paragraph">
        <p>Rivit 8-10 ovat dokumentaatiokommentteja. Rivillä 11 luodaan <code>Lumiukko</code>-luokka, joka hieman poikkeaa <code>HelloWorld</code>-esimerkin tavasta luoda uusi luokka. Tässä kohtaa käytämme ensimmäisen kerran Jypeli-kirjastoa, ja koodissa kerrommekin, että <code>Lumiukko</code>-luokka, jota juuri olemme tekemässä, "perustuu" Jypeli-kirjastossa olevaan <code>PhysicsGame</code>-luokkaan. Täsmällisemmin sanottuna <code>Lumiukko</code>-luokka peritään <code>PhysicsGame</code>-luokasta. Näin <code>Lumiukko</code>-luokka saa käyttöönsä kaikki <code>PhysicsGame</code>-luokan ominaisuudet ja voi itse lisätä siihen uusia ominaisuuksia. Tässä lisäämme tuon <code>Begin</code>-metodin toiminnan, eli mitä "pelin" alussa piirretään. <code>Begin</code>onkin tavallaan Jypeli-ohjelman "pääohjelma".</p>
    </div>
    
    <div id="par-223" class="paragraph">
        <p>Tuon <code>PhysicsGame</code>-luokan avulla objektien piirtäminen, myöhemmin liikuttelu ruudulla ja fysiikan lakien hyödyntäminen on vaivatonta.</p>
    </div>
    
    <div id="par-224" class="paragraph">
        <pre><code>14   /// &lt;summary&gt;
15   /// Pääohjelmassa laitetaan "peli" käyntiin Jypelille tyypilliseen tapaan.    
16   /// &lt;/summary&gt;
17   public static void Main()
18   {
19     using (Lumiukko peli = new Lumiukko())
20     {
21       peli.Run();
22     }
23   }</code></pre>
    </div>
    
    <div id="par-225" class="paragraph">
        <p>Myös <code>Main</code>-metodi, eli pääohjelma, on Jypeli-peleissä käytännössä aina tällainen vakiomuotoinen, joten jatkossa siihen ei tarvitse juurikaan koskea. Ohitamme tässä vaiheessa pääohjelman sisällön mainitsemalla vain, että pääohjelmassa <code>Lumiukko</code>-luokasta luodaan uusi olio (eli uusi "peli"), joka sitten laitetaan käyntiin peli.Run()-kohdassa. Jypeli-kirjaston rakenteesta johtuen kaikki varsinainen peliin liittyvä koodi kirjoitetaan omiin aliohjelmiinsa. <code>Begin</code>-aliohjelmaan, jota käsittelemme seuraavaksi, kirjoitetaan se, mitä tapahtuu "pelin" alussa.</p>
    </div>
    
    <div id="par-226" class="paragraph">
        <p>Tarkasti ottaen <code>Begin</code> alkaa riviltä 29. Ensimmäinen lause on kirjoitettu riville 30.</p>
    </div>
    
    <div id="par-227" class="paragraph">
        <pre><code>30     Camera.ZoomToLevel();
31     Level.Background.Color = Color.Black;</code></pre>
    </div>
    
    <div id="par-228" class="paragraph">
        <p>Näistä kahdesta rivistä ensimmäisellä kutsutaan <code>Camera</code>-luokan <code>ZoomToLevel</code>-aliohjelmaa, joka pitää huolen siitä, että "kamera" on kohdistettuna ja zoomattuna oikeaan kohtaan. Aliohjelma ei ota vastaan parametreja, joten sulkujen sisältö jää tyhjäksi. Toisella rivillä muutetaan taustan väri.</p>
    </div>
    
    <div id="par-229" class="paragraph">
        <pre><code>33     PhysicsObject p1 = new PhysicsObject(2*100, 2*100, Shape.Circle);
34     p1.Y = Level.Bottom + 200;
35     Add(p1);</code></pre>
    </div>
    
    <div id="par-230" class="paragraph">
        <p>Näiden kolmen rivin aikana luomme uuden fysiikkaolio-ympyrän, annamme sille säteen, y-koordinaatin, sekä lisäämme sen "pelikentälle", eli näkyvälle alueelle valmiissa ohjelmassa. Jos x-koordinaatin (tai y-koordinaatin) arvoa ei anneta, on se oletuksena 0.</p>
    </div>
    
    <div id="par-231" class="paragraph">
        <p>Tarkemmin sanottuna luomme uuden <code>PhysicsObject</code>-<em>olion</em> eli <code>PhysicsObject</code>-luokan <em>ilmentymän</em>, jonka nimeksi annamme <code>p1</code>. <code>PhysicsObject</code>-oliot ovat pelialueella liikkuvia olioita, jotka noudattavat fysiikan lakeja. Sulkujen sisään laitamme tiedon siitä, millaisen objektin haluamme luoda - tässä tapauksessa leveys ja korkeus (Jypeli-mitoissa, ei pikseleissä), sekä olion muoto. Teemme siis ympyrän (<code>Circle</code>)), jonka säde on <code>100 (leveys = 2 * 100 ja korkeus = 2 * 100)</code>. Muita <code>Shape</code>-kokoelmasta löytyviä muotoja ovat muiden muassa kolmio (<code>Triangle</code>), ellipsi (<code>Ellipse</code>), suorakaide (<code>Rectangle</code>), sydän (<code>Heart</code>) jne. Olioista puhutaan lisää luvussa 8.</p>
    </div>
    
    <div id="par-232" class="paragraph">
        <div id='1.muodot' data-plugin='/csPlugin'><cs-jypeli-runner>xxxHEXJSONxxx7b22686561646572223a2022546568745c7530306534765c75303065342038222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f4a7970656c692f4a7970656c692e6373222c202274797065223a20226a7970656c69222c2022757365725f6964223a2022766573616c222c2022726f7773223a202231222c20227461736b4944223a2022312e6d756f646f74222c20227265706c616365223a2022494e5345525420594f555220434f44452048455245222c20227374656d223a20224b6f6b65696c652069747365206d757574746161206f6c696f6e206d756f746f613a222c202275736572636f6465223a202220202020202020204c6576656c2e4261636b67726f756e642e436f6c6f72203d20436f6c6f722e426c61636b3b5c6e202020202020202047616d654f626a6563742070616c6c6f203d206e65772047616d654f626a656374283230302c203230302c2053686170652e52656374616e676c65293b5c6e202020202020202070616c6c6f2e436f6c6f72203d20436f6c6f722e59656c6c6f773b5c6e20202020202020204164642870616c6c6f293b222c20226d6178726f7773223a20223230222c20226279436f6465223a202220202020202020204c6576656c2e4261636b67726f756e642e436f6c6f72203d20436f6c6f722e426c61636b3b5c6e2020202020202020506879736963734f626a6563742070616c6c6f203d206e657720506879736963734f626a656374283230302c203230302c2053686170652e436972636c65293b5c6e202020202020202070616c6c6f2e436f6c6f72203d20436f6c6f722e59656c6c6f773b5c6e20202020202020204164642870616c6c6f293b227d</cs-jypeli-runner></div>
    </div>
    
    <div id="par-233" class="paragraph">
        <pre><code>34     p1.Y = Level.Bottom + 200;</code></pre>
    </div>
    
    <div id="par-234" class="paragraph">
        <p>Seuraavalla rivillä asetetaan olion paikka Y-arvon avulla. Huomaa että <code>Y</code> kirjoitetaan isolla kirjaimella. Tämä on <code>p1</code>-olion ominaisuus eli attribuutti. X-koordinaattia meidän ei tarvitse tässä erikseen asettaa, se on oletusarvoisesti 0 ja se kelpaa meille. Saadaksemme ympyrät piirrettyä oikeille paikoilleen, täytyy meidän laskea koordinaattien paikat. Oletuksena ikkunan keskipiste on koordinaatiston origo eli piste (0, 0). x-koordinaatin arvot kasvavat oikealle ja y:n arvot ylöspäin, samoin kuin "normaalissa" koulusta tutussa koordinaatistossa.</p>
    </div>
    
    <div id="par-235" class="paragraph">
        <p>Koordinaatti voidaan antaa myös vektori-muodossa, jolloin annetaan koordinaatin molemmat komponentit samalla kertaa. Esimerkiksi edellisessä "muoto"-tehtävässä pallo voitaiisiin sijoittaa paikkaan <code>x=20</code>, <code>y=50</code> myös koodilla:</p>
    </div>
    
    <div id="par-236" class="paragraph">
        <pre><code>pallo.Position = new Vector(20,50); </code></pre>
    </div>
    
    <div id="par-237" class="paragraph">
        <p>Peliolio täytyy aina lisätä kentälle, ennen kuin se saadaan näkyviin. Tämä tapahtuu <code>Add</code>-metodin avulla, joka ottaa parametrina kentälle lisättävän olion nimen (tässä <code>p1</code>).</p>
    </div>
    
    <div id="par-238" class="paragraph">
        <p>Metodeille annettavia tietoja sanotaan <em>parametreiksi</em> (parameter). <code>ZoomToLevel</code>-metodi ei ota vastaan yhtään parametria, mutta <code>Add</code>-metodi sen sijaan ottaa yhden parametrin: <code>PhysicsObject</code>-tyyppisen olion. <code>Add</code>-metodille voidaan antaa toinenkin parametri: <em>tasonnumero</em>, jolle olio lisätään. Tasojen avulla voidaan hallita, mitkä oliot lisätään päällimmäiseksi. Tasoparametri voidaan kuitenkin jättää antamatta, jolloin ohjelma itse päättää tasojen parhaan järjestyksen. Parametrit kirjoitetaan metodin nimen perään sulkeisiin ja ne erotetaan toisistaan pilkuilla.</p>
    </div>
    
    <div id="par-239" class="paragraph">
        <pre><code>MetodinNimi(parametri1, parametri2,..., parametriX);</code></pre>
    </div>
    
    <div id="par-240" class="paragraph">
        <p>Seuraavien rivien aikana luomme vielä kaksi ympyrää vastaavalla tavalla, mutta vaihtaen sädettä ja ympyrän koordinaatteja.</p>
    </div>
    
    <div id="par-241" class="paragraph">
        <p>Esimerkissä koordinaattien laskemiseen on käytetty C#:n <em>aritmeettisia operaatioita</em>. Voisimme tietenkin laskea koordinaattien pisteet myös itse, mutta miksi tehdä niin jos tietokone voi laskea pisteet puolestamme? C#:n aritmeettiset perusoperaatiot ovat summa (+), vähennys (<code>-</code>), kerto (<code>*</code>), jako (<code>/</code>) ja jakojäännös (<code>%</code>). Aritmeettisista operaatioista puhutaan lisää muuttujien yhteydessä kohdassa 7.7.1.</p>
    </div>
    
    <div id="par-242" class="paragraph">
        <p>Keskimmäinen ympyrä tulee alimman ympyrän yläpuolelle niin, että ympyrät sivuavat toisiaan. Keskimmäisen ympyrän keskipiste sijoittuu siis siten, että sen x-koordinaatti on 0 ja y-koordinaatti on <em>alimman ympyrän paikka</em> +<em>alimman ympyrän säde + keskimmäisen ympyrän säde</em>. Kun haluamme, että keskimmäisen ympyrän säde on 50, niin silloin keskimmäisen ympyrän keskipiste tulee kohtaan <code>(0, p1.Y + 100 + 50)</code> ja se piirretään lauseella:</p>
    </div>
    
    <div id="par-243" class="paragraph">
        <pre><code>PhysicsObject p2 = new PhysicsObject(2 * 50, 2 * 50, Shape.Circle);
p2.Y = p1.Y + 100 + 50;
Add(p2);</code></pre>
    </div>
    
    <div id="par-244" class="paragraph">
        <p>Huomaa, että fysiikkaolion Y-ominaisuuden asettamisen (<em>set</em>) lisäksi voimme myös lukea tai pyytää (<em>get</em>) kyseisen ominaisuuden arvon. Yllä teemme sen kirjoittamalla yksinkertaisesti sijoitusoperaattorin oikealle puolelle <code>p1.Y</code>.</p>
    </div>
    
    <div id="par-245" class="paragraph">
        <p>Seuraava kuva havainnollistaa ensimmäisen ja toisen pallon asettelua.</p>
    </div>
    
    <div id="par-246" class="paragraph">
        <div id='1.k3' data-plugin='/showImage'><img height="340" src="/csimages/ohj1/luentomonistecsUusin_htm_m58b94a29.png">
<p class="footer">Kuva 3: Lumiukon kaksi ensimmäistä palloa asemoituina paikoilleen.</p>
</div>
    </div>
    
    <div id="par-247" class="paragraph">
        <p>Ylin ympyrä sivuaa sitten taas keskimmäistä ympyrää. Harjoitustehtäväksi jätetään laskea ylimmän ympyrän koordinaatit, kun ympyrän säde on 30.</p>
    </div>
    
    <div id="par-248" class="paragraph">
        <p>Kaikki tiedot luokista, luokkien metodeista sekä siitä mitä parametreja metodeille tulee antaa löydät käyttämäsi kirjaston dokumentaatiosta. Jypelin luokkadokumentaatio löytyy osoitteesta:</p>
    </div>
    
    <div id="par-249" class="paragraph">
        <blockquote>
<p><a href="http://kurssit.it.jyu.fi/npo/material/latest/documentation/html/" class="uri">http://kurssit.it.jyu.fi/npo/material/latest/documentation/html/</a>.</p>
</blockquote>
    </div>
    
    <div id="par-250" class="paragraph">
        <div id='1.pallonpaikka' data-plugin='/csPlugin'><cs-jypeli-runner>xxxHEXJSONxxx7b22686561646572223a2022546568745c7530306534765c75303065342039222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f4a7970656c692f4a7970656c692e6373222c202274797065223a20226a7970656c69222c2022757365725f6964223a2022766573616c222c2022726f7773223a202231222c20227461736b4944223a2022312e70616c6c6f6e7061696b6b61222c20227265706c616365223a2022494e5345525420594f555220434f44452048455245222c20227374656d223a20224b6f6b65696c65206f6c696f6e207061696b616e207661696874616d69737461206b757473756c6c612070616c6c6f2e506f736974696f6e3d6e657720566563746f72286a6f6b75782c6a6f6b757929222c202275736572636f6465223a202220202020202020204c6576656c2e4261636b67726f756e642e436f6c6f72203d20436f6c6f722e426c61636b3b5c6e202020202020202047616d654f626a6563742070616c6c6f203d206e65772047616d654f626a656374283230302c203230302c2053686170652e436972636c65293b5c6e202020202020202070616c6c6f2e436f6c6f72203d20436f6c6f722e59656c6c6f773b5c6e20202020202020204164642870616c6c6f293b222c20226d6178726f7773223a20223230222c20226279436f6465223a202220202020202020204c6576656c2e4261636b67726f756e642e436f6c6f72203d20436f6c6f722e426c61636b3b5c6e2020202020202020506879736963734f626a6563742070616c6c6f203d206e657720506879736963734f626a656374283230302c203230302c2053686170652e436972636c65293b5c6e202020202020202070616c6c6f2e436f6c6f72203d20436f6c6f722e59656c6c6f773b5c6e20202020202020204164642870616c6c6f293b227d</cs-jypeli-runner></div>
    </div>
    
    <div id="par-251" class="paragraph">
        <h2 id="harjoitus-1">4.4 Harjoitus</h2>
    </div>
    
    <div id="par-252" class="paragraph">
        <p>Etsi Jypeli-kirjaston dokumentaatiosta RandomGen-luokka. Mitä tietoa löydät NextInt(int min, int max)-metodista? Mitä muita metodeja luokassa on?</p>
    </div>
    
    <div id="par-253" class="paragraph">
        <div id='1.randomint' data-plugin='/csPlugin'><cs-jypeli-runner>xxxHEXJSONxxx7b22686561646572223a2022546568745c7530306534765c7530306534203130222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f4a7970656c692f4a7970656c692e6373222c202274797065223a20226a7970656c69222c2022757365725f6964223a2022766573616c222c20227461736b4944223a2022312e72616e646f6d696e74222c202275736572636f6465223a202220202020202020204c6576656c2e4261636b67726f756e642e436f6c6f72203d20436f6c6f722e426c61636b3b5c6e202020202020202047616d654f626a6563742070616c6c6f203d206e65772047616d654f626a656374283230302c203230302c2053686170652e436972636c65293b5c6e202020202020202070616c6c6f2e58203d2052616e646f6d47656e2e4e657874496e74282d3230302c20323030293b5c6e202020202020202070616c6c6f2e59203d2052616e646f6d47656e2e4e657874496e74282d3230302c20323030293b5c6e20202020202020204164642870616c6c6f293b5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e652870616c6c6f2e58202b5c22205c22202b2070616c6c6f2e59293b222c20227374656d223a20225475746b69206d6974656e2070616c6c6f2073696a6f69747475752065726920616a6f6b6572726f696c6c612e20204b6f6b65696c65206f736161746b6f206c6169747461612070616c6c6f6c6c6520736174756e6e616973656e20765c753030653472696e2e222c20227265706c616365223a2022494e5345525420594f555220434f44452048455245222c20226279436f6465223a202220202020202020204c6576656c2e4261636b67726f756e642e436f6c6f72203d20436f6c6f722e426c61636b3b5c6e2020202020202020506879736963734f626a6563742070616c6c6f203d206e657720506879736963734f626a656374283230302c203230302c2053686170652e436972636c65293b5c6e202020202020202070616c6c6f2e58203d2052616e646f6d47656e2e4e657874496e74282d3230302c20323030293b5c6e202020202020202070616c6c6f2e59203d2052616e646f6d47656e2e4e657874496e74282d3230302c20323030293b5c6e20202020202020204164642870616c6c6f293b5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e652870616c6c6f2e58202b5c22205c22202b2070616c6c6f2e59293b227d</cs-jypeli-runner></div>
    </div>
    
    <div id="par-254" class="paragraph">
        <p>Seuraavassa esimerkissä on miten käytetään suoraan C#-kirjaston satunnaislukugeneraattoria. Esimerkki ajetaan <code>Mono</code>-järjestelmän alla ja se antaa satunnaisluvun osalta erilaisia tuloksia kuin <code>.net</code> -ajoympäristössä.</p>
    </div>
    
    <div id="par-255" class="paragraph">
        <div id='1.randomint2' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b22686561646572223a2022546568745c7530306534765c7530306534203131222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a612e6373222c2022757365725f6964223a2022766573616c222c202275736572636f6465223a20222020202020202020696e74204d4158203d20363b5c6e202020202020202053797374656d2e52616e646f6d20726e64203d206e65772053797374656d2e52616e646f6d28293b5c6e2020202020202020696e745b5d2074203d206e657720696e745b4d41582b315d3b5c6e2020202020202020666f722028696e7420693d303b693c313030303b20692b2b295c6e20202020202020207b5c6e2020202020202020202020696e74206e203d20726e642e4e65787428312c4d41582b31293b5c6e2020202020202020202020745b6e5d2b2b3b5c6e20202020202020207d5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e6528737472696e672e4a6f696e285c22205c222c7429293b20222c20227461736b4944223a2022312e72616e646f6d696e7432222c20227374656d223a2022416c6c61206f6c6576616c6c61206b6f6f64696c6c61207475746b697461616e206d696e6b5c75303065346c61696e656e206a616b61756d612074756c6565206b756e206172766f7461616e206c756b756a6120765c75303065346c696c6c65205b312c4d41585d2e20204b6f6b65696c652e20204d6974656e206b5c753030653476697369206a6f732074656b6973697420726168616e68656974746f70656c696e3f222c20227265706c616365223a2022436f6e736f6c65222c20226279436f6465223a202220202020202020696e74204d4158203d20363b5c6e2020202020202053797374656d2e52616e646f6d20726e64203d206e65772053797374656d2e52616e646f6d28293b5c6e20202020202020696e745b5d2074203d206e657720696e745b4d41582b315d3b5c6e20202020202020666f722028696e7420693d303b693c313030303b20692b2b295c6e202020202020207b5c6e2020202020202020202020696e74206e203d20726e642e4e65787428312c4d41582b31293b5c6e2020202020202020202020745b6e5d2b2b3b5c6e202020202020207d5c6e2020202020202053797374656d2e436f6e736f6c652e57726974654c696e6528737472696e672e4a6f696e285c22205c222c7429293b20227d</cs-runner></div>
    </div>
    
    <div id="par-256" class="paragraph">
        <h2 id="kääntäminen-ja-luokkakirjastoihin-viittaaminen">4.5 Kääntäminen ja luokkakirjastoihin viittaaminen</h2>
    </div>
    
    <div id="par-257" class="paragraph">
        <p>Jotta Lumiukko-esimerkkiohjelma voitaisiin nyt kääntää C#-kääntäjällä, tulee Jypeli-kirjasto olla tallennettuna tietokoneelle. Jypeli käyttää XNA-kirjaston lisäksi vapaan lähdekoodin fysiikka- ja matematiikkakirjastoja. Fysiikka- ja matematiikkakirjastot on sisäänrakennettuina Jypeli-kirjastoon.</p>
    </div>
    
    <div id="par-258" class="paragraph">
        <p>Ennen kääntämistä kopioi seuraavat tiedostot kurssin kotisivuilta (<a href="https://trac.cc.jyu.fi/projects/ohj1/wiki/csharpCommandLine" class="uri">https://trac.cc.jyu.fi/projects/ohj1/wiki/csharpCommandLine</a>) samaan kansioon Lumiukko.cs-tiedoston kanssa.</p>
    </div>
    
    <div id="par-259" class="paragraph">
        <ul>
<li>Jypeli.dll</li>
</ul>
    </div>
    
    <div id="par-260" class="paragraph">
        <p>Meidän täytyy vielä välittää kääntäjälle tieto siitä, että Jypeli-kirjastoa tarvitaan Lumiukko-koodin kääntämiseen. Lisäksi annetaan kääntäjälle tieto siitä, että ohjelma tehdään <em>32-bittisille</em> järjestelmille (x86). Tämä tehdään csc-ohjelman <code>/reference</code>-parametrin avulla. Lisäksi tarvitaan referenssi Jypelin käyttämään XNA-kirjastoon. Kirjoita nyt komentoriville(kaikki rivit samalle riville niin, että /-viivan edessä on yksi välilyönti)</p>
    </div>
    
    <div id="par-261" class="paragraph">
        <pre><code>csc Lumiukko.cs /reference:Jypeli.dll;
 "%XNAGSv4%\References\Windows\x86\Microsoft.Xna.Framework.Game.dll" 
 /platform:x86</code></pre>
    </div>
    
    <div id="par-262" class="paragraph">
        <p>Jos käyttöjärjestelmäsi ei tunnista csc-komentoa, niin kertaa luvussa 2 olevat ohjeet komennon asettamisesta <code class="terminaali-western">PATH</code>-ympäristömuuttujan poluksi.</p>
    </div>
    
    <div id="par-263" class="paragraph">
        <div class="huomautus">
<p>Vinkki! Yllä esitelty kääntämiskomento on varsin pitkä. Asioiden helpottamiseksi voit kirjoittaa tiedoston csk.bat, joka sisältää seuraavan yhden rivin tekstin (komento on yksi pitkä rivi):</p>
</div>
    </div>
    
    <div id="par-264" class="paragraph">
        <pre><code>@"%WINDIR%\Microsoft.NET\Framework\v4.0.30319\csc" %*
/reference:Jypeli.dll;
"%XNAGSv4%References\Windows\x86\Microsoft.Xna.Framework.Game.dll";
"%XNAGSv4%References\Windows\x86\Microsoft.Xna.Framework.dll"
/platform:x86 /define:WINDOWS\</code></pre>
    </div>
    
    <div id="par-265" class="paragraph">
        <div class="huomautus">
<p>Tämä asettaa puolestasi reference ja platform -parametrit. Varmista, että tekemäsi csk.bat-tiedosto on "polussa". Tämän jälkeen kääntäminen onnistuu yksinkertaisemmin:</p>
<pre><code>csk OhjelmanNimi.cs</code></pre>
</div>
    </div>
    
    <div id="par-266" class="paragraph">
        <h1 id="lähdekoodista-prosessorille">5. Lähdekoodista prosessorille</h1>
    </div>
    
    <div id="par-267" class="paragraph">
        <h2 id="kääntäminen">5.1 Kääntäminen</h2>
    </div>
    
    <div id="par-268" class="paragraph">
        <p>Tarkastellaan nyt tarkemmin sitä kuinka C#-lähdekoodi muuttuu lopulta prosessorin ymmärtämään muotoon. Kun ohjelmoija luo ohjelman lähdekoodin, joka käyttää <em>.NET Framework</em> -ympäristöä, tapahtuu kääntäminen sisäisesti kahdessa vaiheessa. Ohjelma käännetään ensin eräänlaiselle välikielelle, <em>MSIL</em>:lle (Microsoft Intermediate Language), joka ei ole vielä suoritettavissa millään käyttöjärjestelmällä. Tästä välivaiheen koodista käännetään ajon aikana valmis ohjelma halutulle käyttöjärjestelmälle, kuten Mac Os X:lle tai Linuxille, niin sanotulla <em>JIT-kääntäjällä</em> (Just-In-Time). JIT-kääntäjä muuntaa välivaiheen koodin juuri halutulle käyttöjärjestelmälle sopivaksi koodiksi nimenomaan ohjelmaa ajettaessa - tästä tulee nimi "just-in-time".</p>
    </div>
    
    <div id="par-269" class="paragraph">
        <p>Ennen ensimmäistä kääntämistä kääntäjä tarkastaa, että koodi on syntaksiltaan oikein. [VES][KOS]</p>
    </div>
    
    <div id="par-270" class="paragraph">
        <p>Kääntäminen tehtiin Windowsissa komentorivillä (Command Prompt) käyttämällä komentoa</p>
    </div>
    
    <div id="par-271" class="paragraph">
        <pre><code>csc Tiedostonnimi.cs</code></pre>
    </div>
    
    <div id="par-272" class="paragraph">
        <p>tai hyödyntämällä edellisessä luvussa esiteltyä komentojonoa</p>
    </div>
    
    <div id="par-273" class="paragraph">
        <pre><code>csk Tiedostonnimi.cs</code></pre>
    </div>
    
    <div id="par-274" class="paragraph">
        <h2 id="suorittaminen">5.2 Suorittaminen</h2>
    </div>
    
    <div id="par-275" class="paragraph">
        <p>C#:n tuottaa siis lähdekoodista suoritettavan (tai "ajettavan") tiedoston. Tämä tiedosto on käyttöjärjestelmäriippuvainen, ja suoritettavissa vain sillä alustalla, johon käännös on tehty. Toisin sanoen, Windows-ympäristössä käännetyt ohjelmat eivät ole ajettavissa OS X -käyttöjärjestelmässä, ja toisin päin.</p>
    </div>
    
    <div id="par-276" class="paragraph">
        <p>Toisin kuin C#, eräät toiset ohjelmointikielet tuottavat käyttöjärjestelmäriippumatonta koodia. Esimerkiksi <em>Java</em>-kielessä kääntäjän tuottama tiedosto on niin sanottua <em>tavukoodia</em>, joka on käyttöjärjestelmäriippumatonta koodia. Tavukoodin suorittamiseen tarvitaan Java-virtuaalikone (<em>Java Virtual Machine</em>). Java-virtuaalikone on oikeaa tietokonetta matkiva ohjelma, joka tulkkaa tavukoodia ja suorittaa sitä sitten kohdekoneen prosessorilla. Tässä on merkittävä ero perinteisiin käännettäviin kieliin (esimerkiksi C ja C++), joissa käännös on tehtävä erikseen jokaiselle eri laitealustalle. [VES][KOS]</p>
    </div>
    
    <div id="par-277" class="paragraph">
        <h1 id="aliohjelmat">6. Aliohjelmat</h1>
    </div>
    
    <div id="par-278" class="paragraph">
        <blockquote>
<p>“Copy and paste is a design error.” - David Parnas</p>
</blockquote>
    </div>
    
    <div id="par-279" class="paragraph">
        <p>Pääohjelman lisäksi ohjelma voi sisältää muitakin aliohjelmia. Aliohjelmaa <em>kutsutaan</em> pääohjelmasta, metodista tai toisesta aliohjelmasta suorittamaan tiettyä tehtävää. Aliohjelmat voivat saada parametreja ja palauttaa arvon, kuten metoditkin.</p>
    </div>
    
    <div id="par-280" class="paragraph">
        <p>Aliohjelmia tehdään, koska</p>
    </div>
    
    <div id="par-281" class="paragraph">
        <ul>
<li>niiden avulla voidaan jakaa ohjelma pienempiin osiin</li>
<li>niiden avulla voidaan jäsentää ohjelmaa</li>
<li>ne auttavat uudelleenkäytössä</li>
<li>pienemmät osat helpottavat testaamista</li>
</ul>
    </div>
    
    <div id="par-282" class="paragraph">
        <p>Nykyisten oliokielten oliota ovat oikeastaan kokoelma olion sisäisiä muuttujia (attribuutteja) ja niitä käsitteleviä aliohjelmia (metodeja). Lisäksi nykyisten kielten API (Application Programming Interface) on usein huomattavasti itse kieltä suurempi. Kieleen kuuluvien aliohjelmakirjastojen lisäksi usein käytetään sovelluskohtaisia kirjastoja, jotka voivat olla hyvinkin laajoja. Tällä kurssilla esimerkkinä tällaisesta on <code>Jypeli</code>. Valmiin kirjaston käyttö helpottaa ohjelman kirjoittajaa ja hänen ei tarvitse kirjoittaa itse kaikkea.</p>
    </div>
    
    <div id="par-283" class="paragraph">
        <p>Toisaalta myös itse kirjoitetaan aliohjelmia. Käytännössä usein käy niin, että ohjelmaan kirjoitetaan osa, joka kohta toistuu lähes samanlaisena. Tällöin ohjelmoija pyrkii löytämään koodin yhteisen osan ja siirtää sen aliohjelmaksi. Jos toiminnat eivät samankaltaisissa osissa olleet täysin samanlaiset, toimitetaan ero aliohjelmille parametreinä. Näin sama aliohjelma voi eri kutsuilla tehdä hieman eri asioita. Otamme tästä kohta esimerkin.</p>
    </div>
    
    <div id="par-284" class="paragraph">
        <p>Toisaalta monesti aliohjelmia tulee myös siitä, että ohjelmaa kirjoiettaessa ajatellaan tyyliin: <em>"nyt pitäisi läytää taulukon suurin luku"</em>. Useimmiten ei ole järkevää tällöin lähteä itse estimistä kijoittamaan, vaan esitetään toive: <em>"olisipa meillä aliohjelma joka tekee tuon"</em>. Ja kirjoitetaan:</p>
    </div>
    
    <div id="par-285" class="paragraph">
        <pre><code>iso = Suurin(taulukko);</code></pre>
    </div>
    
    <div id="par-286" class="paragraph">
        <p>Myöhemmin sitten toteutetaan tuo <code>Suurin</code>aliohjelma (funktio tässä tapauksessa kun se palauttaa arvon). Nyt jos sama tehtävä pitää tehdä uudelleen, ei tarvitse enää kirjoittaa muuta kuin kutsu tuohon aliohjelmaan (<em>uudelleenkäyttö</em>).</p>
    </div>
    
    <div id="par-287" class="paragraph">
        <p>Usein samaa oliohjelmaa kutsutaan ohjelmasta useita kertoa, mutta koodin selkeyden vuoksi voi olla järkevää kirjoittaa aliohjelmaksi itsenäisä kokonaisuuksia (<em>jäsentäminen</em>).</p>
    </div>
    
    <div id="par-288" class="paragraph">
        <p>Seuraavana esimerkki jäsentämisestä, uudelleenkäytöstä ja selkeyttämisestä.</p>
    </div>
    
    <div id="par-289" class="paragraph">
        <p>Jos tehtävänämme olisi piirtää useampi lumiukko, niin tämänhetkisellä tietämyksellämme tekisimme todennäköisesti jonkin alla olevan kaltaisen ratkaisun.</p>
    </div>
    
    <div id="par-290" class="paragraph">
        <pre><code>01 using Jypeli;
02 
03 /// &lt;summary&gt;
04 /// Piirretään lumiukko.
05 /// &lt;/summary&gt;
06 public class Lumiukko : PhysicsGame
07 {
08
09   /// &lt;summary&gt;
10   /// Pääohjelmassa peli käyntiin.
11   /// &lt;/summary&gt;
12   public static void Main()
13   {
14     using (Lumiukko game = new Lumiukko())
15     {
16       game.Run();
17     }
18   }
19   
20   /// &lt;summary&gt;
21   /// Aliohjelma, jossa
22   /// piirretään ympyrät.
23   /// &lt;/summary&gt;
24   public override void Begin()
25   {
26     Camera.ZoomToLevel();
27     Level.Background.Color = Color.Black;
28     
29     PhysicsObject p1, p2, p3;
30     
31     // Eka ukko
32     p1 = new PhysicsObject(2 * 100, 2 * 100, Shape.Circle);
33     p1.Y = Level.Bottom + 200;
34     Add(p1);
35     
36     p2 = new PhysicsObject(2 * 50, 2 * 50, Shape.Circle);
37     p2.Y = p1.Y + 100 + 50;
38     Add(p2);
39     
40     p3 = new PhysicsObject(2 * 30, 2 * 30, Shape.Circle);
41     p3.Y = p2.Y + 50 + 30;
42     Add(p3);
43     
44     // Toinen ukko
45     p1 = new PhysicsObject(2 * 100, 2 * 100, Shape.Circle);
46     p1.X = 200;
47     p1.Y = Level.Bottom + 300;
48     Add(p1);
49     
50     p2 = new PhysicsObject(2 * 50, 2 * 50, Shape.Circle);
51     p2.X = 200;
52     p2.Y = p1.Y + 100 + 50;
53     Add(p2);
54     
55     p3 = new PhysicsObject(2 * 30, 2 * 30, Shape.Circle);
56     p3.X = 200;
57     p3.Y = p2.Y + 50 + 30;
58     Add(p3);
59   }
60 }</code></pre>
    </div>
    
    <div id="par-291" class="paragraph">
        <p>Huomataan, että ensimmäisen ja toisen lumiukon piirtäminen tapahtuu lähes samanlaisilla koodinpätkillä. Itse asiassa ainoa ero on, että jälkimmäisen lumiukon pallot saavat ensimmäisestä lumiukosta eroavat koordinaatit. Toisaalta voisimme kirjoittaa koodin myös niin, että lumiukon alimman pallon keskipiste tallennetaan <em>muuttujiin</em> x ja y. Näiden pisteiden avulla voimme sitten laskea muiden pallojen paikat. Määritellään heti alussa myös p1, p2 ja p3 PhysicsObject-olioiksi. Rivinumerointi on tässä jätetty pois selvyyden vuoksi. Luvun lopussa korjattu ohjelma esitellään kokonaisuudessaan rivinumeroinnin kanssa.</p>
    </div>
    
    <div id="par-292" class="paragraph">
        <pre><code>double x, y;
PhysicsObject p1, p2, p3;

// Tehdään ensimmäinen lumiukko
x = 0; y = Level.Bottom + 200;
p1 = new PhysicsObject(2*100, 2*100, Shape.Circle);
p1.X = x;
p1.Y = y;
Add(p1);

p2 = new PhysicsObject(2 * 50, 2 * 50, Shape.Circle);
p2.X = x;
p2.Y = y + 100 + 50; // y + 1. pallon säde + 2. pallon säde
Add(p2);

p3 = new PhysicsObject(2 * 30, 2 * 30, Shape.Circle);
p3.X = x;
p3.Y = y + 100 + 2 * 50 + 30; // y + 1. pallon säde + 2. halk. + 3. säde
Add(p3);</code></pre>
    </div>
    
    <div id="par-293" class="paragraph">
        <p>Vastaavasti toiselle lumiukolle: asetetaan vain x:n ja y:n arvot oikeiksi.</p>
    </div>
    
    <div id="par-294" class="paragraph">
        <pre><code>// Tehdään toinen lumiukko
x = 200; y = Level.Bottom + 300;
p1 = new PhysicsObject(2 * 100, 2 * 100, Shape.Circle);
p1.X = x;
p1.Y = y;
Add(p1);

p2 = new PhysicsObject(2 * 50, 2 * 50, Shape.Circle);
p2.X = x;
p2.Y = y + 100 + 50;
Add(p2);

p3 = new PhysicsObject(2 * 30, 2 * 30, Shape.Circle);
p3.X = x;
p3.Y = y + 100 + 2*50 + 30;
Add(p3);</code></pre>
    </div>
    
    <div id="par-295" class="paragraph">
        <p>Tarkastellaan nyt muutoksia hieman tarkemmin.</p>
    </div>
    
    <div id="par-296" class="paragraph">
        <pre><code>double x, y;</code></pre>
    </div>
    
    <div id="par-297" class="paragraph">
        <p>Yllä olevalla rivillä esitellään kaksi liukuluku<em>tyyppistä</em> <em>muuttujaa</em>. Liukuluku on eräs tapa esittää <em>reaalilukuja</em> tietokoneissa. C#:ssa jokaisella muuttujalla on oltava tyyppi ja eräs liukulukutyyppi C#:ssa on double. Muuttujista ja niiden tyypeistä puhutaan lisää luvussa 7.</p>
    </div>
    
    <div id="par-298" class="paragraph">
        <div class="huomautus">
<p><em>Liukuluku</em> (floating point) = Tietokoneissa käytettävä esitysmuoto reaaliluvuille. Tarkempaa tietoa liukuluvuista löytyy luvusta 26.</p>
</div>
    </div>
    
    <div id="par-299" class="paragraph">
        <pre><code>x = 0; y = Level.Bottom + 200;</code></pre>
    </div>
    
    <div id="par-300" class="paragraph">
        <p>Yllä olevalla rivillä on kaksi lausetta. Ensimmäisellä asetetaan muuttujaan x arvo 0 ja toisella muuttujaan y arvo 50 (jos Level.Bottom sattuu olemaan vaikka -150). Nyt voimme käyttää lumiukon pallojen laskentaan näitä muuttujia.</p>
    </div>
    
    <div id="par-301" class="paragraph">
        <pre><code>x = 200; y = Level.Bottom + 300;</code></pre>
    </div>
    
    <div id="par-302" class="paragraph">
        <p>Vastaavasti yllä olevalla rivillä asetetaan nyt muuttujiin uudet arvot, joita käytetään seuraavan lumiukon pallojen paikkojen laskemiseen. Huomaa, että y-koordinaatti saa negatiivisen arvon, jolloin lumiukon alimman pallon keskipiste painuu kuvaruudun keskitason alapuolelle.</p>
    </div>
    
    <div id="par-303" class="paragraph">
        <p>Nyt alimman pallon x-koordinaatiksi sijoitetaankin <em>muuttuja</em> x, ja vastaavasti y-koordinaatin arvoksi asetetaan <em>muuttuja</em> y, ja muiden pallojen sijainnit lasketaan ensimmäisen pallon koordinaattien perusteella.</p>
    </div>
    
    <div id="par-304" class="paragraph">
        <div id='1.k4' data-plugin='/showImage'><img height="270" src="/csimages/ohj1/luentomonistecsUusin_htm_m12339dd1.png">
<p class="footer">Kuva 4: Kaksi lumiukkoa</p>
</div>
    </div>
    
    <div id="par-305" class="paragraph">
        <p>Näiden muutosten jälkeen molempien lumiukkojen varsinainen piirtäminen tapahtuu nyt <strong>täysin samalla koodilla</strong>.</p>
    </div>
    
    <div id="par-306" class="paragraph">
        <p>Uusien lumiukkojen piirtäminen olisi nyt jonkin verran helpompaa, sillä meidän ei tarvitse kuin ilmoittaa ennen piirtämistä uuden lumiukon paikka ja varsinaisen lumiukkojen piirtäminen onnistuisi kopioimilla ja liittämällä koodia (copy-paste). Kuitenkin, jos koodia kirjoittaessa joutuu tekemään suoraa kopiointia, pitäisi pysähtyä miettimään, että onko tässä mitään järkeä.</p>
    </div>
    
    <div id="par-307" class="paragraph">
        <p>Kahden lumiukon tapauksessa tämä vielä onnistuu ilman, että koodin määrä kasvaa kohtuuttomasti, mutta entä jos meidän pitäisi piirtää 10 tai 100 lumiukkoa? Kuinka monta riviä ohjelmaan tulisi silloin? Kun lähes samanlainen koodinpätkä tulee useampaan kuin yhteen paikkaan, on useimmiten syytä muodostaa siitä oma <em>aliohjelma</em>. Koodin monistaminen moneen paikkaan lisäisi vain koodirivien määrää, tekisi ohjelman ymmärtämisestä vaikeampaa ja vaikeuttaisi testaamista.</p>
    </div>
    
    <div id="par-308" class="paragraph">
        <p>Lisäksi jos monistetussa koodissa olisi vikaa, jouduttaisiin korjaukset tekemään myös useampaan paikkaan. Hyvän ohjelman yksi mitta (kriteeri) onkin, että jos jotain pitää muuttaa, niin kohdistuvatko muutokset vain yhteen paikkaan (hyvä) vai joudutaanko muutoksia tekemään useaan paikkaan (huono).</p>
    </div>
    
    <div id="par-309" class="paragraph">
        <h2 id="aliohjelman-kutsuminen">6.1 Aliohjelman kutsuminen</h2>
    </div>
    
    <div id="par-310" class="paragraph">
        <p>Haluamme siis aliohjelman, joka piirtää meille lumiukon tiettyyn pisteeseen. Kuten metodeille, myös aliohjelmalle viedään parametrien avulla sen tarvitsemaa tietoa. Parametreina tulisi viedä vain minimaaliset tiedot, joilla aliohjelman tehtävä saadaan suoritettua.</p>
    </div>
    
    <div id="par-311" class="paragraph">
        <p>Sovitaan, että aliohjelmamme piirtää aina samankokoisen lumiukon haluamaamme pisteeseen. Mitkä ovat ne välttämättömät tiedot, jotka aliohjelma tarvitsee piirtääkseen lumiukon?</p>
    </div>
    
    <div id="par-312" class="paragraph">
        <p>Aliohjelma tarvitsee tiedon <em>mihin</em> pisteeseen lumiukko piirretään. Viedään siis parametrina lumiukon alimman pallon keskipiste. Muiden pallojen paikat voidaan laskea tämän pisteen avulla. Lisäksi tarvitaan yksi <code>Game</code>-tyyppinen parametri, jotta aliohjelmaamme voisi kutsua myös toisesta ohjelmasta. Nämä parametrit riittävät lumiukon piirtämiseen.</p>
    </div>
    
    <div id="par-313" class="paragraph">
        <p>Kun aliohjelmaa käytetään ohjelmassa, sanotaan, että aliohjelmaa <em>kutsutaan</em>. Kutsu tapahtuu kirjoittamalla aliohjelman nimi ja antamalla sille parametrit. Aliohjelmakutsun erottaa metodikutsusta vain se, että metodi liittyy aina tiettyyn olioon. Esimerkiksi pallo-olio <code>p1</code> voitaisiin poistaa pelikentällä kutsumalla metodia <code>Destroy()</code>, eli kirjoittaisimme:</p>
    </div>
    
    <div id="par-314" class="paragraph">
        <pre><code>p1.Destroy();</code></pre>
    </div>
    
    <div id="par-315" class="paragraph">
        <p>Toisin sanoen metodeja kutsuttaessa täytyy ensin kirjoittaa sen olion nimi, jonka metodia kutsutaan, ja sen jälkeen pisteellä erotettuna kirjoittaa haluttu metodin nimi. Sulkujen sisään tulee luonnollisesti tarvittavat parametrit. Yllä olevan esimerkin Destroy-metodi ei ota vastaan yhtään parametria.</p>
    </div>
    
    <div id="par-316" class="paragraph">
        <p>Päätetään, että aliohjelman nimi on <code>PiirraLumiukko</code>. Sovitaan myös, että aliohjelman ensimmäinen parametri on tämä peli, johon lumiukko ilmestyy (kirjoitetaan <code>this</code>). Toinen parametri on lumiukon alimman pallon keskipisteen x-koordinaatti ja kolmas parametri lumiukon alimman pallon keskipisteen y-koordinaatti. Tällöin kentälle voitaisiin piirtää lumiukko, jonka alimman pallon keskipiste on <code>(0, Level.Bottom + 200)</code>, seuraavalla kutsulla:</p>
    </div>
    
    <div id="par-317" class="paragraph">
        <pre><code>PiirraLumiukko(this, 0, Level.Bottom + 200);</code></pre>
    </div>
    
    <div id="par-318" class="paragraph">
        <p>Kutsussa voisi myös ensiksi mainita sen luokan nimen mistä aliohjelma löytyy. Tällä kutsulla aliohjelmaa voisi kutsua myös muista luokista, koska määrittelimme <code>Lumiukot</code>-luokan julkiseksi (public).</p>
    </div>
    
    <div id="par-319" class="paragraph">
        <pre><code>Lumiukot.PiirraLumiukko(this, 0, Level.Bottom + 200);</code></pre>
    </div>
    
    <div id="par-320" class="paragraph">
        <p>Vaikka tämä muoto muistuttaa jo melko paljon metodin kutsua on ero kuitenkin selvä. Metodia kutsuttaessa toimenpide tehdään aina <em>tietylle oliolle</em>, kuten <code>p1.Destroy()</code> tuhoaa juuri sen pallon, johon <code>p1</code>-olio viittaa. Pallojahan voi tietenkin olla myös muita erinimisiä (kuten esimerkissämme onkin). Alla olevassa aliohjelmakutsussa kuitenkin käytetään vain luokasta <code>Lumiukot</code> löytyvää <code>PiirraLumiukko</code>-aliohjelmaa.</p>
    </div>
    
    <div id="par-321" class="paragraph">
        <p>Jos olisimme toteuttaneet jo varsinaisen aliohjelman, piirtäisi <code>Begin</code> meille nyt kaksi lumiukkoa.</p>
    </div>
    
    <div id="par-322" class="paragraph">
        <pre><code>/// &lt;summary&gt;
/// Kutsutaan PiirraLumiukko-aliohjelmaa
/// sopivilla parametreilla.
/// &lt;/summary&gt;
public override void Begin()
{
  Camera.ZoomToLevel();
  Level.Background.Color = Color.Black;

  PiirraLumiukko(this, 0, Level.Bottom + 200);
  PiirraLumiukko(this, 200, Level.Bottom + 300);
}</code></pre>
    </div>
    
    <div id="par-323" class="paragraph">
        <p>Koska PiirraLumiukko-aliohjelmaa ei luonnollisesti vielä ole olemassa, ei ohjelmamme vielä toimi. Seuraavaksi meidän täytyy toteuttaa itse aliohjelma, jotta kutsut alkavat toimimaan.</p>
    </div>
    
    <div id="par-324" class="paragraph">
        <p>Usein ohjelman toteutuksessa on viisasta edetä juuri tässä järjestyksessä: suunnitellaan aliohjelmakutsu ensiksi, kirjoitetaan kutsu sille kuuluvalle paikalle, ja vasta sitten toteutetaan varsinainen aliohjelman kirjoittaminen.</p>
    </div>
    
    <div id="par-325" class="paragraph">
        <p>Lisätietoja aliohjelmien kutsumisesta löydät kurssin wiki-sivulta:</p>
    </div>
    
    <div id="par-326" class="paragraph">
        <blockquote>
<p><a href="https://trac.cc.jyu.fi/projects/ohj1/wiki/aliohjelmienKutsuminen" class="uri">https://trac.cc.jyu.fi/projects/ohj1/wiki/aliohjelmienKutsuminen</a>.</p>
</blockquote>
    </div>
    
    <div id="par-327" class="paragraph">
        <h2 id="aliohjelman-kirjoittaminen">6.2 Aliohjelman kirjoittaminen</h2>
    </div>
    
    <div id="par-328" class="paragraph">
        <p>Ennen varsinaista aliohjelman toiminnallisuuden kirjoittamista täytyy aliohjelmalle tehdä määrittely (kutsutaan myös esittelyksi, <em>declaration</em>). Kirjoitetaan määrittely aliohjelmalle, jonka kutsun jo teimme edellisessä alaluvussa.</p>
    </div>
    
    <div id="par-329" class="paragraph">
        <p>Lisätään ohjelmaamme aliohjelman runko. Dokumentoidaan aliohjelma myös saman tien.</p>
    </div>
    
    <div id="par-330" class="paragraph">
        <pre><code>/// &lt;summary&gt;
/// Kutsutaan PiirraLumiukko-aliohjelmaa
/// sopivilla parametreilla.
/// &lt;/summary&gt;
public override void Begin()
{
  Camera.ZoomToLevel();
  Level.Background.Color = Color.Black;

  PiirraLumiukko(this, 0, Level.Bottom + 200);
  PiirraLumiukko(this, 200, Level.Bottom + 300);
}

/// &lt;summary&gt;
/// Aliohjelma piirtää lumiukon
/// annettuun paikkaan.
/// &lt;/summary&gt;
/// &lt;param name="peli"&gt;Peli, johon lumiukko tehdään.&lt;/param&gt;
/// &lt;param name="x"&gt;Lumiukon alimman pallon x-koordinaatti.&lt;/param&gt;
/// &lt;param name="y"&gt;Lumiukon alimman pallon y-koordinaatti.&lt;/param&gt;
public static void PiirraLumiukko(Game peli, double x, double y)
{
}</code></pre>
    </div>
    
    <div id="par-331" class="paragraph">
        <p>Alla oleva kuva selvittää aliohjelmakutsun ja aliohjelman määrittelyn sekä vastinparametrien yhteyttä.</p>
    </div>
    
    <div id="par-332" class="paragraph">
        <div id='1.k5' data-plugin='/showImage'><img height="112" src="/csimages/ohj1/luentomonistecsUusin_htm_m48da2e91.png">
<p class="footer">Kuva 5: Aliohjelmakutsu ja aliohjelman vastinparametrit.</p>
</div>
    </div>
    
    <div id="par-333" class="paragraph">
        <p>Aliohjelman toteutuksen ensimmäistä riviä</p>
    </div>
    
    <div id="par-334" class="paragraph">
        <pre><code>public static void PiirraLumiukko(Game peli, double x, double y)</code></pre>
    </div>
    
    <div id="par-335" class="paragraph">
        <p>sanotaan aliohjelman <em>otsikoksi</em> (header) tai <em>esittelyriviksi</em>. Otsikon alussa määritellään aliohjelman <em>näkyvyys</em> julkiseksi (public). Kun näkyvyys on julkinen, niin aliohjelmaa voidaan kutsua eli käyttää myös muissa luokissa. Aliohjelma määritellään myös staattiseksi (static), sillä jos emme määrittelisi aliohjelmaa staattiseksi, olisi se oikeastaan metodi, eli olion toiminto (ks. luku 8.5). Staattinen aliohjelma pystyy tekemään kaikki toimensa parametreinä tuodun tiedon perusteella.</p>
    </div>
    
    <div id="par-336" class="paragraph">
        <p>Aliohjelmalle on annettu myös palautusarvoksi <code>void</code>, joka tarkoittaa sitä, että aliohjelma ei palauta mitään arvoa. Aliohjelma voisi nimittäin myös lopettaessaan palauttaa jonkun arvon, jota tarvitsisimme ohjelmassamme. Tällaisista aliohjelmista puhutaan luvussa 9. void-määrityksen jälkeen aliohjelmalle on annettu nimeksi PiirraLumiukko.</p>
    </div>
    
    <div id="par-337" class="paragraph">
        <div class="huomautus">
<p>Huomaa! C#:ssa aliohjelmat kirjoitetaan tyypillisesti isolla alkukirjaimella.</p>
</div>
    </div>
    
    <div id="par-338" class="paragraph">
        <div class="huomautus">
<p>Huomaa! Aliohjelmien (ja metodien) nimien tulisi olla verbejä tai tekemistä ilmaisevia lauseita, esimerkiksi LuoPallo, Siirry, TormattiinEsteeseen.</p>
</div>
    </div>
    
    <div id="par-339" class="paragraph">
        <p>Aliohjelman nimen jälkeen ilmoitetaan sulkeiden sisässä aliohjelman parametrit. Jokaista parametria ennen on ilmoitettava myös parametrin <em>tietotyyppi</em>. Parametrinä annettiin lumiukon alimman pallon x- ja y-koordinaatit. Molempien tietotyyppi on double, joten myös vastinparametrien tyyppien tulee olla double. Annetaan myös nimet kuvaavasti <code>x</code> ja <code>y</code>.</p>
    </div>
    
    <div id="par-340" class="paragraph">
        <p>Tietotyypeistä voit lukea lisää kohdasta 7.2 ja luvusta 8.</p>
    </div>
    
    <div id="par-341" class="paragraph">
        <div class="huomautus">
<p>Huomaa! Aliohjelman parametrien nimien ei tarvitse olla samoja kuin kutsussa. Niiden nimet kannattaa kuitenkin olla mahdollisimman kuvaavia.</p>
</div>
    </div>
    
    <div id="par-342" class="paragraph">
        <div class="huomautus">
<p>Huomaa! Parametrien tyyppien ei tarvitse olla keskenään samoja, kunhan kukin parametri on yhteensopiva kutsussa olevan vastinparametrin kanssa. Esimerkkejä funktioista löydät kurssin wiki-sivulta:</p>
<blockquote>
<p><a href="https://trac.cc.jyu.fi/projects/ohj1/wiki/aliohjelmienKirjoittaminen" class="uri">https://trac.cc.jyu.fi/projects/ohj1/wiki/aliohjelmienKirjoittaminen</a>.</p>
</blockquote>
</div>
    </div>
    
    <div id="par-343" class="paragraph">
        <p>Aliohjelmakutsulla ja aliohjelman määrittelyllä on siis hyvin vahva yhteys keskenään. Aliohjelmakutsussa annetut tiedot "sijoitetaan" kullakin kutsukerralla aliohjelman määrittelyrivillä esitellyille vastinparametreille. Toisin sanoen, aliohjelmakutsun yhteydessä tapahtuu väljästi sanottuna seuraavaa.</p>
    </div>
    
    <div id="par-344" class="paragraph">
        <pre><code>aliohjelman peli = this;
aliohjelman x = 200;
aliohjelman y = Level.Bottom + 300;</code></pre>
    </div>
    
    <div id="par-345" class="paragraph">
        <p>Voimme nyt kokeilla ajaa ohjelmaamme. Se toimii (lähtee käyntiin), mutta ei tietenkään vielä piirrä lumiukkoja, eikä pitäisikään, sillä luomamme aliohjelma on "tyhjä". Lisätään aaltosulkujen väliin varsinainen koodi, joka pallojen piirtämiseen tarvitaan.</p>
    </div>
    
    <div id="par-346" class="paragraph">
        <p>Pieni muutos aikaisempaan versioon kuitenkin tarvitaan. Rivit, joilla pallot lisätään kentälle, muutetaan muotoon</p>
    </div>
    
    <div id="par-347" class="paragraph">
        <pre><code>peli.Add(...);</code></pre>
    </div>
    
    <div id="par-348" class="paragraph">
        <p>missä pisteiden paikalle tulee pallo-olion muuttujan nimi. Tämä siksi, että oikeastaan alkuperäisessä lumiukon piirtämisessä meidän olisi pitänyt kirjoittaa aina:</p>
    </div>
    
    <div id="par-349" class="paragraph">
        <pre><code>this.Add(p1);
this.Add(p2);
jne.</code></pre>
    </div>
    
    <div id="par-350" class="paragraph">
        <p>Alkuperäisessä lumiukossa kirjoitimme <code>Lumiukko</code> luokan omaa metodia <code>Begin</code> ja siinä halusimme sanoa että pallot lisätään nimenomaan tähän (<code>this</code>) peliin (peliolioon joka on <code>Lumiukko</code> luokan ilmentymä). Useissa oliokielissä viitattaessa olion omiin metodeihin (tässä <code>Add</code>) tai attribuutteihin, voidaan <code>this</code> jättää kirjoittamatta. Tai sen saa kirjoittaa. Tässä jokainen voi valita oman tyylinsä, tässä monisteessa <code>this</code> jätetään usein kirjoittamatta. Nyt vastaavasti <code>PiirraLumiukko</code> aliohjelma ei ole minkään olion oma aliohjelma (<code>static</code> aiheuttaa tämän) ja siksi sille viedään parametrinä tieto siitä, mihin peliin haluamme lumiukon piirtää. Ja meidän esimerkissämme veimme paramterina nimenomaan tuon <code>this</code> -arvon. Siksi meidän esimerkissämme aliohjelmaa suoritettaessa</p>
    </div>
    
    <div id="par-351" class="paragraph">
        <pre><code>peli.Add(p1);</code></pre>
    </div>
    
    <div id="par-352" class="paragraph">
        <p>on juurikin</p>
    </div>
    
    <div id="par-353" class="paragraph">
        <pre><code>this.Add(p1);    </code></pre>
    </div>
    
    <div id="par-354" class="paragraph">
        <p>Lopuksi <code>Begin</code>-metodi ja <code>PiirraLumiukko</code> -aliohjelma kokonaisena:</p>
    </div>
    
    <div id="par-355" class="paragraph">
        <pre><code>/// &lt;summary&gt;
/// Kutsutaan PiirraLumiukko-aliohjelmaa
/// sopivilla parametreilla.
/// &lt;/summary&gt;
public override void Begin()
{
  Camera.ZoomToLevel();
  Level.Background.Color = Color.Black;

  PiirraLumiukko(this, 0, Level.Bottom + 200);
  PiirraLumiukko(this, 200, Level.Bottom + 300);
}

/// &lt;summary&gt;
/// Aliohjelma piirtää lumiukon annettuun paikkaan.
/// &lt;/summary&gt;
/// &lt;param name="peli"&gt;Peli, johon lumiukko lisätään.&lt;/param&gt;
/// &lt;param name="x"&gt;Lumiukon alimman pallon x-koordinaatti.&lt;/param&gt;
/// &lt;param name="y"&gt;Lumiukon alimman pallon y-koordinaatti.&lt;/param&gt;
public static void PiirraLumiukko(Game peli, double x, double y)
{
  PhysicsObject p1, p2, p3;
  p1 = new PhysicsObject(2 * 100, 2 * 100, Shape.Circle);
  p1.X = x;
  p1.Y = y;
  peli.Add(p1);
  
  p2 = new PhysicsObject(2 * 50, 2 * 50, Shape.Circle);
  p2.X = x;
  p2.Y = p1.Y + 100 + 50;
  peli.Add(p2);
  
  p3 = new PhysicsObject(2 * 30, 2 * 30, Shape.Circle);
  p3.X = x;
  p3.Y = p2.Y + 50 + 30;
  peli.Add(p3);
}</code></pre>
    </div>
    
    <div id="par-356" class="paragraph">
        <p>Varsinaista aliohjelman toiminnallisuutta kirjoittaessa käytämme nyt parametreille antamiamme nimiä. Alimman ympyrän keskipisteen koordinaatit saamme nyt suoraan parametreista <code>x</code> ja <code>y</code>, mutta muiden ympyröiden keskipisteet meidän täytyy laskea alimman ympyrän koordinaateista. Tämä tapahtuu täysin samalla tavalla kuin edellisessä esimerkissä. Itse asiassa, jos vertaa aliohjelman sisältöä edellisen esimerkin koodiin, on se täysin sama.</p>
    </div>
    
    <div id="par-357" class="paragraph">
        <p>C#:ssa on tapana aloittaa aliohjelmien ja metodien nimet isolla kirjaimella ja nimessä esiintyvä jokainen uusi sana alkamaan isolla kirjaimella. Kirjoitustavasta käytetään termiä PascalCasing. Muuttujat kirjoitetaan pienellä alkukirjaimella, ja jokainen seuraava sana isolla alkukirjaimella: esimerkiksi double autonNopeus. Tästä käytetään nimeä camelCasing. Lisää C#:n nimeämiskäytännöistä voit lukea sivulta</p>
    </div>
    
    <div id="par-358" class="paragraph">
        <blockquote>
<p><a href="http://msdn.microsoft.com/en-us/library/ms229043.aspx" class="uri">http://msdn.microsoft.com/en-us/library/ms229043.aspx</a>.</p>
</blockquote>
    </div>
    
    <div id="par-359" class="paragraph">
        <p>Tarkastellaan seuraavaksi mitä aliohjelmakutsussa tapahtuu.</p>
    </div>
    
    <div id="par-360" class="paragraph">
        <pre><code>PiirraLumiukko(this, 0, Level.Bottom + 200);</code></pre>
    </div>
    
    <div id="par-361" class="paragraph">
        <p>Yllä olevalla kutsulla aliohjelman <code>peli</code>-nimiseen muuttujaan sijoitetaan <code>this</code>, eli kyseessä oleva peli, <code>x</code>-nimiseen muuttujaan sijoitetaan arvo <code>0</code> (liukulukuun voi sijoittaa kokonaislukuarvon) ja aliohjelman muuttujaan <code>y</code> arvo <code>Level.Bottom + 200</code>. Voisimme sijoittaa tietenkin minkä tahansa muunkin liukuluvun.</p>
    </div>
    
    <div id="par-362" class="paragraph">
        <p>Aliohjelmakutsun suorituksessa lasketaan siis ensiksi jokaisen kutsussa olevan lausekkeen arvo ja sitten lasketut arvot sijoitetaan kutsussa olevassa järjestyksessä aliohjelman vastinparametreille. Siksi vastinparametrien pitää olla sijoitusyhteensopivia kutsun lausekkeiden kanssa. Esimerkin kutsussa lausekkeet ovat yksinkertaisia: muuttujan nimi (<code>this</code>), kokonaislukuarvo (<code>0</code>) ja reaalilukuarvo ( <code>Level.Bottom + 200</code>). Ne voisivat kuitenkin olla kuinka monimutkaisia lausekkeita tahansa, esimerkiksi näin:</p>
    </div>
    
    <div id="par-363" class="paragraph">
        <pre><code>PiirraLumiukko(this, 22.7+sin(2.4), 80.1-Math.PI);</code></pre>
    </div>
    
    <div id="par-364" class="paragraph">
        <div class="huomautus">
<p><em>Lause</em> (statement) ja <em>lauseke</em> (expression) ovat eri asia. Lauseke on arvojen, aritmeettisten operaatioiden ja aliohjelmien (tai metodien yhdistelmä), joka evaluoituu tietyksi arvoksi. Lauseke on siis lauseen osa. Seuraava kuva selventää eroa.</p>
</div>
    </div>
    
    <div id="par-365" class="paragraph">
        <div id='1.k6' data-plugin='/showImage'><img height="64" src="/csimages/ohj1/luentomonistecsUusin_htm_m5dfaebb8.png">
<p class="footer">Kuva 6: Lauseen ja lausekkeen ero.</p>
</div>
    </div>
    
    <div id="par-366" class="paragraph">
        <p>Koska määrittelimme koordinaattien parametrien tyypiksi <code>double</code>, voisimme yhtä hyvin antaa parametreiksi mitä tahansa muitakin desimaalilukuja. Täytyy muistaa, että C#:ssa desimaalilukuvakioissa käytetään pistettä erottamaan kokonaisosa desimaaliosasta.</p>
    </div>
    
    <div id="par-367" class="paragraph">
        <p>Kokonaisuudessaan ohjelma näyttää nyt seuraavalta:</p>
    </div>
    
    <div id="par-368" class="paragraph">
        <pre><code>01 using Jypeli;
02 
03 
04 /// @author  Antti-Jussi Lakanen, Vesa Lappalainen
05 /// @version 22.8.2012
06 ///
07 /// &lt;summary&gt;
08 /// Piirretään lumiukkoja ja harjoitellaan aliohjelman käyttöä.
09 /// &lt;/summary&gt;
10 public class Lumiukot : PhysicsGame
11 {
12  /// &lt;summary&gt;
13  /// Pääohjelmassa laitetaan "peli" käyntiin.
14  /// &lt;/summary&gt;
15  /// &lt;param name="args"&gt;Ei käytössä&lt;/param&gt;
16  public static void Main(string[] args)
17  {
18    using (Lumiukot peli = new Lumiukot())
19    {
20     peli.Run();
21    }
22  }
23  
24  /// &lt;summary&gt;
25  /// Kutsutaan PiirraLumiukko-aliohjelmaa
26  /// sopivilla parametreilla.
27  /// &lt;/summary&gt;
28  public override void Begin()
29  {
30   Camera.ZoomToLevel();
31   Level.Background.Color = Color.Black;
32   
33   PiirraLumiukko(this, 0, Level.Bottom + 200);
34   PiirraLumiukko(this, 200, Level.Bottom + 300);
35  }
36
37  /// &lt;summary&gt;
38  /// Aliohjelma piirtää lumiukon
39  /// annettuun paikkaan.
40  /// &lt;/summary&gt;
41  /// &lt;param name="peli"&gt;Peli, johon ukko lisätään.&lt;/param&gt; 
42  /// &lt;param name="x"&gt;Lumiukon alimman pallon x-koordinaatti.&lt;/param&gt;
43  /// &lt;param name="y"&gt;Lumiukon alimman pallon y-koordinaatti.&lt;/param&gt;
44  public static void PiirraLumiukko(Game peli, double x, double y)
45  {
46    PhysicsObject p1, p2, p3;
47    p1 = new PhysicsObject(2 * 100, 2 * 100, Shape.Circle);
48    p1.X = x;
49    p1.Y = y;
50    peli.Add(p1);
51    
52    p2 = new PhysicsObject(2 * 50, 2 * 50, Shape.Circle);
53    p2.X = x;
54    p2.Y = p1.Y + 100 + 50;
55    peli.Add(p2);
56    
57    p3 = new PhysicsObject(2 * 30, 2 * 30, Shape.Circle);
58    p3.X = x;
59    p3.Y = p2.Y + 50 + 30;
60    peli.Add(p3);
61  }
62 }</code></pre>
    </div>
    
    <div id="par-369" class="paragraph">
        <p>Kutsuttaessa aliohjelmaa hyppää ohjelman suoritus välittömästi parametrien sijoitusten jälkeen kutsuttavan aliohjelman ensimmäiselle riville ja alkaa suorittamaan aliohjelmaa kutsussa määritellyillä parametreilla. Kun päästään aliohjelman koodin loppuun palataan jatkamaan kutsun jälkeisestä seuraavasta lausekkeesta. Esimerkissämme kun ensimmäinen lumiukko on piirretty, palataan tavallaan ensimmäisen kutsun puolipisteeseen ja sitten pääohjelma jatkuu kutsumalla toista lumiukon piirtämistä.</p>
    </div>
    
    <div id="par-370" class="paragraph">
        <p>Jos nyt haluaisimme piirtää lisää lumiukkoja, lisäisi jokainen uusi lumiukko koodia vain yhden rivin.</p>
    </div>
    
    <div id="par-371" class="paragraph">
        <div class="huomautus">
<p>Huomaa! Aliohjelmien käyttö selkeyttää ohjelmaa ja aliohjelmia kannattaa kirjoittaa, vaikka niitä kutsuttaisiin vain yhden kerran. Hyvää aliohjelmaa voidaan kutsua muustakin käyttöyhteydestä.</p>
</div>
    </div>
    
    <div id="par-372" class="paragraph">
        <div id='1.lisaalumiukkoja' data-plugin='/csPlugin'><cs-jypeli-runner>xxxHEXJSONxxx7b22686561646572223a2022546568745c7530306534765c7530306534203132222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f4a7970656c692f4c756d69756b6b6f2e6373222c202274797065223a20226a7970656c69222c2022757365725f6964223a2022766573616c222c2022726f7773223a202231222c20227461736b4944223a2022312e6c697361616c756d69756b6b6f6a61222c20227265706c616365223a2022494e5345525420594f555220434f44452048455245222c20227374656d223a20224c69735c75303065345c7530306534206f686a656c6d61616e206b616b7369206d75757461206c756d69756b6b6f61222c202275736572636f6465223a2022202020202020202050656c692e5069697272614c756d69756b6b6f28746869732c20302c204c6576656c2e426f74746f6d202b20323030293b5c6e20202020202020205069697272614c756d69756b6b6f28746869732c203230302c204c6576656c2e426f74746f6d202b20333030293b222c20226d6178726f7773223a20223130222c20226279436f6465223a202220202020202020205069697272614c756d69756b6b6f28746869732c20302c204c6576656c2e426f74746f6d202b20323030293b5c6e20202020202020205069697272614c756d69756b6b6f28746869732c203230302c204c6576656c2e426f74746f6d202b20333030293b227d</cs-jypeli-runner></div>
    </div>
    
    <div id="par-373" class="paragraph">
        <div id='1.lisaalumiukkoja2' data-plugin='/csPlugin'><cs-jypeli-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f4a7970656c692f4c756d69756b6b6f2e6373222c20227265706c616365223a2022494e5345525420594f555220434f44452048455245222c202274797065223a20226a7970656c69222c2022757365725f6964223a2022766573616c222c2022726f7773223a202231222c20227461736b4944223a2022312e6c697361616c756d69756b6b6f6a6132222c20227374656d223a2022506172616d657472697420766f696461616e20616e746161206d795c753030663673206e696d65747479696e5c75303065342c206a6f6c6c6f696e206e696964656e206a5c7530306534726a6573747973745c753030653420766f696461616e206d757574746161206b757473757373612e204c69735c75303065345c7530306534206f686a656c6d61616e206b616b7369206d75757461206c756d69756b6b6f612e204b6f6b65696c65206d6974656e20766f6974206e696d657474796a5c753030653420706172616d657472656a5c7530306534206b5c75303065347974745c75303065345c753030653420657269207461766f696c6c612e204b6f6b65696c65206d795c753030663673206c69735c7530306534745c75303065342050656c692e205069697272614c756d69756b6b6f2d6b757473756e20657465656e2e20204d696b73692050656c692e3f222c202275736572636f6465223a202220202020202020205069697272614c756d69756b6b6f2870656c693a746869732c20793a4c6576656c2e426f74746f6d202b203230302c20783a30293b5c6e202020202020202050656c692e5069697272614c756d69756b6b6f28746869732c20783a3230302c20793a4c6576656c2e426f74746f6d202b20333030293b222c20226d6178726f7773223a20223130222c20226279436f6465223a202220202020202020205069697272614c756d69756b6b6f2870656c693a746869732c20793a4c6576656c2e426f74746f6d202b203230302c20783a30293b5c6e20202020202020205069697272614c756d69756b6b6f28746869732c20783a3230302c20793a4c6576656c2e426f74746f6d202b20333030293b227d</cs-jypeli-runner></div>
    </div>
    
    <div id="par-374" class="paragraph">
        <h2 id="aliohjelmien-dokumentointi">6.3 Aliohjelmien dokumentointi</h2>
    </div>
    
    <div id="par-375" class="paragraph">
        <p>Jokaisen aliohjelman tulisi sisältää dokumentaatiokommentti. Aliohjelman dokumentaatiokommentin tulee sisältää ainakin seuraavat asiat: Lyhyt kuvaus aliohjelman toiminnasta, selitys kaikista parametreista sekä selitys mahdollisesta paluuarvosta. Nämä asiat kuvataan tägien avulla seuraavasti:</p>
    </div>
    
    <div id="par-376" class="paragraph">
        <ul>
<li>Dokumentaatiokommentin alkuun laitetaan <code>summary</code>-tagien väliin lyhyt ja selkeä kuvaus aliohjelman toiminnasta.</li>
<li>Jokainen parametri selitetään omien <code>param</code>-tagien väliin ja</li>
<li>paluuarvo <code>returns</code>-tagien väliin.</li>
</ul>
    </div>
    
    <div id="par-377" class="paragraph">
        <p>PiirraLumiukko-aliohjelman dokumentaatiokommentit on edellisessä esimerkissämme riveillä 36-41.</p>
    </div>
    
    <div id="par-378" class="paragraph">
        <pre><code>36 /// &lt;summary&gt;
37 /// Aliohjelma piirtää lumiukon
38 /// annettuun paikkaan.
39 /// &lt;/summary&gt;
40 /// &lt;param name="peli"&gt;Peli, johon ukko lisätään.&lt;/param&gt;
41 /// &lt;param name="x"&gt;Lumiukon alimman pallon x-koordinaatti.&lt;/param&gt;
42 /// &lt;param name="y"&gt;Lumiukon alimman pallon y-koordinaatti.&lt;/param&gt;</code></pre>
    </div>
    
    <div id="par-379" class="paragraph">
        <p><em>Doxygen</em>-työkalun (ks. <a href="http://en.wikipedia.org/wiki/Doxygen" class="uri">http://en.wikipedia.org/wiki/Doxygen</a>) tuottama HTML-sivu tästä luokasta näyttäisi nyt seuraavalta:</p>
    </div>
    
    <div id="par-380" class="paragraph">
        <div id='1.k7' data-plugin='/showImage'><img height="340" src="/csimages/ohj1/luentomonistecsUusin_htm_5219b95e.png">
<p class="footer">Kuva 7: Osa Lumiukot-luokan dokumentaatiosta.</p>
</div>
    </div>
    
    <div id="par-381" class="paragraph">
        <p>Dokumentaatiossa näkyy kaikki luokan aliohjelmat ja metodit. Huomaa, että Doxygen nimittää sekä aliohjelmia että metodeja jäsenfunktioiksi (member functions). Kuten sanottu, nimitykset vaihtelevat kirjallisuudessa, ja tässä kohtaa käytössä on hieman C++:n nimeämistapa. Kysymys on kuitenkin samasta asiasta, josta me tällä kurssilla käytämme nimeä aliohjelmat ja metodit.</p>
    </div>
    
    <div id="par-382" class="paragraph">
        <p>Jokaisesta aliohjelmasta ja metodista löytyy lisäksi tarkemmat tiedot Detailed Description -kohdasta. Aliohjelman <code>PiirraLumiukko</code> dokumentaatio parametreineen näkyy kuvan alaosassa.</p>
    </div>
    
    <div id="par-383" class="paragraph">
        <h3 id="huomautus">6.3.1 Huomautus</h3>
    </div>
    
    <div id="par-384" class="paragraph">
        <p>Kaikki <code>PiirraLumiukko</code>-aliohjelmassa tarvittava tieto välitettiin parametrien avulla, eikä aliohjelman suorituksen aikana tarvittu aliohjelman ulkopuolisia tietoja. Tämä on tyypillistä aliohjelmille, ja usein lisäksi toivottava ominaisuus. Tällöin aliohjelma esitellään <code>static</code> -tyyppiseksi.</p>
    </div>
    
    <div id="par-385" class="paragraph">
        <h2 id="aliohjelmat-metodit-ja-funktiot">6.4 Aliohjelmat, metodit ja funktiot</h2>
    </div>
    
    <div id="par-386" class="paragraph">
        <p>Kuten ehkä huomasit, aliohjelmilla ja metodeilla on paljon yhteistä. Monissa kirjoissa nimitetään myös aliohjelmia metodeiksi. Tällöin aliohjelmat erotetaan olioiden metodeista nimittämällä niitä staattisiksi metodeiksi. Tässä monisteessa metodeista puhutaan kuitenkin vain silloin, kun tarkoitetaan olioiden toimintoja. Jypelin dokumentaatiosta tutkit RandomGen-luokan staattisia metodeja, millä voidaan luoda esimerkiksi satunnaisia lukuja. Yksittäinen pallo poistettiin metodilla <code>Destroy</code>, joka on olion toiminto.</p>
    </div>
    
    <div id="par-387" class="paragraph">
        <p>Aliohjelmista puhutaan tällä kurssilla, koska sitä termiä käytetään monissa muissa ohjelmointikielissä. Tämä kurssi onkin ensisijaisesti ohjelmoinnin kurssi, jossa käytetään C#-kieltä. Päätavoitteena on siis oppia ohjelmoimaan ja työkaluna meillä sen opettelussa on C#-kieli.</p>
    </div>
    
    <div id="par-388" class="paragraph">
        <p>Aliohjelmamme <code>PiirraLumiukko</code> ei palauttanut mitään arvoa. Aliohjelmaa (tai metodia) joka palauttaa jonkun arvon voidaan kutsua myös tarkemmin <em>funktioksi</em> (function).</p>
    </div>
    
    <div id="par-389" class="paragraph">
        <p>Aliohjelmia ja metodeja nimitetään eri tavoin eri kielissä. Esimerkiksi C++-kielessä sekä aliohjelmia että metodeja sanotaan funktioiksi. Metodeita nimitetään C++-kielessä tarkemmin vielä jäsenfunktioiksi, kuten Doxygen teki myös C#:n tapauksessa.</p>
    </div>
    
    <div id="par-390" class="paragraph">
        <p>Kerrataan vielä lyhyesti aliohjelman, funktion ja metodin erot.</p>
    </div>
    
    <div id="par-391" class="paragraph">
        <p><strong>Aliohjelma</strong> Osaohjelma, joka voi tehdä kaikki toimensa käyttäen hyväkseen vain parametrilistassa tuotua tietoa. Paluuarvon tyyppinä on <code>void</code>, jolloin aliohjelma ei palauta mitään arvoa.</p>
    </div>
    
    <div id="par-392" class="paragraph">
        <p><strong>Funktio</strong> Aliohjelma, joka palauttaa jonkin tuloksen, esimerkiksi kahden luvun keskiarvon. Tämän määritelmän mukaan funktiossa on aina <code>return</code>-lause jonka perässä on lauseke, esimerkiksi <code>return (a+b)/2.0;</code> Puhtaassa aliohjelmassakin (ks. edellinen kohta) voi olla <code>return</code>-lause, mutta sen perässä ei silloin ole lauseketta.</p>
    </div>
    
    <div id="par-393" class="paragraph">
        <p><strong>Metodi</strong> Aliohjelma, joka tarvitsee tehtävän suorittamiseksi kohteena olevan olion omia tietoja. Näitä käytetään tällä kurssilla, mutta ei tehdä alkupään esimerkeissä itse muuta kuin peliluokan metodeja (esimerkiksi <code>Begin</code>). Joku voi myös mahdollisesti tehdä loppukurssilla vaikka uuden aseluokan, jolle sitten kirjoitetaan omia metodeja.</p>
    </div>
    
    <div id="par-394" class="paragraph">
        <p>Metodi voi myös funktion tapaan palauttaa arvon tai aliohjelman tapaan olla palauttamatta. Emme erottele tätä enää eri nimillä.</p>
    </div>
    
    <div id="par-395" class="paragraph">
        <p>Aliohjelman kirjoittamiseksi kannattaa aina edetä seuraavasti (kunhan ensin opitaan testaaminen, TDD):</p>
    </div>
    
    <div id="par-396" class="paragraph">
        <ol>
<li>Jaa ongelma osiin.</li>
<li>Mieti millaisella aliohjelmakutsulla pistät tietyn osaongelman ratkaisun käyntiin.</li>
<li>Kirjoita aliohjelman kutsurivi ja mieti sen tarvitsemat parametrit.</li>
<li>Kirjoita (aluksi manuaalisesti, myöhemmin generoi automaattisesti) aliohjelman esittelyrivi (eng. header).</li>
<li>Tee aliohjelmasta syntaktisesti oikea tynkä joka kääntyy, esimerkiksi funktioaliohjelmassa pitää olla return-lause.</li>
<li>Dokumentoi aliohjelma (nyt unohda mistä sitä kutsuttiin, sitä et enää saa ajatella).</li>
<li>Kirjoita testit (TDD).</li>
<li>Aja testit (pitää "feilata").</li>
<li>Muuta aliohjelma toimivaksi</li>
<li>Aja testit (toista kohdat 8-10 kunnes toimii)</li>
<li>Siirry seuraavaan aliohjelmaan.</li>
</ol>
    </div>
    
    <div id="par-397" class="paragraph">
        <p>.</p>
    </div>
    
    <div id="par-398" class="paragraph">
        <h1 id="muuttujat">7. Muuttujat</h1>
    </div>
    
    <div id="par-399" class="paragraph">
        <p>Muuttujat (<em>variable</em>) toimivat ohjelmassa tietovarastoina erilaisille asioille. Muuttuja on kuin pieni laatikko, johon voidaan varastoida asioita, esimerkiksi lukuja, sanoja, tietoa ohjelman käyttäjästä ja paljon muuta. Proseduaalisissa kielissä ilman muuttujia järkevä tiedon käsittely olisi oikeastaan mahdotonta. Funktio-ohjelmoinnissa tosin asiat ovat hieman toisin. Olemme jo ohimennen käyttäneetkin muuttujia, esimerkiksi Lumiukko-esimerkissä teimme <code>PhysicsObject</code>-tyyppisiä muuttujia <code>p1</code>, <code>p2</code> ja <code>p3</code>. Vastaavasti <code>PiirraLumiukko</code>-aliohjelman parametrit <code>(Game peli, double x, double y)</code> ovat myös muuttujia: <code>Game</code>-tyyppinen oliomuuttuja peli, sekä double-alkeistietotyyppiset muuttujat <code>x</code> ja <code>y</code>.</p>
    </div>
    
    <div id="par-400" class="paragraph">
        <p>Termi <em>muuttuja</em> on lainattu ohjelmointiin matematiikasta, mutta niitä ei tule kuitenkaan sekoittaa keskenään - muuttuja matematiikassa ja muuttuja ohjelmoinnissa tarkoittavat hieman eri asioita. Tulet huomaamaan tämän seuraavien kappaleiden aikana.</p>
    </div>
    
    <div id="par-401" class="paragraph">
        <p>Muuttujien arvot tallennetaan keskusmuistiin tai rekistereihin, mutta ohjelmointikielissä voimme antaa kullekin muuttujalle nimen (identifier), jotta muuttujan arvon käsittely olisi helpompaa. Muuttujan nimi onkin ohjelmointikielten helpotus, sillä näin ohjelmoijan ei tarvitse tietää tarvitsemansa tiedon keskusmuisti- tai rekisteriosoitetta, vaan riittää muistaa itse nimeämänsä muuttujan nimi. [VES]</p>
    </div>
    
    <div id="par-402" class="paragraph">
        <h2 id="muuttujan-määrittely">7.1 Muuttujan määrittely</h2>
    </div>
    
    <div id="par-403" class="paragraph">
        <p>Kun matemaatikko sanoo, että "n on yhtäsuuri kuin 1", tarkoittaa se, että tuo termi (eli muuttuja) <code>n</code> on jollain käsittämättömällä tavalla sama kuin luku 1. Matematiikassa muuttujia voidaan esitellä tällä tavalla "häthätää".</p>
    </div>
    
    <div id="par-404" class="paragraph">
        <p>Ohjelmoijan on kuitenkin tehtävä vastaava asia hieman tarkemmin. C#-kielessä tämä tapahtuisi kirjoittamalla seuraavasti:</p>
    </div>
    
    <div id="par-405" class="paragraph">
        <div id='1.intn' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61322e6373222c20227265706c616365223a2022414c4b554f5341222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e696e746e222c20226279436f646531223a20222f2f5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c226e203d205c22202b206e293b222c20226279436f6465223a2022202020696e74206e3b5c6e2020206e203d20313b227d</cs-runner></div>
    </div>
    
    <div id="par-406" class="paragraph">
        <p>Ensimmäinen rivi tarkoittaa väljästi sanottuna, että <em>"lohkaise pieni pala - johon mahtuu <code>int</code>-kokoinen arvo - säilytystilaa tietokoneen muistista, ja käytä siitä jatkossa nimeä <code>n</code>"</em>. Toisella rivillä julistetaan, että <em>"talleta arvo 1 muuttujaan, jonka nimi on <code>n</code>, siten korvaten sen, mitä kyseisessä säilytystilassa mahdollisesti jo on"</em>.</p>
    </div>
    
    <div id="par-407" class="paragraph">
        <p>Mikä sitten on tuo edellisen esimerkin <code>int</code>?</p>
    </div>
    
    <div id="par-408" class="paragraph">
        <p>C#:ssa jokaisella muuttujalla täytyy olla <em>tietotyyppi</em> (usein myös lyhyesti <em>tyyppi</em>). Tietotyyppi on määriteltävä, jotta ohjelma tietäisi, millaista tietoa muuttujaan tullaan tallentamaan. Toisaalta tietotyyppi on määriteltävä siksi, että ohjelma osaa varata muistista sopivan kokoisen lohkareen muuttujan sisältämää tietoa varten. Esimerkiksi <code>int</code>-tyypin tapauksessa tilantarve olisi 32 bittiä (4 tavua), <code>byte</code>-tyypin tapauksessa 8 bittiä (1 tavu) ja <code>double</code>-tyypin 64 bittiä (8 tavua). Muuttuja määritellään (<em>declare</em>) kirjoittamalla ensiksi tietotyyppi ja sen perään muuttujan nimi. Muuttujan nimet aloitetaan C#ssa pienellä kirjaimella, jonka jälkeen jokainen uusi sana alkaa aina isolla kirjaimella. Kuten aiemmin mainittiin, tämä nimeämistapa on nimeltään camelCasing.</p>
    </div>
    
    <div id="par-409" class="paragraph">
        <pre><code>muuttujanTietotyyppi muuttujanNimi;</code></pre>
    </div>
    
    <div id="par-410" class="paragraph">
        <p>Tuo mainitsemamme <code>int</code> on siis tietotyyppi, ja <code>int</code>-tyyppiseen muuttujaan voi tallentaa kokonaislukuja. Muuttujaan <code>n</code> voimme laittaa lukuja 1, 2, 3, samoin 0, -1, -2, ja niin edelleen, mutta emme lukua 0.1 tai sanaa "Moi". Mutta mitä ikinä laitammekin, niin muuttujassa voi olla vain <strong>yksi</strong> arvo kerrallaan.</p>
    </div>
    
    <div id="par-411" class="paragraph">
        <p>Henkilön iän voisimme tallentaa seuraavaan muuttujaan:</p>
    </div>
    
    <div id="par-412" class="paragraph">
        <pre><code>int henkilonIka;</code></pre>
    </div>
    
    <div id="par-413" class="paragraph">
        <p>Huomaa, että tässä emme aseta muuttujalle mitään arvoa, vain määrittelemme muuttujan <code>int</code>-tyyppiseksi ja annamme sille nimen.</p>
    </div>
    
    <div id="par-414" class="paragraph">
        <p>Samantyyppisiä muuttujia voidaan määritellä kerralla useampia erottamalla muuttujien nimet pilkulla. Tietotyyppiä double käytetään, kun halutaan tallentaa desimaalilukuja.</p>
    </div>
    
    <div id="par-415" class="paragraph">
        <pre><code>double paino, pituus;</code></pre>
    </div>
    
    <div id="par-416" class="paragraph">
        <p>Määrittely onnistuu toki myös erikseen (joka on jopa suosteltavampi tapa):</p>
    </div>
    
    <div id="par-417" class="paragraph">
        <pre><code>double paino;
double pituus;</code></pre>
    </div>
    
    <div id="par-418" class="paragraph">
        <h2 id="alkeistietotyypit">7.2 Alkeistietotyypit</h2>
    </div>
    
    <div id="par-419" class="paragraph">
        <p>C#:n tietotyypit voidaan jakaa alkeistietotyyppeihin (<em>primitive types</em>) ja oliotietotyyppeihin (<em>reference types</em>). Oliotietotyyppeihin kuuluu muun muassa käyttämämme <code>PhysicsObject</code>-tyyppi, jota pallot <code>p1</code> jne. olivat, sekä merkkijonojen tallennukseen tarkoitettu <code>string</code>-olio. Oliotyyppejä käsitellään myöhemmin luvussa 8.</p>
    </div>
    
    <div id="par-420" class="paragraph">
        <p>Eri tietotyypit vaativat eri määrän kapasiteettia tietokoneen muistista. Vaikka nykyajan koneissa on paljon muistia, on hyvin tärkeää valita oikean tyyppinen muuttuja kuhunkin tilanteeseen. Suurissa ohjelmissa ongelma korostuu hyvin nopeasti käytettäessä muuttujia, jotka kuluttavat tilanteeseen nähden kohtuuttoman paljon muistikapasiteettia. C#:n alkeistietotyypit on lueteltu alla.</p>
    </div>
    
    <div id="par-421" class="paragraph">
        <p>Taulukko 1: C#:n alkeistietotyypit koon mukaan järjestettynä.</p>
    </div>
    
    <div id="par-422" class="paragraph">
        <table>
<thead>
<tr class="header">
<th align="left">C#-tyyppi</th>
<th align="left">Koko</th>
<th align="left">Selitys</th>
<th align="left">Arvoalue</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">bool</td>
<td align="left">1 bitti</td>
<td align="left">kaksiarvoinen tietotyyppi</td>
<td align="left">true tai false</td>
</tr>
<tr class="even">
<td align="left">sbyte</td>
<td align="left">8 bittiä</td>
<td align="left">yksi tavu</td>
<td align="left">-128..127</td>
</tr>
<tr class="odd">
<td align="left">byte</td>
<td align="left">8 bittiä</td>
<td align="left">yksi tavu (etumerkitön)</td>
<td align="left">0..255</td>
</tr>
<tr class="even">
<td align="left">char</td>
<td align="left">16 bittiä</td>
<td align="left">yksi merkki</td>
<td align="left">kaikki merkit</td>
</tr>
<tr class="odd">
<td align="left">short</td>
<td align="left">16 bittiä</td>
<td align="left">pieni kokonaisluku</td>
<td align="left">-32,768..32,767</td>
</tr>
<tr class="even">
<td align="left">ushort</td>
<td align="left">16 bittiä</td>
<td align="left">pieni kokonaisluku (etumerkitön)</td>
<td align="left">0..65,535</td>
</tr>
<tr class="odd">
<td align="left">int</td>
<td align="left">32 bittiä</td>
<td align="left">kokonaisluku</td>
<td align="left">-2,147,483,648 .. 2,147,483,647</td>
</tr>
<tr class="even">
<td align="left">uint</td>
<td align="left">32 bittiä</td>
<td align="left">kokonaisluku (etumerkitön)</td>
<td align="left">0..4,294,967,295</td>
</tr>
<tr class="odd">
<td align="left">float</td>
<td align="left">32 bittiä</td>
<td align="left">liukuluku</td>
<td align="left">noin 7 desimaalin tarkkuus, ±1.5 × 10<sup>-45</sup>.. ±3.4 × 10<sup>38</sup></td>
</tr>
<tr class="even">
<td align="left">long</td>
<td align="left">64 bittiä</td>
<td align="left">iso kokonaisluku</td>
<td align="left">-2<sup>63</sup>..2<sup>63</sup>-1</td>
</tr>
<tr class="odd">
<td align="left">ulong</td>
<td align="left">64 bittiä</td>
<td align="left">iso kokonaisluku (etumerkitön)</td>
<td align="left">0..18,446,744,073,709,615</td>
</tr>
<tr class="even">
<td align="left">double</td>
<td align="left">64 bittiä</td>
<td align="left">tarkka liukuluku</td>
<td align="left">noin 15 desimaalin tarkkuus, ±5.0 × 10<sup>-324</sup>.. ±1.7 × 10<sup>308</sup></td>
</tr>
<tr class="odd">
<td align="left">decimal</td>
<td align="left">128 bittiä</td>
<td align="left">erittäin tarkka liukuluku</td>
<td align="left">Noin 28 numeron tarkkuus</td>
</tr>
</tbody>
</table>
    </div>
    
    <div id="par-423" class="paragraph">
        <p>Tällä kurssilla tärkeimmät alkeistietotyypit ovat: <code>bool</code>, <code>char</code>, <code>int</code> ja <code>double</code>.</p>
    </div>
    
    <div id="par-424" class="paragraph">
        <p>Tässä monisteessa suositellaan, että desimaalilukujen talletukseen käytetään aina <code>double</code>-tietotyyppiä (jossain tapauksissa jopa <code>decimal</code>-tyyppiä), vaikka monessa muussa lähteessä <code>float</code>-tietotyyppiä käytetäänkin. Tämä johtuu siitä, että liukuluvut, joina desimaaliluvut tietokoneessa käsitellään, ovat harvoin tarkkoja arvoja tietokoneessa. Itse asiassa ne ovat tarkkoja vain kun ne esittävät jotakin kahden potenssin kombinaatiota, kuten esimerkiksi 2.0, 7.0, 0.5 tai 0.375.</p>
    </div>
    
    <div id="par-425" class="paragraph">
        <p>Useimmiten liukuluvut ovat pelkkiä approksimaatioita oikeasta reaaliluvusta. Esimerkiksi lukua 0.1 ei pystytä tietokoneessa esittämään biteillä tarkasti perustietotyypeillä. Tällöin laskujen määrän kasvaessa lukujen epätarkkuus vain lisääntyy. Tämän takia onkin turvallisempaa käyttää aina <code>double</code>-tietotyyppiä, koska se suuremman bittimääränsä takia pystyy tallettamaan enemmän merkitseviä desimaaleja.</p>
    </div>
    
    <div id="par-426" class="paragraph">
        <p>Tietyissä sovelluksissa, joissa mahdollisimman suuri tarkkuus on välttämätön (kuten pankki- tai nanotason fysiikkasovellukset), on suositeltavaa käyttää korkeimpaa mahdollista tarkkuutta tarjoavaa <code>decimal</code>-tyyppiä. Reaalilukujen esityksestä tietokoneessa puhutaan lisää kohdassa <a href="#o246Liukuluku_floatingpoint">26.6</a>. [VES][KOS]</p>
    </div>
    
    <div id="par-427" class="paragraph">
        <p>Seuraavassa esimerkki mitä tapahtuu kun lasketaan yhteen kaksi liian isoa kokonaislukua tai muuten lisätään muuttujaa liikaa.</p>
    </div>
    
    <div id="par-428" class="paragraph">
        <div id='1.intylivuoto' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b22686561646572223a2022546568745c7530306534765c75303065342058222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61322e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20226279436f646531223a20222f2f5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c2253756d6d61203d205c22202b2073756d6d61293b5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c226220202020203d205c22202b2062293b5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c227362202020203d205c22202b207362293b222c2022726f7773223a202238222c20227461736b4944223a2022312e696e74796c6976756f746f222c20227374656d223a2022416a6120656e73696e206f686a656c6d61206d75757474616d617474612e2020506f697374612073697474656e20746f69736573746120696e742d6d75757474756a6173746120796b736920302e2020416a612e20204d69745c75303065342074617061687475692e204c616974612074616b616973696e20302e202056616968646120747979706974206e69696e2c206574745c7530306534206c61736b7574206d656e65765c753030653474206f696b65696e2e222c20227265706c616365223a2022414c4b554f5341222c20226279436f6465223a20222020202020202020696e74206c756b7531203d20313030303030303030303b5c6e2020202020202020696e74206c756b7532203d20323030303030303030303b5c6e2020202020202020696e742073756d6d61203d206c756b7531202b206c756b75323b5c6e2020202020202020627974652062203d203235343b5c6e2020202020202020622b2b3b20622b2b3b5c6e20202020202020207362797465207362203d203132373b5c6e202020202020202073622b2b3b227d</cs-runner></div>
    </div>
    
    <div id="par-429" class="paragraph">
        <h2 id="arvon-asettaminen-muuttujaan">7.3 Arvon asettaminen muuttujaan</h2>
    </div>
    
    <div id="par-430" class="paragraph">
        <p>Muuttujaan asetetaan arvo sijoitusoperaattorilla (assignment operator) "=". Lauseita, joilla asetetaan muuttujille arvoja sanotaan sijoituslauseiksi (<em>assignment statement</em>). On tärkeää huomata, että sijoitus tapahtuu aina oikealta vasemmalle: sijoitettava on yhtäsuuruusmerkin oikealla puolella ja kohde merkin vasemmalla puolella.</p>
    </div>
    
    <div id="par-431" class="paragraph">
        <div id='1.arvonasettaminen' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b22686561646572223a2022546568745c7530306534765c75303065342058222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61322e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20226279436f646531223a20222f2f5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c22782020202020202020202020203d205c22202b2078293b5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c2268656e6b696c5c75303066366e20696b5c7530306534203d205c22202b2068656e6b696c6f6e496b61293b5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c227061696e6f20202020202020203d205c22202b207061696e6f293b5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c22706974757573202020202020203d205c22202b20706974757573293b222c2022726f7773223a202239222c20227461736b4944223a2022312e6172766f6e6173657474616d696e656e222c20227374656d223a20224573697474656c65206d75757474756a617420616c6c61206f6c657669612073696a6f6974756b7369612076617274656e2c206e69696e206574745c7530306534206f686a656c6d61206b5c75303065345c75303065346e747979206a6120746f696d69692e222c202275736572636f6465223a20225c6e5c6e5c6e5c6e202020202020202078203d2032302e303b5c6e202020202020202068656e6b696c6f6e496b61203d2032333b5c6e20202020202020207061696e6f203d2038302e353b5c6e2020202020202020706974757573203d203138332e353b5c6e20202020202020202f2f2038302e35203d207061696e6f3b20202f2f206b6f6b65696c652c20745c75303065346d5c753030653420656920746f696d692120222c20227265706c616365223a2022414c4b554f5341222c20226279436f6465223a20225c6e5c6e5c6e5c6e202020202020202078203d2032302e303b5c6e202020202020202068656e6b696c6f6e496b61203d2032333b5c6e20202020202020207061696e6f203d2038302e353b5c6e2020202020202020706974757573203d203138332e353b5c6e20202020202020202f2f2038302e35203d207061696e6f3b20202f2f206b6f6b65696c652c20745c75303065346d5c753030653420656920746f696d692120227d</cs-runner></div>
    </div>
    
    <div id="par-432" class="paragraph">
        <p>Muuttujaan voi asettaa arvon myös jo määrittelyn yhteydessä.</p>
    </div>
    
    <div id="par-433" class="paragraph">
        <pre><code>bool onkoKalastaja = true;
char merkki = 't';
int kalojenLkm = 0;
double luku1 = 0, luku2 = 0, luku3 = 0;</code></pre>
    </div>
    
    <div id="par-434" class="paragraph">
        <div id='1.arvonasettaminen2' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b22686561646572223a2022546568745c7530306534765c75303065342058222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61322e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20226279436f646531223a20222f2f5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c22782020202020202020202020203d205c22202b2078293b5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c2268656e6b696c5c75303066366e20696b5c7530306534203d205c22202b2068656e6b696c6f6e496b61293b5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c227061696e6f20202020202020203d205c22202b207061696e6f293b5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c22706974757573202020202020203d205c22202b20706974757573293b222c2022726f7773223a202234222c20227461736b4944223a2022312e6172766f6e6173657474616d696e656e32222c20227374656d223a20224c61697461206d75757474756a69656e207479797070692073696a6f69747573726976696c6c652e222c20227265706c616365223a2022414c4b554f5341222c20226279436f6465223a2022202020202020202078203d2032302e303b5c6e202020202020202068656e6b696c6f6e496b61203d2032333b5c6e20202020202020207061696e6f203d2038302e353b5c6e2020202020202020706974757573203d203138332e353b227d</cs-runner></div>
    </div>
    
    <div id="par-435" class="paragraph">
        <p>Muuttuja täytyy olla määritelty tietyn tyyppiseksi ennen kuin siihen voi asettaa arvoa. Muuttujaan voi asettaa vain määrittelyssä annetun tietotyypin mukaisia arvoja tai sen kanssa <em>sijoitusyhteensopivia</em> arvoja. Esimerkiksi liukulukutyyppeihin (float ja double) voi sijoittaa myös kokonaislukutyyppisiä arvoja, sillä kokonaisluvut on reaalilukujen osajoukko. Alla sijoitamme arvon 4 muuttujaan nimeltä luku2, ja kolmannella rivillä luku2-muuttujan sisältämän arvon (4) muuttujaan, jonka nimi on luku1.</p>
    </div>
    
    <div id="par-436" class="paragraph">
        <div id='1.doubleint' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61322e6373222c20227265706c616365223a2022414c4b554f5341222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e646f75626c65696e74222c20226279436f646531223a20222f2f5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c226c756b7531203d205c22202b206c756b7531293b5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c226c756b7532203d205c22202b206c756b7532293b222c20226279436f6465223a20222020202020202020646f75626c65206c756b75313b5c6e2020202020202020696e74206c756b7532203d20343b5c6e20202020202020206c756b7531203d206c756b75323b227d</cs-runner></div>
    </div>
    
    <div id="par-437" class="paragraph">
        <p>Toisinpäin tämä ei onnistu: double-tyyppistä arvoa ei voi sijoittaa int-tyyppiseen muuttujaan. Alla oleva koodi ei kääntyisi:</p>
    </div>
    
    <div id="par-438" class="paragraph">
        <div id='1.eikaannyintdouble' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61322e6373222c2022696e64656e74223a202230222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20226279436f646531223a20222f2f5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c226c756b7531203d205c22202b206c756b7531293b5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c226c756b7532203d205c22202b206c756b7532293b222c20227461736b4944223a2022312e65696b61616e6e79696e74646f75626c65222c20227265706c616365223a2022414c4b554f5341222c20226279436f6465223a20222f2f20545c75303063344d5c7530306334204b4f4f4449204549204b5c75303063345c75303063344e4e59215c6e2020202020202020696e74206c756b75313b5c6e2020202020202020646f75626c65206c756b7532203d20342e303b5c6e20202020202020206c756b7531203d206c756b75323b227d</cs-runner></div>
    </div>
    
    <div id="par-439" class="paragraph">
        <p>Jos edellä oleva sijoitus <code>double -&gt; int</code> halutaan välttämättä tehdä, niin silloin on käytettävä typecastia (kokeile edelliseen)</p>
    </div>
    
    <div id="par-440" class="paragraph">
        <pre><code>   luku1 = (int)luku2;</code></pre>
    </div>
    
    <div id="par-441" class="paragraph">
        <p>Kun <code>decimal</code>-tyyppinen muuttuja alustetaan jollain luvulla, tulee luvun perään (ennen puolipistettä) laittaa <code>m</code> (tai <code>M</code>)-merkki. Samoin <code>float</code>-tyyppisten muuttujien alustuksessa perään laitetaan <code>f</code> (tai <code>F</code>)-merkki.</p>
    </div>
    
    <div id="par-442" class="paragraph">
        <div id='1.saldojalampotila' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61322e6373222c20227265706c616365223a2022414c4b554f5341222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e73616c646f6a616c616d706f74696c61222c20226279436f646531223a20222f2f5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c2253616c646f203d205c22202b2074696c696e53616c646f293b5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c226c616d706f74696c61203d205c22202b206c616d706f74696c61293b222c20226279436f6465223a20222020202020202020646563696d616c2074696c696e53616c646f203d20333439382e39386d3b5c6e2020202020202020666c6f6174206c616d706f74696c61203d202d342e38663b227d</cs-runner></div>
    </div>
    
    <div id="par-443" class="paragraph">
        <p>Huomaa, että char-tyyppiseen muuttujaan sijoitetaan arvo laittamalla merkki heittomerkkien väliin, esimerkiksi näin.</p>
    </div>
    
    <div id="par-444" class="paragraph">
        <div id='1.ekakirjain' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61322e6373222c20227265706c616365223a2022414c4b554f5341222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e656b616b69726a61696e222c20226279436f646531223a20222f2f5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c224b69726a61696e203d205c22202b20656b614b69726a61696e293b222c20226279436f6465223a202220202020202020206368617220656b614b69726a61696e203d20276b273b227d</cs-runner></div>
    </div>
    
    <div id="par-445" class="paragraph">
        <p>Näin sen erottaa myöhemmin käsiteltävästä <code>string</code>-tyyppiseen muuttujaan sijoittamisesta, jossa sijoitettava merkkijono laitetaan lainausmerkkien väliin, esimerkiksi seuraavasti.</p>
    </div>
    
    <div id="par-446" class="paragraph">
        <div id='1.nimimuuttuja' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c20227265706c616365223a2022414c4b554f5341222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e6e696d696d75757474756a61222c20226279436f646531223a20222f2f5c6e2020202020202020436f6e736f6c652e57726974654c696e65285c224e696d69203d205c22202b206f6d614e696d69293b222c20226279436f6465223a20222020202020202020737472696e67206f6d614e696d69203d205c22416e7474692d4a757373695c223b227d</cs-runner></div>
    </div>
    
    <div id="par-447" class="paragraph">
        <p>Sijoituslause voi sisältää myös monimutkaisiakin lausekkeita, esimerkiksi aritmeettisia operaatioita:</p>
    </div>
    
    <div id="par-448" class="paragraph">
        <div id='1.numeroidenkeskiarvo' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61322e6373222c20227265706c616365223a2022414c4b554f5341222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e6e756d65726f6964656e6b65736b696172766f222c202275736572636f6465223a20222020202020202020646f75626c65206e756d65726f6964656e4b65736b696172766f203d202832202b2034202b2031202b2035202b2033202b203229202f20362e303b222c20226279436f646531223a20222f2f5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c224b65736b696172766f203d205c22202b206e756d65726f6964656e4b65736b696172766f293b222c20226279436f6465223a20222020202020202020646f75626c65206e756d65726f6964656e4b65736b696172766f203d202832202b2034202b2031202b2035202b2033202b203229202f20362e303b227d</cs-runner></div>
    </div>
    
    <div id="par-449" class="paragraph">
        <p>Sijoituslause voi sisältää myös muuttujia.</p>
    </div>
    
    <div id="par-450" class="paragraph">
        <div id='1.huoneenmitat' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61322e6373222c20227265706c616365223a2022414c4b554f5341222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e68756f6e65656e6d69746174222c202275736572636f6465223a20222020202020202020646f75626c652068756f6e65656e506974757573203d203534302e303b5c6e2020202020202020646f75626c652068756f6e65656e4c6576657973203d2068756f6e65656e5069747575733b5c6e2020202020202020646f75626c652068756f6e65656e416c61203d2068756f6e65656e506974757573202a2068756f6e65656e4c65766579733b222c20226279436f646531223a20222f2f5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c22506974757573203d205c22202b2068756f6e65656e506974757573293b5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c224c6576657973203d205c22202b2068756f6e65656e4c6576657973293b5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c22416c61202020203d205c22202b2068756f6e65656e416c61202020293b222c20226279436f6465223a20222020202020202020646f75626c652068756f6e65656e506974757573203d203534302e303b5c6e2020202020202020646f75626c652068756f6e65656e4c6576657973203d2068756f6e65656e5069747575733b5c6e2020202020202020646f75626c652068756f6e65656e416c61203d2068756f6e65656e506974757573202a2068756f6e65656e4c65766579733b227d</cs-runner></div>
    </div>
    
    <div id="par-451" class="paragraph">
        <p>Eli sijoitettava voi olla mikä tahansa lauseke, joka tuottaa muuttujalle kelpaavan arvon. Yhdistämällä muuttujia ja operaatoita voi lauseke olla edellisiäkin ""monimutkaisempi":</p>
    </div>
    
    <div id="par-452" class="paragraph">
        <div id='1.sijoitusluseke' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61322e6373222c20227265706c616365223a2022414c4b554f5341222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e73696a6f697475736c7573656b65222c202275736572636f6465223a20222020202020202020646f75626c6520616c6b75203d2033303b5c6e2020202020202020646f75626c65206e6f70657573203d2038303b5c6e2020202020202020646f75626c65206d61746b61203d20616c6b75202b20286e6f706575732d3130292a35202b2053797374656d2e4d6174682e53696e28302e35293b222c20226279436f646531223a20222f2f5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c224d61746b61203d205c22202b206d61746b6120293b222c20226279436f6465223a20222020202020202020646f75626c6520616c6b75203d2033303b5c6e2020202020202020646f75626c65206e6f70657573203d2038303b5c6e2020202020202020646f75626c65206d61746b61203d20616c6b75202b20286e6f706575732d3130292a35202b2053797374656d2e4d6174682e53696e28302e35293b227d</cs-runner></div>
    </div>
    
    <div id="par-453" class="paragraph">
        <p>C#:ssa täytyy aina asettaa joku arvo muuttujaan <em>ennen</em> sen käyttämistä. Kääntäjä ei käännä koodia, jossa käytetään muuttujaa jolle ei ole asetettu arvoa. Alla oleva ohjelma ei siis kääntyisi.</p>
    </div>
    
    <div id="par-454" class="paragraph">
        <div id='1.tamaeikaanny' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b226279436f6465223a20222f2f20545c75303063344d5c7530306334204f484a454c4d41204549204b5c75303063345c75303063344e4e5921212121212121215c6e7075626c696320636c617373204573696d65726b6b69205c6e7b5c6e202020207075626c69632073746174696320766f6964204d61696e28737472696e675b5d206172677329205c6e202020207b5c6e2020202020202020696e7420696b613b5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e6528696b61293b5c6e202020207d5c6e7d222c20227461736b4944223a2022312e74616d6165696b61616e6e79222c2022757365725f6964223a2022766573616c222c202275736572636f6465223a20222f2f20545c75303063344d5c7530306334204f484a454c4d41204549204b5c75303063345c75303063344e4e5921212121212121215c6e7075626c696320636c617373204573696d65726b6b69205c6e7b5c6e202020207075626c69632073746174696320766f6964204d61696e28737472696e675b5d206172677329205c6e202020207b5c6e2020202020202020696e7420696b613b5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e6528696b61293b5c6e202020207d5c6e7d227d</cs-runner></div>
    </div>
    
    <div id="par-455" class="paragraph">
        <p>Virheilmoitus näyttää tältä:</p>
    </div>
    
    <div id="par-456" class="paragraph">
        <pre><code>Esimerkki.cs(4,40): error CS0165: Use of unassigned local variable 'ika'</code></pre>
    </div>
    
    <div id="par-457" class="paragraph">
        <p>Kääntäjä kertoo, että <code>ika</code>-nimistä muuttuja yritetään käyttää, vaikka sille ei ole annettu vielä mitään arvoa. Tämä ei ole sallittua, joten ohjelman kääntämisyritys päättyy tähän.</p>
    </div>
    
    <div id="par-458" class="paragraph">
        <h2 id="muuttujan-nimeäminen">7.4 Muuttujan nimeäminen</h2>
    </div>
    
    <div id="par-459" class="paragraph">
        <p>Muuttujan nimen täytyy olla siihen tallennettavaa tietoa kuvaava. Yleensä pelkkä yksi kirjain on huono nimi muuttujalle, sillä se harvoin kuvaa kovin hyvin muuttujaa. Kuvaava muuttujan nimi selkeyttää koodia ja vähentää kommentoimisen tarvetta. Lyhyt muuttujan nimi ei ole itseisarvo. Vielä parikymmentä vuotta sitten se saattoi olla sitä, koska se nopeutti koodin kirjoittamista. Nykyaikaisia kehitysympäristöjä käytettäessä tämä ei enää pidä paikkaansa, sillä editorit osaavat täydentää muuttujan nimen samalla kun koodia kirjoitetaan, joten niitä ei käytännössä koskaan tarvitse kirjoittaa kokonaan, paitsi tietysti ensimmäisen kerran.</p>
    </div>
    
    <div id="par-460" class="paragraph">
        <p>Yksikirjaimisia muuttujien nimiäkin voi perustellusti käyttää, jos niillä on esimerkiksi jo matematiikasta tai fysiikasta ennestään tuttu merkitys. Nimet <code>x</code> ja <code>y</code> ovat hyviä kuvaamaan koordinaatteja. Nimi <code>l</code> (eng. length) viittaa pituuteen ja <code>r</code> (eng. radius) säteeseen. Fysikaalisessa ohjelmassa <code>s</code> voi hyvin kuvata matkaa.</p>
    </div>
    
    <div id="par-461" class="paragraph">
        <div class="huomautus">
<p>Huomaa! Muuttujan nimi ei voi C#:ssa alkaa numerolla.</p>
</div>
    </div>
    
    <div id="par-462" class="paragraph">
        <p>C#:n koodauskäytänteiden mukaan muuttujan nimi alkaa pienellä kirjaimella ja jos muuttujan nimi koostuu useammasta sanasta aloitetaan uusi sana aina isolla kirjaimella kuten alla.</p>
    </div>
    
    <div id="par-463" class="paragraph">
        <pre><code>int polkupyoranRenkaanKoko;</code></pre>
    </div>
    
    <div id="par-464" class="paragraph">
        <p>C#:ssa muuttujan nimi voi sisältää ääkkösiä, mutta niiden käyttö ei suositella, koska siirtyminen koodistosta toiseen aiheuttaa usein ylimääräisiä ongelmia.</p>
    </div>
    
    <div id="par-465" class="paragraph">
        <div class="huomautus">
<p><em>Koodisto =</em> Määrittelee jokaiselle <em>merkistön</em> merkille yksikäsitteisen koodinumeron. Merkin numeerinen esitys on usein välttämätön tietokoneissa. Merkistö määrittelee joukon merkkejä ja niille nimen, numeron ja jonkinnäköisen muodon kuvauksen. Merkistöllä ja koodistolla tarkoitetaan usein samaa asiaa, kuitenkin esimerkiksi Unicode-merkistö sisältää useita eri koodaus tapoja (UTF-8, UTF-16, UTF-32). Koodisto on siis se merkistön osa, joka määrittelee merkille numeerisen koodiarvon. Koodistoissa syntyy ongelmia yleensä silloin, kun siirrytään jostain skandimerkkejä (ä,ö,å, ...) sisältävästä koodistosta seitsemänbittiseen ASCII-koodistoon, joka ei tue skandeja. ASCII-koodistosta puhutaan lisää luvussa <a href="#o25_ASCIIkoodi">27</a>.</p>
</div>
    </div>
    
    <div id="par-466" class="paragraph">
        <h3 id="cn-varatut-sanat">7.4.1 C#:n varatut sanat</h3>
    </div>
    
    <div id="par-467" class="paragraph">
        <p>Muuttujan nimi ei saa olla mikään ohjelmointikielen varatuista sanoista, eli sanoista joilla on C#:ssa joku muu merkitys.</p>
    </div>
    
    <div id="par-468" class="paragraph">
        <p>Taulukko 2: C#:n varatut sanat.</p>
    </div>
    
    <div id="par-469" class="paragraph">
        <table>
<tbody>
<tr class="odd">
<td align="left">abstract</td>
<td align="left">do</td>
<td align="left">in</td>
<td align="left">protected</td>
<td align="left">true</td>
</tr>
<tr class="even">
<td align="left">as</td>
<td align="left">double</td>
<td align="left">int</td>
<td align="left">public</td>
<td align="left">try</td>
</tr>
<tr class="odd">
<td align="left">base</td>
<td align="left">else</td>
<td align="left">interface</td>
<td align="left">readonly</td>
<td align="left">typeof</td>
</tr>
<tr class="even">
<td align="left">bool</td>
<td align="left">enum</td>
<td align="left">internal</td>
<td align="left">ref</td>
<td align="left">uint</td>
</tr>
<tr class="odd">
<td align="left">break</td>
<td align="left">event</td>
<td align="left">is</td>
<td align="left">return</td>
<td align="left">ulong</td>
</tr>
<tr class="even">
<td align="left">byte</td>
<td align="left">explicit</td>
<td align="left">lock</td>
<td align="left">sbyte</td>
<td align="left">unchecked</td>
</tr>
<tr class="odd">
<td align="left">case</td>
<td align="left">extern</td>
<td align="left">long</td>
<td align="left">sealed</td>
<td align="left">unsafe</td>
</tr>
<tr class="even">
<td align="left">catch</td>
<td align="left">false</td>
<td align="left">namespace</td>
<td align="left">short</td>
<td align="left">ushort</td>
</tr>
<tr class="odd">
<td align="left">char</td>
<td align="left">finally</td>
<td align="left">new</td>
<td align="left">sizeof</td>
<td align="left">using</td>
</tr>
<tr class="even">
<td align="left">checked</td>
<td align="left">fixed</td>
<td align="left">null</td>
<td align="left">stackalloc</td>
<td align="left">virtual</td>
</tr>
<tr class="odd">
<td align="left">class</td>
<td align="left">float</td>
<td align="left">object</td>
<td align="left">static</td>
<td align="left">void</td>
</tr>
<tr class="even">
<td align="left">const</td>
<td align="left">for</td>
<td align="left">operator</td>
<td align="left">string</td>
<td align="left">volatile</td>
</tr>
<tr class="odd">
<td align="left">continue</td>
<td align="left">foreach</td>
<td align="left">out</td>
<td align="left">struct</td>
<td align="left">while</td>
</tr>
<tr class="even">
<td align="left">decimal</td>
<td align="left">goto</td>
<td align="left">override</td>
<td align="left">switch</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">default</td>
<td align="left">if</td>
<td align="left">params</td>
<td align="left">this</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">delegate</td>
<td align="left">implicit</td>
<td align="left">private</td>
<td align="left">throw</td>
<td align="left"></td>
</tr>
</tbody>
</table>
    </div>
    
    <div id="par-470" class="paragraph">
        <div id='1.tamaeikaanny2' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b226279436f6465223a20222f2f20545c75303063344d5c7530306334204f484a454c4d41204549204b5c75303063345c75303063344e4e5921212121212121215c6e7075626c696320636c617373204573696d65726b6b69205c6e7b5c6e202020207075626c69632073746174696320766f6964204d61696e28737472696e675b5d206172677329205c6e202020207b5c6e2020202020202020696e74206576656e743b5c6e20202020202020206576656e74203d2035323b5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65286576656e74293b5c6e202020207d5c6e7d222c20227461736b4944223a2022312e74616d6165696b61616e6e7932222c2022757365725f6964223a2022766573616c222c202275736572636f6465223a20222f2f20545c75303063344d5c7530306334204f484a454c4d41204549204b5c75303063345c75303063344e4e5921212121212121215c6e7075626c696320636c617373204573696d65726b6b69205c6e7b5c6e202020207075626c69632073746174696320766f6964204d61696e28737472696e675b5d206172677329205c6e202020207b5c6e2020202020202020696e74206576656e743b5c6e20202020202020206576656e74203d2035323b5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65286576656e74293b5c6e202020207d5c6e7d227d</cs-runner></div>
    </div>
    
    <div id="par-471" class="paragraph">
        <h2 id="muuttujien-näkyvyys">7.5 Muuttujien näkyvyys</h2>
    </div>
    
    <div id="par-472" class="paragraph">
        <p>Muuttujaa voi käyttää (lukea ja asettaa arvoja) vain siinä lohkossa, missä se on määritelty. Muuttujan määrittelyn täytyy aina olla ennen (koodissa ylempänä), kun sitä ensimmäisen kerran käytetään. Jos muuttuja on käytettävissä sanotaan, että muuttuja <em>näkyy</em>. Aliohjelman sisällä määritelty muuttuja ei siis näy muissa aliohjelmissa.</p>
    </div>
    
    <div id="par-473" class="paragraph">
        <p>Luokan sisällä muuttuja voidaan määritellä myös niin, että se näkyy kaikkialla, siis kaikille aliohjelmille. Kun muuttuja on näkyvissä kaikille ohjelman osille, sanotaan sitä <em>globaaliksi muuttujaksi</em> (global variable). Globaaleja muuttujia tulee välttää aina kun mahdollista.</p>
    </div>
    
    <div id="par-474" class="paragraph">
        <p>Lisätietoa muuttujien näkyvyydestä löydät wikistä osoitteessa</p>
    </div>
    
    <div id="par-475" class="paragraph">
        <p><a href="https://trac.cc.jyu.fi/projects/ohj1/wiki/MuuttujienNakyvyys" class="uri">https://trac.cc.jyu.fi/projects/ohj1/wiki/MuuttujienNakyvyys</a>.</p>
    </div>
    
    <div id="par-476" class="paragraph">
        <div id='1.tamaeikaanny3' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227461736b4944223a2022312e74616d6165696b61616e6e7933222c2022757365725f6964223a2022766573616c222c20226279436f6465223a20222f2f20545c75303063344d5c7530306334204f484a454c4d41204549204b5c75303063345c75303063344e4e5921212121212121215c6e7075626c696320636c617373204573696d65726b6b69205c6e7b5c6e202020207075626c69632073746174696320766f6964204d61696e28737472696e675b5d206172677329205c6e202020207b5c6e20202020202020207b5c6e202020202020202020202020696e74206e203d20353b5c6e2020202020202020202020206e2b2b3b5c6e20202020202020207d5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65286e293b5c6e202020207d5c6e7d227d</cs-runner></div>
    </div>
    
    <div id="par-477" class="paragraph">
        <h2 id="vakiot">7.6 Vakiot</h2>
    </div>
    
    <div id="par-478" class="paragraph">
        <blockquote>
<p>One man's constant is another man's variable. -Alan Perlis</p>
</blockquote>
    </div>
    
    <div id="par-479" class="paragraph">
        <p>Muuttujien lisäksi ohjelmointikielissä voidaan määritellä vakioita (<em>constant</em>). Vakioiden arvoa ei voi muuttaa määrittelyn jälkeen. C#:ssa vakio määritellään muuten kuten muuttuja, mutta muuttujan tyypin eteen kirjoitetaan lisämääre const.</p>
    </div>
    
    <div id="par-480" class="paragraph">
        <div id='1.vakio' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61322e6373222c20227265706c616365223a2022414c4b554f5341222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e76616b696f222c20226279436f646531223a20222f2f5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c224b75756b6175736961203d205c22202b204b55554b41555349454e5f4c4b4d293b222c20226279436f6465223a20222020202020202020636f6e737420696e74204b55554b41555349454e5f4c4b4d203d2031323b5c6e20202020202020202f2f204b55554b41555349454e5f4c4b4d203d2031333b202f2f204b6f6b65696c6520706f697374616120745c75303065346d5c7530306534206b6f6d6d656e747469227d</cs-runner></div>
    </div>
    
    <div id="par-481" class="paragraph">
        <p>Tällä kurssilla vakiot kirjoitetaan suuraakkosin siten, että sanat erotetaan alaviivalla (_). Näin ne erottaa helposti muuttujien nimistä, jotka alkavat pienellä kirjaimella. Muitakin kirjoitustapoja on, esimerkiksi Pascal Casing on toinen yleisesti käytetty vakioiden kirjoitusohje.</p>
    </div>
    
    <div id="par-482" class="paragraph">
        <h2 id="operaattorit">7.7 Operaattorit</h2>
    </div>
    
    <div id="par-483" class="paragraph">
        <p>Usein meidän täytyy tallentaa muuttujiin erilaisten laskutoimitusten tuloksia. C#:ssa laskutoimituksia voidaan tehdä aritmeettisilla operaatioilla (<em>arithmetic operation</em>), joista mainittiin jo kun teimme lumiukkoesimerkkiä. Ohjelmassa olevia aritmeettisia laskutoimituksia sanotaan aritmeettisiksi lausekkeiksi (arithmetic expression).</p>
    </div>
    
    <div id="par-484" class="paragraph">
        <p>C#:ssa on myös vertailuoperaattoreita (<em>comparison operators</em>), loogisia operaattoreita, bittikohtaisia operaattoreita (<em>bitwise operators</em>), arvonmuunto-operaattoreita (<em>shortcut operators</em>), sijoitusoperaattori <code>=</code>, <code>is</code>-operaattori sekä ehto-operaattori <code>?</code>. Tässä luvussa käsitellään näistä tärkeimmät.</p>
    </div>
    
    <div id="par-485" class="paragraph">
        <h3 id="aritmeettiset-operaatiot">7.7.1 Aritmeettiset operaatiot</h3>
    </div>
    
    <div id="par-486" class="paragraph">
        <p>C#:ssa peruslaskutoimituksia suoritetaan aritmeettisilla operaatiolla, joista <code>+</code> ja <code>-</code> tulivatkin esille aikaisemmissa esimerkeissä. Aritmeettisia operaattoreita on viisi.</p>
    </div>
    
    <div id="par-487" class="paragraph">
        <p>Taulukko 3: Aritmeettiset operaatiot.</p>
    </div>
    
    <div id="par-488" class="paragraph">
        <table>
<thead>
<tr class="header">
<th align="center">Operaattori</th>
<th align="left">Toiminto</th>
<th align="left">Esimerkki</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">+</td>
<td align="left">yhteenlasku</td>
<td align="left">System.Console.WriteLine(1+2); // 3</td>
</tr>
<tr class="even">
<td align="center">-</td>
<td align="left">vähennyslasku</td>
<td align="left">System.Console.WriteLine(1-2); // -1</td>
</tr>
<tr class="odd">
<td align="center">*</td>
<td align="left">kertolasku</td>
<td align="left">System.Console.WriteLine(2*3); // 6</td>
</tr>
<tr class="even">
<td align="center">/</td>
<td align="left">jakolasku</td>
<td align="left">System.Console.WriteLine(6 / 2); // 3</td>
</tr>
<tr class="odd">
<td align="center"></td>
<td align="left"></td>
<td align="left">System.Console.WriteLine(7 / 2); // Huom! 3</td>
</tr>
<tr class="even">
<td align="center"></td>
<td align="left"></td>
<td align="left">System.Console.WriteLine(7 / 2.0); // 3.5</td>
</tr>
<tr class="odd">
<td align="center"></td>
<td align="left"></td>
<td align="left">System.Console.WriteLine(7.0 / 2); // 3.5</td>
</tr>
<tr class="even">
<td align="center">%</td>
<td align="left">jakojäännös (modulo)</td>
<td align="left">System.Console.WriteLine(18 % 7); // 4</td>
</tr>
</tbody>
</table>
    </div>
    
    <div id="par-489" class="paragraph">
        <div id='1.operattoreita' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b22686561646572223a2022546568745c7530306534765c7530306534203131222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61322e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20226279436f646531223a20222f2f5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c2254756c6f73203d205c22202b2074756c6f73293b222c20227461736b4944223a2022312e6f7065726174746f7265697461222c20227374656d223a20224b6f6b65696c65202b202d6d65726b696e2074696c616c6c65206b61696b6b696120656d2e206f706572616174746f72656974612e204d6965746920656e6e656e20616a6f61206d69745c7530306534206f686a656c6d612074756c6f737461612e222c20227265706c616365223a2022414c4b554f5341222c20226279436f6465223a20222020202020202020696e74206c756b7531203d2031373b5c6e2020202020202020696e74206c756b7532203d20323b5c6e2020202020202020696e742074756c6f73203d206c756b7531202b206c756b75323b227d</cs-runner></div>
    </div>
    
    <div id="par-490" class="paragraph">
        <h3 id="vertailuoperaattorit">7.7.2 Vertailuoperaattorit</h3>
    </div>
    
    <div id="par-491" class="paragraph">
        <p>Vertailuoperaattoreiden avulla verrataan muuttujien arvoja keskenään. Vertailuoperaattorit palauttavat totuusarvon (<code>true</code> tai <code>false</code>). Vertailuoperaattoreita on kuusi. Lisää vertailuoperaattoreista luvussa 13.</p>
    </div>
    
    <div id="par-492" class="paragraph">
        <h3 id="arvonmuunto-operaattorit">7.7.3 Arvonmuunto-operaattorit</h3>
    </div>
    
    <div id="par-493" class="paragraph">
        <p>Arvonmuunto-operaattoreiden avulla laskutoimitukset voidaan esittää tiiviimmässä muodossa: esimerkiksi <code>x++;</code> (4 merkkiä) tarkoittaa samaa asiaa kuin <code>x = x+1;</code> (6 merkkiä). Niiden avulla voidaan myös alustaa muuttujia.</p>
    </div>
    
    <div id="par-494" class="paragraph">
        <p>Taulukko 4: Arvonmuunto-operaattorit.</p>
    </div>
    
    <div id="par-495" class="paragraph">
        <table>
<colgroup>
<col width="12%">
<col width="26%">
<col width="36%">
</colgroup>
<thead>
<tr class="header">
<th align="center">Operaatto r i</th>
<th align="left">Toiminto</th>
<th align="left">Esimerkki</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">++<br><br><br><br></td>
<td align="left">Lisäysoperaattori.<br>Lisää muuttujan arvoa yhdellä.<br><br><br></td>
<td align="left"><code>int luku = 0;</code><br><code>System.Console.WriteLine(luk u++) ; // 0</code> <code>System.Console.WriteLine(luk u++) ; // 1</code> <code>System.Console.WriteLine(luk u); // 2</code> <code>System.Console.WriteLine(++l uku) ; // 3</code></td>
</tr>
<tr class="even">
<td align="center">--</td>
<td align="left">Vähennysoperaattori.<br>Vähentää muuttujan arvoa yhdellä.<br><br><br></td>
<td align="left"><code>int luku = 5;</code><br><code>System.Console.WriteLine(luk u--) ; // 5</code> <code>System.Console.WriteLine(luk u--) ; // 4</code> <code>System.Console.WriteLine(luk u); // 3</code> <code>System.Console.WriteLine(--l uku) ; // 2</code> <code>System.Console.WriteLine(luk u); // 2</code></td>
</tr>
<tr class="odd">
<td align="center">+=</td>
<td align="left">Lisäys-operaatio.</td>
<td align="left"><code>int luku = 0;</code><br><code>luku += 2; //luku muuttujan arvo on 2</code><br><code>luku += 3; //luku muuttujan arvo on 5</code><br><code>luku += -1; //luku muuttujan arv o on 4</code></td>
</tr>
<tr class="even">
<td align="center">-=</td>
<td align="left">Vähennys-operaatio</td>
<td align="left"><code>int luku = 0;</code><br><code>luku -= 2; // luku muuttujan arv o on -2</code><br><code>luku -= 1 // luku muuttujan arvo n -3</code></td>
</tr>
<tr class="odd">
<td align="center">*=</td>
<td align="left">Kertolasku-operaatio</td>
<td align="left"><code>int luku = 1;</code><br><code>luku \*= 3; // luku-muuttuja n ar vo o n 3</code><br><code>luku \*= 2; //luku-muuttujan arv o on 6</code></td>
</tr>
<tr class="even">
<td align="center">/=</td>
<td align="left">Jakolasku-operaatio</td>
<td align="left"><code>double luku = 27;</code><br><code>luku /= 3; //luku-muuttujan arvo on 9</code><br><code>luku /= 2.0; //luku-muuttuja n ar vo o n 4.5</code></td>
</tr>
<tr class="odd">
<td align="center">%=</td>
<td align="left">Jakojäännös-operaati o</td>
<td align="left"><code>int luku = 9;</code><br><code>luku %= 5; //luku-muuttujan arvo on 4</code><br><code>luku %= 2; //luku-muuttujan arvo on 0</code></td>
</tr>
</tbody>
</table>
    </div>
    
    <div id="par-496" class="paragraph">
        <p>Lisäysoperaattoria (<code>++</code>) ja vähennysoperaattoria (<code>--</code>) voidaan käyttää, ennen tai jälkeen muuttujan. Käytettäessä ennen muuttujaa, arvoa muutetaan ensin ja mahdollinen toiminto esimerkiksi tulostus, tehdään vasta sen jälkeen. Jos operaattori sen sijaan on muuttujan perässä, toiminto tehdään ensiksi ja arvoa muutetaan vasta sen jälkeen.</p>
    </div>
    
    <div id="par-497" class="paragraph">
        <div class="huomautus">
<p>Huomaa! Arvonmuunto-operaattorit ovat ns. sivuvaikutuksellisia operaattoreita. Toisin sanoen, operaatio muuttaa muuttujan arvoa toisin kuin esimerkiksi aritmeettiset operaatiot. Seuraava esimerkki havainnollistaa asiaa.</p>
</div>
    </div>
    
    <div id="par-498" class="paragraph">
        <div id='1.lisaysoperattoreita' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61322e6373222c20227265706c616365223a2022414c4b554f5341222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e6c69736179736f7065726174746f7265697461222c20226279436f646531223a2022222c20226279436f6465223a20222020202020202020696e74206c756b7531203d20353b5c6e2020202020202020696e74206c756b7532203d20353b5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65282b2b6c756b7531293b202f2f2074756c6f7374616120363b5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65286c756b7532202b203120293b202f2f2074756c6f7374616120363b5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65286c756b7531293b202f2f20365c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65286c756b7532293b202f2f2035227d</cs-runner></div>
    </div>
    
    <div id="par-499" class="paragraph">
        <h3 id="aritmeettisten-operaatioiden-suoritusjärjestys">7.7.4 Aritmeettisten operaatioiden suoritusjärjestys</h3>
    </div>
    
    <div id="par-500" class="paragraph">
        <p>Aritmeettisten operaatioiden suoritusjärjestys on vastaava kuin matematiikan laskujärjestys. Kerto- ja jakolaskut suoritetaan ennen yhteen- ja vähennyslaskua. Lisäksi sulkeiden sisällä olevat lausekkeet suoritetaan ensin.</p>
    </div>
    
    <div id="par-501" class="paragraph">
        <div id='1.sulkujenmerkitys' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a2022414c4b554f5341222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61322e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e73756c6b756a656e6d65726b69747973222c202275736572636f6465223a2022202020202020202053797374656d2e436f6e736f6c652e57726974654c696e652835202b2033202a2034202d2032293b20202f2f74756c6f737461612031355c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65282835202b203329202a202834202d203229293b20202f2f74756c6f737461612031365c6e2020202020202020222c20226279436f6465223a2022202020202020202053797374656d2e436f6e736f6c652e57726974654c696e652835202b2033202a2034202d2032293b20202f2f74756c6f737461612031355c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65282835202b203329202a202834202d203229293b20202f2f74756c6f73746161203136227d</cs-runner></div>
    </div>
    
    <div id="par-502" class="paragraph">
        <h2 id="huomautuksia">7.8 Huomautuksia</h2>
    </div>
    
    <div id="par-503" class="paragraph">
        <h3 id="kokonaisluvun-tallentaminen-liukulukumuuttujaan">7.8.1 Kokonaisluvun tallentaminen liukulukumuuttujaan</h3>
    </div>
    
    <div id="par-504" class="paragraph">
        <p>Kun yritetään tallentaa kokonaislukujen jakolaskun tulosta liukulukutyyppiseen (float tai double) muuttujaan, voi tulos tallettua kokonaislukuna, jos jakaja ja jaettava ovat molemmat ilmoitettu ilman desimaaliosaa.</p>
    </div>
    
    <div id="par-505" class="paragraph">
        <div id='1.kokonaislukujakolasku' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a2022414c4b554f5341222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61322e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e6b6f6b6f6e6169736c756b756a616b6f6c61736b75222c202275736572636f6465223a20222020202020202020646f75626c65206c61736b756e54756c6f73203d2035202f20323b5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65286c61736b756e54756c6f73293b202f2f2074756c6f7374616120325c6e2020202020202020222c20226279436f6465223a20222020202020202020646f75626c65206c61736b756e54756c6f73203d2035202f20323b5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65286c61736b756e54756c6f73293b202f2f2074756c6f737461612032227d</cs-runner></div>
    </div>
    
    <div id="par-506" class="paragraph">
        <p>Jos kuitenkin vähintään yksi jakolaskun luvuista on desimaalimuodossa, niin laskun tulos tallentuu muuttujaan oikein.</p>
    </div>
    
    <div id="par-507" class="paragraph">
        <div id='1.kokonaislukujakolaskudouble' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a2022414c4b554f5341222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61322e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e6b6f6b6f6e6169736c756b756a616b6f6c61736b75646f75626c65222c20226279436f6465223a20222020202020202020646f75626c65206c61736b756e54756c6f73203d2035202f20322e303b5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65286c61736b756e54756c6f73293b202f2f2074756c6f7374616120322e35227d</cs-runner></div>
    </div>
    
    <div id="par-508" class="paragraph">
        <p>Liukuluvuilla laskettaessa kannattaa pitää desimaalimuodossa myös luvut, joilla ei ole desimaaliosaa, eli ilmoittaa esimerkiksi luku 5 muodossa 5.0.</p>
    </div>
    
    <div id="par-509" class="paragraph">
        <p>Kokonaisluvuilla laskettaessa kannattaa huomioida seuraava:</p>
    </div>
    
    <div id="par-510" class="paragraph">
        <div id='1.kokonaislukujakolaskudouble2' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a2022414c4b554f5341222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61322e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e6b6f6b6f6e6169736c756b756a616b6f6c61736b75646f75626c6532222c202275736572636f6465223a20222020202020202020696e74206c61736b756e54756c6f73203d2035202f20343b5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65286c61736b756e54756c6f73293b202f2f2074756c6f7374616120315c6e20202020202020205c6e20202020202020206c61736b756e54756c6f73203d2035202f20363b5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65286c61736b756e54756c6f73293b202f2f2074756c6f7374616120305c6e20202020202020205c6e20202020202020206c61736b756e54756c6f73203d2037202f20333b5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65286c61736b756e54756c6f73293b202f2f2074756c6f7374616120325c6e2020202020202020222c20226279436f6465223a20222020202020202020696e74206c61736b756e54756c6f73203d2035202f20343b5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65286c61736b756e54756c6f73293b202f2f2074756c6f7374616120315c6e20202020202020205c6e20202020202020206c61736b756e54756c6f73203d2035202f20363b5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65286c61736b756e54756c6f73293b202f2f2074756c6f7374616120305c6e20202020202020205c6e20202020202020206c61736b756e54756c6f73203d2037202f20333b5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65286c61736b756e54756c6f73293b202f2f2074756c6f737461612032227d</cs-runner></div>
    </div>
    
    <div id="par-511" class="paragraph">
        <p>Kokonaisluvuilla laskettaessa lukuja ei siis pyöristetä lähimpään kokonaislukuun, vaan desimaaliosa menee C#:n jakolaskuissa ikään kuin "hukkaan".</p>
    </div>
    
    <div id="par-512" class="paragraph">
        <h3 id="lisäys--ja-vähennysoperaattoreista">7.8.2 Lisäys- ja vähennysoperaattoreista</h3>
    </div>
    
    <div id="par-513" class="paragraph">
        <p>On neljä tapaa kasvattaa luvun arvoa yhdellä.</p>
    </div>
    
    <div id="par-514" class="paragraph">
        <div id='1.kasvatus1' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61322e6373222c20227265706c616365223a2022414c4b554f5341222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e6b6173766174757331222c20226279436f646531223a20222f2f5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c22613d5c222b61293b5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c22623d5c222b62293b5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c22633d5c222b63293b222c20226279436f6465223a20222020202020202020696e742061203d20333b5c6e2020202020202020696e7420622c633b5c6e202020202020202062203d202b2b613b202f2f2048756f6d2120204569206f6c6973692070616b6b6f2073696a6f6974746161206d6968696e6b5c75303065345c75303065346e21205c6e202020202020202063203d20612b2b3b202f2f206964696f6d692e2020632073616120613a6e20616c6b757065725c75303065346973656e206172766f6e206a612073697474656e2061206b61737661612e5c6e202020202020202061202b3d20313b5c6e202020202020202061203d2061202b20313b202f2f2068756f6e6f696e206d7575746574746176757564656e206a61206b69726a6f697474616d6973656e206b616e6e616c7461227d</cs-runner></div>
    </div>
    
    <div id="par-515" class="paragraph">
        <p>Ohjelmoinnissa <em>idiomilla</em> tarkoitetaan tapaa jolla asia yleensä kannattaa tehdä. Näistä <code>a++</code> on ohjelmoinnissa vakiintunut tapa ja (yleensä) suositeltavin, siis idiomi. Kuitenkin, jos lukua <code>a</code> pitäisikin kasvattaa (tai vähentää) kahdella tai kolmella, ei tämä tapa enää toimisi. Seuraavassa esimerkissä tarkastellaan eri tapoja kahdella vähentämiseksi. Siihen on kolme vaihtoehtoista tapaa.</p>
    </div>
    
    <div id="par-516" class="paragraph">
        <div id='1.kasvatus2' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61322e6373222c20227265706c616365223a2022414c4b554f5341222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e6b6173766174757332222c20226279436f646531223a20222f2f5c6e202020202020202053797374656d2e436f6e736f6c652e57726974654c696e65285c22613d5c222b61293b222c20226279436f6465223a20222020202020202020696e742061203d2031303b5c6e202020202020202061202d3d20323b5c6e202020202020202061202b3d202d323b20202f2f206c69735c753030653474745c7530306534765c753030653420766f697369206f6c6c61206c617573656b656b696e2e204c756b7520766f69206f6c6c61206d795c753030663673206e65676174696976696e656e5c6e202020202020202061203d2061202d20323b227d</cs-runner></div>
    </div>
    
    <div id="par-517" class="paragraph">
        <p>Tässä tapauksessa += -operaattorin käyttö olisi suositeltavinta, sillä lisättävä luku voi olla positiivinen tai negatiivinen (tai nolla), joten += -operaattori ei tässä rajoita sitä, millaisia lukuja a-muuttujaan voidaan lisätä.</p>
    </div>
    
    <div id="par-518" class="paragraph">
        <h2 id="esimerkki-painoindeksi">7.9 Esimerkki: Painoindeksi</h2>
    </div>
    
    <div id="par-519" class="paragraph">
        <p>Tehdään ohjelma joka laskee painoindeksin. Painoindeksi lasketaan jakamalla paino (kg) pituuden (m) neliöllä, eli kaavalla</p>
    </div>
    
    <div id="par-520" class="paragraph">
        <pre><code>paino / (pituus * pituus)</code></pre>
    </div>
    
    <div id="par-521" class="paragraph">
        <p>C#:lla painoindeksi saadaan siis laskettua seuraavasti.</p>
    </div>
    
    <div id="par-522" class="paragraph">
        <div id='1.painoindeksi' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227461736b4944223a2022312e7061696e6f696e64656b7369222c2022757365725f6964223a2022766573616c222c20226279436f6465223a20222f2f2f2040617574686f722020416e7474692d4a75737369204c616b616e656e5c6e2f2f2f204076657273696f6e2032322e382e323031325c6e2f2f2f5c6e2f2f2f203c73756d6d6172793e5c6e2f2f2f204f686a656c6d612c206a6f6b61206c61736b6565207061696e6f696e64656b73696e5c6e2f2f2f20706974757564656e20286d29206a61207061696e6f6e20286b67292070657275737465656c6c612e205c6e2f2f2f203c2f73756d6d6172793e5c6e7075626c696320636c617373205061696e6f696e64656b73695c6e7b5c6e202020202f2f2f203c73756d6d6172793e5c6e202020202f2f2f20505c75303065345c75303065346f686a656c6d612c206a6f737361207061696e6f696e64656b73692074756c6f7374657461616e2072757564756c6c652e5c6e202020202f2f2f203c2f73756d6d6172793e5c6e202020207075626c69632073746174696320766f6964204d61696e2829205c6e202020207b5c6e202020202020646f75626c6520706974757573203d20312e38333b5c6e202020202020646f75626c65207061696e6f203d2037352e303b5c6e202020202020646f75626c65207061696e6f696e64656b7369203d207061696e6f202f20287069747575732a706974757573293b5c6e20202020202053797374656d2e436f6e736f6c652e57726974654c696e65287061696e6f696e64656b7369293b5c6e2020207d5c6e7d227d</cs-runner></div>
    </div>
    
    <div id="par-523" class="paragraph">
        <h1 id="oliotietotyypit">8. Oliotietotyypit</h1>
    </div>
    
    <div id="par-524" class="paragraph">
        <p>C#:n alkeistietotyypit antavat melko rajoittuneet puitteet ohjelmointiin. Niillä pystytään tallentamaan ainoastaan lukuja ja yksittäisiä kirjaimia. Vähänkin monimutkaisemmissa ohjelmissa tarvitaan kehittyneempiä rakenteita tiedon tallennukseen. C#:ssa, Javassa ja muissa oliokielissä tällaisen rakenteen tarjoavat oliot. C#:ssa jo merkkijonokin (string) toteutetaan oliona.</p>
    </div>
    
    <div id="par-525" class="paragraph">
        <h2 id="mitä-oliot-ovat">8.1 Mitä oliot ovat?</h2>
    </div>
    
    <div id="par-526" class="paragraph">
        <p>Olio (<em>object</em>) on "tietorakenne", jolla pyritään ohjelmoinnissa kuvaamaan reaalimaailman ilmiöitä. Luokkapohjaisissa kielissä (kuten C#, Java ja C++) olion rakenteen ja käyttäytymisen määrittelee luokka, joka kuvaa olion attribuutit ja metodit. Attribuutit ovat olion ominaisuuksia ja metodit olion toimintoja. Olion sanotaan olevan luokan <em>ilmentymä</em>. Yhdestä luokasta voi siis luoda useita olioita, joilla on samat metodit ja attribuutit. Attribuutit voivat saada samasta luokasta luoduilla olioilla eri arvoja. Attribuuttien arvot muodostavat olion tilan. Huomaa kuitenkin, että vaikka oliolla olisi sama tila, sen <em>identiteetti</em> on eri. Esimerkiksi, kaksi täsmälleen samannäköistä palloa voi olla samassa paikassa (näyttää yhdeltä pallolta), mutta todellisuudessa ne ovat kaksi eri palloa.</p>
    </div>
    
    <div id="par-527" class="paragraph">
        <p>Olioita voi joko tehdä itse tai käyttää jostain kirjastosta löytyviä valmiita olioita. Omien olioluokkien tekeminen ei kuulu vielä Ohjelmointi 1 -kurssin asioihin, mutta käyttäminen kyllä. Tarkastellaan seuraavaksi luokan ja olion suhdetta, sekä kuinka oliota käytetään.</p>
    </div>
    
    <div id="par-528" class="paragraph">
        <p>Luokan ja olion suhdetta voisi kuvata seuraavalla esimerkillä. Olkoon luentosalissa useita ihmisiä. Kaikki luentosalissa olijat ovat ihmisiä. Heillä on tietyt samat ominaisuudet, jotka ovat kaikilla ihmisillä, kuten pää, kaksi silmää ja muitakin ruumiinosia. Kuitenkin jokainen salissa olija on erilainen ihmisen ilmentymä, eli jokaisella oliolla on oma identiteetti - eiväthän he ole yksi ja sama vaan heitä on useita. Eri ihmisillä voi olla erilainen tukka ja eriväriset silmät ja oma puhetyyli. Lisäksi ihmiset voivat olla eri pituisia, painoisia jne. Luentosalissa olevat identtiset kaksosetkin olisivat eri ilmentymiä ihmisestä. Jos Ihminen olisi luokka, niin kaikki luentosalissa olijat olisivat Ihminen-luokan ilmentymiä eli Ihminen-olioita. Tukka, silmät, pituus ja paino olisivat sitten olion ominaisuuksia eli attribuutteja. Ihmisellä voisi olla lisäksi joitain toimintoja eli metodeja kuten Syo, MeneToihin, Opiskele jne. Tarkastellaan seuraavaksi hieman todellisempaa esimerkkiä olioista.</p>
    </div>
    
    <div id="par-529" class="paragraph">
        <p>Oletetaan, että suunnittelisimme yritykselle palkanmaksujärjestelmää. Siihen tarvittaisiin muun muassa Tyontekija-luokka. Tyontekija-luokalla täytyisi olla ainakin seuraavat attribuutit: nimi, tehtava, osasto, palkka. Luokalla täytyisi olla myös ainakin seuraavat metodit: MaksaPalkka, MuutaTehtava, MuutaOsasto, MuutaPalkka. Jokainen työntekijä olisi nyt omanlaisensa Tyontekija-luokan ilmentymä eli olio.</p>
    </div>
    
    <div id="par-530" class="paragraph">
        <h2 id="olion-luominen">8.2 Olion luominen</h2>
    </div>
    
    <div id="par-531" class="paragraph">
        <pre><code>Tyontekija teppo = new Tyontekija("Teppo Tunari", "Projektipäällikkö", "Tutkimusosasto", 5000);</code></pre>
    </div>
    
    <div id="par-532" class="paragraph">
        <p>Olioviite määritellään kirjoittamalla ensiksi sen luokan nimi, josta olio luodaan. Seuraavaksi kirjoitetaan nimi, jonka haluamme oliolle antaa. Nimen jälkeen tulee yhtäsuuruusmerkki, jonka jälkeen oliota luotaessa kirjoitetaan sana new ilmoittamaan, että luodaan uusi olio. Tämä new-operaattori varaa tilan tietokoneen muistista oliota varten.</p>
    </div>
    
    <div id="par-533" class="paragraph">
        <p>Seuraavaksi kirjoitetaan luokan nimi uudelleen, jonka perään kirjoitetaan sulkuihin mahdolliset olion luontiin liittyvät parametrit. Parametrit riippuvat siitä kuinka luokan <em>konstruktori</em> (constructor, muodostaja) on toteutettu. Konstruktori on metodi, joka suoritetaan aina kun uusi olio luodaan. Valmiita luokkia käyttääkseen ei tarvitse kuitenkaan tietää konstruktorin toteutuksesta, vaan tarvittavat parametrit selviävät aina luokan dokumentaatiosta. Yleisessä muodossa uusi olio luodaan alla olevalla tavalla.</p>
    </div>
    
    <div id="par-534" class="paragraph">
        <pre><code>Luokka olionNimi = new Luokka(parametri1, parametri2,..., parametriN);</code></pre>
    </div>
    
    <div id="par-535" class="paragraph">
        <p>Jos olio ei vaadi luomisen yhteydessä parametreja, kirjoitetaan silloin tyhjä sulkupari.</p>
    </div>
    
    <div id="par-536" class="paragraph">
        <div class="huomautus">
<p>Ennen kuin oliolle on varattu tila tietokoneen muistista new-operaattorilla, ei sitä voi käyttää. Ennen new-operaattorin käyttöä olion arvo on null, joka tarkoittaa, että olio on käyttökelvoton, "mitätön". Tällaisen olion käyttö aiheuttaa virheilmoituksen. Olio voidaan myös tarkoituksellisesti merkitä käyttökelvottomaksi asettamalla olionNimi = null.</p>
</div>
    </div>
    
    <div id="par-537" class="paragraph">
        <p>Uusi Tyontekija-olio voitaisiin luoda esimerkiksi seuraavasti. Parametrit riippuisivat nyt siitä kuinka olemme toteuttaneet Tyontekija-luokan konstruktorin. Tässä tapauksessa annamme nyt parametrina oliolle kaikki attribuutit.</p>
    </div>
    
    <div id="par-538" class="paragraph">
        <pre><code>Tyontekija akuAnkka = new Tyontekija("Aku Ankka", "Johtaja", "Osasto3", 3000);</code></pre>
    </div>
    
    <div id="par-539" class="paragraph">
        <p>Monisteen alussa loimme lumiukkoja piirrettäessä PhysicsObject-luokan olion seuraavasti.</p>
    </div>
    
    <div id="par-540" class="paragraph">
        <pre><code>PhysicsObject p1 = new PhysicsObject(2 * 100.0, 2 * 100.0, Shape.Circle);</code></pre>
    </div>
    
    <div id="par-541" class="paragraph">
        <p>Itse asiassa oliomuuttuja on C#:ssa ainoastaan <em>viite</em> varsinaiseen olioon. Siksi niitä kutsutaankin usein myös <em>viitemuuttujiksi.</em> Viitemuuttujat eroavat oleellisesti alkeistietotyyppisistä muuttujista.</p>
    </div>
    
    <div id="par-542" class="paragraph">
        <h2 id="oliotietotyyppien-ja-alkeistietotyyppien-ero">8.3 Oliotietotyyppien ja alkeistietotyyppien ero</h2>
    </div>
    
    <div id="par-543" class="paragraph">
        <p>C#:ssa on kahden mallisia rakenteita, joihin tietoja voidaan tallentaa. Tapauksesta riippuen tiedot tallennetaan joko <em>alkeistietotyyppeihin</em> tai <em>oliotietotyyppeihin</em>. Oliotietotyypit eroavat alkeistietotyypeistä siinä, että ne ovat <em>viitteitä</em> tiettyyn olioon, ja siksi niitä kutsutaan myös nimellä viitetyypit tai viitemuuttujat.</p>
    </div>
    
    <div id="par-544" class="paragraph">
        <ul>
<li><p>Alkeistietotyypit säilyttävät sisältämänsä tiedon yhdessä paikassa tietokoneen muistissa (nimeltään <em>pino</em>).</p></li>
<li><p>Viitetyypit sisältävät viitteen johonkin toiseen paikkaan muistissa (kutsutaan nimellä <em>keko</em>), missä varsinainen data sijaitsee. Viittaus olioon sijaitsee kuitenkin pinossa.</p></li>
</ul>
    </div>
    
    <div id="par-545" class="paragraph">
        <p>Yleensä meidän ei tarvitse olla kovin huolissamme siitä käytämmekö alkeistietotyyppiä (kuten <code>int</code>, <code>double</code> tai <code>char</code>) vai oliotyyppiä (kuten <code>string</code>). Yleisesti ottaen tärkein ero on siinä, että alkeistietotyyppien tulee (tiettyjä poikkeuksia lukuun ottamatta) aina sisältää jokin arvo, mutta oliotietotyypit voivat olla null-arvoisia (eli "ei-minkään" arvoisia). Jäljempänä esimerkkejä alkeistietotyyppien ja viitetyyppien eroista.</p>
    </div>
    
    <div id="par-546" class="paragraph">
        <p>Samaan olioon voi viitata useampi muuttuja. Vertaa alla olevia koodinpätkiä.</p>
    </div>
    
    <div id="par-547" class="paragraph">
        <div id='1.samaviiteint' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a2022436f6e736f6c65222c20227461736b4944223a2022312e73616d617669697465696e74222c2022757365725f6964223a2022766573616c222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a612e6373222c20226279436f6465223a20222020202020202020696e74206c756b7531203d2031303b5c6e2020202020202020696e74206c756b7532203d206c756b75313b5c6e20202020202020206c756b7531203d20303b5c6e2020202020202020436f6e736f6c652e57726974654c696e65286c756b7532293b202f2f74756c6f73746161203130227d</cs-runner></div>
    </div>
    
    <div id="par-548" class="paragraph">
        <p>Yllä oleva tulostaa "10" niin kuin pitääkin. Muuttujan luku2 arvo ei siis muutu, vaikka asetamme kolmannella rivillä muuttujaan luku1 arvon 0. Tämä johtuu siitä, että toisella rivillä asetamme muuttujaan luku2 muuttujan luku1 arvon, emmekä viitettä muuttujaan luku1. Oliotietotyyppisten muuttujien kanssa asia on toinen. Vertaa yllä olevaa esimerkkiä seuraavaan:</p>
    </div>
    
    <div id="par-549" class="paragraph">
        <div id='1.samap2viite' data-plugin='/csPlugin'><cs-jypeli-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f4a7970656c692f506f686a612e6373222c20227265706c616365223a2022494e5345525420594f555220434f44452048455245222c202274797065223a20226a7970656c69222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022494e5345525420594f55522046554e4354494f4e532048455245222c20227461736b4944223a2022312e73616d6170327669697465222c20226279436f6465223a20222020202020202020506879736963734f626a656374207031203d206e657720506879736963734f626a65637428322a3130302e302c20322a3130302e302c2053686170652e436972636c65293b5c6e2020202020202020416464287031293b5c6e202020202020202070312e58203d202d3230303b5c6e20202020202020205c6e2020202020202020506879736963734f626a656374207032203d2070313b5c6e202020202020202070322e58203d203130303b227d</cs-jypeli-runner></div>
    </div>
    
    <div id="par-550" class="paragraph">
        <p>Yllä oleva koodi piirtää seuraavan kuvan:</p>
    </div>
    
    <div id="par-551" class="paragraph">
        <div id='1.k8' data-plugin='/showImage'><img height="158" src="/csimages/ohj1/luentomonistecsUusin_htm_m3838408a.png">
<p class="footer">Kuva 8: Molemmat muuttujat, p1 ja p2, liikuttelevat samaa ympyrää. Lopputuloksena ympyrä seisoo pisteessä x=100.</p>
</div>
    </div>
    
    <div id="par-552" class="paragraph">
        <p>Nopeasti voisi olettaa, että ikkunassamme näkyisi nyt vain kaksi samanlaista ympyrää eri paikoissa. Näin ei kuitenkaan ole, vaan molemmat PhysicsObject-oliot viittaavat samaan ympyrään, jonka säde on 50. Tämä johtuu siitä, että muuttujat p1 ja p2 ovat olioviitteitä, jotka viittaavat (ts. osoittavat) samaan olioon.</p>
    </div>
    
    <div id="par-553" class="paragraph">
        <pre><code>PhysicsObject p2 = p1;</code></pre>
    </div>
    
    <div id="par-554" class="paragraph">
        <p>Toisin sanoen yllä olevalla rivillä ei luoda uutta PhysicsObject-oliota, vaan ainoastaan uusi olioviite, joka viittaa nyt samaan olioon kuin p1.</p>
    </div>
    
    <div id="par-555" class="paragraph">
        <div id='1.k9' data-plugin='/showImage'><img height="148" src="/csimages/ohj1/luentomonistecsUusin_htm_75ff594f.png">
<p class="footer">Kuva 9: Sekä p1 että p2 viittaavat samaan olioon.</p>
</div>
    </div>
    
    <div id="par-556" class="paragraph">
        <div class="huomautus">
<p><em>Oliomuuttuja =</em> Viite todelliseen olioon. Samaan olioon voi olla useitakin viitteitä.</p>
</div>
    </div>
    
    <div id="par-557" class="paragraph">
        <p>Viitteitä käsitellään tarkemmin luvussa 14.</p>
    </div>
    
    <div id="par-558" class="paragraph">
        <h2 id="metodin-kutsuminen">8.4 Metodin kutsuminen</h2>
    </div>
    
    <div id="par-559" class="paragraph">
        <p>Jokaisella tietystä luokasta luodulla oliolla on käytössä kaikki tämän luokan julkiset metodit. Metodikutsussa käsketään oliota tekemään jotain. Voisimme esimerkiksi käskeä PhysicsObject-oliota liikkumaan, tai Tyontekija-oliota muuttamaan palkkaansa.</p>
    </div>
    
    <div id="par-560" class="paragraph">
        <p>Olion metodeita kutsutaan kirjoittamalla ensiksi olion nimi, piste ja kutsuttavan metodin nimi. Metodin mahdolliset parametrit laitetaan sulkeiden sisään ja erotetaan toisistaan pilkulla. Jos metodi ei vaadi parametreja, täytyy sulut silti kirjoittaa, niiden sisälle ei vaan tule mitään. Yleisessä muodossa metodikutsu on seuraava:</p>
    </div>
    
    <div id="par-561" class="paragraph">
        <pre><code>olionNimi.MetodinNimi(parametri1,parametri2,...parametriN);</code></pre>
    </div>
    
    <div id="par-562" class="paragraph">
        <p>Voisimme nyt esimerkiksi muuttaa <code>akuAnkka</code>-olion palkkaa alla olevalla tavalla.</p>
    </div>
    
    <div id="par-563" class="paragraph">
        <pre><code>akuAnkka.MuutaPalkka(3500);</code></pre>
    </div>
    
    <div id="par-564" class="paragraph">
        <p>Tai laittaa <code>p1</code>-olion (oletetaan että <code>p1</code> on <code>PhysicsObject</code>-olio) liikkeelle käyttäen <code>Hit</code>-metodia.</p>
    </div>
    
    <div id="par-565" class="paragraph">
        <pre><code>p1.Hit(new Vector(1000.0, 500.0));</code></pre>
    </div>
    
    <div id="par-566" class="paragraph">
        <p><code>String</code>-luokasta löytyy esimerkiksi <code>Contains</code>-metodi, joka palauttaa arvon <code>True</code> tai <code>False</code>. Parametrina Contains-metodille annetaan merkkijono, ja metodi etsii oliosta antamaamme merkkijonoa vastaavia ilmentymiä. Jos olio sisältää merkkijonon (yhden tai useamman kerran) palautetaan True. Muutoin palautetaan False. Alla esimerkki.</p>
    </div>
    
    <div id="par-567" class="paragraph">
        <div id='1.contains' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a2022414c4b554f5341222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e636f6e7461696e73222c20226279436f6465223a20222020202020202020737472696e67206c61757365203d205c2250656b6b61206d656e69206b6175707061616e5c223b5c6e2020202020202020436f6e736f6c652e57726974654c696e65286c617573652e436f6e7461696e73285c22656e695c2229293b202f2f2054756c6f737461612054727565227d</cs-runner></div>
    </div>
    
    <div id="par-568" class="paragraph">
        <h2 id="metodin-ja-aliohjelman-ero">8.5 Metodin ja aliohjelman ero</h2>
    </div>
    
    <div id="par-569" class="paragraph">
        <p>Aliohjelma esitellään static-tyyppiseksi, mikäli aliohjelma ei käytä mitään muita tietoja kuin parametreinä tuodut tiedot. Esimerkiksi luvussa 20.4.2 on seuraava aliohjelma.</p>
    </div>
    
    <div id="par-570" class="paragraph">
        <pre><code>private void KuunteleLiiketta(AnalogState hiirenTila)
{
   pallo.X = Mouse.PositionOnWorld.X;
   pallo.Y = Mouse.PositionOnWorld.Y;

   Vector hiirenLiike = hiirenTila.MouseMovement;
}</code></pre>
    </div>
    
    <div id="par-571" class="paragraph">
        <p>Tässä tarvitaan hiiren tilan lisäksi pelioliossa (<code>this</code>) esitellyn <code>pallo</code> -olion tietoja, joten enää ei ole kyse stattisesta aliohjelmasta ja siksi <code>static</code>-sana jätetään pois. Metodi sen sijaan pystyy käyttämään <em>olion</em> omia "ominaisuuksia", attribuutteja, metodeja ja ns. ominaisuus-kenttiä (property fields). Muista että olion omiin "asioihin" voisi viitaa myös:</p>
    </div>
    
    <div id="par-572" class="paragraph">
        <pre><code>   this.pallo.X = Mouse.PositionOnWorld.X;</code></pre>
    </div>
    
    <div id="par-573" class="paragraph">
        <p>eli jos aliohjelma tarvitsee <code>this</code> -viitettä, se on metodi (eli ei staattinen).</p>
    </div>
    
    <div id="par-574" class="paragraph">
        <h2 id="olion-tuhoaminen-ja-roskienkeruu">8.6 Olion tuhoaminen ja roskienkeruu</h2>
    </div>
    
    <div id="par-575" class="paragraph">
        <p>Kun olioon ei enää viittaa yhtään muuttujaa (olioviitettä), täytyy olion käyttämät muistipaikat vapauttaa muuhun käyttöön. Oliot poistetaan muistista puhdistusoperaation avulla. Tästä huolehtii C#:n automaattinen roskienkeruu (garbage collection). Kun olioon ei ole enää viitteitä, se merkitään poistettavaksi ja aina tietyin väliajoin <em>puhdistusoperaatio</em> (kutsutaan usein myös nimellä roskienkerääjä, garbage collector) vapauttaa merkittyjen olioiden muistipaikat.</p>
    </div>
    
    <div id="par-576" class="paragraph">
        <p>Kaikissa ohjelmointikielissä näin ei ole (esim. alkuperäinen C++), vaan muistin vapauttamisesta ja olioiden tuhoamisesta tulee useimmiten huolehtia itse. Näissä kielissä on yleensä destruktori (destructor = hajottaja), joka suoritetaan aina kun olio tuhotaan. Itse kirjoitettavasta destruktorista on tapana kutsua olion elinaikanaan luomien olioiden tuhoamista tai muiden resurssien vapauttamista. Vertaa konstruktoriin, joka suoritettiin kun olio luodaan. Haastavaksi näiden kielien yhteydessä tuleekin se, että joissakin tapauksissa olioiden elinkaari on automaattista ja joissakin ei. Siksi muistivuodot ovat erittäin yleisiä aloittelevilla C++ -ohjelmoijilla.</p>
    </div>
    
    <div id="par-577" class="paragraph">
        <p>Yleensä C#-ohjelmoijan ei tarvitse huolehtia muistin vapauttamisesta, mutta on tiettyjä tilanteita, joissa voidaan itse joutua poistamaan oliot. Yksi esimerkki tällaisesta tilanteesta on tiedostojen käsittely: Jos olio on avannut tiedoston, olisi viimeistään ennen olion tuhoamista järkevää sulkea tiedosto. Tällöin samassa yhteydessä olion tuhottavaksi merkitsemisen kanssa suoritettaisiin myös tiedoston sulkeminen. Tämä tehdään esittelemällä <em>hajotin</em> (destructor), joka on luokan metodi ja jonka tehtävänä on tyhjentää olio kaikesta sen sisältämästä tiedosta sekä vapauttaa sen sisältämät rakenteet, kuten kytkökset avoinna oleviin resursseihin (esim tiedostoon, tosin yleensä tiedostoa ei ole hyvä pitää avoinna niin kauan aikaa kuin jonkin olion elinkaari voi olla).</p>
    </div>
    
    <div id="par-578" class="paragraph">
        <h2 id="olioluokkien-dokumentaatio">8.7 Olioluokkien dokumentaatio</h2>
    </div>
    
    <div id="par-579" class="paragraph">
        <p>Luokan dokumentaatio sisältää tiedot luokasta, luokan konstruktoreista ja metodeista. Luokkien dokumentaatioissa on yleensä linkkejä esimerkkeihin, kuten myös <code>String</code>-luokan tapauksessa. Tutustutaan nyt tarkemmin <code>String</code>-luokan dokumentaatioon. <code>String</code>-luokan dokumentaatio löytyy sivulta <a href="http://msdn.microsoft.com/en-us/library/system.string.aspx" class="uri">http://msdn.microsoft.com/en-us/library/system.string.aspx</a>, ja lista <em>jäsenistä</em> eli käytössä olevista konstruktoreista, attribuuteista (fields), ominaisuuksista (property) ja metodeista sivulta <a href="http://msdn.microsoft.com/en-us/library/system.string_members.aspx" class="uri">http://msdn.microsoft.com/en-us/library/system.string_members.aspx</a>.</p>
    </div>
    
    <div id="par-580" class="paragraph">
        <p>Olemme kiinnostuneita tässä vaiheessa kohdista String Constructor ja String Methods (sivun vasemmassa osassa hierarkiapuussa). Klikkaa kohdasta String Constructor saadaksesi lisätietoa luokan konstruktoreista tai String Methods saadaksesi tietoja käytössä olevista metodeista.</p>
    </div>
    
    <div id="par-581" class="paragraph">
        <h3 id="konstruktorit">8.7.1 Konstruktorit</h3>
    </div>
    
    <div id="par-582" class="paragraph">
        <p>Avaa luokan String sivu String Constructor. Tämä kohta sisältää tiedot kaikista luokan konstruktoreista. Konstruktoreita voi olla useita, kunhan niiden parametrit eroavat toisistaan. Jokaisella konstruktorilla on oma sivu, ja sivulla kunkin ohjelmointikielen kohdalla oma versionsa, sillä .NET Framework käsittää useita ohjelmointikieliä. Me olemme luonnollisesti tässä vaiheessa kiinnostuneita vain C#-kielisistä versioista.</p>
    </div>
    
    <div id="par-583" class="paragraph">
        <p>Kunkin konstruktorin kohdalla on lyhyesti kerrottu mitä se tekee, ja sen jälkeen minkä tyyppisiä ja montako parametria konstruktori ottaa vastaan. Kaikista konstruktoreista saa lisätietoa klikkaamalla konstruktorin esittelyriviä. Esimerkiksi linkki</p>
    </div>
    
    <div id="par-584" class="paragraph">
        <p>[C#] <a href="http://msdn.microsoft.com/en-us/library/ttyxaek9.aspx">public String(char[]);</a></p>
    </div>
    
    <div id="par-585" class="paragraph">
        <p>vie <a href="http://msdn.microsoft.com/en-us/library/ttyxaek9.aspx">sivulle</a> (<a href="http://msdn.microsoft.com/en-us/library/ttyxaek9.aspx" class="uri">http://msdn.microsoft.com/en-us/library/ttyxaek9.aspx</a>) jossa konstruktorista public String(char[]) kerrotaan lisätietoja ja annetaan käyttöesimerkkejä.</p>
    </div>
    
    <div id="par-586" class="paragraph">
        <div id='1.k10' data-plugin='/showImage'><img height="324" src="/csimages/ohj1/luentomonistecsUusin_htm_1b70689e.png">
<p class="footer">Kuva 10: Tiedot luokan konstruktoreista löytyvät MSDN-dokumentaatioissa Constructor-kohdasta.</p>
</div>
    </div>
    
    <div id="par-587" class="paragraph">
        <p>Huomaa, että monet String-luokan konstruktoreista on merkitty <code>unsafe</code>-merkinnällä, jolloin niitä ei tulisi käyttää omassa koodissa. Tällaiset konstruktorit on tarkoitettu ainoastaan järjestelmien keskinäiseen viestintään.</p>
    </div>
    
    <div id="par-588" class="paragraph">
        <p>Tässä vaiheessa voi olla vielä hankalaa ymmärtää kaikkien konstruktorien merkitystä, sillä ne sisältävät tietotyyppejä joita emme ole vielä käsitelleet. Esimerkiksi tietotyypin perässä olevat hakasulkeet (esim. int[]) tarkoittavat että kyseessä on <em>taulukko</em>. Taulukoita käsitellään lisää luvussa 15.</p>
    </div>
    
    <div id="par-589" class="paragraph">
        <p>String-luokan olio on C#:n ehkä yleisin olio, ja on itse asiassa kokoelma (taulukko) perättäisiä yksittäisiä char-tyyppisiä merkkejä. Se voidaan luoda seuraavasti.</p>
    </div>
    
    <div id="par-590" class="paragraph">
        <div id='1.chararray' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a2022414c4b554f5341222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e636861726172726179222c20226279436f6465223a20222020202020202020737472696e67206e696d69203d206e657720537472696e67286e65772063686172205b5d207b274a272c202761272c20276e272c20276e272c202765277d293b5c6e2020202020202020436f6e736f6c652e57726974654c696e65286e696d69293b202f2f2054756c6f73746161204a616e6e65227d</cs-runner></div>
    </div>
    
    <div id="par-591" class="paragraph">
        <p>Näin kirjoittaminen on tietenkin usein melko vaivalloista. <code>String</code>-luokan olio voidaan kuitenkin poikkeuksellisesti luoda myös alkeistietotyyppisten muuttujien määrittelyä muistuttavalla tavalla. Alla oleva oleva lause on vastaava kuin edellisessä kohdassa, mutta lyhyempi kirjoittaa.</p>
    </div>
    
    <div id="par-592" class="paragraph">
        <div id='1.stringalustus' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a2022414c4b554f5341222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e737472696e67616c7573747573222c20226279436f6465223a20222020202020202020737472696e67206e696d69203d205c224a616e6e655c223b5c6e2020202020202020436f6e736f6c652e57726974654c696e65286e696d69293b202f2f2054756c6f73746161204a616e6e65227d</cs-runner></div>
    </div>
    
    <div id="par-593" class="paragraph">
        <p>Huomaa, että merkkijonon ympärille tulee lainausmerkit. Näppäimistöltä lainausmerkit saadaan näppäinyhdistelmällä <code class="terminaali-western">Shift+2</code>. Vastaavasti merkkijono voitaisiin kuitenkin alustaa myös muilla String-luokan konstruktoreilla, joita on pitkä lista.</p>
    </div>
    
    <div id="par-594" class="paragraph">
        <p>Jos taas tutkimme <code>PhysicsObject</code>-luokan dokumentaatiota (löytyy osoitteesta <a href="http://kurssit.it.jyu.fi/npo/material/latest/documentation/html/" class="uri">http://kurssit.it.jyu.fi/npo/material/latest/documentation/html/</a> → Luokat → PhysicsObject), löydämme useita eri konstruktoria (ks. kohta <em>Julkiset jäsenfunktiot</em>, jotka alkavat sanalla PhysicsObject). Konstruktoreista järjestyksessä toinen saa parametrina kaksi lukua ja muodon. Tätä konstruktoria käytimme jo lumiukkoesimerkissä.</p>
    </div>
    
    <div id="par-595" class="paragraph">
        <div id='1.k11' data-plugin='/showImage'><img height="245" src="/csimages/ohj1/luentomonistecsUusin_htm_74f89f25.png">
<p class="footer">Kuva 11: Jypeli-kirjaston luokan konstruktorit löytyvät Julkiset jäsenfunktiot -otsikon alta.</p>
</div>
    </div>
    
    <div id="par-596" class="paragraph">
        <p>Voisimme kuitenkin olla antamatta muotoa (ensimmäinen konstruktori) ja määritellä muodon vasta myöhemmin fysiikkaolion Shape-ominaisuuden avulla.</p>
    </div>
    
    <div id="par-597" class="paragraph">
        <h3 id="harjoitus-2">8.7.2 Harjoitus</h3>
    </div>
    
    <div id="par-598" class="paragraph">
        <p>Tutki muita konstruktoreja. Mitä niistä selviää dokumentaation perusteella? Mikä on oletusmuoto?</p>
    </div>
    
    <div id="par-599" class="paragraph">
        <h3 id="metodit">8.7.3 Metodit</h3>
    </div>
    
    <div id="par-600" class="paragraph">
        <p>Kohta <a href="http://msdn.microsoft.com/en-us/library/system.string_methods.aspx">Methods</a> (<a href="http://msdn.microsoft.com/en-us/library/system.string_methods.aspx" class="uri">http://msdn.microsoft.com/en-us/library/system.string_methods.aspx</a>) sisältää tiedot kaikista luokan metodeista. Jokaisella metodilla on taulukossa oma rivi, ja rivillä lyhyt kuvaus, mitä metodi tekee. Klikattuasi jotain metodia saat siitä tarkemmat tiedot. Tällä sivulla kerrotaan mm. minkä tyyppisen parametrin metodi ottaa, ja minkä tyyppisen arvon metodi palauttaa. Esimerkiksi String-luokassa käyttämämme ToUpper-metodi, joka siis palauttaa String-tyyppisen arvon.</p>
    </div>
    
    <div id="par-601" class="paragraph">
        <h3 id="huomautus-luokkien-dokumentaatioiden-googlettaminen">8.7.4 Huomautus: Luokkien dokumentaatioiden googlettaminen</h3>
    </div>
    
    <div id="par-602" class="paragraph">
        <p>Huomaa, että kun haet luokkien dokumentaatioita hakukoneilla, saattavat tulokset viitata .NET Frameworkin vanhempiin versioihin (esimerkiksi 1.0 tai 2.0). Kirjoitushetkellä uusin .NET Framework-versio on 4, ja onkin syytä varmistua että löytämäsi dokumentaatio koskee juuri oikeaa versiota. Voit esimerkiksi käyttää hakutermissä versionumeroa tähän tapaan: "c# string documentation .net 4". Versionumeron näkee otsikon alapuolella. Voit halutessasi vaihtaa johonkin toiseen versioon klikkaamalla Other Versions -pudotusvalikkoa.</p>
    </div>
    
    <div id="par-603" class="paragraph">
        <h2 id="tyyppimuunnokset">8.8 Tyyppimuunnokset</h2>
    </div>
    
    <div id="par-604" class="paragraph">
        <p>C#:ssa yhteen muuttujaan voi tallentaa vain yhtä tyyppiä. Tämän takia meidän täytyy joskus muuttaa esimerkiksi String-tyyppinen muuttuja int-tyyppiseksi tai double-tyyppinen muuttuja int-tyyppiseksi ja niin edelleen. Kun muuttujan tyyppi vaihdetaan toiseksi, sanotaan sitä tyyppimuunnokseksi (<em>cast</em>, tai <em>type cast</em>).</p>
    </div>
    
    <div id="par-605" class="paragraph">
        <p>Kaikilla alkeistietotyypeillä sekä C#:n oliotyypeillä on ToString-metodi, jolla olio voidaan muuttaa merkkijonoksi. Alla esimerkki int-luvun muuttamisesta merkkijonoksi.</p>
    </div>
    
    <div id="par-606" class="paragraph">
        <div id='1.tyyppimuunnokset' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c20227265706c616365223a2022414c4b554f5341222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e7479797070696d75756e6e6f6b736574222c20226279436f646531223a20222f2f5c6e2020202020202020436f6e736f6c652e57726974654c696e6528696e744d65726b6b696a6f6e6f6e61293b20222c20226279436f6465223a202220202020202020202f2f206b6f6b6f6e6169736c756b75206d65726b6b696a6f6e6f6b73695c6e2020202020202020696e74206b6f6b6f6e6169736c756b75203d2032343b5c6e2020202020202020737472696e6720696e744d65726b6b696a6f6e6f6e61203d206b6f6b6f6e6169736c756b752e546f537472696e6728293b227d</cs-runner></div>
    </div>
    
    <div id="par-607" class="paragraph">
        <div id='1.tyyppimuunnokset2' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c20227265706c616365223a2022414c4b554f5341222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e7479797070696d75756e6e6f6b73657432222c202275736572636f6465223a202220202020202020202f2f206c69756b756c756b75206d65726b6b696a6f6e6f6b73695c6e2020202020202020646f75626c65206c69756b756c756b75203d20302e3536323b5c6e2020202020202020737472696e6720646f75626c654d65726b6b696a6f6e6f6e61203d206c69756b756c756b752e546f537472696e6728293b222c20226279436f646531223a20222f2f5c6e2020202020202020436f6e736f6c652e57726974654c696e65286c69756b756c756b75293b20222c20226279436f6465223a202220202020202020202f2f206c69756b756c756b75206d65726b6b696a6f6e6f6b73695c6e2020202020202020646f75626c65206c69756b756c756b75203d20302e3536323b5c6e2020202020202020737472696e6720646f75626c654d65726b6b696a6f6e6f6e61203d206c69756b756c756b752e546f537472696e6728293b227d</cs-runner></div>
    </div>
    
    <div id="par-608" class="paragraph">
        <p>Merkkijonon muuttaminen alkeistietotyypiksi onnistuu sen sijaan jokaiselle alkeistietotyypille tehdystä luokasta löytyvällä metodilla. Alkeistietotyypithän eivät ole olioita, joten niillä ei ole metodeita. C#:sta löytyy kuitenkin jokaista alkeistietotyyppiä vastaava <em>rakenne</em> (struct), joista löytyy alkeistietotyyppien käsittelyyn hyödyllisiä metodeita. Rakenteet sijaitsevat System-nimiavaruudessa, ja tästä syystä ohjelman alussa tarvitaan lause</p>
    </div>
    
    <div id="par-609" class="paragraph">
        <pre><code>using System;</code></pre>
    </div>
    
    <div id="par-610" class="paragraph">
        <p>Alkeistietotyyppejä vastaavat rakenteet löytyy seuraavasta taulukosta.</p>
    </div>
    
    <div id="par-611" class="paragraph">
        <p>Taulukko 5: Alkeistietotyypit ja niitä vastaavat rakenteet.</p>
    </div>
    
    <div id="par-612" class="paragraph">
        <table>
<thead>
<tr class="header">
<th align="left">Alkeistieto-tyyppi</th>
<th align="left">Rakenne</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">bool</td>
<td align="left"><a href="http://msdn.microsoft.com/en-us/library/system.boolean.aspx">Boolean</a></td>
</tr>
<tr class="even">
<td align="left">byte</td>
<td align="left"><a href="http://msdn.microsoft.com/en-us/library/system.byte.aspx">Byte</a></td>
</tr>
<tr class="odd">
<td align="left">char</td>
<td align="left"><a href="http://msdn.microsoft.com/en-us/library/system.char.aspx">Char</a></td>
</tr>
<tr class="even">
<td align="left">short</td>
<td align="left"><a href="http://msdn.microsoft.com/en-us/library/system.int16.aspx">Int16</a></td>
</tr>
<tr class="odd">
<td align="left">int</td>
<td align="left"><a href="http://msdn.microsoft.com/en-us/library/system.int32.aspx">Int32</a></td>
</tr>
<tr class="even">
<td align="left">long</td>
<td align="left"><a href="http://msdn.microsoft.com/en-us/library/system.int64.aspx">Int64</a></td>
</tr>
<tr class="odd">
<td align="left">ulong</td>
<td align="left"><a href="http://msdn.microsoft.com/en-us/library/system.uint64.aspx">UInt64</a></td>
</tr>
<tr class="even">
<td align="left">float</td>
<td align="left"><a href="http://msdn.microsoft.com/en-us/library/system.single.aspx">Single</a></td>
</tr>
<tr class="odd">
<td align="left">double</td>
<td align="left"><a href="http://msdn.microsoft.com/en-us/library/system.double.aspx">Double</a></td>
</tr>
</tbody>
</table>
    </div>
    
    <div id="par-613" class="paragraph">
        <p>Huomaa, että rakenteen ja alkeistietotyypin nimet ovat C#:ssa synonyymejä. Seuraavat rivit tuottavat saman lopputuloksen (mikäli <code>System</code>-nimiavaruus on otettu käyttöön using-lauseella).</p>
    </div>
    
    <div id="par-614" class="paragraph">
        <div id='1.int32tyyppi2' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c20227265706c616365223a2022414c4b554f5341222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e696e74333274797970706932222c20226279436f646531223a20222f2f5c6e2020202020202020436f6e736f6c652e57726974654c696e65285c226c756b7531203d205c22202b206c756b7531293b205c6e2020202020202020436f6e736f6c652e57726974654c696e65285c226c756b7532203d205c22202b206c756b7532293b20222c20226279436f6465223a20222020202020202020696e74206c756b7531203d20353b5c6e2020202020202020496e743332206c756b7532203d20363b227d</cs-runner></div>
    </div>
    
    <div id="par-615" class="paragraph">
        <p>Vastaavasti kaikki rakenteiden metodit ovat käytössä, kirjoittipa alkeistietotyypin tai rakenteen nimen. Tästä esimerkki seuraavaksi.</p>
    </div>
    
    <div id="par-616" class="paragraph">
        <p>Merkkijonon (<code>String</code>) muuttaminen int-tyypiksi onnistuu C#:n int.Parse-funktiolla seuraavasti.</p>
    </div>
    
    <div id="par-617" class="paragraph">
        <div id='1.intparse' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c20227265706c616365223a2022414c4b554f5341222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e696e747061727365222c20227374656d223a20224b756e206f6c6574206b6f6b65696c6c75742c206b6f6b65696c652076616968746161206a6f6e6f6f6e206a6f74616b696e206d696b5c7530306534206569206f6c65206e756d65726f2e20204d69745c75303065342074617061687475753f222c20226279436f646531223a20222f2f5c6e2020202020202020436f6e736f6c652e57726974654c696e65285c226a6f6e6f31203d205c22202b206a6f6e6f31293b205c6e2020202020202020436f6e736f6c652e57726974654c696e65285c226c756b7532203d205c22202b206c756b7532293b20222c20226279436f6465223a20222020202020202020737472696e67206a6f6e6f31203d205c2232345c223b5c6e2020202020202020696e74206c756b7532203d20696e742e5061727365286a6f6e6f31293b227d</cs-runner></div>
    </div>
    
    <div id="par-618" class="paragraph">
        <p>Tarkasti sanottuna <code>Parse</code>-funktio luo parametrina saamansa merkkijonon perusteella uuden <code>int</code>-tyyppisen tiedon, joka talletetaan muuttujaan luku2.</p>
    </div>
    
    <div id="par-619" class="paragraph">
        <p>Jos luvun parsiminen (jäsentäminen, muuttaminen) ei onnistu, aiheuttaa se niin sanotun <em>poikkeuksen</em>. <code>double</code>-luvun parsiminen onnistuu vastaavasti <code>Double</code>-rakenteesta (iso D-kirjain) löytyvällä <code>Parse</code>-funktiolla.</p>
    </div>
    
    <div id="par-620" class="paragraph">
        <div id='1.doubleparse' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c20227265706c616365223a2022414c4b554f5341222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e646f75626c657061727365222c20226279436f646531223a20222f2f5c6e2020202020202020436f6e736f6c652e57726974654c696e65285c226a6f6e6f203d205c22202b206a6f6e6f293b205c6e2020202020202020436f6e736f6c652e57726974654c696e65285c226c756b75203d205c22202b206c756b75293b20222c20226279436f6465223a20222020202020202020737472696e67206a6f6e6f203d205c22322e34355c223b5c6e2020202020202020646f75626c65206c756b75203d20446f75626c652e5061727365286a6f6e6f293b227d</cs-runner></div>
    </div>
    
    <div id="par-621" class="paragraph">
        <p>Käytännössä jos tieto saadaan ihmisen syöttämänä, niin on erittäin todennäköistä että se ei muodosta laillista numeroa. Siksi usein kannattaa käyttää funktiota <code>TryParse</code>:</p>
    </div>
    
    <div id="par-622" class="paragraph">
        <div id='1.doubletryparse' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c20227265706c616365223a2022414c4b554f5341222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e646f75626c657472797061727365222c20226279436f646531223a20222f2f5c6e2020202020202020436f6e736f6c652e57726974654c696e65285c226a6f6e6f20202020203d205c22202b206a6f6e6f293b205c6e2020202020202020436f6e736f6c652e57726974654c696e65285c226c756b7520202020203d205c22202b206c756b75293b205c6e2020202020202020436f6e736f6c652e57726974654c696e65285c226f6e6e6973747569203d205c22202b206f6e6e6973747569293b20222c20226279436f6465223a20222020202020202020737472696e67206a6f6e6f203d205c22322e34355c223b5c6e2020202020202020646f75626c65206c756b75203d20353b5c6e2020202020202020626f6f6c206f6e6e69737475693b5c6e20202020202020206f6e6e6973747569203d20446f75626c652e5472795061727365286a6f6e6f2c6f7574206c756b75293b227d</cs-runner></div>
    </div>
    
    <div id="par-623" class="paragraph">
        <p>Asiaa vielä monimutkaistaa se, että käyttöjärjestelmän desimaalierotin saattaa olla pilkku (,) tai piste (.).</p>
    </div>
    
    <div id="par-624" class="paragraph">
        <h1 id="aliohjelman-paluuarvo">9. Aliohjelman paluuarvo</h1>
    </div>
    
    <div id="par-625" class="paragraph">
        <p>Aliohjelmat-luvussa tekemämme Lumiukko-aliohjelma ei palauttanut mitään arvoa. Usein on kuitenkin hyödyllistä, että lopettaessaan aliohjelma palauttaa jotain tietoa ohjelman suorituksesta. Mitä hyötyä olisi esimerkiksi aliohjelmasta, joka laskee kahden luvun keskiarvon, jos emme koskaan saisi tietää mikä niiden lukujen keskiarvo on? Voisimmehan me tietenkin tulostaa luvun keskiarvon suoraan aliohjelmassa, mutta lähes aina on järkevämpää palauttaa tulos "kysyjälle" paluuarvona. Tällöin aliohjelmaa voidaan käyttää myös tilanteessa, jossa keskiarvoa ei haluta tulostaa, vaan sitä tarvitaan johonkin muuhun laskentaan. Paluuarvon palauttaminen tapahtuu return-lauseella, ja return-lause lopettaa aina aliohjelman suorittamisen (eli palataan takaisin kutsuvaan ohjelman osaan).</p>
    </div>
    
    <div id="par-626" class="paragraph">
        <p>Aliohjelman (tässä tapauksessa tulevan funktion) käyttöä olemmme voineet suunnitella niin, että sitä kutsuttaisiin seuraavasti:</p>
    </div>
    
    <div id="par-627" class="paragraph">
        <pre><code>        double keskiarvo;
        keskiarvo = Keskiarvo(3, 4);</code></pre>
    </div>
    
    <div id="par-628" class="paragraph">
        <p>Eli kun funktiosta palataan, se palauttaa laskemansa tuloksen ja kutsuva sijoittaa saamansa tuloksen apumuuttujaan.</p>
    </div>
    
    <div id="par-629" class="paragraph">
        <p>Toteutetaan nyt tällainen funktio, joka laskee kahden kokonaisluvun keskiarvon ja palauttaa tuloksen paluuarvona.</p>
    </div>
    
    <div id="par-630" class="paragraph">
        <div id='1.keskiarvofunktio' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f46756e6b74696f506f686a612e6373222c2022696e64656e74223a202230222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022494e5345525420594f55522043414c4c532048455245222c20226279436f646531223a20222f2f5c6e2020202020202020646f75626c65206b65736b696172766f3b5c6e20202020202020206b65736b696172766f203d204b65736b696172766f28332c2034293b5c6e2020202020202020436f6e736f6c652e57726974654c696e65285c224b65736b696172766f203d205c22202b206b65736b696172766f293b222c20227461736b4944223a2022312e6b65736b696172766f66756e6b74696f222c20227265706c616365223a2022494e5345525420594f55522046554e4354494f4e532048455245222c20226279436f6465223a2022202020207075626c69632073746174696320646f75626c65204b65736b696172766f28696e7420612c20696e74206229205c6e202020207b5c6e20202020202020646f75626c65206b65736b696172766f3b5c6e202020202020206b65736b696172766f203d202861202b206229202f20322e303b202f2f2048756f6d20322e302c206a6f74746120726561616c696c756b75205c6e2020202020202072657475726e206b65736b696172766f3b5c6e202020207d227d</cs-runner></div>
    </div>
    
    <div id="par-631" class="paragraph">
        <p>Ensimmäisellä rivillä määritellään jälleen julkinen ja staattinen aliohjelma. Lumiukko-esimerkissä <code>static</code>-sanan jälkeen luki <code>void</code>, joka tarkoitti, että aliohjelma ei palauttanut mitään arvoa. Koska nyt haluamme, että aliohjelma palauttaa parametrina saamiensa kokonaislukujen keskiarvon, niin meidän täytyy kirjoittaa paluuarvon tyyppi <code>void</code>-sanan tilalle <code>static</code>-sanan jälkeen. Koska kahden kokonaisluvun keskiarvo voi olla myös desimaaliluku, niin paluuarvon tyyppi on <code>double</code>. Sulkujen sisällä ilmoitetaan jälleen parametrit. Nyt parametreina on kaksi kokonaislukua <code>a</code> ja <code>b</code>. Toisella rivillä määritellään reaalilukumuuttuja keskiarvo. Kolmannella rivillä lasketaan parametrien <code>a</code> ja <code>b</code> summa ja jaetaan se kahdella muuttujaan <code>keskiarvo</code>. Neljännellä rivillä palautetaan <code>keskiarvo</code>-muuttujan arvo.</p>
    </div>
    
    <div id="par-632" class="paragraph">
        <p>Aliohjelmaa voitaisiin nyt käyttää pääohjelmassa esimerkiksi alla olevalla tavalla.</p>
    </div>
    
    <div id="par-633" class="paragraph">
        <div id='1.keskiarvokutsu' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f46756e6b74696f506f686a612e6373222c2022696e64656e74223a202230222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022494e5345525420594f55522046554e4354494f4e532048455245222c20226279436f646531223a20222f2f5c6e202020207075626c69632073746174696320646f75626c65204b65736b696172766f28696e7420612c20696e74206229205c6e202020207b5c6e2020202020202020646f75626c65206b65736b696172766f3b5c6e20202020202020206b65736b696172766f203d202861202b206229202f20322e303b202f2f2048756f6d20322e30206175747461612c206574745c75303065342074756c6f73206f6e20726561616c696c756b75205c6e202020202020202072657475726e206b65736b696172766f3b5c6e202020207d5c6e222c20227461736b4944223a2022312e6b65736b696172766f6b75747375222c20227374656d223a20224b6f6b65696c65206c61736b6561206d756964656e6b696e206c756b756a656e206b65736b696172766f6a612e222c20227265706c616365223a2022494e5345525420594f55522043414c4c532048455245222c20226279436f6465223a20222020202020202020646f75626c65206b65736b696172766f3b5c6e20202020202020206b65736b696172766f203d204b65736b696172766f28332c2034293b5c6e2020202020202020436f6e736f6c652e57726974654c696e65285c224b65736b696172766f203d205c22202b206b65736b696172766f293b227d</cs-runner></div>
    </div>
    
    <div id="par-634" class="paragraph">
        <p>Kutsu voitaisiin kirjoittaa myös lyhyemmin kirjoitettuna:</p>
    </div>
    
    <div id="par-635" class="paragraph">
        <div id='1.keskiarvokutsu2' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f46756e6b74696f506f686a612e6373222c2022696e64656e74223a202230222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022494e5345525420594f55522046554e4354494f4e532048455245222c20226279436f646531223a20222f2f5c6e202020207075626c69632073746174696320646f75626c65204b65736b696172766f28696e7420612c20696e74206229205c6e202020207b5c6e2020202020202020646f75626c65206b65736b696172766f3b5c6e20202020202020206b65736b696172766f203d202861202b206229202f20322e303b202f2f2048756f6d20322e30206175747461612c206574745c75303065342074756c6f73206f6e20726561616c696c756b75205c6e202020202020202072657475726e206b65736b696172766f3b5c6e202020207d5c6e222c20227461736b4944223a2022312e6b65736b696172766f6b7574737532222c20227265706c616365223a2022494e5345525420594f55522043414c4c532048455245222c20226279436f6465223a20222020202020202020436f6e736f6c652e57726974654c696e65285c224b65736b696172766f203d205c22202b204b65736b696172766f28332c203429293b227d</cs-runner></div>
    </div>
    
    <div id="par-636" class="paragraph">
        <p>Koska Keskiarvo-aliohjelma palauttaa aina double-tyyppisen liukuluvun, voidaan kutsua käyttää kuten mitä tahansa double-tyyppistä arvoa. Se voidaan esimerkiksi tulostaa tai tallentaa muuttujaan.</p>
    </div>
    
    <div id="par-637" class="paragraph">
        <p>Itse asiassa koko Keskiarvo-aliohjelman voisi kirjoittaa lyhyemmin muodossa:</p>
    </div>
    
    <div id="par-638" class="paragraph">
        <div id='1.keskiarvofunktio2' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f46756e6b74696f506f686a612e6373222c2022696e64656e74223a202230222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022494e5345525420594f55522043414c4c532048455245222c20226279436f646531223a20222f2f5c6e2020202020202020646f75626c65206b65736b696172766f203d204b65736b696172766f28332c2034293b5c6e2020202020202020436f6e736f6c652e57726974654c696e65285c224b65736b696172766f203d205c22202b206b65736b696172766f293b222c20227461736b4944223a2022312e6b65736b696172766f66756e6b74696f32222c20227265706c616365223a2022494e5345525420594f55522046554e4354494f4e532048455245222c20226279436f6465223a2022202020207075626c69632073746174696320646f75626c65204b65736b696172766f28696e7420612c20696e74206229205c6e202020207b5c6e2020202020202020646f75626c65206b65736b696172766f203d202861202b206229202f20322e303b205c6e202020202020202072657475726e206b65736b696172766f3b5c6e202020207d227d</cs-runner></div>
    </div>
    
    <div id="par-639" class="paragraph">
        <p>Yksinkertaisimmillaan Keskiarvo-aliohjelman voisi kirjoittaa jopa alla olevalla tavalla.</p>
    </div>
    
    <div id="par-640" class="paragraph">
        <div id='1.keskiarvofunktio3' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f46756e6b74696f506f686a612e6373222c2022696e64656e74223a202230222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022494e5345525420594f55522043414c4c532048455245222c20226279436f646531223a20222f2f5c6e2020202020202020646f75626c65206b65736b696172766f203d204b65736b696172766f28332c2034293b5c6e2020202020202020436f6e736f6c652e57726974654c696e65285c224b65736b696172766f203d205c22202b206b65736b696172766f293b222c20227461736b4944223a2022312e6b65736b696172766f66756e6b74696f33222c20227265706c616365223a2022494e5345525420594f55522046554e4354494f4e532048455245222c20226279436f6465223a2022202020207075626c69632073746174696320646f75626c65204b65736b696172766f28696e7420612c20696e74206229205c6e202020207b5c6e202020202020202072657475726e202861202b206229202f20322e303b5c6e202020207d227d</cs-runner></div>
    </div>
    
    <div id="par-641" class="paragraph">
        <p>Kaikki yllä olevat tavat ovat oikein, eikä voi sanoa mikä tapa on paras. Joskus "välivaiheiden" kirjoittaminen selkeyttää koodia, mutta Keskiarvo-aliohjelman tapauksessa viimeisin tapa on selkein ja lyhin.</p>
    </div>
    
    <div id="par-642" class="paragraph">
        <p>Aliohjelmassa voi olla myös useita <code>return</code>-lauseita. Tästä esimerkki kohdassa: 13.5.1.</p>
    </div>
    
    <div id="par-643" class="paragraph">
        <p>Aliohjelma ei kuitenkaan voi palauttaa kerralla suoranaisesti useita arvoja. Toki voidaan palauttaa esimerkiksi taulukko, jossa sitten on monia arvoja. Toinen keino olisi tehdä olio, joka sisältäisi useita arvoja ja palautettaisiin. C#:ssa on olemassa kolmaskin keino, jota ei käsitellä tällä kurssilla: <code>ref</code>- ja <code>out</code>-parametrit (tosin <code>TryParse</code>-funktion tapauksessa käytimme <code>out</code>-parametriä), katso:</p>
    </div>
    
    <div id="par-644" class="paragraph">
        <blockquote>
<p><a href="http://msdn.microsoft.com/en-us/library/t3c3bfhx(v=vs.80).aspx" class="uri">http://msdn.microsoft.com/en-us/library/t3c3bfhx(v=vs.80).aspx</a>.</p>
</blockquote>
    </div>
    
    <div id="par-645" class="paragraph">
        <p>Metodeita ja aliohjelmia, jotka ottavat vastaan parametreja ja palauttavat arvon sanotaan siis usein myös <em>funktioiksi</em>. Nimitys ei ole hullumpi, jos vertaa Keskiarvo-aliohjelmaa vaikkapa matematiikan funktioon f(x, y) = (x + y) / 2. Funktiolla ei lisäksi saisi olla sivuvaikutuksia, kuten esimerkiksi tulostamista tai globaalien muuttujien muuttamista.</p>
    </div>
    
    <div id="par-646" class="paragraph">
        <p>Mitä eroa on tämän</p>
    </div>
    
    <div id="par-647" class="paragraph">
        <div id='1.keskiarvokutsu2samaa' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f46756e6b74696f506f686a612e6373222c2022696e64656e74223a202230222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022494e5345525420594f55522046554e4354494f4e532048455245222c20226279436f646531223a20222f2f5c6e202020207075626c69632073746174696320646f75626c65204b65736b696172766f28696e7420612c20696e74206229205c6e202020207b5c6e202020202020202072657475726e202861202b206229202f20322e303b5c6e202020207d5c6e222c20227461736b4944223a2022312e6b65736b696172766f6b757473753273616d6161222c20227265706c616365223a2022494e5345525420594f55522043414c4c532048455245222c20226279436f6465223a20222020202020202020646f75626c652074756c6f73203d204b65736b696172766f28352c2032293b202f2f206c61736b657461616e204b65736b696172766f205c6e2020202020202020436f6e736f6c652e57726974654c696e652874756c6f73293b202f2f74756c6f7374616120332e355c6e2020202020202020436f6e736f6c652e57726974654c696e652874756c6f73293b202f2f74756c6f7374616120332e35227d</cs-runner></div>
    </div>
    
    <div id="par-648" class="paragraph">
        <p>ja tämän</p>
    </div>
    
    <div id="par-649" class="paragraph">
        <div id='1.keskiarvokutsu2samaa2' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f46756e6b74696f506f686a612e6373222c2022696e64656e74223a202230222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022494e5345525420594f55522046554e4354494f4e532048455245222c20226279436f646531223a20222f2f5c6e202020207075626c69632073746174696320646f75626c65204b65736b696172766f28696e7420612c20696e74206229205c6e202020207b5c6e202020202020202072657475726e202861202b206229202f20322e303b5c6e202020207d5c6e222c20227461736b4944223a2022312e6b65736b696172766f6b757473753273616d616132222c20227265706c616365223a2022494e5345525420594f55522043414c4c532048455245222c20226279436f6465223a20222020202020202020436f6e736f6c652e57726974654c696e65284b65736b696172766f28352c203229293b202f2f745c75303065346d5c75303065346b696e2074756c6f7374616120332e355c6e2020202020202020436f6e736f6c652e57726974654c696e65284b65736b696172766f28352c203229293b202f2f745c75303065346d5c75303065346b696e2074756c6f7374616120332e35227d</cs-runner></div>
    </div>
    
    <div id="par-650" class="paragraph">
        <p>koodin suorituksessa?</p>
    </div>
    
    <div id="par-651" class="paragraph">
        <p>Ensimmäisessä lukujen 5 ja 2 keskiarvo lasketaan vain kertaalleen, jonka jälkeen tulos tallennetaan muuttujaan. Tulostuksessa käytetään sitten tallessa olevaa laskun tulosta.</p>
    </div>
    
    <div id="par-652" class="paragraph">
        <p>Jälkimmäisessä versiossa lukujen 5 ja 2 keskiarvo lasketaan tulostuksen yhteydessä. Keskiarvo lasketaan siis kahteen kertaan. Vaikka alemmassa tavassa säästetään yksi koodirivi, kulutetaan siinä turhaan tietokoneen resursseja laskemalla sama lasku kahteen kertaan. Tässä tapauksessa tällä ei ole juurikaan merkitystä, sillä <code>Keskarvo</code>-aliohjelman suoritus ei juurikaan rasita nykyaikaisia tietokoneita. Kannattaa kuitenkin opetella tapa, ettei ohjelmassa tehtäisi <em>mitään</em> turhia suorituksia.</p>
    </div>
    
    <div id="par-653" class="paragraph">
        <h2 id="harjoitus-3">9.1 Harjoitus</h2>
    </div>
    
    <div id="par-654" class="paragraph">
        <p>Muuttujat-luvun lopussa tehtiin ohjelma, joka laski painoindeksin. Tee ohjelmasta uusi versio, jossa painoindeksin laskeminen tehdään aliohjelmassa. Aliohjelma saa siis parametreina pituuden ja painon ja palauttaa painoindeksin.</p>
    </div>
    
    <div id="par-655" class="paragraph">
        <div id='1.painoindeksi2' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227461736b4944223a2022312e7061696e6f696e64656b736932222c2022757365725f6964223a2022766573616c222c20226279436f6465223a20227075626c696320636c617373205061696e6f696e64656b73695c6e7b5c6e202020207075626c69632073746174696320766f6964204d61696e2829205c6e202020207b5c6e202020202020646f75626c6520706974757573203d20312e38333b5c6e202020202020646f75626c65207061696e6f203d2037352e303b5c6e202020202020646f75626c65207061696e6f696e64656b7369203d207061696e6f202f20287069747575732a706974757573293b5c6e20202020202053797374656d2e436f6e736f6c652e57726974654c696e65287061696e6f696e64656b7369293b5c6e2020207d5c6e7d227d</cs-runner></div>
    </div>
    
    <div id="par-656" class="paragraph">
        <h1 id="visual-studio">10. Visual Studio</h1>
    </div>
    
    <div id="par-657" class="paragraph">
        <p>Vaikka ohjelmakoodia voi kirjoittaa pelkällä editorillakin, ohjelmien koon kasvaessa alkaa kaipaamaan työvälineiltä hieman enemmän ominaisuuksia. Peruseditoreja enemmän ominaisuuksia tarjoavat sovelluskehittimet eli IDE:t (Integrated Development Environment). C#:lle tehtyjä ilmaisia sovelluskehittimiä ovat muun muassa</p>
    </div>
    
    <div id="par-658" class="paragraph">
        <ul>
<li><p>Visual Studio 201x Express -tuoteperhe,</p></li>
<li><p>Mono ja Xamarin Studio</p></li>
<li><p>SnippetCompiler.</p></li>
</ul>
    </div>
    
    <div id="par-659" class="paragraph">
        <p>Ohjeet on testattu toimiviksi Visual Studio 2013 Professional -versioilla Windows-ympäristössä.</p>
    </div>
    
    <div id="par-660" class="paragraph">
        <h2 id="asennus">10.1 Asennus</h2>
    </div>
    
    <div id="par-661" class="paragraph">
        <p>Visual Studion (VS) maksullinen - ja Jyväskylän yliopiston opiskelijoille maksuton - Ultimate-versio, on ladattavissa Microsoftin yliopistoyhteistyöpalvelusta, kirjoitushetkellä (elokuu 2014) nimeltään DreamSpark Premium. Edellä mainittu Express-versio on saatavilla ilmaiseksi Microsoftin verkkosivuilta. Express-versio riittää muilta osin tämän kurssin tarpeisiin, mutta siitä puuttuvat testausominaisuudet (ks. luku 11). Muistathan, että VS on saatavissa vain Windows-käyttöjärjestelmille. Linux- ja Mac OS X -ympäristöihin on saatavilla ainakin Mono-sovelluskehitin ja Xamarin Studio.</p>
    </div>
    
    <div id="par-662" class="paragraph">
        <h2 id="käyttö">10.2 Käyttö</h2>
    </div>
    
    <div id="par-663" class="paragraph">
        <h3 id="ensimmäinen-käyttökerta">10.2.1 Ensimmäinen käyttökerta</h3>
    </div>
    
    <div id="par-664" class="paragraph">
        <p>Kun käynnistät VS:n ensimmäisen kerran, kysyy VS millä oletusasetuksilla haluat valikoita ja toimintoja käyttää. Valitse Visual C# Development Settings.</p>
    </div>
    
    <div id="par-665" class="paragraph">
        <p>Aluksi rivinumerot eivät ole käytössä. Koodin seuraamisen helpottamiseksi otetaan ne käyttöön kohdasta Tools → Options → Text Editor → C# → Line Numbers. Jos Error list-ikkuna ei ole jo näkyvissä ruudun alareunassa, kannattaa se ottaa käyttöön: View → Error List.</p>
    </div>
    
    <div id="par-666" class="paragraph">
        <h3 id="projektit-ja-solutionit">10.2.2 Projektit ja solutionit</h3>
    </div>
    
    <div id="par-667" class="paragraph">
        <p>Visual Studiossa on <em>solutioneja</em> ja <em>projekteja</em>. Yhdessä solutionissa voi olla monta projektia ja jokaisen projektin täytyy kuulua johonkin solutioniin. Uuden ohjelman kirjoittaminen alkaa aina projektin perustamisella johonkin solutioniin, jolloin myös solution luodaan samalla, ellei sitä ole jo tehty.</p>
    </div>
    
    <div id="par-668" class="paragraph">
        <p>Hierarkia ei ole kiveen hakattu, mutta solutioneja ja projekteja voi hahmottaa esimerkiksi seuraavasti:</p>
    </div>
    
    <div id="par-669" class="paragraph">
        <ul>
<li><p>Jokainen demokerta (tai luento, ohjauskerta tms) on uusi solution, eli kun aloitat tekemään <em>ensimmäistä</em> demotehtävää (ohjaustehtävää) niin toimitaan seuraavasti</p>
<ul>
<li><p>Klikkaa File → New project (Ctrl+Shift+N)</p></li>
<li><p>Valitse projektin tyyppi: Jos teet konsoliohjelmaa niin valitse Jypeli -kohdasta ConsoleMain. Jos teet Jypeli-peliä, valitse Visual C# → Jypeli-kohdasta haluamasi projektimalli (esimerkiksi FysiikkaPeli).</p></li>
<li><p>Anna projektille (eli tehtävälle) nimi kohtaan Name, esimerkiksi Lumiukko tai HelloWorld. Tarkista demotehtävien nimeämiskäytäntö opettajalta.</p></li>
<li><p>Laita Location-kohtaan demotehtäviesi juuripolku, eli vaikkapa C:\MyTemp\&lt;omatunnus&gt;\ohj1\demot. Laita omatunnus kohtaan luonnollisesti yliopiston mikroverkon käyttäjätunnuksesi. Älä käytä ääkkösiä tai välilyöntejä kansioiden eikä tiedostojen nimissä, tulemme yleensä toimeen myös ilman niitä, mutta ongelmia ääkköset ja erikoismerkit aiheuttavat usein.</p></li>
</ul></li>
</ul>
    </div>
    
    <div id="par-670" class="paragraph">
        <div class="huomautus">
<p>Huomaa! Tarkista luennoitsijalta demotehtävien tallennuspaikka yliopiston mikroverkossa.</p>
</div>
    </div>
    
    <div id="par-671" class="paragraph">
        <ul>
<li><ul>
<li><p>Valitse Solution-valikosta Create new Solution ja paina Create directory for solution (tärkeä)</p></li>
<li><p>Laita Solution Name kohtaan demoN (N = demokerran numero), esimerkiksi demo3</p></li>
<li><p>Nyt sinulle on luotu uusi solution ja yksi projekti solutionin sisään.</p></li>
</ul></li>
<li><p>Kun haluat <em>lisätä</em> demotehtäviä (projekteja) tiettyyn demokertaan (solutioniin) toimi näin</p>
<ul>
<li><p>Avaa sen demokerran solution (.sln-tiedosto) johon haluat tehtävän lisätä (ellei se ole jo auki Visual Studiossa).</p></li>
<li><p>File → Add → New project <em>tai</em> Solution Explorerissa klikkaa hiiren oikealla solutionin päälle, ja klikkaa Add → New project</p></li>
<li><p>Anna projektille nimi, jätä Location ennalleen, ja valitse Solution-valikosta Add to Solution. Solution Name -kohta himmenee ja Location-kohtaan pitäisi tulla automaattisesti lisäteksti demoN.</p></li>
</ul></li>
</ul>
    </div>
    
    <div id="par-672" class="paragraph">
        <p>Näin tehtynä kaikki yhden demokerran tehtävät löytyvät "saman katon alta" eli yhden solutionin kaikki projektit menevät samaan kansioon. Resurssienhallinnassa hakemistopuusi voisi näyttää esimerkiksi tältä.</p>
    </div>
    
    <div id="par-673" class="paragraph">
        <pre><code>ohj1
 |
 +--demot 
 |  +--demo1
 |  |  +--HelloWorld
 |  |  +--Lumiukko
 |  |  '-demo1.sln
 |  '--demo2
 |     +--Lumiukko2
 |     '--LukujenLaskemista
 '--ohjaukset
    +--ohjaus1
    |  +--HelloWorld
    |  '--Lumiukko
    '--ohjaus2</code></pre>
    </div>
    
    <div id="par-674" class="paragraph">
        <p>Yksittäisten projektien kansioihin (tässä HelloWorld, Lumiukko, Lumiukko2, ja niin edelleen) syntyy myös läjä erilaisia tiedostoja. Tutkitaan vielä, millainen rakenne yksittäisen projektin kansioon on syntynyt. Esimerkkinä vaikkapa HelloWorld-kansio.</p>
    </div>
    
    <div id="par-675" class="paragraph">
        <pre><code>HelloWorld
 |
 +--bin
 |  +--Debug
 |     +-HelloWorld.vshost.exe
 |     +-HelloWorld.vshost.exe.manifest
 +--obj
 |  +--x86
 |     +-(...)
 +--Properties
 |  +-AssemblyInfo.cs
 +-HelloWorld.csproj
 '-HelloWorld.cs</code></pre>
    </div>
    
    <div id="par-676" class="paragraph">
        <p>Lähdekoodi sijaitsee <code>HelloWorld.cs</code>-tiedostossa. Kuten huomaat, projektiin kuuluu kuitenkin monia muitakin tiedostoja ja kansioita. bin- ja obj-kansiot sisältävät ohjelman käännökseen liittyviä väliaikaistiedostoja. Properties-kansio taas sisältää julkaisuun liittyvää tietoa esimerkiksi tekijänoikeuksista ja merkistöstä. Huomaa, että varsinainen projektitiedosto on .csproj-päätteinen.</p>
    </div>
    
    <div id="par-677" class="paragraph">
        <p>Solution toimii tavallaan liimana näiden eri projektitiedostojen välille yhdistäen ne Visual Studiossa. Tämän johdosta monen eri projektin käsittely yhtä aikaa on kätevää.</p>
    </div>
    
    <div id="par-678" class="paragraph">
        <p>Viimeisenä tutkitaan Jypeli-projektimallista luotua projektia, sillä sen kansiorakenne eroaa hieman konsoliohjelmaan syntyvästä kansiorakenteesta, esimerkkinä Lumiukko-projekti.</p>
    </div>
    
    <div id="par-679" class="paragraph">
        <pre><code>Lumiukko
 |
 +--bin
 |  +-(...)
 +--obj
 |  +-(...)
 +--Properties
 |  +-AssemblyInfo.cs
 +-Game.ico
 +-GameThumbnail.png
 +-Lumiukko.csproj
 +-Ohjelma.cs
 '-Lumiukko.cs
LumiukkoContent
 |
 +--bin
 |  +-(...)
 +--obj
 |  +-(...)
 '-LumiukkoContent.contentproj</code></pre>
    </div>
    
    <div id="par-680" class="paragraph">
        <p>Projekti sisältää yhden kansion sijaan kaksi kansiota (<code>Lumiukko</code> ja <code>LumiukkoContent</code>), joista jälkimmäinen on varattu sisällön, kuten äänien ja kuvien, tuomiselle peliin. Lumiukko-kansiosta löytyy edelleen kaksi kooditiedostoa, Ohjelma.cs ja Lumiukko.cs, joista ensimmäinen on varattu Main-metodille, ja jälkimmäinen sisältää varsinaisen pelin lähdekoodin. Ohjelma.cs-tiedostoa ei käytännössä juurikaan tarvitse muokata.</p>
    </div>
    
    <div id="par-681" class="paragraph">
        <p><code>Lumiukko.cs</code> sisältää lähdekoodin, ja se on yleensä se tiedosto, joka pyydetään palautettavaksi demotehtävissä. Muita tiedostoja ei tarvitse palauttaa, ellei niitä erikseen pyydetä. Huomaa, että tiedoston nimen voi ja tulee muuttaa vastaamaan luokan nimeä.</p>
    </div>
    
    <div id="par-682" class="paragraph">
        <h3 id="visual-studion-perusnäkymä">10.2.3 Visual Studion perusnäkymä</h3>
    </div>
    
    <div id="par-683" class="paragraph">
        <p>Kun olet luonut ensimmäisen projektisi, pitäisi edessäsi olla VS:n perusnäkymä. VS voi vaikuttaa aluksi melko monimutkaiselta, mutta sen peruskäytön oppii nopeasti. Jos jotakin työkalua ei tarvi ja se vie mielestäsi tilaa ruudulla, sen voi yleensä piilottaa. Kannattaakin opetella käyttämään ruututilaa tehokkaasti ja poistaa turhat visuaaliset elementit käytöstä kun niitä ei tarvita.</p>
    </div>
    
    <div id="par-684" class="paragraph">
        <p>Oikealla on <code>Solution Explorer</code>, jossa näkyy kaikki projektit, sekä projektien sisältämät tiedostot ja viitteet muihin kooditiedostoihin.</p>
    </div>
    
    <div id="par-685" class="paragraph">
        <p>Alhaalla on <code>Error List</code> (mikäli aktivoit sen päälle aikaisemmin), joka näyttää koodin kirjoittamisen aikana havaittuja virheitä, sekä käännöksessä tapahtuvia virheitä. <code>Error List</code> on yksi ohjelmoijan tärkeimmistä työkaluista ja Visual Studion ehdoton vahvuus - syntaksivirheet saadaan kiinni ilman, että ohjelmoijan tarvitsee erikseen edes kääntää tekemäänsä ohjelmaa. Voit tuplaklikata <code>Error Listissä</code> virhettä, ja VS vie kursorin suoraan siihen pisteeseen, jossa olettaa virheen olevan.</p>
    </div>
    
    <div id="par-686" class="paragraph">
        <p>Keskellä näkyy koodin kirjoitusikkuna. Eri kooditiedostot aukeavat välilehtiin, joita voi selata näppäinyhdistelmällä <code>Ctrl+Tab</code> (ja <code>Shift+Ctrl+Tab</code>).</p>
    </div>
    
    <div id="par-687" class="paragraph">
        <h3 id="ohjelman-kirjoittaminen-1">10.2.4 Ohjelman kirjoittaminen</h3>
    </div>
    
    <div id="par-688" class="paragraph">
        <p>Jokainen C#-ohjelma kirjoitetaan luokan sisään. Luotaessa uusi konsoliohjelma, tekee Visual Studio meille valmiin kooditiedoston, jossa on pieni pätkä valmista ohjelmakoodia. Oletusarvoisesti konsoliohjelmaan luodaan yksi kooditiedosto nimeltä <code>Program.cs</code>, jossa on valmiina muutama <code>using</code>-lause, nimiavauus eli namespace (projektia vastaavalla nimellä), luokka sekä pääohjelma eli <code>Main</code>-metodi. Kurssin <code>ConsoleMain</code> mallilla luotaessa nimiavaruus jää "tarpeettomana" pois ja tiedoston nimi vastaa projektin nimeä.</p>
    </div>
    
    <div id="par-689" class="paragraph">
        <p>Aivan aluksi kannattaa muuttaa kooditiedoston nimi johonkin hieman kuvaavampaan klikkaamalla <code>Solution Explorerissa</code> tiedoston päällä hiiren oikealla napilla ja valitsemalla Rename. Kun tiedoston nimi on muutettu, kysyy Visual Studio, haluatko vyöryttää tekemäsi muutokset myös muualle ohjelmaan. Vastaa tähän kyllä.</p>
    </div>
    
    <div id="par-690" class="paragraph">
        <p>Nyt meillä on edessä uusi luokan raakile <code>Main</code>-metodeineen ja editori, jolla ohjelma voidaan kirjoittaa.</p>
    </div>
    
    <div id="par-691" class="paragraph">
        <h3 id="ohjelman-kääntäminen-ja-ajaminen-1">10.2.5 Ohjelman kääntäminen ja ajaminen</h3>
    </div>
    
    <div id="par-692" class="paragraph">
        <p>Kun ohjelma on kirjoitettu, sen ajaminen onnistuu ylhäältä <code>Debug</code>-napista (vihreä kolmio) tai klikkaamalla <code>F5</code> (debug). Nappia painamalla VS kääntää ohjelman automaattisesti ja suorittaa heti sen jälkeen ns. debuggaustilassa. Ohjelma voidaan ajaa myös nopeammin ilman debuggausta - mikä ei yleensä ole suositeltavaa - painamalla <code>Ctrl+F5</code> (start without debugging). Toisaalta konsoliohjelmat pysähtyvät näyttöön mikäli ne ajetaan ilman debuggausta, mikä joskus puoltaa tämän vaihtoehdon käyttöä. Jos haluamme lopettaa ohjelman suorituksen jostain syystä kesken kaiken, onnistuu se painamalla <code>Shift+F5</code>.</p>
    </div>
    
    <div id="par-693" class="paragraph">
        <h3 id="referenssien-asettaminen">10.2.6 Referenssien asettaminen</h3>
    </div>
    
    <div id="par-694" class="paragraph">
        <p>Oman tai jonkun muun tekemän luokkakirjaston (.dll-tiedoston), esimerkiksi kurssilla käytettävän Jypelin, voi lisätä VS:oon seuraavasti. Valitse <code>Solution Explorerista</code> <code>References</code> ja klikkaa hiiren oikealla napilla <code>Add reference</code>. Mene <code>Browse</code>-välilehdelle ja hae haluamasi kirjasto, esimerkiksi <code>Jypeli.dll</code>. Nyt voit kirjoittaa kooditiedoston alkuun lauseen</p>
    </div>
    
    <div id="par-695" class="paragraph">
        <pre><code>using Jypeli;</code></pre>
    </div>
    
    <div id="par-696" class="paragraph">
        <p>jolloin Jypeli-kirjasto on käytössäsi.</p>
    </div>
    
    <div id="par-697" class="paragraph">
        <h2 id="debuggaus">10.3 Debuggaus</h2>
    </div>
    
    <div id="par-698" class="paragraph">
        <p>Termi debug johtaa yhden legendan mukaan aikaan, jolloin tietokoneohjelmissa ongelmia aiheuttivat releiden väliin lämmittelemään päässeet luteet. Ohjelmien korjaaminen oli siis kirjaimellisesti hyönteisten (bugs) poistoa. Katso lisätietoja Wikipediasta:</p>
    </div>
    
    <div id="par-699" class="paragraph">
        <blockquote>
<p><a href="http://en.wikipedia.org/wiki/Software_bug#Etymology" class="uri">http://en.wikipedia.org/wiki/Software_bug#Etymology</a>.</p>
</blockquote>
    </div>
    
    <div id="par-700" class="paragraph">
        <p>Virheet ohjelmakoodissa ovat valitettava tosiasia. Ne tulevat aina olemaan mukanasi, vaikka olisit kuinka hyvä ohjelmoija tahansa. Hyvä ohjelmoija kuitenkin tiedostaa tämän asian, ja valmistautuu siihen hankkimalla työkalut virheiden jäljittämistä ja korjaamista varten. On olemassa pieniä virheitä, jotka eivät vaikuta ohjelman toimintaan millään tavalla (kuten kirjoitusvirhe painonapissa), mutta on olemassa myös virheitä, jotka ovat erittäin vakavia. Tällaiset virheet kaatavat ohjelman. <em>Syntaksivirheet</em> voivat olla pieniä, mutta estävät ohjelmaa kääntymästä. <em>Loogiset</em> <em>virheet</em> eivät jää kääntäjän kouriin, mutta aiheuttavat ongelmia ohjelman ajon aikana.</p>
    </div>
    
    <div id="par-701" class="paragraph">
        <p>Ehkäpä ohjelmasi ei onnistu lisäämään oikeaa tietoa tietokantaan, koska tarvittava kenttä puuttuu, tai lisää väärän tiedon jossain olosuhteissa. Tällaiset virheet, jossa sovelluksen logiikka on jollain tavalla pielessä, ovat semanttisia virheitä tai loogisia virheitä.</p>
    </div>
    
    <div id="par-702" class="paragraph">
        <p>Varsinkin monimutkaisemmista ohjelmista loogisen virheen löytäminen on välillä vaikeaa, koska ohjelma ei kenties millään tavalla ilmoita virheestä - huomaat vain lopputuloksesta virheen kuitenkin tapahtuneen.</p>
    </div>
    
    <div id="par-703" class="paragraph">
        <p>Tähän erinomaisena apuna on VS:n virheidenjäljitystoiminto eli <em>debuggaus</em>. Siinä ohjelman suoritusta voi seurata rivi riviltä, samoin kuin muuttujien arvojen muuttumista. Tämä auttaa huomattavasti virheen tai epätoivotun toiminnan syyn selvittämisessä. Vanha tapa tehdä samaa asiaa on lisätä ohjelmaan tulostuslauseita, mutta sitten nämä ohjelman muutokset jäävät helposti ohjelmaan ja saattavat toisinaan myös muuttaa ohjelman toimintaa.</p>
    </div>
    
    <div id="par-704" class="paragraph">
        <p>VS:ssa debuggaus aloitetaan asettamalla ensin johonkin kohtaan koodia keskeytyskohta (breakpoint). Keskeytyskohta on kohta, johon haluamme testauksen aikana ohjelman suorituksen väliaikaisesti pysähtyvän. Ohjelman pysähdyttyä voidaan sitä sitten alkaa suorittamaan rivi riviltä. Keskeytyskohta tulee siis asettaa koodiin ennen oletettua virhekohtaa. Jos haluamme debugata koko ohjelman, asetamme vain keskeytyskohdan ohjelman alkuun. Aseta keskeytyskohta kursorin kohdalle painamalla F9 tai klikkaamalla koodi-ikkunassa rivinumeroiden vasemmalle puolelle (harmaalle alueelle). Keskeytyskohta pitäisi näkyä punaisena pallona ja rivillä oleva lause värjättynä punaisella.</p>
    </div>
    
    <div id="par-705" class="paragraph">
        <p>Kun keskeytyskohta on asetettu, klikataan ylhäältä Debug-nappia tai painetaan <code>F5</code>. Visual Studiossa ohjelman "käynnistäminen" ja debuggauksen käynnistäminen ovat sama asia. Toki ohjelma voidaan käynnistää ilman debug-tilaakin, mutta silloin mahdolliset ohjelman virheet eivät tule Visual Studion tietoon, ja esimerkiksi nollalla jakaminen kaataa ajetun ohjelman.</p>
    </div>
    
    <div id="par-706" class="paragraph">
        <p>Ohjelman suoritus on nyt pysähtynyt siihen kohtaan mihin asetimme keskeytyskohdan. Avaa <code>Locals</code>-välilehti alhaalta, ellei se ole jo auki. Debuggaus-näkymässä <code>Locals</code>-paneelissa näkyy kaikki tällä hetkellä näkyvillä olevat muuttujat (paikalliset, eli lokaalit muuttujat) ja niiden arvot. Keskellä näkyy ohjelman koodi, ja keltaisella se rivi missä kohtaa ohjelmaa ollaan suorittamassa. Vasemalla näkyy myös keltainen nuoli joka osoittaa sen hetkisen rivinumeron.</p>
    </div>
    
    <div id="par-707" class="paragraph">
        <p>Ohjelman suoritukseen rivi riviltä on nyt kaksi eri komentoa: Step Into (<code>F11</code>) ja Step Over (<code>F10</code>). Napit toimivat muuten samalla tavalla, mutta jos kyseessä on aliohjelmakutsu, niin Step Into -komennolla mennään aliohjelman sisälle, kun Step Over -komento suorittaa rivin kuin se olisi yksi lause. Kaikki tällä hetkellä näkyvyysalueella olevat muuttujat ja niiden arvot nähdään oikealla olevalla Variables-välilehdellä.</p>
    </div>
    
    <div id="par-708" class="paragraph">
        <p>Kun emme enää halua suorittaa ohjelmaa rivi riviltä, voimme joko suorittaa ohjelman loppuun Debug → Continue (<code>F5</code>)-napilla tai keskeyttää ohjelman suorituksen Terminate (<code>Shift+F5</code>)-napilla.</p>
    </div>
    
    <div id="par-709" class="paragraph">
        <h2 id="hyödyllisiä-ominaisuuksia">10.4 Hyödyllisiä ominaisuuksia</h2>
    </div>
    
    <div id="par-710" class="paragraph">
        <h3 id="syntaksivirheiden-etsintä">10.4.1 Syntaksivirheiden etsintä</h3>
    </div>
    
    <div id="par-711" class="paragraph">
        <p>Visual Studio huomaa osan syntaksivirheistä, joten osa virheistä voidaan korjata jo ennen kääntämistä - tarkemmin sanottuna VS kääntää jatkuvasti koodia havaitakseen ja ilmoittaakseen mahdolliset virheet. Kun VS löytää virheen, ilmestyy Error List -paneeliin virheilmoitus ja tieto siitä rivistä, jolla virheellinen koodi sijaitsee. Lisäksi jos virhe paikallistuu alleviivaa VS virheellisen koodinpätkän punaisella aaltoviivalla. Viemällä hiiri punaisen rastin päälle, VS kertoo tarkemmin mikä kyseisessä kohdassa on vikana. Huomaa, että VS ei välttämättä paikallista virhettä täysin oikein. Usein virhe voi olla myös edellisellä tai seuraavalla rivillä.</p>
    </div>
    
    <div id="par-712" class="paragraph">
        <h3 id="kooditäydennys-intellisense">10.4.2 Kooditäydennys, IntelliSense</h3>
    </div>
    
    <div id="par-713" class="paragraph">
        <p>IntelliSense on yksi VS:n parhaista ominaisuuksista. IntelliSense on monipuolinen automaattinen koodin täydentäjä, sekä dokumentaatiotulkki.</p>
    </div>
    
    <div id="par-714" class="paragraph">
        <p>Yksi dokumentaatioon perustuva IntelliSensen ominaisuus on parametrilistojen selaus kuormitetuissa aliohjelmissa. Kirjoitetaan esimerkiksi</p>
    </div>
    
    <div id="par-715" class="paragraph">
        <pre><code>string nimi = "Kalle";</code></pre>
    </div>
    
    <div id="par-716" class="paragraph">
        <p>Kun tämän jälkeen kirjoitetaan nimi ja piste ".", ilmestyy lista niistä funktioaliohjelmista ja metodeista, jotka kyseisellä oliolla ovat käytössä. Aliohjelman valinnan jälkeen klikkaa kaarisulku auki, jolloin pienten nuolten avulla voi selata kyseessä olevan aliohjelman eri "versioita", eli samannimisiä aliohjelmia eri parametrimäärillä varustettuna. Lisäksi saadaan lyhyt kuvaus metodin toiminnasta ja jopa esimerkkejä käytöstä.</p>
    </div>
    
    <div id="par-717" class="paragraph">
        <p>IntelliSense auttaa myös kirjoittamaan nopeammin ja erityisesti ehkäisemään kirjoitusvirheiden syntymistä. Jos ei ole konekirjoituksen Kimi Räikkönen, voi koodia kirjoittaessa helpottaa elämää painamalla <code>Ctrl+Space</code>. Tällöin VS yrittää arvata (perustuen kirjoittamaasi tekstiin sekä aiemmin kirjoittamaasi koodiin), mitä haluat kirjoittaa. Jos mahdollisia vaihtoehtoja on monta, näyttää VS vaihtoehdot listana.</p>
    </div>
    
    <div id="par-718" class="paragraph">
        <h3 id="uudelleenmuotoilu">10.4.3 Uudelleenmuotoilu</h3>
    </div>
    
    <div id="par-719" class="paragraph">
        <p>Visual Studio pyrkii muotoilemaan koodia "kauniiksi" kirjoittamisen yhteydessä. Käyttäjä voi kuitenkin tarkoituksellisesti tai vahingossa rikkoa VS:n sisäisiä muotoilusäännöksiä. Tällöin koodi voidaan palauttaa vastaamaan säännöksiä painamalla Edit → Advanced → Format Document tai näppäinyhdistelmällä <code>Ctrl+E, D</code> (pidä <code>Ctrl</code> pohjassa, klikkaa ensin <code>E</code> ja sitten <code>D</code>).</p>
    </div>
    
    <div id="par-720" class="paragraph">
        <p>Jos välttämättä haluat, voit muokata VS:n koodimuotoilun oletussääntöjä valikosta:</p>
    </div>
    
    <div id="par-721" class="paragraph">
        <blockquote>
<p>Tools → Options → Text editor → C# → Formatting.</p>
</blockquote>
    </div>
    
    <div id="par-722" class="paragraph">
        <h2 id="lisätietoja-visual-studion-käytöstä">10.5 Lisätietoja Visual Studion käytöstä</h2>
    </div>
    
    <div id="par-723" class="paragraph">
        <p>Kurssin Wikistä löytyy lisää vinkkejä ja neuvoja Visual Studion käyttöön:</p>
    </div>
    
    <div id="par-724" class="paragraph">
        <blockquote>
<p><a href="https://trac.cc.jyu.fi/projects/ohj1" class="uri">https://trac.cc.jyu.fi/projects/ohj1</a>.</p>
</blockquote>
    </div>
    
    <div id="par-725" class="paragraph">
        <h1 id="comtest">11. ComTest</h1>
    </div>
    
    <div id="par-726" class="paragraph">
        <blockquote>
<p>“Program testing can be a very effective way to show the presence of bugs, but is hopelessly inadequate for showing their absence.” - Edsger W. Dijkstra</p>
</blockquote>
    </div>
    
    <div id="par-727" class="paragraph">
        <p>Jo melko yksinkertaisten ohjelmien testaaminen ruudulle tulostelemalla veisi paljon aikaa. Tulostukset pitäisi tehdä uudestaan jokaisen muutoksen jälkeen, sillä emme voisi mitenkään tietää, että ennen muutosta tekemämme testit toimisivat vielä muutoksen jälkeen. Yksikkötestauksen idea on, että jokaiselle aliohjelmalle ja metodille kirjoitetaan oma testinsä erilliseen tiedostoon, jotka voidaan sitten kaikki ajaa kerralla. Näin voimme suorittaa kerran kirjoitetut testit jokaisen pienenkin muutoksen jälkeen todella helposti.</p>
    </div>
    
    <div id="par-728" class="paragraph">
        <p>Visual Studion Pro-, Premium- ja Ultimate-versioissa on olemassa monipuoliset testausominaisuudet, mikä mahdollistaa ns. yksikkötestien (unit tests) kirjoittamisen. Ongelmana on, että näiden VS:n tukemien testitiedostojen kirjoittaminen on melko työlästä. Tähän on apuna Jyväskylän yliopiston tietotekniikan laitoksella kehitetty ComTest-työkalu, joka hyödyntää Visual Studion sisäänrakennettua testausjärjestelmää, mutta madaltaa huomattavasti kynnystä kirjoittaa ohjelmaansa yksikkötestejä. ComTest-testaustyökalun idea on, että testit voidaan kirjoittaa yksinkertaisella syntaksilla aliohjelmien ja metodien dokumentaatiokommentteihin suoraan ohjelman kooditiedostoon, joista sitten luodaan varsinaiset Visual Studio -testiprojektit ja -tiedostot. Samalla kirjoitetut testit toimivat dokumentaatiossa esimerkkinä aliohjelman tai metodin toiminnasta. ComTest:n asennusohjeet löytyy sivulta:</p>
    </div>
    
    <div id="par-729" class="paragraph">
        <blockquote>
<p><a href="https://trac.cc.jyu.fi/projects/comtest/wiki/ComTestCsharp" class="uri">https://trac.cc.jyu.fi/projects/comtest/wiki/ComTestCsharp</a>.</p>
</blockquote>
    </div>
    
    <div id="par-730" class="paragraph">
        <p>Koska ComTest on vielä kehitysvaiheessa, löytyy sivuilta myös ajankohtaisimmat tiedot ComTestin käytöstä.</p>
    </div>
    
    <div id="par-731" class="paragraph">
        <h2 id="käyttö-1">11.1 Käyttö</h2>
    </div>
    
    <div id="par-732" class="paragraph">
        <p>ComTestistä johtuen luokan, jossa aliohjelmia halutaan testata, on oltava julkisuusmääreellä <code>public</code>, muutoin testaaminen ei onnistu. Samoin jokaisen testattavan aliohjelman on oltava <code>public</code>-aliohjelma.</p>
    </div>
    
    <div id="par-733" class="paragraph">
        <p>Kirjoita aliohjelmaan dokumentaatiokommentit ja kommentoi aliohjelma. Siirry dokumentaatiokommentin alaosaan, laita yksi tyhjä rivi (ilman kauttaviivoja) ja kirjoita "<code>comt</code>" ja painaa <code>Tab+Tab</code> (kaksi kertaa sarkan-näppäintä). Tällöin Visual Studio luo valmiiksi paikan, johon testit kirjoitetaan. Dokumentaatiokommentteihin pitäisi ilmestyä seuraavat rivi.</p>
    </div>
    
    <div id="par-734" class="paragraph">
        <pre><code>/// &lt;example&gt;
/// &lt;pre name="test"&gt;
/// 
/// &lt;/pre&gt;
/// &lt;/example&gt;</code></pre>
    </div>
    
    <div id="par-735" class="paragraph">
        <p>Testit kirjoitetaan <code>pre</code>-tagien sisälle. Ylläoleva syntaksi on Doxygen-tyokalua (ja muita automaattisia dokumentointityökaluja) varten.</p>
    </div>
    
    <div id="par-736" class="paragraph">
        <p>Aliohjelmat ja metodit testataan yksinkertaisesti antamalla niille parametreja ja kirjoittamalla mitä niiden odotetaan palauttavan annetuilla parametreilla. ComTest-testeissä käytetään erityistä vertailuoperaattoria, jossa on kolme yhtä suuri kuin -merkkiä (<code>===</code>). Tämä tarkoittaa, että arvon pitää olla sekä samaa tyyppiä, että samansisältöinen. Kirjoitetaan Yhdista-aliohjelma, joka yhdistää kahden annetun ei-negatiivisen luvun numerot toisiinsa. Tehdään aliohjelmalle samalla testit. Aliohjelman toteutuksessa on (naiivisti) oletettu, että parametrina annettavat luvut täyttävät varmasti annetun ehdon (ei-negatiivinen). Myöhemmin opimme käsittelemään myös sellaiset tilanteet, joissa tästä ehdosta ollaan poikettu.</p>
    </div>
    
    <div id="par-737" class="paragraph">
        <p>Huomaa, että ComTest-testeihin kirjoitetuissa aliohjelmakutsuissa luokan nimi täytyy antaa ennen aliohjelman nimeä. Tässä luokan nimeksi on laitettu Laskuja.</p>
    </div>
    
    <div id="par-738" class="paragraph">
        <div id='1.yhdistanumerot' data-plugin='/csPlugin'><cs-comtest-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f46756e6b74696f506f686a612e6373222c20227265706c616365223a2022494e5345525420594f55522046554e4354494f4e532048455245222c202274797065223a2022636f6e736f6c652f636f6d74657374222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022494e5345525420594f55522043414c4c532048455245222c20227265706c61636532223a202246756e6374696f6e73222c2022696e64656e74223a202230222c20227461736b4944223a2022312e796864697374616e756d65726f74222c20226279436f646532223a20227075626c696320636c617373204c61736b756a61222c20226279436f646531223a20222f2f5c6e2020202020202020696e742079686469737465203d20596864697374612831302c37293b5c6e2020202020202020436f6e736f6c652e57726974654c696e652879686469737465293b202f2f74756c6f7374616120313037222c20226279436f6465223a20225c6e202020202f2f2f203c73756d6d6172793e5c6e202020202f2f2f205968646973745c75303065345c7530306534206b616864656e2065692d6e656761746969766973656e206c7576756e206e756d65726f7420746f697369696e73612e5c6e202020202f2f2f203c2f73756d6d6172793e5c6e202020202f2f2f203c706172616d206e616d653d5c22615c223e456e73696d6d5c7530306534696e656e206c756b753c2f706172616d3e5c6e202020202f2f2f203c706172616d206e616d653d5c22625c223e546f696e656e206c756b753c2f706172616d3e5c6e202020202f2f2f203c72657475726e733e59686469737465747479206c756b753c2f72657475726e733e5c6e202020202f2f2f203c6578616d706c653e5c6e202020202f2f2f203c707265206e616d653d5c22746573745c223e5c6e202020202f2f2f204c61736b756a612e5968646973746128302c203029203d3d3d20303b5c6e202020202f2f2f204c61736b756a612e5968646973746128312c203029203d3d3d2031303b5c6e202020202f2f2f204c61736b756a612e5968646973746128302c203129203d3d3d20313b5c6e202020202f2f2f204c61736b756a612e5968646973746128312c203129203d3d3d2031313b5c6e202020202f2f2f204c61736b756a612e596864697374612831332c203229203d3d3d203133323b5c6e202020202f2f2f204c61736b756a612e596864697374612831302c203029203d3d3d203130303b5c6e202020202f2f2f204c61736b756a612e596864697374612831302c20383729203d3d3d20313038373b5c6e202020202f2f2f204c61736b756a612e596864697374612831302c20303729203d3d3d203130373b5c6e202020202f2f2f203c2f7072653e5c6e202020202f2f2f203c2f6578616d706c653e5c6e202020207075626c69632073746174696320696e74205968646973746128696e7420612c20696e742062295c6e202020207b5c6e2020202020202020737472696e67206162203d20612e546f537472696e672829202b20623b205c6e2020202020202020696e742074756c6f73203d20696e742e5061727365286162293b202020205c6e202020202020202072657475726e2074756c6f733b20202020202020202020202020202020205c6e202020207d227d</cs-comtest-runner></div>
    </div>
    
    <div id="par-739" class="paragraph">
        <p>Edellä oleva toteutus ei ole tehokkain mahdollinen, mutta testien ansiosta sitä voidaan muuttaa paremmaksi ja silti nopeasti varmistua että toiminta pysyy kunnossa. Aja em. testit painamalla <code>Test</code>-painiketta.</p>
    </div>
    
    <div id="par-740" class="paragraph">
        <p>Kokeile muuttaa edellä toteutusta vaikkapa niin, että vaihdat <code>return</code>-lauseen tilalle:</p>
    </div>
    
    <div id="par-741" class="paragraph">
        <pre><code>         return tulos+1;                 </code></pre>
    </div>
    
    <div id="par-742" class="paragraph">
        <p>Aja sitten testit uudelleen. Palauta alkupeärinen muota ja aja taas testit.</p>
    </div>
    
    <div id="par-743" class="paragraph">
        <p>Tarkastellaan testejä nyt hieman tarkemmin.</p>
    </div>
    
    <div id="par-744" class="paragraph">
        <pre><code>Laskuja.Yhdista(0, 0) === 0;</code></pre>
    </div>
    
    <div id="par-745" class="paragraph">
        <p>Yllä olevalla rivillä testataan, että jos Yhdista-aliohjelma saa parametrikseen arvot 0 ja 0, niin myös sen palauttavan arvon tulisi olla 0.</p>
    </div>
    
    <div id="par-746" class="paragraph">
        <pre><code>Laskuja.Yhdista(1, 0) === 10;</code></pre>
    </div>
    
    <div id="par-747" class="paragraph">
        <p>Seuraavaksi testataan, että jos parametreistä ensimmäinen on luku 1 ja toinen luku 0, niin näiden yhdistelmä on 10, joten aliohjelman tulee palauttaa luku 10. Nollan ja ykkösen yhdistelmä antaisi 01, mutta sitä vastaava luku on tietenkin 1, joten se on luku jota palautuksena odotamme, ja näin jatketaan.</p>
    </div>
    
    <div id="par-748" class="paragraph">
        <p>Varsinaisen VS-testin voi nyt luoda ja ajaa painamalla Ctrl+Shift+Q tai valikosta Tools → ComTest. Jos <em>Test Results</em> -välilehti (oletuksena näytön alareunassa, ilmestyy ajettaessa ComTest) näyttää vihreää ja lukee <em>Passed</em>, testit menivät oikein. Punaisen ympyrän tapauksessa testit menivät joko väärin, tai sitten testitiedostossa on virheitä.</p>
    </div>
    
    <div id="par-749" class="paragraph">
        <p>Myös testit täytyy testata. Voihan olla, että kirjoittamissamme testeissä on myös virheitä. Tämä onkin syytä testata kirjoittamalla testeihin virhe tarkoituksella. Tällöin Test Results -välilehdellä pitäisi tietenkin näkyä punainen ympyrä. Jos näin ei ole, on joku testeistä väärin, tai aliohjelmassa on virhe. Hyvien testien kirjoittaminen on myös oma taitonsa. Kaikkia mahdollisia tilanteitahan ei millään voi testata, joten joudumme valitsemaan, mille parametreille testit tehdään. Täytyisi ainakin testata todennäköiset virhepaikat. Näitä ovat yleensä ainakin kaikenlaiset "ääritilanteet".</p>
    </div>
    
    <div id="par-750" class="paragraph">
        <p>Esimerkkinä olevassa Yhdista-aliohjelmassa ääritilanteita ovat lähinnä nollat, kummallakin puolella erikseen ja yhdessä. Muutoin testiarvot on valittu melko sattumanvaraisesti.</p>
    </div>
    
    <div id="par-751" class="paragraph">
        <h2 id="liukulukujen-testaaminen">11.2 Liukulukujen testaaminen</h2>
    </div>
    
    <div id="par-752" class="paragraph">
        <p>Liukulukuja (double ja float) testataan ComTest:n vertailuoperaattorilla, jossa on kolme aaltoviivaa (<code>~~~</code>). Tämä johtuu siitä, että kaikkia reaalilukuja ei pystytä esittämään tietokoneella tarkasti, joten täytyy sallia pieni virhemarginaali. Tehdään Keskiarvo-aliohjelma, joka osaa laskea kahden double-tyyppisen luvun keskiarvon ja kirjoitetaan sille samalla dokumentaatiokommentit ja ComTest-testit.</p>
    </div>
    
    <div id="par-753" class="paragraph">
        <div id='1.keskiarvontestaaminen' data-plugin='/csPlugin'><cs-comtest-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f46756e6b74696f506f686a612e6373222c20227265706c616365223a2022494e5345525420594f55522046554e4354494f4e532048455245222c202274797065223a2022636f6e736f6c652f636f6d74657374222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022494e5345525420594f55522043414c4c532048455245222c20227265706c61636532223a202246756e6374696f6e73222c2022696e64656e74223a202230222c20227461736b4944223a2022312e6b65736b696172766f6e7465737461616d696e656e222c20226279436f646532223a20227075626c696320636c617373204c61736b756a61222c20226279436f646531223a20222f2f5c6e2020202020202020646f75626c65206b61203d204c61736b756a612e4b65736b696172766f28342c35293b5c6e2020202020202020436f6e736f6c652e57726974654c696e65286b61293b202f2f74756c6f7374616120342e35222c20226279436f6465223a20225c6e202020202f2f2f203c73756d6d6172793e5c6e202020202f2f2f20416c696f686a656c6d61206c61736b656520706172616d657472696e61616e207361616d69656e7361206b616864656e205c6e202020202f2f2f20646f75626c652d74797970706973656e206c7576756e206b65736b696172766f6e2e5c6e202020202f2f2f203c2f73756d6d6172793e5c6e202020202f2f2f203c706172616d206e616d653d5c22615c223e456e73696d6d5c7530306534696e656e206c756b753c2f706172616d3e5c6e202020202f2f2f203c706172616d206e616d653d5c22625c223e546f696e656e206c756b753c2f706172616d3e5c6e202020202f2f2f203c72657475726e733e4c756b756a656e206b65736b696172766f3c2f72657475726e733e5c6e202020202f2f2f203c6578616d706c653e5c6e202020202f2f2f203c707265206e616d653d5c22746573745c223e5c6e202020202f2f2f204c61736b756a612e4b65736b696172766f28302e302c20302e30292020207e7e7e2020302e303b5c6e202020202f2f2f204c61736b756a612e4b65736b696172766f28312e322c20302e30292020207e7e7e2020302e363b5c6e202020202f2f2f204c61736b756a612e4b65736b696172766f28302e382c20302e32292020207e7e7e2020302e353b5c6e202020202f2f2f204c61736b756a612e4b65736b696172766f282d302e312c20302e312920207e7e7e2020302e303b5c6e202020202f2f2f204c61736b756a612e4b65736b696172766f282d312e352c202d322e3529207e7e7e202d322e303b5c6e202020202f2f2f203c2f7072653e5c6e202020202f2f2f203c2f6578616d706c653e5c6e202020207075626c69632073746174696320646f75626c65204b65736b696172766f28646f75626c6520612c20646f75626c652062295c6e202020207b5c6e202020202020202072657475726e202861202b206229202f20322e303b5c6e202020207d227d</cs-comtest-runner></div>
    </div>
    
    <div id="par-754" class="paragraph">
        <div class="huomautus">
<p>Liukulukuja testattaessa täytyy parametrit antaa desimaaliosan kanssa. Esimerkiksi jos yllä olevassa esimerkissä ensimmäinen testi olisi muotoa <code>Keskiarvo(0, 0) ~~~ 0.0</code>, niin tällöin ajettaisiin aliohjelma <code>Keskiarvo(int x, int y)</code>, <em>jos</em> sellainen olisi olemassa.</p>
</div>
    </div>
    
    <div id="par-755" class="paragraph">
        <h1 id="merkkijonot">12. Merkkijonot</h1>
    </div>
    
    <div id="par-756" class="paragraph">
        <p>Tässä luvussa tutustumme tarkemmin merkkijonoihin. Merkkijonot voidaan jakaa <em>muuttumattomiin</em> ja <em>muokattaviin</em>. C#:n muuttumaton merkkijono on tyypiltään String, johon olemmekin jo hieman tutustuneet olioiden yhteydessä. Muuttumatonta merkkijonoa ei voi muuttaa luomisen jälkeen. Muokattavan merkkijonon, StringBuilder-olion, käsittely on joissakin tilanteessa mielekkäämpää. Vaikka String-olioita ei voikaan muuttaa, pärjäämme sillä monissa tilanteissa.</p>
    </div>
    
    <div id="par-757" class="paragraph">
        <div class="huomautus">
<p>Huomaa, että string (pienellä alkukirjaimella kirjoitettuna) on System.String-luokan alias, joten string ja String voidaan samaistaa muuttujien tyyppimäärittelyssä, vaikka tarkasti ottaen toinen on alias ja toinen luokan nimi. Yksinkertaisuuden vuoksi jatkossa puhutaan pääsääntöisesti vain String-tyypistä sillä oletuksella, että System-nimiavaruus on otettu käyttöön lauseella <code>using System;</code> Tapana on, että muutujan tyypiksi esitellään <code>string</code>.</p>
</div>
    </div>
    
    <div id="par-758" class="paragraph">
        <h2 id="alustaminen">12.1 Alustaminen</h2>
    </div>
    
    <div id="par-759" class="paragraph">
        <p>Merkkijono on <em>kokoelma peräkkäisiä merkkejä</em>. Tarkalleen ottaen merkkijono toteutetaan C#:ssa sisäisesti taulukkona, joka sisältää merkkejä (char). Taulukoista on tässä monisteessa oma lukunsa myöhemmin.</p>
    </div>
    
    <div id="par-760" class="paragraph">
        <p>Olioiden yhteydessä tutustuimme jo hieman String-tyyppiin. Sen voi siis alustaa kahdella tavalla:</p>
    </div>
    
    <div id="par-761" class="paragraph">
        <div id='1.merkkijononalustus' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c20227265706c616365223a2022414c4b554f5341222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e6d65726b6b696a6f6e6f6e616c7573747573222c20226279436f646531223a20222f2f5c6e2020202020202020436f6e736f6c652e57726974654c696e65285c2268656e6b696c6f31203d205c22202b2068656e6b696c6f31293b205c6e2020202020202020436f6e736f6c652e57726974654c696e65285c2268656e6b696c6f32203d205c22202b2068656e6b696c6f32293b20222c20226279436f6465223a20222020202020202020737472696e672068656e6b696c6f31203d206e657720737472696e67286e657720636861725b5d207b2741272c20276b272c202775277d293b5c6e2020202020202020737472696e672068656e6b696c6f32203d205c224b616c6c65204b6f72686f6e656e5c223b227d</cs-runner></div>
    </div>
    
    <div id="par-762" class="paragraph">
        <p>Jälkimmäinen tapa muistuttaa enemmän alkeistietotyyppien alustamista, mutta silti pitää muistaa, että merkkijonot ovat C#:ssa siis aina <em>olioita</em>.</p>
    </div>
    
    <div id="par-763" class="paragraph">
        <h2 id="hyödyllisiä-metodeja-ja-ominaisuuksia">12.2 Hyödyllisiä metodeja ja ominaisuuksia</h2>
    </div>
    
    <div id="par-764" class="paragraph">
        <p>String-luokassa on paljon hyödyllisiä metodeja, joista käsitellään nyt muutama. Kaikki metodit näet C#:n <a href="http://msdn.microsoft.com/en-us/library/system.string.aspx">MSDN-dokumentaatiosta</a>.</p>
    </div>
    
    <div id="par-765" class="paragraph">
        <ul>
<li><a href="http://msdn.microsoft.com/en-us/library/858x0yyx.aspx">Equals(String)</a> Palauttaa tosi jos kaksi merkkijonoa ovat sisällöltään samat merkkikoko huomioon ottaen. Muutoin palauttaa epätosi.</li>
</ul>
    </div>
    
    <div id="par-766" class="paragraph">
        <div id='1.stringequals' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a2022414c4b554f5341222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e737472696e67657175616c73222c20226279436f6465223a20222020202020202020737472696e67206574756e696d69203d205c22416b755c223b5c6e2020202020202020696620286574756e696d692e457175616c73285c22416b755c22292920436f6e736f6c652e57726974654c696e65285c224c5c753030663679747969215c22293b5c6e2020202020202020656c73652020436f6e736f6c652e57726974654c696e65285c224569206c5c75303066367974796e7974215c22293b227d</cs-runner></div>
    </div>
    
    <div id="par-767" class="paragraph">
        <ul>
<li><a href="http://msdn.microsoft.com/en-us/library/84787k22(v=vs.110).aspx">Compare(String, String, Boolean)</a> Vertaa merkkijonon aakkosjärjestystä toiseen merkkijonoon. Palauttaa arvon 0 jos merkkijonot ovat samat, nollaa pienemmän arvon jos ensimmäinen merkkijono on aakkosjärjestykseltään ennen kuin toinen ja nollaa suuremman arvon jos jälkimmäinen merkkijono on aakkosissa ennen ensimmäistä. Kirjainkoko saadaan merkitseväksi asettamalla kolmanneksi parametriksi false, tai jos halutaan unohtaa kirjainkoko, laitetaan kolmanneksi true.</li>
</ul>
    </div>
    
    <div id="par-768" class="paragraph">
        <div id='1.stringcompare' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a2022414c4b554f5341222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e737472696e67636f6d70617265222c20226279436f6465223a20222020202020202020737472696e67207331203d205c226a416e4e655c223b20737472696e67207332203d205c224a414e4e455c223b5c6e202020202020202069662028537472696e672e436f6d706172652873312c2073322c207472756529203d3d203029205c6e202020202020202020202020436f6e736f6c652e57726974654c696e65285c2253616d617420746169206d656c6b65696e2073616d6174215c22293b5c6e2020202020202020656c736520205c6e202020202020202020202020436f6e736f6c652e57726974654c696e65285c224572696c6169736574215c22293b227d</cs-runner></div>
    </div>
    
    <div id="par-769" class="paragraph">
        <ul>
<li><a href="http://msdn.microsoft.com/en-us/library/dy85x1sa.aspx">Contains(String)</a> Palauttaa totuusarvon sen perusteella esiintyykö parametrin sisältämän merkkijono tutkittavana olevassa merkkijonossa.</li>
</ul>
    </div>
    
    <div id="par-770" class="paragraph">
        <div id='1.stringcontains' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a2022414c4b554f5341222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e737472696e67636f6e7461696e73222c20226279436f6465223a20222020202020202020737472696e672068656e6b696c6f203d205c2256696c6c652056697274616e656e5c223b5c6e2020202020202020737472696e67206861657474617661203d205c22697274615c223b5c6e20202020202020206966202868656e6b696c6f2e436f6e7461696e732868616574746176612929205c6e202020202020202020202020436f6e736f6c652e57726974654c696e65286861657474617661202b205c22206c5c753030663679747969215c22293b5c6e2020202020202020656c736520205c6e202020202020202020202020436f6e736f6c652e57726974654c696e65285c224569206c5c7530306636796479215c22293b227d</cs-runner></div>
    </div>
    
    <div id="par-771" class="paragraph">
        <ul>
<li><a href="http://msdn.microsoft.com/en-us/library/system.string.indexof(v=vs.110).aspx">IndexOf(char)</a> Palauttaa missä kohti jonoa on haluttu merkki. Jos merkkiä ei löydy, palautetaan -1. Metodista on myös useita muita versioita, ks. dokumentaatio.</li>
</ul>
    </div>
    
    <div id="par-772" class="paragraph">
        <div id='1.stringidexof' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a2022414c4b554f5341222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e737472696e67696465786f66222c20226279436f6465223a20222020202020202020737472696e672068656e6b696c6f203d205c2256696c6c652056697274616e656e5c223b5c6e2020202020202020696e7420657061696b6b61203d2068656e6b696c6f2e496e6465784f6628276527293b5c6e2020202020202020436f6e736f6c652e57726974654c696e6528657061696b6b61293b202f2f20345c6e2020202020202020696e742065696f6f203d2068656e6b696c6f2e496e6465784f6628277827293b5c6e2020202020202020436f6e736f6c652e57726974654c696e652865696f6f293b202f2f202d31227d</cs-runner></div>
    </div>
    
    <div id="par-773" class="paragraph">
        <ul>
<li><a href="http://msdn.microsoft.com/en-us/library/hxthx5h6.aspx">Substring(Int32)</a> Palauttaa osan merkkijonosta alkaen parametrinaan saamastaan indeksistä.</li>
</ul>
    </div>
    
    <div id="par-774" class="paragraph">
        <div id='1.stringsubstring' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a2022414c4b554f5341222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e737472696e67737562737472696e67222c20226279436f6465223a20222020202020202020737472696e672068656e6b696c6f203d205c2256696c6c652056697274616e656e5c223b5c6e2020202020202020737472696e672073756b756e696d69203d2068656e6b696c6f2e537562737472696e672836293b5c6e2020202020202020436f6e736f6c652e57726974654c696e652873756b756e696d69293b202f2f2056697274616e656e227d</cs-runner></div>
    </div>
    
    <div id="par-775" class="paragraph">
        <ul>
<li><a href="http://msdn.microsoft.com/en-us/library/aka44szs.aspx">Substring(Int32, Int32)</a> Palauttaa osan merkkijonosta parametrinaan saamiensa indeksien välistä. Ensimmäinen parametri on palautettavan merkkijonon ensimmäisen merkin indeksi ja toinen parametri palautettavien merkkien määrä. Huomaa että Javassa toinen parametri on indeksi, jota ei enää oteta mukaan. Jos aloitetaan paikasta 0, nämä ovat sama asia, muuten ei.</li>
</ul>
    </div>
    
    <div id="par-776" class="paragraph">
        <div id='1.stringsubstring0' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a2022414c4b554f5341222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e737472696e67737562737472696e6730222c20226279436f6465223a20222020202020202020737472696e672068656e6b696c6f203d205c2256696c6c652056697274616e656e5c223b5c6e2020202020202020737472696e67206574756e696d69203d2068656e6b696c6f2e537562737472696e6728302c35293b5c6e2020202020202020436f6e736f6c652e57726974654c696e65286574756e696d69293b202f2f2056696c6c65227d</cs-runner></div>
    </div>
    
    <div id="par-777" class="paragraph">
        <ul>
<li><a href="http://msdn.microsoft.com/en-us/library/system.string.tolower.aspx">ToLower()</a> Palauttaa merkkijonon niin, että kaikki kirjaimet on muutettu pieniksi kirjaimiksi. Huomaa että tässä, kuten ei muissakaan vastaavissa funktioissa, itse jono muutu lainkaan.</li>
</ul>
    </div>
    
    <div id="par-778" class="paragraph">
        <div id='1.stringtolower' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a2022414c4b554f5341222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e737472696e67746f6c6f776572222c20226279436f6465223a20222020202020202020737472696e672068656e6b696c6f203d205c2256696c6c652056697274616e656e5c223b5c6e2020202020202020436f6e736f6c652e57726974654c696e652868656e6b696c6f2e546f4c6f7765722829293b202f2f205c2276696c6c652076697274616e656e5c225c6e2020202020202020436f6e736f6c652e57726974654c696e652868656e6b696c6f29293b202020202020202020202f2f205c2256696c6c652056697274616e656e5c22227d</cs-runner></div>
    </div>
    
    <div id="par-779" class="paragraph">
        <ul>
<li><a href="http://msdn.microsoft.com/en-us/library/system.string.toupper.aspx">ToUpper()</a> Palauttaa merkkijonon niin, että kaikki kirjaimet on muutettu isoiksi kirjaimiksi.</li>
</ul>
    </div>
    
    <div id="par-780" class="paragraph">
        <div id='1.stringtoupper' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a2022414c4b554f5341222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e737472696e67746f7570706572222c20226279436f6465223a20222020202020202020737472696e672068656e6b696c6f203d205c2256696c6c652056697274616e656e5c223b5c6e2020202020202020436f6e736f6c652e57726974654c696e652868656e6b696c6f2e546f55707065722829293b202f2f205c2256494c4c452056495254414e454e5c22227d</cs-runner></div>
    </div>
    
    <div id="par-781" class="paragraph">
        <ul>
<li><a href="http://msdn.microsoft.com/en-us/library/czx8s9ts.aspx">Replace(Char, Char)</a> Korvaa merkkijonon kaikki tietyt merkit toisilla merkeillä. Ensimmäisenä parametrina korvattava merkki ja toisena korvaaja. Huomaa, että parametrit laitetaan char-muuttujille tyypilliseen tapaan yksinkertaisten lainausmerkkien sisään.</li>
</ul>
    </div>
    
    <div id="par-782" class="paragraph">
        <pre class="esimerkkisisennetty-western" lang="zxx"><code>String sana = "katti";
sana = sana.Replace('t', 's');
Console.WriteLine(sana);  //tulostaa "kassi"</code></pre>
    </div>
    
    <div id="par-783" class="paragraph">
        <ul>
<li><a href="http://msdn.microsoft.com/en-us/library/fk49wtc1.aspx">Replace(String, String)</a> Korvaa merkkijonon kaikki merkkijonoesiintymät toisella merkkijonolla. Ensimmäisenä parametrina korvattava merkkijono ja toisena korvaaja. Huomattavaa on, että itse jono ei muutu, vaan palautetaan viite uuteen jonoon, johon muutos on tehty. Alla olevassa esimerkissä viitteeseen <code>sana</code> sijoitetaan tämän uuden jonon viite. Alkuperäinen jono (johon kukaan ei enää viittaa), on muuttumaton.</li>
</ul>
    </div>
    
    <div id="par-784" class="paragraph">
        <div id='1.stringreplace' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a2022414c4b554f5341222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e737472696e677265706c616365222c20226279436f6465223a20222020202020202020737472696e672073616e61203d205c226b61747469206b617474696e656e5c223b5c6e202020202020202073616e61203d2073616e612e5265706c616365285c22617474695c222c205c22697373615c22293b5c6e2020202020202020436f6e736f6c652e57726974654c696e652873616e61293b20202f2f205c226b69737361206b697373616e656e5c22227d</cs-runner></div>
    </div>
    
    <div id="par-785" class="paragraph">
        <div id='1.stringreplace2' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a2022414c4b554f5341222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e737472696e677265706c61636532222c20226279436f6465223a20222020202020202020737472696e672073616e61203d205c226b61747469206b617474696e656e5c223b5c6e2020202020202020737472696e67206d7575746574747573616e61203d2073616e612e5265706c616365285c22617474695c222c205c22697373615c22293b5c6e2020202020202020436f6e736f6c652e57726974654c696e652873616e61293b20202f2f205c226b61747469206b617474696e656e5c225c6e2020202020202020436f6e736f6c652e57726974654c696e65286d7575746574747573616e61293b20202f2f205c226b69737361206b697373616e656e5c22227d</cs-runner></div>
    </div>
    
    <div id="par-786" class="paragraph">
        <p>Lisäksi</p>
    </div>
    
    <div id="par-787" class="paragraph">
        <ul>
<li><a href="http://msdn.microsoft.com/en-us/library/system.string.length.aspx">Length</a> Palauttaa merkkijonon pituuden kokonaislukuna. Huomaa, että tämä EI ole aliohjelma / metodi, vaan merkkijono-olion <em>ominaisuus</em>.</li>
</ul>
    </div>
    
    <div id="par-788" class="paragraph">
        <div id='1.stringlength' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a2022414c4b554f5341222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e737472696e676c656e677468222c20226279436f6465223a20222020202020202020737472696e672068656e6b696c6f203d205c2256696c6c655c223b5c6e2020202020202020436f6e736f6c652e57726974654c696e652868656e6b696c6f2e4c656e677468293b202f2f74756c6f737461612035227d</cs-runner></div>
    </div>
    
    <div id="par-789" class="paragraph">
        <p>Koska merkkijono on kokoelma yksittäisiä char-merkkejä, saadaan merkkijonon kukin merkki char-tyyppisenä laittamalla halutun merkin paikkaindeksi merkkijono-olion perään hakasulkeiden sisään, esimerkiksi:</p>
    </div>
    
    <div id="par-790" class="paragraph">
        <div id='1.stringcharati' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a2022414c4b554f5341222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e737472696e6763686172617469222c20226279436f6465223a20222020202020202020737472696e672068656e6b696c6f203d205c22536570706f205369726b757474616a615c223b5c6e202020202020202063686172206b6f6c6d61734b69726a61696e3b5c6e2020202020202020696e742069203d20323b5c6e20202020202020206b6f6c6d61734b69726a61696e203d2068656e6b696c6f5b695d3b20202f2f20696e64656b736974206d656e65765c75303065347420302c312c322c33206a6e652e2e2e5c6e2020202020202020436f6e736f6c652e57726974654c696e652868656e6b696c6f202b205c22202d6e696d656e207061696b61737361205c22202b2069202b205c6e20202020202020202020202020202020202020202020202020205c22206f6c657661206d65726b6b69206f6e205c22202b206b6f6c6d61734b69726a61696e293b227d</cs-runner></div>
    </div>
    
    <div id="par-791" class="paragraph">
        <div class="huomautus">
<p>Merkkijonojen indeksointi alkaa nollasta! Merkkijonon ensimmäinen merkki on siis indeksissä 0.</p>
</div>
    </div>
    
    <div id="par-792" class="paragraph">
        <h2 id="muokattavat-merkkijonot-stringbuilder">12.3 Muokattavat merkkijonot: StringBuilder</h2>
    </div>
    
    <div id="par-793" class="paragraph">
        <p>Niin sanottujen muuttumattomien (<em>immutable</em>) merkkijonojen, eli <code>string</code>-tyypin, lisäksi C#:ssa on muuttuvia merkkijonoja. Muuttuvien merkkijonojen idea on, että voimme lisätä ja poistaa siitä merkkejä luomisen jälkeen. <code>String</code>-tyyppisen merkkijonon muuttaminen ei onnistu sen luomisen jälkeen. Käytännössä, jos haluamme muuttaa <code>string</code>-merkkijonoa, tehdään uusi olio. Jos merkkijonoon tehdään paljon muutoksia (esimerkiksi jonoon lisätään useaan kertaan merkkejä), käy käsittely lopulta hitaaksi - ja tämä hitaus alkaa näkyä melko nopeasti.</p>
    </div>
    
    <div id="par-794" class="paragraph">
        <p>C#-kielessä (kuten Javassakin) muokattava merkkijonoluokka on <code>StringBuilder</code>, joka sijaitsee <code>System.Text</code>-nimiavaruudessa. Voit ottaa tuon nimiavaruuden käyttöön kirjoittamalla ohjelman alkuun</p>
    </div>
    
    <div id="par-795" class="paragraph">
        <pre><code>using System.Text;</code></pre>
    </div>
    
    <div id="par-796" class="paragraph">
        <p>Merkkijonon perään lisääminen onnistuu <code>Append</code>-metodilla. Append-metodilla voi lisätä merkkijonon perään muun muassa kaikkia C#:n alkeistietotyyppejä sekä <code>String</code>-olioita. Myös kaikkien C#:n valmiina löytyvien olioiden lisääminen onnistuu <code>Append</code>-metodilla, sillä ne sisältävät <code>ToString</code>-metodin, jolla oliot voidaan muuttaa merkkijonoksi. Alla oleva koodinpätkä esittelee <code>Append</code>-metodia.</p>
    </div>
    
    <div id="par-797" class="paragraph">
        <div id='1.sbappend' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c20227265706c616365223a2022414c4b554f5341222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e7362617070656e64222c20226279436f646531223a20222f2f5c6e2020202020202020436f6e736f6c652e57726974654c696e65286e696d69293b222c20226279436f6465223a20222020202020202020537472696e674275696c646572206e696d69203d206e657720537472696e674275696c64657228293b202f2f205c225c2220287479686a5c7530306534295c6e20202020202020206e696d692e417070656e64285c224b75737461615c22293b202f2f205c224b75737461615c225c6e20202020202020206e696d692e417070656e64285c22205c22293b2020202020202f2f205c224b7573746161205c225c6e20202020202020206e696d692e417070656e64285c224161646f6c665c22293b202f2f205c224b7573746161204161646f6c665c22227d</cs-runner></div>
    </div>
    
    <div id="par-798" class="paragraph">
        <p>Tiettyyn paikkaan voidaan lisätä merkkejä ja merkkijonoja <code>Insert</code>-metodilla, joka saa parametrikseen indeksin, eli kohdan, johon merkki (tai merkit) lisätään, sekä lisättävän merkin (tai merkit). Indeksointi alkaa jälleen nollasta. Insert-metodilla voi lisätä myös kaikkia samoja tietotyyppejä kuin Append-metodillakin. Voisimme esimerkiksi lisätä edelliseen esimerkkiin järjestysnumeron <code>VI</code>. Sitä ennen tarkastellaan merkkien järjestystä ja indeksointia ja kirjoitetaan kunkin tulostuvan merkin yläpuolelle sen paikkaindeksi.</p>
    </div>
    
    <div id="par-799" class="paragraph">
        <pre><code>012345678901234567890
|----+----|----+----|
Kustaa Aadolf</code></pre>
    </div>
    
    <div id="par-800" class="paragraph">
        <p>Tästä huomaamme, että indeksi, johon haluamme <code>VI</code>:n lisätä, on <code>7</code>.</p>
    </div>
    
    <div id="par-801" class="paragraph">
        <div id='1.sbinsert' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c20227265706c616365223a2022414c4b554f5341222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e7362696e73657274222c20226279436f646531223a20222f2f5c6e2020202020202020436f6e736f6c652e57726974654c696e65286e696d69293b222c20226279436f6465223a20222020202020202020537472696e674275696c646572206e696d69203d206e657720537472696e674275696c646572285c224b7573746161204161646f6c665c22293b5c6e20202020202020206e696d692e496e7365727428372c5c225649205c22293b202f2f205c224b7573746161205649204161646f6c665c22227d</cs-runner></div>
    </div>
    
    <div id="par-802" class="paragraph">
        <p>Huomaa, että <code>Insert</code>-metodi ei korvaa indeksissä 7 olevaa merkkiä, vaan lisää merkkijonoon kokonaan uuden merkin, jolloin merkkijonon pituus kasvaa siis yhdellä. Korvaamiseen on olemassa oma metodi, <code>Replace</code>. Tai yksittäisen kirjaimen voi vaihtaa suoraam myös <code>nimi[7] = 'I'</code>;</p>
    </div>
    
    <div id="par-803" class="paragraph">
        <div id='1.sbindex7' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c20227265706c616365223a2022414c4b554f5341222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e7362696e64657837222c20226279436f646531223a20222f2f5c6e2020202020202020436f6e736f6c652e57726974654c696e65286e696d69293b222c20226279436f6465223a20222020202020202020537472696e674275696c646572206e696d69203d206e657720537472696e674275696c646572285c224b7573746161205649204161646f6c665c22293b5c6e20202020202020206e696d695b375d203d202749273b20202f2f204b7573746161204949204161646f6c66227d</cs-runner></div>
    </div>
    
    <div id="par-804" class="paragraph">
        <h3 id="muita-stringbuilder-luokan-hyödyllisiä-metodeja">12.3.1 Muita StringBuilder-luokan hyödyllisiä metodeja</h3>
    </div>
    
    <div id="par-805" class="paragraph">
        <ul>
<li><a href="http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.remove.aspx">Remove(Int32, Int32)</a>. Poistaa merkkijonosta merkkejä siten, että ensimmäinen parametri on aloitusindeksi, ja toinen parametri on poistettavien merkkien määrä.</li>
</ul>
    </div>
    
    <div id="par-806" class="paragraph">
        <div id='1.sbremove' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c20227265706c616365223a2022414c4b554f5341222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e736272656d6f7665222c20226279436f646531223a20222f2f5c6e2020202020202020436f6e736f6c652e57726974654c696e65286e696d69293b222c20226279436f6465223a20222020202020202020537472696e674275696c646572206e696d69203d206e657720537472696e674275696c646572285c224b7573746161205649204161646f6c665c22293b5c6e20202020202020206e696d692e52656d6f766528372c33293b20202f2f204b7573746161204161646f6c66227d</cs-runner></div>
    </div>
    
    <div id="par-807" class="paragraph">
        <ul>
<li><a href="http://msdn.microsoft.com/en-us/library/4b1063zt.aspx">ToString()</a> ja <a href="http://msdn.microsoft.com/en-us/library/fyx7s61s.aspx">ToString(Int32, Int32)</a>. Palauttaa StringBuilder-olion sisällön "tavallisena" String-merkkijonona. <code>ToString</code>-metodille voi antaa myös kaksi int-lukua parametreina, jolloin palautetaan osa merkkijonosta (ks. <a href="http://msdn.microsoft.com/en-us/library/aka44szs.aspx">Substring</a>).</li>
</ul>
    </div>
    
    <div id="par-808" class="paragraph">
        <p>Muut metodit löytyvät StringBuilder-luokan MSDN-dokumentaatiosta:</p>
    </div>
    
    <div id="par-809" class="paragraph">
        <blockquote>
<p><a href="http://msdn.microsoft.com/en-us/library/k5314fdf.aspx" class="uri">http://msdn.microsoft.com/en-us/library/k5314fdf.aspx</a>.</p>
</blockquote>
    </div>
    
    <div id="par-810" class="paragraph">
        <p>Huomaa, että <code>StringBuilder</code>-luokan olioita ei voi verrata yhtäsuuruusoperaattorilla <code>==</code>, vaan veratailu pitää tehdä <code>equals</code>-metodilla. Samoin erittäin tarkkana pitää olla verrattaessa <code>StringBuider</code> ja <code>String</code> -luokan olioita:</p>
    </div>
    
    <div id="par-811" class="paragraph">
        <div id='1.stringbuilderequals' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a2022414c4b554f5341222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e737472696e676275696c646572657175616c73222c20226279436f6465223a20222020202020202020537472696e674275696c64657220736231203d206e657720537472696e674275696c646572285c22416b755c22293b5c6e2020202020202020537472696e674275696c64657220736232203d206e657720537472696e674275696c646572285c22416b755c22293b5c6e2020202020202020737472696e67207331203d205c22416b755c223b5c6e20202020202020205c6e20202020202020206966202820736231203d3d20736232202920436f6e736f6c652e57726974654c696e65285c22545c75303065346d5c75303065342065692074756c6f7374755c22293b5c6e202020202020202069662028207362312e457175616c732873623229202920436f6e736f6c652e57726974654c696e65285c227362312e457175616c7328736232295c22293b5c6e20202020202020202f2f2069662028207331203d3d20736232202920436f6e736f6c652e57726974654c696e65285c22545c753030653473745c7530306534206b5c75303065345c75303065346e6e5c75303066367376697268655c22293b5c6e2020202020202020696620282073312e457175616c732873623229202920436f6e736f6c652e57726974654c696e65285c22545c75303065346d5c75303065342065692074756c6f7374755c22293b5c6e202020202020202069662028207331203d3d207362322e546f537472696e672829202920436f6e736f6c652e57726974654c696e65285c2273313d3d7362322e546f537472696e6728295c22293b227d</cs-runner></div>
    </div>
    
    <div id="par-812" class="paragraph">
        <h2 id="huomautus-aritmeettinen-vs.-merkkijonoja-yhdistelevä">12.4 Huomautus: aritmeettinen + vs. merkkijonoja yhdistelevä +</h2>
    </div>
    
    <div id="par-813" class="paragraph">
        <p>Merkkijonoihin voidaan "+"-merkkiä käyttämällä yhdistellä myös myös numeeristen muuttujien arvoja. Tällöin ero siinä, että toimiiko "+"-merkki aritmeettisena operaattorina vai merkkijonoja yhdistelevänä operaattorina on todella pieni. Tutki ja kokeile alla olevalla esimerkkillä.</p>
    </div>
    
    <div id="par-814" class="paragraph">
        <div id='1.plusmerkki' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a2022414c4b554f5341222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e706c75736d65726b6b69222c20226279436f6465223a20222020202020202020696e74206c756b7531203d20323b5c6e2020202020202020696e74206c756b7532203d20353b5c6e20202020202020205c6e20202020202020202f2f745c753030653473735c7530306534205c222b5c222d6d65726b6b6920746f696d696920617269746d656574746973656e61206f706572616174746f72696e615c6e2020202020202020436f6e736f6c652e57726974654c696e65286c756b7531202b206c756b7532293b202f2f74756c6f7374616120375c6e20202020202020205c6e20202020202020202f2f745c753030653473735c7530306534205c222b5c222d6d65726b6b6920746f696d6969206d65726b6b696a6f6e6f6a6120796864697374656c65765c75303065346e5c7530306534205c6e2020202020202020436f6e736f6c652e57726974654c696e65286c756b7531202b205c225c22202b206c756b7532293b20202f2f74756c6f737461612032355c6e20202020202020205c6e20202020202020202f2f545c753030653473735c753030653420656e73696d6d5c7530306534696e656e205c222b5c222d6d65726b6b6920746f696d696920617269746d656574746973656e61205c6e20202020202020202f2f6a6120746f696e656e206d65726b6b696a6f6e6f6a6120796864697374656c65765c75303065346e5c7530306534206f706572616174746f72696e615c6e2020202020202020436f6e736f6c652e57726974654c696e65286c756b7531202b206c756b7532202b205c225c22202b206c756b7531293b202f2f74756c6f73746161203732227d</cs-runner></div>
    </div>
    
    <div id="par-815" class="paragraph">
        <p>Merkkijonojen yhdistäminen luo aina uuden olion ja siksi sitä on käytettävä harkiten, silmukoissa jopa kokonaan StringBuilderillä ja <code>Append</code>-metodilla korvaten.</p>
    </div>
    
    <div id="par-816" class="paragraph">
        <h2 id="vinkki-näppärä-tyyppimuunnos-string-tyypiksi">12.5 Vinkki: näppärä tyyppimuunnos string-tyypiksi</h2>
    </div>
    
    <div id="par-817" class="paragraph">
        <p>Itse asiassa lisäämällä muuttujaan "+"-merkillä merkkijono, tekee C# automaattisesti tyyppimuunnoksen ja muuttaa muuttujasta ja siihen lisätystä merkkijonosta <code>string</code>-tyyppisen. Tämän takia voidaan alkeistietotyyppiset muuttujat muuttaa näppärästi String-tyyppisiksi lisäämällä muuttujan eteen tyhjä merkkijono.</p>
    </div>
    
    <div id="par-818" class="paragraph">
        <div id='1.plusmuunnos' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c20227265706c616365223a2022414c4b554f5341222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e706c75736d75756e6e6f73222c20226279436f646531223a20222f2f5c6e2020202020202020436f6e736f6c652e57726974654c696e65286d65726b6b696a6f6e6f31293b5c6e2020202020202020436f6e736f6c652e57726974654c696e65286d65726b6b696a6f6e6f32293b222c20226279436f6465223a20222020202020202020696e74206c756b75203d2032333b5c6e2020202020202020626f6f6c20746f747575736172766f203d2066616c73653b5c6e20202020205c6e2020202020202020537472696e67206d65726b6b696a6f6e6f31203d205c225c22202b206c756b753b5c6e2020202020202020537472696e67206d65726b6b696a6f6e6f32203d205c225c22202b20746f747575736172766f3b227d</cs-runner></div>
    </div>
    
    <div id="par-819" class="paragraph">
        <p>Ilman tuota tyhjän merkkijonon lisäämistä tämä ei onnistuisi, sillä String-tyyppiseen muuttujaan ei tietenkään voi tallentaa <code>int</code>- tai <code>bool</code>-tyyppistä muuttujaa.</p>
    </div>
    
    <div id="par-820" class="paragraph">
        <p>Tämä ei kuitenkaan mahdollista reaaliluvun muuttamista String-tyypiksi tietyllä tarkkuudella. Tähän on apuna <code>String</code>-luokan <code>Format</code>-metodi.</p>
    </div>
    
    <div id="par-821" class="paragraph">
        <h2 id="reaalilukujen-muotoilu-string.format-metodilla">12.6 Reaalilukujen muotoilu String.Format-metodilla</h2>
    </div>
    
    <div id="par-822" class="paragraph">
        <p><code>String</code>-luokan <code>Format</code>-metodi tarjoaa monipuoliset muotoilumahdollisuudet useille tietotyypeille, mutta katsotaan tässä kuinka sillä voi muotoilla reaalilukuja. <code>Math</code>-luokasta saa luvun pii 20 desimaalin tarkkuudella kirjoittamalla <code>Math.PI</code>. Huomaa, että <code>PI</code> ei ole metodi, joten perään ei tule sulkuja. <code>PI</code> on <code>Math</code>-luokan julkinen staattinen vakio (<code>public const double</code>). Jos haluaisimme muuttaa piin <code>String</code>-tyypiksi vain kahden desimaalin tarkkuudella, onnistuisi se seuraavasti:</p>
    </div>
    
    <div id="par-823" class="paragraph">
        <div id='1.stringformatpii' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c20227265706c616365223a2022414c4b554f5341222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e737472696e67666f726d6174706969222c202275736572636f6465223a20222020202020202020737472696e6720706969203d20537472696e672e466f726d6174285c227b303a232e23237d5c222c204d6174682e5049293b202f2f20706969203d205c22332e31345c22222c20226279436f646531223a20222f2f5c6e2020202020202020436f6e736f6c652e57726974654c696e6528706969293b222c20226279436f6465223a20222020202020202020737472696e6720706969203d20537472696e672e466f726d6174285c227b303a232e23237d5c222c204d6174682e5049293b202f2f20706969203d205c22332e31345c22227d</cs-runner></div>
    </div>
    
    <div id="par-824" class="paragraph">
        <p>Tässä <code>Format</code>-metodi saa kaksi parametria. Ensimmäistä parametria sanotaan muotoilumerkkijonoksi (<em>format string</em>). Toisena parametrina on sitten muotoiltava arvo. Muotoilumahdollisuuksia on hyvin paljon. Alla muutamia esimerkkejä erilaisten lukujen muotoilusta. Lisää löydät <a href="http://msdn.microsoft.com/en-us/library/26etazsy.aspx">MSDN-dokumentaatiosta kohdasta Formatting types</a>.</p>
    </div>
    
    <div id="par-825" class="paragraph">
        <div id='1.stringformat1230' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a2022414c4b554f5341222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e737472696e67666f726d617431323330222c202275736572636f6465223a20222020202020202020436f6e736f6c652e57726974654c696e6528537472696e672e466f726d6174285c227b302c2031317d5c222c20313233302e31323329293b5c6e2020202020202020436f6e736f6c652e57726974654c696e6528537472696e672e466f726d6174285c227b302c2031313a3030302e307d5c222c20313233302e313229293b5c6e2020202020202020436f6e736f6c652e57726974654c696e6528537472696e672e466f726d6174285c227b302c2031313a2323232e23237d5c222c20313233302e313229293b5c6e2020202020202020436f6e736f6c652e57726974654c696e6528537472696e672e466f726d6174285c227b302c2031313a2323302e30307d5c222c20313233302e3129293b5c6e2020202020202020436f6e736f6c652e57726974654c696e6528537472696e672e466f726d6174285c227b302c2031313a2330452b307d5c222c20313233302e31323329293b222c20226279436f6465223a20222020202020202020436f6e736f6c652e57726974654c696e6528537472696e672e466f726d6174285c227b302c2031317d5c222c20313233302e31323329293b5c6e2020202020202020436f6e736f6c652e57726974654c696e6528537472696e672e466f726d6174285c227b302c2031313a3030302e307d5c222c20313233302e313229293b5c6e2020202020202020436f6e736f6c652e57726974654c696e6528537472696e672e466f726d6174285c227b302c2031313a2323232e23237d5c222c20313233302e313229293b5c6e2020202020202020436f6e736f6c652e57726974654c696e6528537472696e672e466f726d6174285c227b302c2031313a2323302e30307d5c222c20313233302e3129293b5c6e2020202020202020436f6e736f6c652e57726974654c696e6528537472696e672e466f726d6174285c227b302c2031313a2330452b307d5c222c20313233302e31323329293b227d</cs-runner></div>
    </div>
    
    <div id="par-826" class="paragraph">
        <div class="figure">
<img src="/csimages/ohj1/luentomonistecsUusin_htm_356ed562.png" alt="Kuva 12: Muotoilujonoilla voidaan muotoilla lukuja monipuolisesti. Tämän esimerkin lähdekoodi löytyy osoitteesta https://trac.cc.jyu.fi/projects/ohj1/browser/luentomonistecs/esimerkit/StringFormat.cs"><p class="caption">Kuva 12: Muotoilujonoilla voidaan muotoilla lukuja monipuolisesti. Tämän esimerkin lähdekoodi löytyy osoitteesta <a href="https://trac.cc.jyu.fi/projects/ohj1/browser/luentomonistecs/esimerkit/StringFormat.cs" class="uri">https://trac.cc.jyu.fi/projects/ohj1/browser/luentomonistecs/esimerkit/StringFormat.cs</a></p>
</div>
    </div>
    
    <div id="par-827" class="paragraph">
        <p>Esimerkkisarakkeista kolmas, <code>{0,11:##0.0}</code> (otsikkoriviltä puuttuu tuo ,11 joka määrää kentän viemän minimitilan), on esimerkki siitä, miten erilaisia lukuja saadaan järjestettyä siististi myös päällekkäin desimaalipisteen (tai -pilkun) kohdalta. Risuaita tarkoittaa, että jos luvussa ei ole sen merkin kohdalla numeroa, se jätetään pois paitsi <code>E</code>-muotoilussa. Sarakkeissa 3 ja 4 pisteen etupuolella olevalla <code>#</code>-merkillä ei ole vaikutusta tulokseen. Nolla sen sijaan "pakottaa" numeron sen merkin paikalle, vaikka syötteessä ei sen merkin kohdalla olisikaan mitään: esimerkiksi syötteet 17 ja 0 muuttuvat 17.0:ksi ja 0.0:ksi. Esimerkiksi rahaan liittyvissä sovelluksissa oletuksena desimaalipisteen jälkeen olisi mielekästä olla kaksi nollaa, jolloin "nollasentit" näytetään joka tapauksessa, myös rahamäärän ollessa tasasumma.</p>
    </div>
    
    <div id="par-828" class="paragraph">
        <p>Huomaa, että ylläolevissa esimerkeissä oletetaan, että järjestelmän desimaalierottimena on pilkku. Tämä on järjestelmäkohtaista ja muutettavissa esimerkiksi Windows 7:ssa Control panel → Region and language → Formats → Additional settings → Decimal symbol.</p>
    </div>
    
    <div id="par-829" class="paragraph">
        <p>Muotoilumerkkijono laitetaan lainausmerkkeihin, ja aaltosulkujen sisään. Muotoilujonoja voi olla myös useita, samoin muotoiltavia merkkijonoja. Tästä esimerkki alla.</p>
    </div>
    
    <div id="par-830" class="paragraph">
        <div id='1.stringformat1321' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a2022414c4b554f5341222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e737472696e67666f726d617431333231222c20226279436f6465223a20222020202020202020537472696e67206c75767574203d20537472696e672e466f726d6174285c227b307d207b327d207b317d207b307d5c222c20312c20322c2033293b5c6e2020202020202020436f6e736f6c652e57726974654c696e65286c75767574293b202f2f2054756c6f737461613a2031203320322031227d</cs-runner></div>
    </div>
    
    <div id="par-831" class="paragraph">
        <p>Muotoillun jonon (ja sen määrittelyn) voi antaa myös suoraan esimerkiksi WriteLine-metodille. Alla edellinen esimerkki lyhyemmin kirjoitettuna.</p>
    </div>
    
    <div id="par-832" class="paragraph">
        <div id='1.writelineformat1321' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a2022414c4b554f5341222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e77726974656c696e65666f726d617431333231222c20226279436f6465223a20222020202020202020436f6e736f6c652e57726974654c696e65285c227b307d207b327d207b317d207b307d5c222c20312c20322c2033293b227d</cs-runner></div>
    </div>
    
    <div id="par-833" class="paragraph">
        <p>Lisätietoja merkkijonojen muotoilusta löytyy MSDN-dokumentaatiosta:</p>
    </div>
    
    <div id="par-834" class="paragraph">
        <blockquote>
<p><a href="http://msdn.microsoft.com/en-us/library/0c899ak8.aspx" class="uri">http://msdn.microsoft.com/en-us/library/0c899ak8.aspx</a></p>
</blockquote>
    </div>
    
    <div id="par-835" class="paragraph">
        <h2 id="char-luokka">12.7 Char-luokka</h2>
    </div>
    
    <div id="par-836" class="paragraph">
        <p>Erilaisia yhden kirjaimen muunnoksia ja vertailuja löytyy <a href="http://msdn.microsoft.com/en-us/library/system.char.aspx">Char-luokasta</a>:</p>
    </div>
    
    <div id="par-837" class="paragraph">
        <div id='1.charluokka' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a2022414c4b554f5341222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e636861726c756f6b6b61222c20226279436f6465223a20222020202020202020636861722063203d202761273b5c6e202020202020202063686172206e203d202735273b5c6e2020202020202020636861722069736f43203d20436861722e546f55707065722863293b5c6e2020202020202020436f6e736f6c652e57726974654c696e65285c227b307d2069736f6e61206f6e207b317d5c222c632c69736f43293b5c6e20202020202020206966202820436861722e49734469676974286e29202920436f6e736f6c652e57726974654c696e65285c226e206f6e206e756d65726f5c22293b5c6e20202020202020206966202820436861722e49734c6574746572286329202920436f6e736f6c652e57726974654c696e65285c2263206f6e206b69726a61696e5c22293b5c6e20202020202020206966202820436861722e49734c6f776572286329202920436f6e736f6c652e57726974654c696e65285c2263206f6e207069656e695c22293b227d</cs-runner></div>
    </div>
    
    <div id="par-838" class="paragraph">
        <h1 id="ehtolauseet-valintalauseet">13. Ehtolauseet (Valintalauseet)</h1>
    </div>
    
    <div id="par-839" class="paragraph">
        <blockquote>
<p><em>Älä turhaan käytä iffiä, useimmiten pärjäät ilmankin</em> - Vesa Lappalainen</p>
</blockquote>
    </div>
    
    <div id="par-840" class="paragraph">
        <h2 id="mihin-ehtolauseita-tarvitaan">13.1 Mihin ehtolauseita tarvitaan?</h2>
    </div>
    
    <div id="par-841" class="paragraph">
        <p>Tehtävä: Suunnittele aliohjelma, joka saa parametrina kokonaisluvun. Aliohjelman tulee palauttaa true (tosi), jos luku on parillinen ja false (epätosi), jos luku on pariton.</p>
    </div>
    
    <div id="par-842" class="paragraph">
        <p>Tämänhetkisellä tietämyksellä yllä olevan kaltainen aliohjelma olisi lähes mahdoton toteuttaa. Pystyisimme kyllä selvittämään onko luku parillinen, mutta meillä ei ole keinoa muuttaa paluuarvoa sen mukaan, onko luku parillinen vai ei. Kun ohjelmassa haluamme tehdä eri asioita riippuen esimerkiksi käyttäjän syötteestä tai aliohjelmien parametreista, tarvitsemme ehtolauseita.</p>
    </div>
    
    <div id="par-843" class="paragraph">
        <h2 id="if-rakenne-jos-aurinko-paistaa-mene-ulos.">13.2 if-rakenne: "Jos aurinko paistaa, mene ulos."</h2>
    </div>
    
    <div id="par-844" class="paragraph">
        <p>Tavallinen ehtolause sisältää aina sanan "jos", ehdon sekä toimenpiteet mitä tehdään, jos ehto on tosi. Arkielämän naiivi ehtolause voitaisiin ilmaista vaikka seuraavasti:</p>
    </div>
    
    <div id="par-845" class="paragraph">
        <blockquote>
<p>Jos aurinko paistaa, mene ulos.</p>
</blockquote>
    </div>
    
    <div id="par-846" class="paragraph">
        <p>Hieman monimutkaisempi ehtolause voisi sisältää myös ohjeen, mitä tehdään, jos ehto ei pädekään:</p>
    </div>
    
    <div id="par-847" class="paragraph">
        <blockquote>
<p>Jos aurinko paistaa, mene ulos, muuten koodaa sisällä.</p>
</blockquote>
    </div>
    
    <div id="par-848" class="paragraph">
        <p>Molemmille rakenteille löytyy C#:sta vastineet. Tutustutaan ensiksi ensimmäiseen eli if-rakenteeseen.</p>
    </div>
    
    <div id="par-849" class="paragraph">
        <p>Yleisessä muodossa C#:n if-rakenne on alla olevan kaltainen:</p>
    </div>
    
    <div id="par-850" class="paragraph">
        <pre><code>if (ehto) lause;</code></pre>
    </div>
    
    <div id="par-851" class="paragraph">
        <p>Esimerkki ehtolause: "Jos aurinko paistaa, mene ulos" voidaan nyt esittää C#:n syntaksin mukaan seuraavasti.</p>
    </div>
    
    <div id="par-852" class="paragraph">
        <pre><code>if (aurinkoPaistaa) MeneUlos();</code></pre>
    </div>
    
    <div id="par-853" class="paragraph">
        <p>Jos ehdon ollessa totta täytyy suorittaa useampia lauseita, tulee ehdon jälkeen muodostaa oma lohko.</p>
    </div>
    
    <div id="par-854" class="paragraph">
        <pre><code>if (ehto) 
{
  lause1;
  lause2;
  ...
  lauseN;
}</code></pre>
    </div>
    
    <div id="par-855" class="paragraph">
        <p>Ehto on aina joku <em>looginen lauseke</em>. Looginen lauseke voi saada vain kaksi arvoa: tosi (true) tai epätosi (false). Jos looginen lauseke saa arvon tosi, perässä oleva lause tai lauseet suoritetaan, muuten ei tehdä mitään ja jatketaan ohjelman suoritusta. Looginen lauseke voi sisältää muun muassa lukuarvoja, joiden suuruuksia voidaan vertailla vertailuoperaattoreilla.</p>
    </div>
    
    <div id="par-856" class="paragraph">
        <p>Vuokaaviolla if-rakennetta voisi kuvata seuraavasti:</p>
    </div>
    
    <div id="par-857" class="paragraph">
        <div id='1.k13' data-plugin='/showImage'><img height="265" src="/csimages/ohj1/luentomonistecsUusin_htm_194ffc3.png">
<p class="footer">Kuva 13: if-rakenne vuokaaviona.</p>
</div>
    </div>
    
    <div id="par-858" class="paragraph">
        <div class="huomautus">
<p><em>Vuokaavio =</em> Kaavio, jolla mallinnetaan <em>algoritmia</em> tai prosessia.</p>
</div>
    </div>
    
    <div id="par-859" class="paragraph">
        <p>Ennen kuin if-rakenteesta voidaan antaa esimerkkiä, tarvitsemme hieman tietoa vertailuoperaattoreista.</p>
    </div>
    
    <div id="par-860" class="paragraph">
        <h2 id="vertailuoperaattorit-1">13.3 Vertailuoperaattorit</h2>
    </div>
    
    <div id="par-861" class="paragraph">
        <p>Vertailuoperaattoreilla voidaan vertailla aritmeettisia arvoja.</p>
    </div>
    
    <div id="par-862" class="paragraph">
        <p>Taulukko 6: C#:n vertailuoperaattorit.</p>
    </div>
    
    <div id="par-863" class="paragraph">
        <table>
<thead>
<tr class="header">
<th align="center">Operaattori</th>
<th align="left">Nimi</th>
<th align="left">Toiminta</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">==</td>
<td align="left">yhtä suuri kuin</td>
<td align="left">Palauttaa tosi, jos vertailtavat arvot yhtä suuret.</td>
</tr>
<tr class="even">
<td align="center">!=</td>
<td align="left">eri suuri kuin</td>
<td align="left">Palauttaa tosi, jos vertailtavat arvot erisuuret.</td>
</tr>
<tr class="odd">
<td align="center">&gt;</td>
<td align="left">suurempi kuin</td>
<td align="left">Palauttaa tosi, jos vasemmalla puolella oleva luku on suurempi.</td>
</tr>
<tr class="even">
<td align="center">&gt;=</td>
<td align="left">suurempi tai yhtä suuri kuin</td>
<td align="left">Palauttaa tosi, jos vasemmalla puolella oleva luku on suurempi tai yhtäsuuri</td>
</tr>
<tr class="odd">
<td align="center">&lt;</td>
<td align="left">pienempi kuin</td>
<td align="left">Palauttaa tosi, jos vasemmalla puolella oleva luku on pienempi.</td>
</tr>
<tr class="even">
<td align="center">&lt;=</td>
<td align="left">pienempi tai yhtä suuri kuin</td>
<td align="left">Palauttaa tosi, jos vasemmalla puolella oleva luku on pienempi tai yhtäsuuri.</td>
</tr>
</tbody>
</table>
    </div>
    
    <div id="par-864" class="paragraph">
        <h3 id="huomautus-sijoitusoperaattori-ja-vertailuoperaattori">13.3.1 Huomautus: sijoitusoperaattori (=) ja vertailuoperaattori (==)</h3>
    </div>
    
    <div id="par-865" class="paragraph">
        <p>Muistathan, ettei sijoitusoperaattoria (<code>=</code>) voi käyttää vertailuun. Tämä on yksi yleisimmistä ohjelmointivirheistä. Vertailuun aina kaksi <strong>=</strong> -merkkiä ja sijoitukseen yksi. Tästä seuraava esimerkki.</p>
    </div>
    
    <div id="par-866" class="paragraph">
        <h2 id="esimerkki-yksinkertaisia-if-lauseita">13.4 Esimerkki: yksinkertaisia if-lauseita</h2>
    </div>
    
    <div id="par-867" class="paragraph">
        <p>Yhtäsuuruuden vertailuoperaattorissa on kaksi <code>=</code> -merkkiä.</p>
    </div>
    
    <div id="par-868" class="paragraph">
        <div id='1.henkilonika' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a2022414c4b554f5341222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e68656e6b696c6f6e696b61222c20226279436f6465223a20222020202020202020696e742068656e6b696c6f6e496b61203d2032303b5c6e20202020202020206966202868656e6b696c6f6e496b61203d3d2032302920436f6e736f6c652e57726974654c696e65285c224f6e6e656b7369206f6c6b6f6f6e215c22293b227d</cs-runner></div>
    </div>
    
    <div id="par-869" class="paragraph">
        <p>Alla oleva aiheuttaa virheilmoituksen koska on yritetty verrata käyttäen vain yhtä <code>=</code> -merkkiä.</p>
    </div>
    
    <div id="par-870" class="paragraph">
        <div id='1.henkilonika2' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a2022414c4b554f5341222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e68656e6b696c6f6e696b6132222c20226279436f6465223a202220202020202020202f2f20545c75303063344d5c7530306334204f484a454c4d41204549204b5c75303063345c75303063344e4e595c6e2020202020202020696e742068656e6b696c6f6e496b61203d2032303b5c6e20202020202020206966202868656e6b696c6f6e496b61203d2032302920436f6e736f6c652e57726974654c696e65285c224f6e6e656b7369206f6c6b6f6f6e215c22293b227d</cs-runner></div>
    </div>
    
    <div id="par-871" class="paragraph">
        <p>Seuraava esimerkki havainnollistaa toisen vertailuoperaattorin käyttöä.</p>
    </div>
    
    <div id="par-872" class="paragraph">
        <div id='1.lukunegatiivinen' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a2022414c4b554f5341222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e6c756b756e65676174696976696e656e222c20226279436f6465223a20222020202020202020696e74206c756b75203d202d373b5c6e2020202020202020696620286c756b75203c20302920436f6e736f6c652e57726974654c696e65285c224c756b75206f6e206e65676174696976696e656e5c22293b227d</cs-runner></div>
    </div>
    
    <div id="par-873" class="paragraph">
        <p>Yllä oleva lauseke tulostaa <code>Luku on negatiivinen</code>, jos muuttuja luku on pienempi kuin nolla. Ehtona on siis looginen lauseke luku <code>&lt; 0</code>, joka saa arvon "tosi", aina kun muuttuja luku on nollaa pienempi. Tällöin perässä oleva lause tai lohko suoritetaan.</p>
    </div>
    
    <div id="par-874" class="paragraph">
        <h2 id="if-else--rakenne">13.5 if-else -rakenne</h2>
    </div>
    
    <div id="par-875" class="paragraph">
        <p><code>if-else</code> -rakenne sisältää myös kohdan mitä tehdään jos ehto ei olekaan tosi.</p>
    </div>
    
    <div id="par-876" class="paragraph">
        <pre><code>Jos aurinko paistaa mene ulos, muuten koodaa sisällä.</code></pre>
    </div>
    
    <div id="par-877" class="paragraph">
        <p>Yllä oleva lause sisältää ohjelmoinnin if-else -rakenteen idean. Siinä on ehto ja ohje mitä tehdään jos ehto on tosi sekä ohje mitä tehdään jos ehto on epätosi. Lauseen voisi kirjoittaa myös:</p>
    </div>
    
    <div id="par-878" class="paragraph">
        <pre><code>jos (aurinko paistaa) mene ulos
muuten koodaa sisällä</code></pre>
    </div>
    
    <div id="par-879" class="paragraph">
        <p>Yllä oleva muoto on jo useimpien ohjelmointikielten syntaksin mukainen. Siinä ehto on erotettu sulkeiden sisään, ja perässä on ohje, mitä tehdään, jos ehto on tosi. Toisella rivillä sen sijaan on ohje mitä tehdään, jos ehto on epätosi. C#:n syntaksin mukaiseksi ohjelma saadaan, kun ohjelmointikieleen kuuluvat sanat muutetaan englanniksi.</p>
    </div>
    
    <div id="par-880" class="paragraph">
        <pre><code>if (aurinko paistaa) mene ulos;
else koodaa sisällä;</code></pre>
    </div>
    
    <div id="par-881" class="paragraph">
        <p>if-else -rakenteen yleinen muoto:</p>
    </div>
    
    <div id="par-882" class="paragraph">
        <pre><code>if (ehto) lause1;
else lause2;</code></pre>
    </div>
    
    <div id="par-883" class="paragraph">
        <p>Kuten pelkässä if-rakenteessa myös if-else -rakenteessa lauseiden tilalla voi olla myös lohko.</p>
    </div>
    
    <div id="par-884" class="paragraph">
        <pre><code>if (ehto) 
{
  lause1;
  lause2;
  lause3;
} 
else 
{
  lause4;
  lause5;
}</code></pre>
    </div>
    
    <div id="par-885" class="paragraph">
        <p>if-else -rakennetta voisi sen sijaan kuvata seuraavalla vuokaaviolla:</p>
    </div>
    
    <div id="par-886" class="paragraph">
        <div id='1.k14' data-plugin='/showImage'><img height="348" src="/csimages/ohj1/luentomonistecsUusin_htm_m19490db5.gif">
<p class="footer">Kuva 14: if-else-rakenne vuokaaviona.</p>
</div>
    </div>
    
    <div id="par-887" class="paragraph">
        <h3 id="esimerkki-pariton-vai-parillinen">13.5.1 Esimerkki: Pariton vai parillinen</h3>
    </div>
    
    <div id="par-888" class="paragraph">
        <p>Tehdään aliohjelma joka palauttaa true jos luku on parillinen ja false jos luku on pariton.</p>
    </div>
    
    <div id="par-889" class="paragraph">
        <div id='1.onkolukuparillinen' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f46756e6b74696f506f686a612e6373222c2022696e64656e74223a202230222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022494e5345525420594f55522043414c4c532048455245222c20226279436f646531223a20222f2f5c6e2020202020202020436f6e736f6c652e57726974654c696e65284f6e6b6f4c756b75506172696c6c696e656e283429293b202f2f20547275655c6e2020202020202020436f6e736f6c652e57726974654c696e65284f6e6b6f4c756b75506172696c6c696e656e283729293b202f2f2046616c7365222c20227461736b4944223a2022312e6f6e6b6f6c756b75706172696c6c696e656e222c20227265706c616365223a2022494e5345525420594f55522046554e4354494f4e532048455245222c20226279436f6465223a2022202020207075626c69632073746174696320626f6f6c204f6e6b6f4c756b75506172696c6c696e656e28696e74206c756b7529205c6e202020207b5c6e2020202020202069662028286c756b752025203229203d3d2030292072657475726e20747275653b5c6e20202020202020656c73652072657475726e2066616c73653b5c6e202020207d227d</cs-runner></div>
    </div>
    
    <div id="par-890" class="paragraph">
        <p>Aliohjelma saa parametrina kokonaisluvun ja palauttaa siis true, jos kokonaisluku oli parillinen ja false, jos kokonaisluku oli pariton. Toisella rivillä otetaan muuttujan luku ja luvun 2 jakolaskun jakojäännös. Jos jakojäännös on 0, niin silloin luku on parillinen, eli palautetaan true. Jos jakojäännös ei mennyt tasan, niin silloin luvun on pakko olla pariton eli palautetaan false.</p>
    </div>
    
    <div id="par-891" class="paragraph">
        <p>Itse asiassa, koska aliohjelman suoritus päättyy return-lauseeseen, voitaisiin else-sana jättää kokonaan pois, sillä else-lauseeseen mennään ohjelmassa nyt vain siinä tapauksessa, että if-ehto <em>ei</em> ollut tosi. Voisimmekin kirjoittaa aliohjelman hieman lyhyemmin seuraavasti:</p>
    </div>
    
    <div id="par-892" class="paragraph">
        <div id='1.onkolukuparillinen2' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f46756e6b74696f506f686a612e6373222c2022696e64656e74223a202230222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022494e5345525420594f55522043414c4c532048455245222c20226279436f646531223a20222f2f5c6e2020202020202020436f6e736f6c652e57726974654c696e65284f6e6b6f4c756b75506172696c6c696e656e283429293b202f2f20547275655c6e2020202020202020436f6e736f6c652e57726974654c696e65284f6e6b6f4c756b75506172696c6c696e656e283729293b202f2f2046616c7365222c20227461736b4944223a2022312e6f6e6b6f6c756b75706172696c6c696e656e32222c20227265706c616365223a2022494e5345525420594f55522046554e4354494f4e532048455245222c20226279436f6465223a2022202020207075626c69632073746174696320626f6f6c204f6e6b6f4c756b75506172696c6c696e656e28696e74206c756b7529205c6e202020207b5c6e2020202020202069662028286c756b752025203229203d3d2030292072657475726e20747275653b5c6e2020202020202072657475726e2066616c73653b5c6e202020207d227d</cs-runner></div>
    </div>
    
    <div id="par-893" class="paragraph">
        <p>Usein if-lauseita käytetään aivan liikaa. Tämänkin esimerkin voisi yhtä hyvin kirjoittaa vieläkin lyhyemmin (ei aina selkeämmin kaikkien mielestä) seuraavasti:</p>
    </div>
    
    <div id="par-894" class="paragraph">
        <div id='1.onkolukuparillinen3' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f46756e6b74696f506f686a612e6373222c2022696e64656e74223a202230222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022494e5345525420594f55522043414c4c532048455245222c20226279436f646531223a20222f2f5c6e2020202020202020436f6e736f6c652e57726974654c696e65284f6e6b6f4c756b75506172696c6c696e656e283429293b202f2f20547275655c6e2020202020202020436f6e736f6c652e57726974654c696e65284f6e6b6f4c756b75506172696c6c696e656e283729293b202f2f2046616c7365222c20227461736b4944223a2022312e6f6e6b6f6c756b75706172696c6c696e656e33222c20227265706c616365223a2022494e5345525420594f55522046554e4354494f4e532048455245222c20226279436f6465223a2022202020207075626c69632073746174696320626f6f6c204f6e6b6f4c756b75506172696c6c696e656e28696e74206c756b7529205c6e202020207b5c6e2020202020202072657475726e20286c756b752025203229203d3d20303b5c6e202020207d227d</cs-runner></div>
    </div>
    
    <div id="par-895" class="paragraph">
        <p>Tämä johtuu siitä, että lauseke <code>(luku % 2) == 0</code>, on <code>true</code> jos luku on parillinen ja muuten <code>false</code>. Saman tien voimme siis palauttaa suoraan tuon lausekkeen arvon, ja aliohjelma toimii kuten aiemminkin.</p>
    </div>
    
    <div id="par-896" class="paragraph">
        <p>Loogisia arvoja ei ole koskaan tyylikästä testata muodossa</p>
    </div>
    
    <div id="par-897" class="paragraph">
        <pre><code>if ( ( a &lt; 5 ) == true ) ...    // vaan if ( a &lt; 5 ) ...
if ( ( a &lt; 5 ) == false ) ...   // vaan if ( a &gt;= 5 ) ... tai if ( 5 &lt;= a ) ...
if ( OnkoLukuParillinen(3) == false ) ... // vaan if ( !OnkoLukuParillinen(3) ) ...</code></pre>
    </div>
    
    <div id="par-898" class="paragraph">
        <h2 id="loogiset-operaattorit">13.6 Loogiset operaattorit</h2>
    </div>
    
    <div id="par-899" class="paragraph">
        <p>Loogisia lausekkeita voidaan myös yhdistellä <em>loogisilla operaattoreilla</em>.</p>
    </div>
    
    <div id="par-900" class="paragraph">
        <p>Taulukko 7: Loogiset operaattorit.</p>
    </div>
    
    <div id="par-901" class="paragraph">
        <table>
<thead>
<tr class="header">
<th align="center">C#-koodi</th>
<th align="left">Operaattori</th>
<th align="left">Toiminta</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">!</td>
<td align="left">looginen ei</td>
<td align="left">Tosi, jos lauseke epätosi.</td>
</tr>
<tr class="even">
<td align="center">&amp;</td>
<td align="left">looginen ja</td>
<td align="left">Tosi, jos molemmat lausekkeet tosia.</td>
</tr>
<tr class="odd">
<td align="center">&amp;&amp;</td>
<td align="left">looginen ehdollinen ja</td>
<td align="left">Tosi, jos molemmat lausekkeet tosia. Eroaa edellisestä siinä, että jos lausekkeen totuusarvo on jo saatu selville, niin loppua ei enää tarkisteta. Toisin sanoen jos ensimmäinen lauseke oli jo epätosi, niin toista lauseketta ei enää suoriteta.</td>
</tr>
<tr class="even">
<td align="center">|</td>
<td align="left">looginen tai</td>
<td align="left">Tosi, jos toinen lausekkeista on tosi.</td>
</tr>
<tr class="odd">
<td align="center">||</td>
<td align="left">looginen ehdollinen tai</td>
<td align="left">Tosi, jos toinen lausekkeista on tosi. Vastaavasti jos lausekkeen arvo selviää jo aikaisemmin, niin loppua ei enää tarkisteta. Toisin sanoen, jos ensimmäinen lauseke saa arvon tosi, niin koko lauseke saa arvon tosi ja jälkimmäistä ei tarvitse enää tarkastaa.</td>
</tr>
<tr class="even">
<td align="center">^</td>
<td align="left">eksklusiivinen tai (XOR)</td>
<td align="left">Tosi, <em>jos</em> toinen, <em>mutta</em> eivät molemmat, on tosi.</td>
</tr>
</tbody>
</table>
    </div>
    
    <div id="par-902" class="paragraph">
        <h3 id="operaattoreiden-totuustaulut">13.6.1 Operaattoreiden totuustaulut</h3>
    </div>
    
    <div id="par-903" class="paragraph">
        <p>Taulukko 8: Seuraavassa 0=epätosi, 1=tosi. Totuustaulu eri operaattoreille.</p>
    </div>
    
    <div id="par-904" class="paragraph">
        <table>
<thead>
<tr class="header">
<th align="center">p</th>
<th align="center">q</th>
<th align="center">p &amp; q</th>
<th align="center">p | q</th>
<th align="center">p ^ q</th>
<th align="center">!p</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">0</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">1</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">0</td>
</tr>
<tr class="even">
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">0</td>
</tr>
</tbody>
</table>
    </div>
    
    <div id="par-905" class="paragraph">
        <h3 id="operaattoreiden-käyttö">13.6.2 Operaattoreiden käyttö</h3>
    </div>
    
    <div id="par-906" class="paragraph">
        <p>Ei-operaattori kääntää loogisen lausekkeen päinvastaiseksi.</p>
    </div>
    
    <div id="par-907" class="paragraph">
        <pre><code>if (!(luku &lt;= 0)) Console.WriteLine("Luku on suurempi kuin nolla");</code></pre>
    </div>
    
    <div id="par-908" class="paragraph">
        <p>Ei-operaattori siis palauttaa vastakkaisen bool-arvon: todesta tulee epätosi ja epätodesta tosi. Jos yllä olevassa lauseessa <code>luku</code>-muuttuja saisi arvon 5, niin ehto luku &lt;= 0 saisi arvon false. Kuitenkin ei-operaattori saa arvon true, kun lausekkeen arvo on false, joten koko ehto onkin true ja perässä oleva tulostuslause tulostuisi. Lause olisi siis sama kuin alla oleva:</p>
    </div>
    
    <div id="par-909" class="paragraph">
        <div id='1.lukusuurempikuinnolla' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a2022414c4b554f5341222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e6c756b7573757572656d70696b75696e6e6f6c6c61222c202275736572636f6465223a20222020202020202020696e74206c756b75203d20373b5c6e2020202020202020696620282021286c756b75203c3d203029202920436f6e736f6c652e57726974654c696e65285c224c756b75206f6e2073757572656d7069206b75696e206e6f6c6c615c22293b5c6e202020202020202069662028206c756b75203e2030202920436f6e736f6c652e57726974654c696e65285c224c756b75206f6e2073757572656d7069206b75696e206e6f6c6c615c22293b222c20226279436f6465223a20222020202020202020696e74206c756b75203d20373b5c6e2020202020202020696620282021286c756b75203c3d203029202920436f6e736f6c652e57726974654c696e65285c224c756b75206f6e2073757572656d7069206b75696e206e6f6c6c615c22293b5c6e202020202020202069662028206c756b75203e2030202920436f6e736f6c652e57726974654c696e65285c224c756b75206f6e2073757572656d7069206b75696e206e6f6c6c615c22293b227d</cs-runner></div>
    </div>
    
    <div id="par-910" class="paragraph">
        <p>Ja-operaatiossa molempien lausekkeiden pitää olla tosia, että koko ehto olisi tosi.</p>
    </div>
    
    <div id="par-911" class="paragraph">
        <div id='1.lukuvalilla1_99' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a2022414c4b554f5341222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e6c756b7576616c696c6c61315f3939222c202275736572636f6465223a20222020202020202020696e74206c756b75203d20373b5c6e2020202020202020696620282831203c3d206c756b752920262620286c756b75203c3d203939292920436f6e736f6c652e57726974654c696e65285c224c756b75206f6e20765c75303065346c696c6c5c753030653420312d39395c22293b222c20226279436f6465223a20222020202020202020696e74206c756b75203d20373b5c6e2020202020202020696620282831203c3d206c756b752920262620286c756b75203c3d203939292920436f6e736f6c652e57726974654c696e65285c224c756b75206f6e20765c75303065346c696c6c5c753030653420312d39395c22293b227d</cs-runner></div>
    </div>
    
    <div id="par-912" class="paragraph">
        <p>Yllä oleva ehto toteutuu, jos luku välillä 1-99. Vastaava asia voitaisiin hoitaa myös sisäkkäisillä ehtolauseilla seuraavasti</p>
    </div>
    
    <div id="par-913" class="paragraph">
        <div id='1.lukuvalilla1_99_2' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a2022414c4b554f5341222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e6c756b7576616c696c6c61315f39395f32222c20226279436f6465223a20222020202020202020696e74206c756b75203d20373b5c6e20202020202020206966202831203c3d206c756b75295c6e202020202020202020202020696620286c756b75203c3d2039392920436f6e736f6c652e57726974654c696e65285c224c756b75206f6e20765c75303065346c696c6c5c753030653420312d39395c22293b227d</cs-runner></div>
    </div>
    
    <div id="par-914" class="paragraph">
        <p>Tällaisia sisäkkäisiä ehtolauseita pitäisi kuitenkin välttää, sillä ne lisäävät virhealttiutta ja vaikeuttavat testaamista.</p>
    </div>
    
    <div id="par-915" class="paragraph">
        <p>Epäyhtälöiden lukemista voi helpottaa, mikäli ne kirjoitetaan niin, käytetään aina pienempi kuin -merkkiä (nuolen kärki vasemmalle). Tällöin epäyhtälön operandit ovat samassa järjestyksessä, kuin miten ihmiset mieltävät lukujen suuruusjärjestyksen.</p>
    </div>
    
    <div id="par-916" class="paragraph">
        <h3 id="de-morganin-lait">13.6.3 De Morganin lait</h3>
    </div>
    
    <div id="par-917" class="paragraph">
        <p>Huomaa, että joukko-opista ja logiikasta tutut <em>De Morganin lait</em> pätevät myös loogisissa operaatioissa. Olkoon p ja q bool-tyyppisiä muuttujia. Tällöin:</p>
    </div>
    
    <div id="par-918" class="paragraph">
        <pre><code>!(p || q) sama asia kuin !p &amp;&amp; !q
!(p &amp;&amp; q) sama asia kuin !p || !q</code></pre>
    </div>
    
    <div id="par-919" class="paragraph">
        <p>Lakeja voisi testata alla olevalla koodinpätkällä vaihtelemalla muuttujien p ja q arvoja. Riippumatta muuttujien p ja q arvoista tulostusten pitäisi aina olla true.</p>
    </div>
    
    <div id="par-920" class="paragraph">
        <div id='1.demorgan' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c20227265706c616365223a2022414c4b554f5341222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e64656d6f7267616e222c20227374656d223a20224b6f6b65696c65206f686a656c6d6161206b61696b696c6c61206d6168646f6c6c6973696c6c6120703a6e206a6120713a6e206172766f696c6c612e222c20226279436f6465223a20222020202020202020626f6f6c2070203d20747275653b5c6e2020202020202020626f6f6c2071203d20747275653b5c6e2020202020202020436f6e736f6c652e57726974654c696e6528212870207c7c207129203d3d2028217020262620217129293b5c6e2020202020202020436f6e736f6c652e57726974654c696e6528212870202626207129203d3d20282170207c7c20217129293b227d</cs-runner></div>
    </div>
    
    <div id="par-921" class="paragraph">
        <p>De Morganin lakia käyttämällä voidaan lausekkeita joskus saada sievemmiksi. Tällaisinaan lauseet tuntuvat turhilta, mutta jos p ja q ovat esimerkiksi epäyhtälöitä:</p>
    </div>
    
    <div id="par-922" class="paragraph">
        <pre><code>if ( !(a &lt; 5  &amp;&amp; b &lt; 3) ) ...
if ( !(a &lt; 5) || ! (b &lt; 3) ) ...
if ( a &gt;= 5 || b &gt;= 3 ) ...</code></pre>
    </div>
    
    <div id="par-923" class="paragraph">
        <p>niin ei-operaattorin siirto voikin olla mielekästä. Toinen tällainen laki on osittelulaki.</p>
    </div>
    
    <div id="par-924" class="paragraph">
        <h3 id="osittelulaki">13.6.4 Osittelulaki</h3>
    </div>
    
    <div id="par-925" class="paragraph">
        <p>Osittelulaki sanoo, että:</p>
    </div>
    
    <div id="par-926" class="paragraph">
        <pre><code>p * (q + r) = (p * q) + (p * r)</code></pre>
    </div>
    
    <div id="par-927" class="paragraph">
        <p>Samaistamalla <code>* &lt;=&gt; &amp;&amp; ja + &lt;=&gt; ||</code> todetaan loogisille operaatioillekin osittelulaki:</p>
    </div>
    
    <div id="par-928" class="paragraph">
        <pre><code>p &amp;&amp; (q || r) = (p &amp;&amp; q) || (p &amp;&amp; r)</code></pre>
    </div>
    
    <div id="par-929" class="paragraph">
        <p>Päinvastoin kuin normaalissa logiikassa, loogisille operaatioille osittelulaista on myös toinen versio:</p>
    </div>
    
    <div id="par-930" class="paragraph">
        <pre><code>p || (q &amp;&amp; r) = (p || q) &amp;&amp; (p || r)</code></pre>
    </div>
    
    <div id="par-931" class="paragraph">
        <h2 id="else-if-rakenne">13.7 else if-rakenne</h2>
    </div>
    
    <div id="par-932" class="paragraph">
        <p>Jos muuttujalle täytyy tehdä monia toisensa poissulkevia tarkistuksia, voidaan käyttää erityistä else if -rakennetta. Siinä on kaksi tai useampia ehtolauseita ja seuraavaan ehtoon mennään vain, jos mikään aikaisemmista ehdoista ei ollut tosi. Rakenne on yleisessä muodossa seuraava.</p>
    </div>
    
    <div id="par-933" class="paragraph">
        <pre><code>if (ehto1) lause1;
else if (ehto2) lause2;
else if (ehto3) lause3;
else lause4;</code></pre>
    </div>
    
    <div id="par-934" class="paragraph">
        <p>Alimpana olevaan else-osaan mennään nyt vain siinä tapauksessa, että mikään yllä olevista ehdoista ei ollut tosi. Tämä rakenne esitellään usein omana rakenteenaan, vaikka oikeastaan tässä on vain useita peräkkäisiä if-else -rakenteita, joiden sisennys on vain hieman poikkeava.</p>
    </div>
    
    <div id="par-935" class="paragraph">
        <div id='1.k15' data-plugin='/showImage'><img height="435" src="/csimages/ohj1/luentomonistecsUusin_htm_m28552086.gif">
<p class="footer">Kuva 15: else-if-rakenne vuokaaviona.</p>
</div>
    </div>
    
    <div id="par-936" class="paragraph">
        <p>Seuraava vuokaavio kuvaisi rakennetta, jossa on yksi if-lause ja sen jälkeen kaksi else if-lausetta.</p>
    </div>
    
    <div id="par-937" class="paragraph">
        <h3 id="esimerkki-tenttiarvosanan-laskeminen">13.7.1 Esimerkki: Tenttiarvosanan laskeminen</h3>
    </div>
    
    <div id="par-938" class="paragraph">
        <p>Tehdään laitoksen henkilökunnalle aliohjelma, joka laskee opiskelijan tenttiarvosanan. Parametrinaan aliohjelma saa tentin maksimipistemäärän, läpipääsyrajan sekä opiskelijan pisteet. Aliohjelma palauttaa arvosanan 0-5 niin, että arvosanan 1 saa läpipääsyrajalla ja muut arvosanat skaalataan mahdollisimman tasaisesti.</p>
    </div>
    
    <div id="par-939" class="paragraph">
        <div id='1.tenttiarvosana' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227461736b4944223a2022312e74656e7474696172766f73616e61222c2022757365725f6964223a2022766573616c222c20226279436f6465223a20227573696e672053797374656d3b5c6e2f2f2f203c73756d6d6172793e5c6e2f2f2f204c61736b6565206f7069736b656c696a616e2074656e7474696172766f73616e616e2e205c6e2f2f2f203c2f73756d6d6172793e5c6e7075626c696320636c617373204c61736b6554656e7474694172766f73616e615c6e7b5c6e202020202f2f2f203c73756d6d6172793e5c6e202020202f2f2f204c61736b65652074656e7474696172766f73616e616e207069737465765c75303065346c69656e206d756b61616e2e5c6e202020202f2f2f203c2f73756d6d6172793e5c6e202020202f2f2f203c706172616d206e616d653d5c226d616b73696d69706973746565745c223e54656e74696e206d616b73696d69706973746565743c2f706172616d3e5c6e202020202f2f2f203c706172616d206e616d653d5c226c61706169737972616a615c223e54656e74696e206c5c75303065347069705c75303065345c7530306534737972616a613c2f706172616d3e5c6e202020202f2f2f203c706172616d206e616d653d5c22706973746565745c223e4f7069736b656c696a616e207361616d61742074656e747469706973746565743c2f706172616d3e5c6e202020202f2f2f203c72657475726e733e74656e7474696172766f73616e6120765c75303065346c696c6c5c753030653420302d352e3c2f72657475726e733e5c6e202020207075626c69632073746174696320696e74204c61736b654172766f73616e6128696e74206d616b73696d69706973746565742c205c6e202020202020202020202020202020202020202020202020202020696e74206c61706169737972616a612c20696e742070697374656574295c6e202020207b5c6e20202020202020202f2f4c61736b657461616e20657269206172766f73616e6f696c6c65207461736169736574207069737465765c75303065346c69745c6e2020202020202020696e7420706973746545726f74203d20286d616b73696d6970697374656574202d206c61706169737972616a6129202f20353b5c6e2020202020202020696e74206172766f73616e61203d20303b5c6e20202020202020202020202020202020205c6e20202020202020206966202020202020286c61706169737972616a61202b2034202a20706973746545726f74203c3d207069737465657429206172766f73616e61203d20353b5c6e2020202020202020656c736520696620286c61706169737972616a61202b2033202a20706973746545726f74203c3d207069737465657429206172766f73616e61203d20343b5c6e2020202020202020656c736520696620286c61706169737972616a61202b2032202a20706973746545726f74203c3d207069737465657429206172766f73616e61203d20333b5c6e2020202020202020656c736520696620286c61706169737972616a61202b2031202a20706973746545726f74203c3d207069737465657429206172766f73616e61203d20323b5c6e2020202020202020656c736520696620286c61706169737972616a61202b2030202a20706973746545726f74203c3d207069737465657429206172766f73616e61203d20313b5c6e202020202020202072657475726e206172766f73616e613b5c6e202020207d5c6e5c6e202020202f2f2f203c73756d6d6172793e5c6e202020202f2f2f20505c75303065345c75303065346f686a656c6d6173736120746568645c75303065345c75303065346e20746573746974756c6f7374756b7369615c6e202020202f2f2f203c2f73756d6d6172793e5c6e202020207075626c69632073746174696320766f6964204d61696e28295c6e202020207b5c6e20202020202020202f2f546568645c75303065345c75303065346e206d757574616d6120746573746974756c6f737475735c6e2020202020202020436f6e736f6c652e57726974654c696e65284c61736b654172766f73616e61283130302c2035302c20373529293b5c6e2020202020202020436f6e736f6c652e57726974654c696e65284c61736b654172766f73616e612832342c2031322c20313229293b5c6e202020207d5c6e7d227d</cs-runner></div>
    </div>
    
    <div id="par-940" class="paragraph">
        <p>Aliohjelmassa lasketaan aluksi eri arvosanojen välinen piste-ero, jota käytetään arvosanojen laskemiseen. Arvosanojen laskeminen aloitetaan ylhäältä alaspäin. Ehto voi sisältää myös aritmeettisia operaatioita. Lisäksi alustetaan muuttuja arvosana, johon talletetaan opiskelijan saama arvosana. Muuttujaan arvosana talletetaan 5, jos tenttipisteet ylittävät läpipääsyrajan johon lisätään arvosanojen välinen piste-ero kerrottuna neljällä. Jos opiskelijan pisteet eivät riittäneet arvosanaan 5, mennään seuraavaan else-if -rakenteeseen ja tarkastetaan riittävätkö pisteet arvosanaan 4. Näin jatketaan edelleen kunnes kaikki arvosanat on käyty läpi. Lopuksi palautetaan muuttujan arvosana arvo. Pääohjelmassa aliohjelmaa on testattu muutamalla testitulostuksella.</p>
    </div>
    
    <div id="par-941" class="paragraph">
        <p>Tässäkin esimerkissä monet if-lauseet voitaisiin välttää <em>silmukalla</em> ja/tai <em>taulukoinnilla</em>. Tästä puhutaan luvussa 15.</p>
    </div>
    
    <div id="par-942" class="paragraph">
        <h3 id="harjoitus-4">13.7.2 Harjoitus</h3>
    </div>
    
    <div id="par-943" class="paragraph">
        <p>Miten ohjelmaa pitäisi muuttaa, jos pisteiden tarkastus aloitettaisiin arvosanasta 0?</p>
    </div>
    
    <div id="par-944" class="paragraph">
        <h3 id="harjoitus-5">13.7.3 Harjoitus</h3>
    </div>
    
    <div id="par-945" class="paragraph">
        <p>Lyhenisikö koodi ja tarvittaisiinko else-lauseita, jos lause <code>arvosana = 5;</code> korvattaisiin lauseella <code>return 5;</code> ? Kokeile.</p>
    </div>
    
    <div id="par-946" class="paragraph">
        <h2 id="switch-rakenne">13.8 switch-rakenne</h2>
    </div>
    
    <div id="par-947" class="paragraph">
        <p><code>switch</code>-rakennetta voidaan käyttää silloin, kun meidän täytyy suorittaa valintaa yksittäisten kokonaislukujen tai merkkien (char) perusteella. Jokaista odotettua muuttujan arvoa kohtaan on switch-rakenteessa oma case-osa, johon kirjoitetaan toimenpiteet, jotka tehdään tässä tapauksessa. Yleinen muoto switch-rakenteelle on seuraava.</p>
    </div>
    
    <div id="par-948" class="paragraph">
        <pre><code>switch (valitsin) //valitsin on useimmiten joku muuttuja
{
   case arvo1:
      lauseet;
      break;

   case arvo2:
      lauseet;
      break;

   case arvoX:
      lauseet;
      break;

   default:
      lauseet;
       break;
}</code></pre>
    </div>
    
    <div id="par-949" class="paragraph">
        <p>Jokaisessa case-kohdassa sekä default-kohdassa on lauseiden jälkeen oltava lause, jolla hypätään pois switch-lohkosta. Ylläolevassa esimerkissä hyppylauseena toimi break-lause. Toisin kuin joissain esimerkiksi C++:ssa, ei C#:ssa sallita suorituksen siirtymistä tapauksesta (case) toiseen, mikäli tapauksessa on yksikin lause. Esimerkiksi seuraava koodi aiheuttaisi virheen.</p>
    </div>
    
    <div id="par-950" class="paragraph">
        <div id='1.switchvirhe' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a2022414c4b554f5341222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e7377697463687669726865222c20226279436f6465223a20222020202020202020696e742076616c697473696e203d20313b5c6e2020202020202020737769746368202876616c697473696e295c6e20202020202020207b5c6e2020202020202020202020202f2f205365757261617661206b6f6f646920616968657574746161207669726865656e5c6e2020202020202020202020206361736520313a5c6e20202020202020202020202020202020436f6e736f6c652e57726974654c696e65285c2254617061757320312e2e2e5c22293b5c6e202020202020202020202020202020202f2f20545c7530306534685c75303065346e206b75756c7569736920627265616b2d6c6175736520746169206d75752068797070796c61757365215c6e2020202020202020202020206361736520323a5c6e20202020202020202020202020202020436f6e736f6c652e57726974654c696e65285c222e2e2e206a612f7461692074617061757320325c22293b5c6e20202020202020202020202020202020627265616b3b5c6e20202020202020207d227d</cs-runner></div>
    </div>
    
    <div id="par-951" class="paragraph">
        <p>Kuitenkin, tapauksesta toiseen "valuttaminen" on sallittu, mikäli tapaus <em>ei</em> sisällä yhtään lausetta. Seuraavassa on esimerkki tästä.</p>
    </div>
    
    <div id="par-952" class="paragraph">
        <div id='1.switchdef' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a2022414c4b554f5341222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e737769746368646566222c20226279436f6465223a20222020202020202020696e74206c756b75203d20313b5c6e202020202020202073776974636820286c756b75295c6e20202020202020207b5c6e2020202020202020202020206361736520303a5c6e2020202020202020202020206361736520313a5c6e20202020202020202020202020202020436f6e736f6c652e57726974654c696e65285c224c756b75206f6e20302074616920315c22293b5c6e20202020202020202020202020202020627265616b3b5c6e2020202020202020202020206361736520323a5c6e20202020202020202020202020202020436f6e736f6c652e57726974654c696e65285c224c756b75206f6e20325c22293b5c6e20202020202020202020202020202020627265616b3b5c6e20202020202020202020202064656661756c743a5c6e20202020202020202020202020202020436f6e736f6c652e57726974654c696e65285c224f6c657475737461706175735c22293b5c6e20202020202020202020202020202020627265616b3b5c6e20202020202020207d227d</cs-runner></div>
    </div>
    
    <div id="par-953" class="paragraph">
        <h3 id="esimerkki-arvosana-kirjalliseksi">13.8.1 Esimerkki: Arvosana kirjalliseksi</h3>
    </div>
    
    <div id="par-954" class="paragraph">
        <p>Tehdään aliohjelma, joka saa parametrina tenttiarvosanan numerona (0-5) ja palauttaa kirjallisen arvosanan String-oliona.</p>
    </div>
    
    <div id="par-955" class="paragraph">
        <div id='1.kirjallinenarvosana' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f46756e6b74696f506f686a612e6373222c2022696e64656e74223a202230222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022494e5345525420594f55522043414c4c532048455245222c20226279436f646531223a20222f2f5c6e2020202020202020436f6e736f6c652e57726974654c696e65284b69726a616c6c696e656e4172766f73616e61283429293b202f2f204b6969746574745c7530306534765c75303065345c6e2020202020202020436f6e736f6c652e57726974654c696e65284b69726a616c6c696e656e4172766f73616e61283029293b202f2f2048796c5c75303065347474795c6e2020202020202020436f6e736f6c652e57726974654c696e65284b69726a616c6c696e656e4172766f73616e61283929293b202f2f2056697268652e2e2e222c20227461736b4944223a2022312e6b69726a616c6c696e656e6172766f73616e61222c20227265706c616365223a2022494e5345525420594f55522046554e4354494f4e532048455245222c20226279436f6465223a2022202020202f2f2f203c73756d6d6172793e5c6e202020202f2f2f2050616c61757474616120706172616d657472696e61207361616d616e7361206e756d65726f6172766f73616e616e206b69726a616c6c6973656e612e5c6e202020202f2f2f203c2f73756d6d6172793e5c6e202020202f2f2f203c706172616d206e616d653d5c226e756d65726f5c223e74656e7474696172766f73616e61206e756d65726f6e613c2f706172616d3e5c6e202020202f2f2f203c72657475726e733e74656e7474696172766f73616e61206b69726a616c6c6973656e613c2f72657475726e733e5c6e202020207075626c69632073746174696320537472696e67204b69726a616c6c696e656e4172766f73616e6128696e74206e756d65726f29205c6e202020207b5c6e20202020202020537472696e67206172766f73616e61203d205c225c223b5c6e20202020202020737769746368286e756d65726f29205c6e202020202020207b5c6e202020202020202020206361736520303a5c6e202020202020202020202020206172766f73616e61203d205c2248796c5c75303065347474795c223b5c6e20202020202020202020202020627265616b3b5c6e205c6e202020202020202020206361736520313a5c6e202020202020202020202020206172766f73616e61203d205c22565c75303065346c74745c7530306534765c75303065345c223b5c6e20202020202020202020202020627265616b3b5c6e205c6e202020202020202020206361736520323a5c6e202020202020202020202020206172766f73616e61203d205c22547979647974745c7530306534765c75303065345c223b5c6e20202020202020202020202020627265616b3b5c6e205c6e202020202020202020206361736520333a5c6e202020202020202020202020206172766f73616e61203d205c224879765c75303065345c223b5c6e20202020202020202020202020627265616b3b5c6e205c6e202020202020202020206361736520343a5c6e202020202020202020202020206172766f73616e61203d205c224b6969746574745c7530306534765c75303065345c223b5c6e20202020202020202020202020627265616b3b5c6e205c6e202020202020202020206361736520353a5c6e202020202020202020202020206172766f73616e61203d205c224572696e6f6d61696e656e5c223b5c6e20202020202020202020202020627265616b3b5c6e205c6e2020202020202020202064656661756c743a5c6e202020202020202020202020206172766f73616e61203d205c225669726865656c6c696e656e206172766f73616e615c223b5c6e2020202020202020202020202020627265616b3b5c6e202020202020207d5c6e2020202020202072657475726e206172766f73616e613b5c6e202020207d227d</cs-runner></div>
    </div>
    
    <div id="par-956" class="paragraph">
        <p>Koska return-lause lopettaa metodin toiminnan, voitaisiin yllä olevaa aliohjelmaa lyhentää palauttamalla jokaisessa case-osassa suoraan kirjallinen arvosana. Tällöin break-lauseet voisi jättää pois, sillä return-lauseen ansiosta tapauksesta toiseen valuttaminen ei ole mahdollista.</p>
    </div>
    
    <div id="par-957" class="paragraph">
        <div id='1.kirjallinenarvosana2' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f46756e6b74696f506f686a612e6373222c2022696e64656e74223a202230222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022494e5345525420594f55522043414c4c532048455245222c20226279436f646531223a20222f2f5c6e2020202020202020436f6e736f6c652e57726974654c696e65284b69726a616c6c696e656e4172766f73616e61283429293b202f2f204b6969746574745c7530306534765c75303065345c6e2020202020202020436f6e736f6c652e57726974654c696e65284b69726a616c6c696e656e4172766f73616e61283029293b202f2f2048796c5c75303065347474795c6e2020202020202020436f6e736f6c652e57726974654c696e65284b69726a616c6c696e656e4172766f73616e61283929293b202f2f2056697268652e2e2e222c20227461736b4944223a2022312e6b69726a616c6c696e656e6172766f73616e6132222c202275736572636f6465223a2022202020207075626c69632073746174696320537472696e67204b69726a616c6c696e656e4172766f73616e6128696e74206e756d65726f29205c6e202020207b5c6e20202020202020737769746368286e756d65726f29205c6e202020202020207b5c6e202020202020202020206361736520303a2072657475726e205c2248796c5c75303065347474795c223b5c6e202020202020202020206361736520313a2072657475726e205c22565c75303065346c74745c7530306534765c75303065345c223b5c6e202020202020202020206361736520323a2072657475726e205c22547979647974745c7530306534765c75303065345c223b5c6e202020202020202020206361736520333a2072657475726e205c224879765c75303065345c223b5c6e202020202020202020206361736520343a2072657475726e205c224b6969746574745c7530306534765c75303065345c223b5c6e202020202020202020206361736520353a2072657475726e205c224572696e6f6d61696e656e5c223b5c6e2020202020202020202064656661756c743a2072657475726e205c225669726865656c6c696e656e206172766f73616e615c223b5c6e202020202020207d5c6e202020207d222c20227265706c616365223a2022494e5345525420594f55522046554e4354494f4e532048455245222c20226279436f6465223a2022202020207075626c69632073746174696320537472696e67204b69726a616c6c696e656e4172766f73616e6128696e74206e756d65726f29205c6e202020207b5c6e20202020202020737769746368286e756d65726f29205c6e202020202020207b5c6e202020202020202020206361736520303a2072657475726e205c2248796c5c75303065347474795c223b5c6e202020202020202020206361736520313a2072657475726e205c22565c75303065346c74745c7530306534765c75303065345c223b5c6e202020202020202020206361736520323a2072657475726e205c22547979647974745c7530306534765c75303065345c223b5c6e202020202020202020206361736520333a2072657475726e205c224879765c75303065345c223b5c6e202020202020202020206361736520343a2072657475726e205c224b6969746574745c7530306534765c75303065345c223b5c6e202020202020202020206361736520353a2072657475726e205c224572696e6f6d61696e656e5c223b5c6e2020202020202020202064656661756c743a2072657475726e205c225669726865656c6c696e656e206172766f73616e615c223b5c6e202020202020207d5c6e202020207d227d</cs-runner></div>
    </div>
    
    <div id="par-958" class="paragraph">
        <p><code>break</code>-lauseen voi siis turvallisesti jättää pois case-osasta, <em>jos</em> case-osassa palautetaan joku arvo <code>return</code>-lauseella (tai kyseinen case-osa ei sisällä yhtään lausetta). Muulloin <code>break</code>-lauseen poisjättäminen johtaa virheeseen.</p>
    </div>
    
    <div id="par-959" class="paragraph">
        <p>Lähes aina <code>switch</code>-rakenteen voi korvata <code>if</code> ja <code>else-if</code> -rakenteilla, niinpä sitä on pidettävä vain yhtenä <code>if</code>-lauseena. Myös <code>switch</code>-rakenteen voi usein välttää käyttämällä taulukoita.</p>
    </div>
    
    <div id="par-960" class="paragraph">
        <h1 id="olioiden-ja-alkeistietotyyppien-erot">14. Olioiden ja alkeistietotyyppien erot</h1>
    </div>
    
    <div id="par-961" class="paragraph">
        <p>Tehdään ohjelma, jolla demonstroidaan olioiden ja alkeistietotyyppien eroja.</p>
    </div>
    
    <div id="par-962" class="paragraph">
        <div id='1.olioviitejamuuttuja' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b22696e64656e74223a202230222c20227461736b4944223a2022312e6f6c696f76696974656a616d75757474756a61222c2022757365725f6964223a2022766573616c222c202275736572636f6465223a20227573696e672053797374656d3b5c6e7573696e672053797374656d2e546578743b5c6e5c6e2f2f2f203c73756d6d6172793e5c6e2f2f2f205475746b697461616e206f6c696f7669697474656964656e206b5c75303065347974745c75303066365c7530306534206a61206b5c75303065347974745c75303065347974796d6973745c75303065342e5c6e2f2f2f203c2f73756d6d6172793e5c6e7075626c696320636c617373204f6c696f76696974746565745c6e7b5c6e20202f2f2f203c73756d6d6172793e5c6e20202f2f2f20416c757374657461616e206d75757474756a6961206a612074756c6f7374657461616e2e205c6e20202f2f2f205465737461696c6c61616e206f6c696f6964656e206a6120616c6b6569736d75757474756a69656e2065726f6a612e5c6e20202f2f2f203c2f73756d6d6172793e5c6e20207075626c69632073746174696320766f6964204d61696e28295c6e20207b5c6e20202020537472696e674275696c646572207331203d206e657720537472696e674275696c646572285c22656b615c22293b5c6e20202020537472696e674275696c646572207332203d206e657720537472696e674275696c646572285c22656b615c22293b5c6e202020205c6e20202020436f6e736f6c652e57726974654c696e65287331203d3d207332293b202020202020202f2f2066616c73655c6e20202020436f6e736f6c652e57726974654c696e652873312e457175616c7328733229293b20202f2f20747275655c6e202020205c6e20202020696e74206931203d2031313b5c6e20202020696e74206932203d203130202b20313b5c6e202020205c6e20202020436f6e736f6c652e57726974654c696e65286931203d3d206932293b202020202020202f2f20747275655c6e202020205c6e20202020696e745b5d20697431203d206e657720696e745b315d3b206974315b305d203d20333b5c6e20202020696e745b5d20697432203d206e657720696e745b315d3b206974325b305d203d20333b5c6e202020205c6e20202020436f6e736f6c652e57726974654c696e6528697431203d3d20697432293b202020202020202f2f2066616c73655c6e20202020436f6e736f6c652e57726974654c696e65286974312e457175616c732869743229293b20202f2f20747275655c6e20202020436f6e736f6c652e57726974654c696e65286974315b305d203d3d206974325b305d293b202f2f20747275655c6e202020205c6e202020207332203d2073313b5c6e20202020436f6e736f6c652e57726974654c696e65287331203d3d207332293b2020202020202020202f2f20747275655c6e20207d5c6e7d222c20226279436f6465223a20227573696e672053797374656d3b5c6e7573696e672053797374656d2e546578743b5c6e5c6e2f2f2f203c73756d6d6172793e5c6e2f2f2f205475746b697461616e206f6c696f7669697474656964656e206b5c75303065347974745c75303066365c7530306534206a61206b5c75303065347974745c75303065347974796d6973745c75303065342e5c6e2f2f2f203c2f73756d6d6172793e5c6e7075626c696320636c617373204f6c696f76696974746565745c6e7b5c6e20202f2f2f203c73756d6d6172793e5c6e20202f2f2f20416c757374657461616e206d75757474756a6961206a612074756c6f7374657461616e2e205c6e20202f2f2f205465737461696c6c61616e206f6c696f6964656e206a6120616c6b6569736d75757474756a69656e2065726f6a612e5c6e20202f2f2f203c2f73756d6d6172793e5c6e20207075626c69632073746174696320766f6964204d61696e28295c6e20207b5c6e20202020537472696e674275696c646572207331203d206e657720537472696e674275696c646572285c22656b615c22293b5c6e20202020537472696e674275696c646572207332203d206e657720537472696e674275696c646572285c22656b615c22293b5c6e202020205c6e20202020436f6e736f6c652e57726974654c696e65287331203d3d207332293b202020202020202f2f2066616c73655c6e20202020436f6e736f6c652e57726974654c696e652873312e457175616c7328733229293b20202f2f20747275655c6e202020205c6e20202020696e74206931203d2031313b5c6e20202020696e74206932203d203130202b20313b5c6e202020205c6e20202020436f6e736f6c652e57726974654c696e65286931203d3d206932293b202020202020202f2f20747275655c6e202020205c6e20202020696e745b5d20697431203d206e657720696e745b315d3b206974315b305d203d20333b5c6e20202020696e745b5d20697432203d206e657720696e745b315d3b206974325b305d203d20333b5c6e202020205c6e20202020436f6e736f6c652e57726974654c696e6528697431203d3d20697432293b202020202020202f2f2066616c73655c6e20202020436f6e736f6c652e57726974654c696e65286974312e457175616c732869743229293b20202f2f2066616c73655c6e20202020436f6e736f6c652e57726974654c696e65286974315b305d203d3d206974325b305d293b202f2f20747275655c6e202020205c6e202020207332203d2073313b5c6e20202020436f6e736f6c652e57726974654c696e65287331203d3d207332293b2020202020202020202f2f20747275655c6e20207d5c6e7d227d</cs-runner></div>
    </div>
    
    <div id="par-963" class="paragraph">
        <p>Tarkastellaan ohjelmaa hieman tarkemmin:</p>
    </div>
    
    <div id="par-964" class="paragraph">
        <pre><code>StringBuilder s1 = new StringBuilder("eka");
StringBuilder s2 = new StringBuilder("eka");</code></pre>
    </div>
    
    <div id="par-965" class="paragraph">
        <p>Yllä luodaan kaksi StringBuilder-luokan ilmentymää.</p>
    </div>
    
    <div id="par-966" class="paragraph">
        <pre><code>Console.WriteLine(s1 == s2); // false</code></pre>
    </div>
    
    <div id="par-967" class="paragraph">
        <p>Vertailu palauttaa false, koska siinä verrataan olioviitteitä, ei niitä olioiden arvoja, joihin olioviitteet viittaavat.</p>
    </div>
    
    <div id="par-968" class="paragraph">
        <pre><code>Console.WriteLine(s1.Equals(s2)); // true</code></pre>
    </div>
    
    <div id="par-969" class="paragraph">
        <p>Arvoja, joihin muuttujat viittaavat, voidaan vertailla Equals-metodilla kuten yllä.</p>
    </div>
    
    <div id="par-970" class="paragraph">
        <p>C#:n primitiivityypit sen sijaan sijoittuvat suoraan arvoina pinomuistiin (tai myöhemmin olioiden attribuuttien tapauksessa oliolle varattuun muistialueeseen). Siksi vertailu</p>
    </div>
    
    <div id="par-971" class="paragraph">
        <pre><code>(i1 == i2)</code></pre>
    </div>
    
    <div id="par-972" class="paragraph">
        <p>on totta.</p>
    </div>
    
    <div id="par-973" class="paragraph">
        <pre><code>int[] it1 = new int[1]; it1[0] = 3;
int[] it2 = new int[1]; it2[0] = 3;
Console.WriteLine(it1 == it2); // false</code></pre>
    </div>
    
    <div id="par-974" class="paragraph">
        <p>Vastaavasti kuten StringBuilder-olioilla yllä oleva tulostus palauttaa false. Huomaa, että vaikka taulukko sisältää int-tyyppisiä kokonaislukuja (jotka ovat primitiivityyppisiä), niin <em>kokonaislukutaulukko</em> on olio. Jälleen verrataan taulukkomuuttujien viitteitä, eikä arvoja joihin muuttujat viittaavat.</p>
    </div>
    
    <div id="par-975" class="paragraph">
        <p>Ohjelman kaikki muuttujat ovat lokaaleja muuttujia, eli ne on esitelty lokaalisti Main-metodin sisällä eivätkä "näy" näin ollen Main-metodin ulkopuolelle. Tällaisille muuttujille varataan tilaa yleensä kutsupinosta. Kutsupino on dynaaminen tietorakenne, johon tallennetaan tietoa aktiivisista aliohjelmista. Siitä käytetään usein myös pelkästään nimeä pino. Pinosta puhutaan lisää kurssilla ITKA203 Käyttöjärjestelmät. Tässä vaiheessa pino voisi hieman yksinkertaistettuna olla lokaalien muuttujien kohdalta suurin piirtein seuraavan näköinen:</p>
    </div>
    
    <div id="par-976" class="paragraph">
        <div class="figure">
<img src="/csimages/ohj1/luentomonistecsUusin_htm_m7a47ee4d.gif" alt="Kuva 16: Olioviitteet."><p class="caption">Kuva 16: Olioviitteet.</p>
</div>
    </div>
    
    <div id="par-977" class="paragraph">
        <p>Jos sijoitetaan "olio" toiseen "olioon", niin tosiasiassa sijoitetaan viitemuuttujien arvoja, eli sijoituksen <code class="western">s2 = s1</code> jälkeen molemmat merkkijono-olioviitteet "osoittavat" samaan olioon. Nyt tilanne muuttuisi seuraavasti:</p>
    </div>
    
    <div id="par-978" class="paragraph">
        <div class="figure">
<img src="/csimages/ohj1/luentomonistecsUusin_htm_2e6e1c93.gif" alt="Kuva 17: Kaksi viitettä samaan olioon."><p class="caption">Kuva 17: Kaksi viitettä samaan olioon.</p>
</div>
    </div>
    
    <div id="par-979" class="paragraph">
        <p>Sijoituksen jälkeen kuvassa muistipaikkaan 8040 ei osoita (viittaa) enää kukaan ja tuo muistipaikka muuttuu "roskaksi". Kun roskienkeruu (garbage-collection, gc) seuraavan kerran käynnistyy, "vapautetaan" tällaiset käyttämättömät muistialueet. Tätä automaattista roskienkeruuta on pidetty yhtenä syynä esimerkiksi Javan menestykseen. Samalla täytyy kuitenkin varoittaa, että muisti on vain yksi resurssi ja automatiikka on olemassa vain muistin hoitamiseksi. Muut resurssit kuten esimerkiksi tiedostot ja tietokannat pitää edelleen hoitaa samalla huolellisuudella kuin muissakin kielissä. [LAP]</p>
    </div>
    
    <div id="par-980" class="paragraph">
        <p>Edellä muistipaikan 8040 olio muuttui roskaksi sijoituksessa s2 = s1. Olio voidaan muuttaa roskaksi myös sijoittamalla sen viitemuuttujaan null-viite. Tämän takia koodissa pitää usein testata onko olioviite null ennen kuin oliota käytetään, jos ei olla varmoja onko viitteen päässä oliota.</p>
    </div>
    
    <div id="par-981" class="paragraph">
        <pre><code>s2 = null;
...
if (s2 != null) Console.WriteLine("s2:n pituus on " + s2.Length);</code></pre>
    </div>
    
    <div id="par-982" class="paragraph">
        <p>Ilman testiä esimerkissä tulisi <code>NullPointerException</code>-poikkeus.</p>
    </div>
    
    <div id="par-983" class="paragraph">
        <h1 id="taulukot">15. Taulukot</h1>
    </div>
    
    <div id="par-984" class="paragraph">
        <p>Muuttujaan pystytään tallentamaan yksi arvo kerrallaan. Usein ohjelmoinnissa kuitenkin tulee tilanteita, joissa meidän tulisi tallettaa useita samantyyppisiä yhteenkuuluvia arvoja. Jos haluaisimme tallettaa esimerkiksi kaikkien kuukausien päivien lukumäärän, voisimme tietenkin tehdä tämän kuten alla:</p>
    </div>
    
    <div id="par-985" class="paragraph">
        <pre><code>int tammikuu  = 31;
int helmikuu  = 28;
int maaliskuu = 31;
int huhtikuu  = 30;
int toukokuu  = 31;
int kesakuu   = 30;
int heinakuu  = 31;
int elokuu    = 31;
int syyskuu   = 30;
int lokakuu   = 31;
int marraskuu = 30;
int joulukuu  = 31;</code></pre>
    </div>
    
    <div id="par-986" class="paragraph">
        <p>Kuukausien tapauksessa tämäkin tapa toimisi vielä jotenkin, mutta entäs jos meidän täytyisi tallentaa vaikka Ohjelmointi 1 -kurssin opiskelijoiden nimet tai vuoden jokaisen päivän keskilämpötila?</p>
    </div>
    
    <div id="par-987" class="paragraph">
        <p>Kun käsitellään useita samaan asiaan liittyviä jossain mielessä samankaltaisia tai yhteen liittyviä arvoja, on usein syytä ottaa käyttöön <em>taulukko</em> (array). Taulukko on tietorakenne, johon voi tallentaa useita samantyyppisiä muuttujia. Yksittäistä taulukon muuttujaa sanotaan <em>alkioksi</em> (element). Jokaisella alkiolla on taulukossa paikka, jota sanotaan <em>indeksiksi</em> (index). Taulukon indeksointi alkaa C#:ssa aina nollasta, eli esimerkiksi 12-alkioisen taulukon ensimmäisen alkion indeksi olisi 0 ja viimeisen 11.</p>
    </div>
    
    <div id="par-988" class="paragraph">
        <p>Taulukon koko täytyy määrittää etukäteen, eikä sitä voi myöhemmin muuttaa<a href="#sdfootnote1sym">^1^</a>.</p>
    </div>
    
    <div id="par-989" class="paragraph">
        <h2 id="taulukon-luominen">15.1 Taulukon luominen</h2>
    </div>
    
    <div id="par-990" class="paragraph">
        <p>C#:ssa taulukon voi luoda sekä alkeistietotyypeille, että oliotietotyypeille, mutta yhteen taulukkoon voi tallentaa aina vain yhtä tietotyyppiä. Taulukon määritteleminen ja luominen tapahtuu yleisessä muodossa seuraavasti:</p>
    </div>
    
    <div id="par-991" class="paragraph">
        <pre><code>Tietotyyppi[] taulukonNimi;
taulukonNimi = new Tietotyyppi[taulukonKoko];</code></pre>
    </div>
    
    <div id="par-992" class="paragraph">
        <p>Ensiksi määritellään taulukon tietotyyppi, jonka jälkeen luodaan varsinainen taulukko. Tämän voisi tehdä myös samalla rivillä:</p>
    </div>
    
    <div id="par-993" class="paragraph">
        <pre><code>Tietotyyppi[] taulukonNimi = new Tietotyyppi[taulukonKoko]; //kaikki alkiot null-viitteitä</code></pre>
    </div>
    
    <div id="par-994" class="paragraph">
        <p>Kuukausien päivien lukumäärille voisimme määritellä nyt taulukon seuraavasti:</p>
    </div>
    
    <div id="par-995" class="paragraph">
        <pre><code>int[] kuukausienPaivienLkm = new int[12]; // kaikki alkiot 0</code></pre>
    </div>
    
    <div id="par-996" class="paragraph">
        <p>Taulukkoon voi myös sijoittaa arvot määrittelyn yhteydessä. Tällöin sanotaan, että taulukko <em>alustetaan</em> (initialize). Tällöin varsinaista luontilausetta ei tarvita, sillä taulukon koko määräytyy sijoitettujen arvojen lukumäärän perusteella. Sijoitettavat arvot kirjoitetaan aaltosulkeiden sisään.</p>
    </div>
    
    <div id="par-997" class="paragraph">
        <pre><code>Tietotyyppi[] = {arvo1, arvo2,...arvoX};</code></pre>
    </div>
    
    <div id="par-998" class="paragraph">
        <p>Esimerkiksi kuukausien päivien lukumäärille voisimme määritellä ja alustaa taulukon seuraavasti:</p>
    </div>
    
    <div id="par-999" class="paragraph">
        <pre><code>int[] kuukausienPaivienLkm = {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};</code></pre>
    </div>
    
    <div id="par-1000" class="paragraph">
        <p>Taulukko voitaisiin nyt kuvata nyt seuraavasti:</p>
    </div>
    
    <div id="par-1001" class="paragraph">
        <div id='1.k18' data-plugin='/showImage'><img height="49" src="/csimages/ohj1/luentomonistecsUusin_htm_m6dff106.gif">
<p class="footer">Kuva 18: kuukausienPaivienLkm-taulukko</p>
</div>
    </div>
    
    <div id="par-1002" class="paragraph">
        <p>Huomaa, että jokaisella taulukon alkiolla on yksikäsitteinen indeksi. Indeksi tarvitaan, jotta taulukon alkiot voitaisiin myöhemmin "löytää" taulukosta. Jos taulukkoa ei alusteta määrittelyn yhteydessä, alustetaan alkiot automaattisesti oletusarvoihin taulukon luomisen yhteydessä. Tällöin numeeriset arvot alustetaan nollaksi, bool-tyyppi saa arvon false ja oliotyypit (esim. String) null-viitteen. [MÄN][KOS]</p>
    </div>
    
    <div id="par-1003" class="paragraph">
        <h2 id="taulukon-alkioon-viittaaminen">15.2 Taulukon alkioon viittaaminen</h2>
    </div>
    
    <div id="par-1004" class="paragraph">
        <p>Taulukon alkioihin pääsee käsiksi taulukon nimellä ja indeksillä. Ensiksi kirjoitetaan taulukon nimi, jonka jälkeen hakasulkeiden sisään halutun alkion indeksi. Yleisessä muodossa taulukon alkioihin viitataan seuraavasti.</p>
    </div>
    
    <div id="par-1005" class="paragraph">
        <pre><code>taulukonNimi[indeksi];</code></pre>
    </div>
    
    <div id="par-1006" class="paragraph">
        <p>Taulukkoon viittaamista voidaan käyttää nyt kuten mitä tahansa sen tyyppistä arvoa. Esimerkiksi voisimme tulostaa tammikuun pituuden kuukausienPaivienLkm-taulukosta.</p>
    </div>
    
    <div id="par-1007" class="paragraph">
        <div id='1.taulukostayksitulostus' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c20227265706c616365223a202254554c4f53545553222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022414c4b554f5341222c20227461736b4944223a2022312e7461756c756b6f737461796b736974756c6f73747573222c20226279436f646531223a20222f2f5c6e2020202020202020696e745b5d206b75756b61757369656e5061697669656e4c6b6d203d207b33312c2032382c2033312c2033302c2033312c2033302c205c6e2020202020202020202020202020202033312c2033312c2033302c2033312c2033302c2033317d3b5c6e202020202020202020202020202020205c6e222c20226279436f6465223a20222020202020202020436f6e736f6c652e57726974654c696e65286b75756b61757369656e5061697669656e4c6b6d5b305d293b202f2f20333120227d</cs-runner></div>
    </div>
    
    <div id="par-1008" class="paragraph">
        <p>Tai tallentaa tammikuun pituuden edelleen muuttujaan.</p>
    </div>
    
    <div id="par-1009" class="paragraph">
        <div id='1.taulukostayksi' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c20227265706c616365223a202254554c4f53545553222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022414c4b554f5341222c20227461736b4944223a2022312e7461756c756b6f737461796b7369222c20226279436f646531223a20222f2f5c6e2020202020202020696e745b5d206b75756b61757369656e5061697669656e4c6b6d203d207b33312c2032382c2033312c2033302c2033312c2033302c205c6e2020202020202020202020202020202033312c2033312c2033302c2033312c2033302c2033317d3b5c6e202020202020202020202020202020205c6e222c20226279436f6465223a20222020202020202020696e742074616d6d696b7575203d206b75756b61757369656e5061697669656e4c6b6d5b305d3b5c6e2020202020202020436f6e736f6c652e57726974654c696e652874616d6d696b7575293b202f2f74756c6f7374757520333120227d</cs-runner></div>
    </div>
    
    <div id="par-1010" class="paragraph">
        <p>Taulukkoon viittaava indeksi voi olla myös int-tyyppinen lauseke, jolloin kuukausienPaivienLkm-taulukkoon viittaaminen onnistuu yhtä hyvin seuraavasti:</p>
    </div>
    
    <div id="par-1011" class="paragraph">
        <div id='1.taulukostakaksi' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c20227265706c616365223a202254554c4f53545553222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022414c4b554f5341222c20227461736b4944223a2022312e7461756c756b6f7374616b616b7369222c20226279436f646531223a20222f2f5c6e2020202020202020696e745b5d206b75756b61757369656e5061697669656e4c6b6d203d207b33312c2032382c2033312c2033302c2033312c2033302c205c6e2020202020202020202020202020202033312c2033312c2033302c2033312c2033302c2033317d3b5c6e202020202020202020202020202020205c6e222c20226279436f6465223a20222020202020202020696e7420696e64656b7369203d20303b5c6e2020202020202020436f6e736f6c652e57726974654c696e65286b75756b61757369656e5061697669656e4c6b6d5b696e64656b73695d293b202f2f203331205c6e2020202020202020436f6e736f6c652e57726974654c696e65286b75756b61757369656e5061697669656e4c6b6d5b696e64656b7369202b20335d293b202f2f203330227d</cs-runner></div>
    </div>
    
    <div id="par-1012" class="paragraph">
        <p>Taulukon arvoja voi tietenkin myös muuttaa. Jos esimerkiksi olisi kyseessä karkausvuosi, voisimme muuttaa helmikuun pituudeksi 29. Helmikuuhan on taulukon indeksissä 1, sillä indeksointi alkoi nollasta.</p>
    </div>
    
    <div id="par-1013" class="paragraph">
        <div id='1.taulukonmuutos' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c20227265706c616365223a202254554c4f53545553222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022414c4b554f5341222c20227461736b4944223a2022312e7461756c756b6f6e6d7575746f73222c20226279436f646531223a20222f2f5c6e2020202020202020696e745b5d206b75756b61757369656e5061697669656e4c6b6d203d207b33312c2032382c2033312c2033302c2033312c2033302c205c6e2020202020202020202020202020202033312c2033312c2033302c2033312c2033302c2033317d3b5c6e202020202020202020202020202020205c6e222c20226279436f6465223a202220202020202020206b75756b61757369656e5061697669656e4c6b6d5b315d203d2032393b5c6e2020202020202020436f6e736f6c652e57726974654c696e6528537472696e672e4a6f696e285c22205c222c6b75756b61757369656e5061697669656e4c6b6d29293b20227d</cs-runner></div>
    </div>
    
    <div id="par-1014" class="paragraph">
        <p>Jos viittaamme taulukon alkioon, jota ei ole olemassa, saamme IndexOutOfRangeException-poikkeuksen. Tällöin kääntäjä tulostaa seuraavan kaltaisen virheilmoituksen ja ohjelman suoritus päättyy.</p>
    </div>
    
    <div id="par-1015" class="paragraph">
        <div id='1.indexoutofbounds' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c20227265706c616365223a202254554c4f53545553222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022414c4b554f5341222c20227461736b4944223a2022312e696e6465786f75746f66626f756e6473222c20226279436f646531223a20222f2f5c6e2020202020202020696e745b5d206b75756b61757369656e5061697669656e4c6b6d203d207b33312c2032382c2033312c2033302c2033312c2033302c205c6e2020202020202020202020202020202033312c2033312c2033302c2033312c2033302c2033317d3b5c6e202020202020202020202020202020205c6e222c20226279436f6465223a202220202020202020206b75756b61757369656e5061697669656e4c6b6d5b31325d203d2032393b5c6e2020202020202020436f6e736f6c652e57726974654c696e6528537472696e672e4a6f696e285c22205c222c6b75756b61757369656e5061697669656e4c6b6d29293b20227d</cs-runner></div>
    </div>
    
    <div id="par-1016" class="paragraph">
        <pre><code>Unhandled Exception: System.IndexOutOfRangeException: Index was outside the bounds of the array.</code></pre>
    </div>
    
    <div id="par-1017" class="paragraph">
        <p>Myöhemmin opitaan kuinka poikkeuksista voidaan toipua ja ohjelman suoritusta jatkaa.</p>
    </div>
    
    <div id="par-1018" class="paragraph">
        <h2 id="esimerkki-lumiukon-pallot-taulukkoon">15.3 Esimerkki: lumiukon pallot taulukkoon</h2>
    </div>
    
    <div id="par-1019" class="paragraph">
        <p>Luvussa 4.3 teimme lumiukon kolmesta pallosta. Tehdään sama siten, että laitetaan yksittäiset PhysicsObject-oliot taulukkoon.</p>
    </div>
    
    <div id="par-1020" class="paragraph">
        <div id='1.pallottaulukkoon' data-plugin='/csPlugin'><cs-jypeli-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f4a7970656c692f506f686a612e6373222c20227265706c616365223a2022494e5345525420594f555220434f44452048455245222c202274797065223a20226a7970656c69222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022494e5345525420594f55522046554e4354494f4e532048455245222c20227461736b4944223a2022312e70616c6c6f747461756c756b6b6f6f6e222c20226d6178726f7773223a20223230222c20226279436f6465223a202220202020202020202f2f204c69735c7530306534745c75303065345c75303065346e2070616c6c6f74207461756c756b6b6f6f6e2c206a612073697474656e206c69735c7530306534745c75303065345c75303065346e206b656e745c75303065346c6c655c6e2020202020202020506879736963734f626a6563745b5d2070616c6c6f74203d206e657720506879736963734f626a6563745b335d3b5c6e202020202020202070616c6c6f745b305d203d206e657720506879736963734f626a6563742832202a203130302e302c2032202a203130302e302c2053686170652e436972636c65293b5c6e202020202020202070616c6c6f745b305d2e59203d204c6576656c2e426f74746f6d202b203230302e303b5c6e202020202020202070616c6c6f745b315d203d206e657720506879736963734f626a6563742832202a2035302e302c2032202a2035302e302c2053686170652e436972636c65293b5c6e202020202020202070616c6c6f745b315d2e59203d2070616c6c6f745b305d2e59202b20313030202b2035303b5c6e202020202020202070616c6c6f745b325d203d206e657720506879736963734f626a6563742832202a2033302e302c2032202a2033302e302c2053686170652e436972636c65293b5c6e202020202020202070616c6c6f745b325d2e59203d2070616c6c6f745b315d2e59202b203530202b2033303b5c6e5c6e20202020202020204164642870616c6c6f745b305d293b204164642870616c6c6f745b315d293b204164642870616c6c6f745b325d293b227d</cs-jypeli-runner></div>
    </div>
    
    <div id="par-1021" class="paragraph">
        <p>Näkyvä lopputulos on sama lumiukko kuin aikaisemminkin. Nyt pallot ovat kuitenkin taulukkorakenteessa.</p>
    </div>
    
    <div id="par-1022" class="paragraph">
        <div id='1.k19' data-plugin='/showImage'><img height="301" src="/csimages/ohj1/luentomonistecsUusin_htm_m5634df04.png">
<p class="footer">Kuva 19: Lumiukon pallot ovat pallot-taulukon alkioita.</p>
</div>
    </div>
    
    <div id="par-1023" class="paragraph">
        <p>Nyt taulukon avulla pääsemme käsiksi yksittäisiin pallo-olioihin. Esimerkiksi keskimmäisen pallon värin muuttaminen onnistuisi seuraavasti</p>
    </div>
    
    <div id="par-1024" class="paragraph">
        <div id='1.pallottaulukkoon2' data-plugin='/csPlugin'><cs-jypeli-runner>xxxHEXJSONxxx7b227265706c616365223a2022494e5345525420594f555220434f44452048455245222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f4a7970656c692f506f686a61322e6373222c202274797065223a20226a7970656c69222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022494e5345525420594f55522046554e4354494f4e532048455245222c20227265706c61636532223a2022494e5345525420494e495449414c495a4154494f4e222c20227461736b4944223a2022312e70616c6c6f747461756c756b6b6f6f6e32222c20226279436f646532223a20222f2f5c6e20202020202020202f2f204c69735c7530306534745c75303065345c75303065346e2070616c6c6f74207461756c756b6b6f6f6e2c206a612073697474656e206c69735c7530306534745c75303065345c75303065346e206b656e745c75303065346c6c655c6e2020202020202020506879736963734f626a6563745b5d2070616c6c6f74203d206e657720506879736963734f626a6563745b335d3b5c6e202020202020202070616c6c6f745b305d203d206e657720506879736963734f626a6563742832202a203130302e302c2032202a203130302e302c2053686170652e436972636c65293b5c6e202020202020202070616c6c6f745b305d2e59203d204c6576656c2e426f74746f6d202b203230302e303b5c6e202020202020202070616c6c6f745b315d203d206e657720506879736963734f626a6563742832202a2035302e302c2032202a2035302e302c2053686170652e436972636c65293b5c6e202020202020202070616c6c6f745b315d2e59203d2070616c6c6f745b305d2e59202b20313030202b2035303b5c6e202020202020202070616c6c6f745b325d203d206e657720506879736963734f626a6563742832202a2033302e302c2032202a2033302e302c2053686170652e436972636c65293b5c6e202020202020202070616c6c6f745b325d2e59203d2070616c6c6f745b315d2e59202b203530202b2033303b5c6e5c6e20202020202020204164642870616c6c6f745b305d293b204164642870616c6c6f745b315d293b204164642870616c6c6f745b325d293b5c6e222c20226d6178726f7773223a20223230222c20226279436f6465223a2022202020202020202070616c6c6f745b315d2e436f6c6f72203d20436f6c6f722e59656c6c6f773b227d</cs-jypeli-runner></div>
    </div>
    
    <div id="par-1025" class="paragraph">
        <div id='1.pallottaulukkoon3' data-plugin='/csPlugin'><cs-jypeli-runner>xxxHEXJSONxxx7b22686561646572223a2022546568745c7530306534765c75303065342058222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022494e5345525420594f55522046554e4354494f4e532048455245222c20227374656d223a20224b6f6b65696c65206d756964656e6b696e2070616c6c6f6a656e20765c75303065347269656e207661696874616d69737461206564656c6c5c75303065342e222c20226d6178726f7773223a20223230222c20226279436f6465223a2022202020202020202070616c6c6f745b315d2e436f6c6f72203d20436f6c6f722e59656c6c6f773b222c20227265706c616365223a2022494e5345525420594f555220434f44452048455245222c202274797065223a20226a7970656c69222c20227265706c61636532223a2022494e5345525420494e495449414c495a4154494f4e222c20227461736b4944223a2022312e70616c6c6f747461756c756b6b6f6f6e33222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f4a7970656c692f506f686a61322e6373222c20226279436f646532223a20222f2f5c6e20202020202020202f2f204c69735c7530306534745c75303065345c75303065346e2070616c6c6f74207461756c756b6b6f6f6e2c206a612073697474656e206c69735c7530306534745c75303065345c75303065346e206b656e745c75303065346c6c655c6e2020202020202020506879736963734f626a6563745b5d2070616c6c6f74203d206e657720506879736963734f626a6563745b335d3b5c6e202020202020202070616c6c6f745b305d203d206e657720506879736963734f626a6563742832202a203130302e302c2032202a203130302e302c2053686170652e436972636c65293b5c6e202020202020202070616c6c6f745b305d2e59203d204c6576656c2e426f74746f6d202b203230302e303b5c6e202020202020202070616c6c6f745b315d203d206e657720506879736963734f626a6563742832202a2035302e302c2032202a2035302e302c2053686170652e436972636c65293b5c6e202020202020202070616c6c6f745b315d2e59203d2070616c6c6f745b305d2e59202b20313030202b2035303b5c6e202020202020202070616c6c6f745b325d203d206e657720506879736963734f626a6563742832202a2033302e302c2032202a2033302e302c2053686170652e436972636c65293b5c6e202020202020202070616c6c6f745b325d2e59203d2070616c6c6f745b315d2e59202b203530202b2033303b5c6e5c6e20202020202020204164642870616c6c6f745b305d293b204164642870616c6c6f745b315d293b204164642870616c6c6f745b325d293b5c6e227d</cs-jypeli-runner></div>
    </div>
    
    <div id="par-1026" class="paragraph">
        <h2 id="esimerkki-arvosana-kirjalliseksi-1">15.4 Esimerkki: arvosana kirjalliseksi</h2>
    </div>
    
    <div id="par-1027" class="paragraph">
        <p>Ehtolauseiden yhteydessä teimme switch-rakennetta käyttämällä aliohjelman, joka palautti parametrinaan saamaansa numeroarvosanaa vastaavan kirjallisen arvosanan. Tehdään nyt sama aliohjelma taulukkoa käyttämällä. Kirjalliset arvosanat voidaan nyt tallentaa String-tyyppiseen taulukkoon.</p>
    </div>
    
    <div id="par-1028" class="paragraph">
        <div id='1.kirjallinenarvosanaTaulukko' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f46756e6b74696f506f686a612e6373222c2022696e64656e74223a202230222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022494e5345525420594f55522043414c4c532048455245222c20226279436f646531223a20222f2f5c6e2020202020202020436f6e736f6c652e57726974654c696e65284b69726a616c6c696e656e4172766f73616e61283429293b202f2f204b6969746574745c7530306534765c75303065345c6e2020202020202020436f6e736f6c652e57726974654c696e65284b69726a616c6c696e656e4172766f73616e61283029293b202f2f2048796c5c75303065347474795c6e2020202020202020436f6e736f6c652e57726974654c696e65284b69726a616c6c696e656e4172766f73616e61283929293b202f2f2056697268652e2e2e222c20227461736b4944223a2022312e6b69726a616c6c696e656e6172766f73616e615461756c756b6b6f222c20227265706c616365223a2022494e5345525420594f55522046554e4354494f4e532048455245222c20226279436f6465223a2022202020202f2f2f203c73756d6d6172793e5c6e202020202f2f2f2050616c61757474616120706172616d657472696e61207361616d616e7361206e756d65726f6172766f73616e616e206b69726a616c6c6973656e612e5c6e202020202f2f2f203c2f73756d6d6172793e5c6e202020202f2f2f203c706172616d206e616d653d5c226e756d65726f5c223e74656e7474696172766f73616e61206e756d65726f6e613c2f706172616d3e5c6e202020202f2f2f203c72657475726e733e74656e7474696172766f73616e61206b69726a616c6c6973656e613c2f72657475726e733e5c6e202020207075626c69632073746174696320537472696e67204b69726a616c6c696e656e4172766f73616e6128696e74206e756d65726f295c6e202020207b5c6e2020202020202020537472696e675b5d206172766f73616e6174203d207b5c2248796c5c75303065347474795c222c205c22565c75303065346c74745c7530306534765c75303065345c222c205c22547979647974745c7530306534765c75303065345c222c205c6e2020202020202020202020202020202020202020202020202020202020205c224879765c75303065345c222c205c224b6969746574745c7530306534765c75303065345c222c205c224572696e6f6d61696e656e5c227d3b5c6e2020202020202020696620286e756d65726f203c2030207c7c206172766f73616e61742e4c656e677468203c3d206e756d65726f29205c6e20202020202020202020202072657475726e20205c225669726865656c6c696e656e2073795c75303066367465215c223b5c6e202020202020202072657475726e206172766f73616e61745b6e756d65726f5d3b5c6e202020207d227d</cs-runner></div>
    </div>
    
    <div id="par-1029" class="paragraph">
        <p>Ensimmäiseksi aliohjelmassa määritellään ja alustetaan taulukko, jossa on kaikki kirjalliset arvosanat. Taulukko määritellään niin, että taulukon indeksissä 0 on arvosanaa 0 vastaava kirjallinen arvosana, taulukon indeksissä 1 on arvosanaa 1 vastaava kirjallinen arvosana ja niin edelleen. Tällä tavalla tietty taulukon indeksi vastaa suoraan vastaavaa kirjallista arvosanaa. Kirjallisten arvosanojen hakeminen on näin todella nopeaa.</p>
    </div>
    
    <div id="par-1030" class="paragraph">
        <p>Jos vertaamme tätä tapaa switch-rakenteella toteutettuun tapaan huomaamme, että koodin määrä väheni huomattavasti. Tämä tapa on lisäksi nopeampi, sillä jos esimerkiksi hakisimme arvosanalle viisi kirjallista arvosanaa, switch-rakenteessa tehtäisiin viisi vertailuoperaatiota. Taulukkoa käyttämällä vertailuoperaatioita ei tehdä yhtään, vaan ainoastaan yksi hakuoperaatio taulukosta.</p>
    </div>
    
    <div id="par-1031" class="paragraph">
        <h2 id="moniulotteiset-taulukot">15.5 Moniulotteiset taulukot</h2>
    </div>
    
    <div id="par-1032" class="paragraph">
        <p>Taulukot voivat olla myös moniulotteisia. Kaksiulotteinen taulukko (eli matriisi) on esimerkki moniulotteisesta taulukosta, joka koostuu vähintään kahdesta samanpituisesta taulukosta. Kaksiulotteisella taulukolla voidaan esittää esimerkiksi tason tai kappaleen pinnan koordinaatteja.</p>
    </div>
    
    <div id="par-1033" class="paragraph">
        <p>Kaksiulotteinen taulukko määritellään seuraavasti:</p>
    </div>
    
    <div id="par-1034" class="paragraph">
        <pre><code>tyyppi[,] taulukonNimi;</code></pre>
    </div>
    
    <div id="par-1035" class="paragraph">
        <p>Huomaa, että määrittelyssä [,] tarkoittaa, että esitelty taulukko on kaksiulotteinen. Vastaavasti [,,] tarkoittaisi, että taulukko on kolmiulotteinen ja niin edelleen.</p>
    </div>
    
    <div id="par-1036" class="paragraph">
        <p>Moniulotteisen taulukon alkioiden määrä tulee aina ilmoittaa ennen taulukon käyttöä. Tämä tapahtuu new-operaattorilla seuraavasti:</p>
    </div>
    
    <div id="par-1037" class="paragraph">
        <pre><code>taulukonNimi = new tyyppi[rivienLukumaara, sarakkeidenLukumaara]</code></pre>
    </div>
    
    <div id="par-1038" class="paragraph">
        <p>Esimerkiksi kaksiulotteisen String-tyyppisen taulukon kurssin opiskelijoiden nimille voisi alustaa seuraavasti.</p>
    </div>
    
    <div id="par-1039" class="paragraph">
        <pre><code>String[,] kurssinOpiskelijat = new String[256, 2];</code></pre>
    </div>
    
    <div id="par-1040" class="paragraph">
        <p>Taulukkoon voisi nyt asettaa kurssilaisten nimiä seuraavasti:</p>
    </div>
    
    <div id="par-1041" class="paragraph">
        <pre><code>//ensimmäinen kurssilainen
kurssinOpiskelijat[0, 0] = "Virtanen";
kurssinOpiskelijat[0, 1] = "Ville";
//toinen kurssilainen
kurssinOpiskelijat[1, 0] = "Korhonen";
kurssinOpiskelijat[1, 1] = "Kalle";</code></pre>
    </div>
    
    <div id="par-1042" class="paragraph">
        <p>Taulukko näyttäisi nyt seuraavalta:</p>
    </div>
    
    <div id="par-1043" class="paragraph">
        <div id='1.k3' data-plugin='/showImage'><img height="175" src="/csimages/ohj1/luentomonistecsUusin_htm_m502edb07.gif">
<p class="footer">Kuva 20: kurssinOpiskelijat-taulukko.</p>
</div>
    </div>
    
    <div id="par-1044" class="paragraph">
        <p>Moniulotteiseen taulukkoon viittaaminen onnistuu vastaavasti kuin yksiulotteiseen. Ulottuvuuksien kasvaessa joudutaan vain antamaan enemmän indeksejä.</p>
    </div>
    
    <div id="par-1045" class="paragraph">
        <pre><code>// tulostaa Ville Virtanen
Console.WriteLine(kurssinOpiskelijat[0,1] + " " + kurssinOpiskelijat[0,0]); </code></pre>
    </div>
    
    <div id="par-1046" class="paragraph">
        <p>Huomaa, että yllä olevassa esimerkissä "+"- merkki ei toimi aritmeettisena operaattorina, vaan sillä yhdistetään tulostettavia merkkijonoja. C#:ssa "+"-merkkiä käytetään siis myös merkkijonojen yhdistelyyn.</p>
    </div>
    
    <div id="par-1047" class="paragraph">
        <p>Kun etunimi ja sukunimi on talletettu taulukkoon omille paikoilleen, mahdollistaa se tietojen joustavamman käsittelyn. Nyt opiskelijoiden nimet voidaan halutessa tulostaa muodossa: "etunimi sukunimi" tai muodossa, "sukunimi, etunimi" kuten alla:</p>
    </div>
    
    <div id="par-1048" class="paragraph">
        <pre><code>// tulostaa Virtanen, Ville
Console.WriteLine(kurssinOpiskelijat[0,0] + ", " + kurssinOpiskelijat[0,1]);</code></pre>
    </div>
    
    <div id="par-1049" class="paragraph">
        <p>Todellisuudessa henkilötietorekisteriä ei kuitenkaan tehdä tällä tavalla. Järkevämpää olisi tehdä Henkilo-luokka, jossa olisi kentät etunimelle ja sukunimelle ja mahdollisille muille tiedoille. Tästä luokasta luotaisiin sitten jokaiselle opiskelijalle oma olio. Tällä kurssilla ei kuitenkaan tehdä vielä omia olioluokkia.</p>
    </div>
    
    <div id="par-1050" class="paragraph">
        <p>Moniulotteinen taulukko voidaan määriteltäessä alustaa kuten yksiulotteinenkin. Määritellään ja alustetaan seuraavaksi taulukko elokuville:</p>
    </div>
    
    <div id="par-1051" class="paragraph">
        <pre><code>String[,] elokuvat =  { {"Pulp Fiction", "Toiminta", "Tarantino"     }, 
                        {"2001: Avaruusseikkailu", "Scifi", "Kubrick"},
                        {"Casablanca", "Draama", "Curtiz"            } };</code></pre>
    </div>
    
    <div id="par-1052" class="paragraph">
        <p>Yllä oleva määrittely luo 3 x 3 kokoisen taulukon:</p>
    </div>
    
    <div id="par-1053" class="paragraph">
        <div id='1.k21' data-plugin='/showImage'><img height="153" src="/csimages/ohj1/luentomonistecsUusin_htm_45faf2c8.gif">
<p class="footer">Kuva 21: Taulukon elokuvat sisältö.</p>
</div>
    </div>
    
    <div id="par-1054" class="paragraph">
        <p>Kun taulukko on luotu, sen alkioihin viitataan seuraavalla tavalla.</p>
    </div>
    
    <div id="par-1055" class="paragraph">
        <pre><code>taulukonNimi[rivi-indeksi, sarakeindeksi]</code></pre>
    </div>
    
    <div id="par-1056" class="paragraph">
        <p>Alla oleva esimerkki hahmottaa taulukon alkioihin viittaamista.</p>
    </div>
    
    <div id="par-1057" class="paragraph">
        <div id='1.elokuvattaulukossa' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a2022414c4b554f5341222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e656c6f6b757661747461756c756b6f737361222c20226279436f6465223a20222020202020202020737472696e675b2c5d20656c6f6b75766174203d20207b205c6e202020202020202020207b5c2250756c702046696374696f6e5c222c205c22546f696d696e74615c222c205c22546172616e74696e6f5c2220202020207d2c205c6e202020202020202020207b5c22323030313a20417661727575737365696b6b61696c755c222c205c2253636966695c222c205c224b75627269636b5c227d2c5c6e202020202020202020207b5c2243617361626c616e63615c222c205c22447261616d615c222c205c2243757274697a5c222020202020202020202020207d205c6e20202020202020207d3b5c6e5c6e2020202020202020436f6e736f6c652e57726974654c696e6528656c6f6b757661745b302c20305d293b20202f2f205c2250756c702046696374696f6e5c225c6e2020202020202020436f6e736f6c652e57726974654c696e65285c225479797070693a205c22202b20656c6f6b757661745b302c20315d293b202f2f205c225479797070693a2020546f696d696e74615c225c6e2020202020202020436f6e736f6c652e57726974654c696e65285c224f686a61616a613a205c22202b20656c6f6b757661745b302c20325d293b202f2f205c224f686a61616a613a20546172616e74696e6f5c22227d</cs-runner></div>
    </div>
    
    <div id="par-1058" class="paragraph">
        <div class="huomautus">
<p>Tällä tavalla jokaiselle riville tulee yhtä monta saraketta eli alkiota. Jos eri riveille halutaan eri määrä alkioita, voidaan käyttää niin sanottuja jagged array -taulukkoja. Lue lisää jagged arrayn MSDN-dokumentaatiosta osoitteesta <a href="http://msdn.microsoft.com/en-us/library/2s05feca(v=vs.80).aspx" class="uri">http://msdn.microsoft.com/en-us/library/2s05feca(v=vs.80).aspx</a>.</p>
</div>
    </div>
    
    <div id="par-1059" class="paragraph">
        <h3 id="harjoitus-6">15.5.1 Harjoitus</h3>
    </div>
    
    <div id="par-1060" class="paragraph">
        <div id='1.elokuvattaulukossa2' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c20227265706c616365223a202254554c4f53545553222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022414c4b554f5341222c20227461736b4944223a2022312e656c6f6b757661747461756c756b6f73736132222c20227374656d223a20224d6974656e2074756c6f73746174207461756c756b6f7374612043617361626c616e63613f20456e745c7530306534204b75627269636b3f222c20226279436f646531223a20222f2f5c6e2020202020202020737472696e675b2c5d20656c6f6b75766174203d20207b205c6e202020202020202020207b5c2250756c702046696374696f6e5c222c205c22546f696d696e74615c222c205c22546172616e74696e6f5c2220202020207d2c205c6e202020202020202020207b5c22323030313a20417661727575737365696b6b61696c755c222c205c2253636966695c222c205c224b75627269636b5c227d2c5c6e202020202020202020207b5c2243617361626c616e63615c222c205c22447261616d615c222c205c2243757274697a5c222020202020202020202020207d205c6e20202020202020207d3b5c6e222c20226279436f6465223a20222020202020202020436f6e736f6c652e57726974654c696e6528656c6f6b757661745b302c20305d293b20205c6e2020202020202020436f6e736f6c652e57726974654c696e65285c225479797070693a205c22202b20656c6f6b757661745b302c20315d293b5c6e2020202020202020436f6e736f6c652e57726974654c696e65285c224f686a61616a613a205c22202b20656c6f6b757661745b302c20325d293b227d</cs-runner></div>
    </div>
    
    <div id="par-1061" class="paragraph">
        <h2 id="taulukon-kopioiminen">15.6 Taulukon kopioiminen</h2>
    </div>
    
    <div id="par-1062" class="paragraph">
        <p>Myös taulukot ovat olioita. Siispä taulukkomuuttujat ovat viitemuuttujia. Tämän takia taulukon kopioiminen <em>ei</em> onnistu alla olevalla tavalla kuten alkeistietotyypeillä:</p>
    </div>
    
    <div id="par-1063" class="paragraph">
        <div id='1.taulukkoeikopioidu' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a202254554c4f53545553222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022414c4b554f5341222c20227461736b4944223a2022312e7461756c756b6b6f65696b6f70696f696475222c20226279436f6465223a20222020202020202020696e745b5d207461756c756b6b6f31203d207b312c20322c20332c20342c20357d3b5c6e2020202020202020696e745b5d207461756c756b6b6f32203d207461756c756b6b6f313b5c6e202020205c6e20202020202020207461756c756b6b6f325b305d203d2031303b5c6e2020202020202020436f6e736f6c652e57726974654c696e65287461756c756b6b6f315b305d293b202f2f74756c6f73746161203130227d</cs-runner></div>
    </div>
    
    <div id="par-1064" class="paragraph">
        <p>Yllä olevassa esimerkissä sekä taulukko1, että taulukko2 ovat olioviitteitä ja viittaavat nyt samaan taulukkoon.</p>
    </div>
    
    <div id="par-1065" class="paragraph">
        <p>Taulukon kopioiminen onnistuu muun muassa Clone-metodilla.</p>
    </div>
    
    <div id="par-1066" class="paragraph">
        <div id='1.taulukkoclone' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a202254554c4f53545553222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022414c4b554f5341222c20227461736b4944223a2022312e7461756c756b6b6f636c6f6e65222c20226279436f6465223a20222020202020202020696e745b5d207461756c756b6b6f31203d207b312c20322c20332c20342c20357d3b5c6e20202020202020202f2f20436c6f6e652d6d65746f6469206c756f206964656e74746973656e206b6f70696f6e207461756c756b6f7374615c6e2020202020202020696e745b5d206b6f70696f5f7461756c756b6f737461203d2028696e745b5d297461756c756b6b6f312e436c6f6e6528293b5c6e202020205c6e20202020202020206b6f70696f5f7461756c756b6f7374615b305d203d20333b5c6e2020202020202020436f6e736f6c652e57726974654c696e65287461756c756b6b6f315b305d293b202f2f74756c6f7374616120315c6e2020202020202020436f6e736f6c652e57726974654c696e65286b6f70696f5f7461756c756b6f7374615b305d293b202f2f2033227d</cs-runner></div>
    </div>
    
    <div id="par-1067" class="paragraph">
        <p>Huomaa, että sijoituksessa vaaditaan ns. tyyppimuunnos: ennen <code>taulukko1.Clone</code>-lausetta kirjoitetaan <code>(int[])</code>, sulkujen kanssa, joka muuttaa <code>Clone</code>-metodin palauttaman "yleisen" Object-olion kokonaislukutaulukoksi.</p>
    </div>
    
    <div id="par-1068" class="paragraph">
        <p>Nyt meillä olisi identtinen kopio taulukosta, jonka muuttaminen ei siis vaikuta alkuperäiseen taulukkoon.</p>
    </div>
    
    <div id="par-1069" class="paragraph">
        <h2 id="esimerkki-moniulotteiset-taulukot-käytännössä">15.7 Esimerkki: Moniulotteiset taulukot käytännössä</h2>
    </div>
    
    <div id="par-1070" class="paragraph">
        <p>Kaksiulotteisia taulukoita kutsutaan yleisesti matriiseiksi, ja ne ovat käytössä erityisesti matemaattisissa sovelluksissa kuvaten lineaarifunktioita. Muitakin käyttökohteita matriiseilla kuitenkin on. Esimerkiksi laivanupotuspelin pelikenttä voidaan ajatella 2-ulotteiseksi taulukoksi.</p>
    </div>
    
    <div id="par-1071" class="paragraph">
        <div id='1.laivanupotus' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227461736b4944223a2022312e6c616976616e75706f747573222c2022757365725f6964223a2022766573616c222c20226279436f6465223a20227573696e672053797374656d3b5c6e5c6e2f2f2f2040617574686f722020416e7474692d4a75737369204c616b616e656e5c6e2f2f2f204076657273696f6e2032322e382e323031325c6e2f2f2f5c6e2f2f2f203c73756d6d6172793e5c6e2f2f2f204d6f6e69756c6f74746569736574207461756c756b6f74206b5c753030653479745c75303065346e6e5c753030663673735c75303065342e5c6e2f2f2f203c2f73756d6d6172793e5c6e7075626c696320636c617373204c616976616e75706f7475735c6e7b5c6e20202f2f2f203c73756d6d6172793e5c6e20202f2f2f205461756c756b6f6e20616c7573747573206a612074756c6f737475732e5c6e20202f2f2f203c2f73756d6d6172793e5c6e20207075626c69632073746174696320766f6964204d61696e28295c6e20207b5c6e20202020696e745b2c5d20727575647574203d207b207b20312c20302c2032207d2c207b20302c20302c2033207d207d3b5c6e20202020436f6e736f6c652e57726974654c696e65287275756475745b302c20305d202b205c22205c22202b207275756475745b302c20315d202b205c22205c22202b207275756475745b302c20325d293b5c6e20202020436f6e736f6c652e57726974654c696e65287275756475745b312c20305d202b205c22205c22202b207275756475745b312c20315d202b205c22205c22202b207275756475745b312c20325d293b5c6e202020202f2f2054756c6f737461613a5c6e202020202f2f2031203020325c6e202020202f2f2030203020335c6e20207d205c6e7d227d</cs-runner></div>
    </div>
    
    <div id="par-1072" class="paragraph">
        <p>Vaikka ruudukko oli vielä aika pieni (2 riviä x 3 saraketta), on alkioiden tulostaminen melko työlästä. Esimerkiksi jo 20 x 20 kokoisen taulukon tulostaminen pelkkiä tulostuslauseita peräkkäin laittamalla olisi jo kohtuuttoman iso työ.</p>
    </div>
    
    <div id="par-1073" class="paragraph">
        <p>Edelleen, yhtenä toiveena voisi olla, että löytäisimme "ruudukosta" rivin, jolla tyhjiä paikkoja on eniten. Tämä tieto voisi auttaa meitä asemoimaan uuden laivan oikein. Mielivaltaiselle ruudukolle tämä ei vielä meidän tiedoillamme onnistu.</p>
    </div>
    
    <div id="par-1074" class="paragraph">
        <p>Näihin tehtäviin tarvitsemme toistorakenteita, jotka esitellään seuraavassa luvussa.</p>
    </div>
    
    <div id="par-1075" class="paragraph">
        <h2 id="taulukoiden-täydennykset-wikissä">15.8 Taulukoiden täydennykset wikissä</h2>
    </div>
    
    <div id="par-1076" class="paragraph">
        <p>Lisätietoja 1- ja 2-ulotteisista taulukoista löydät kurssin wiki-sivuston monisteen täydennyksistä. Lue myös nuo materiaalit läpi (kuuluvat tenttialueeseen).</p>
    </div>
    
    <div id="par-1077" class="paragraph">
        <p><a href="https://trac.cc.jyu.fi/projects/ohj1/wiki/taulukot" class="uri">https://trac.cc.jyu.fi/projects/ohj1/wiki/taulukot</a> (1-ulotteiset taulukot)</p>
    </div>
    
    <div id="par-1078" class="paragraph">
        <p><a href="https://trac.cc.jyu.fi/projects/ohj1/wiki/taulukot2D" class="uri">https://trac.cc.jyu.fi/projects/ohj1/wiki/taulukot2D</a> (2-ulotteiset taulukot)</p>
    </div>
    
    <div id="par-1079" class="paragraph">
        <h1 id="toistorakenteet-silmukat">16. Toistorakenteet (silmukat)</h1>
    </div>
    
    <div id="par-1080" class="paragraph">
        <p>Ohjelmoinnissa tulee usein tilanteita, joissa samaa tai lähes samaa asiaa täytyy toistaa ohjelmassa useampia kertoja. Varsinkin taulukoiden käsittelyssä tällainen asia tulee usein eteen. Jos haluaisimme esimerkiksi tulostaa kaikki edellisessä luvussa tekemämme kuukausienPaivienLkm-taulukon luvut, onnistuisi se tietenkin seuraavasti:</p>
    </div>
    
    <div id="par-1081" class="paragraph">
        <div id='1.kuukausientulostustyhma' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c20227265706c616365223a202254554c4f53545553222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022414c4b554f5341222c20227461736b4944223a2022312e6b75756b61757369656e74756c6f737475737479686d61222c20226279436f646531223a20222f2f5c6e2020202020202020696e745b5d206b75756b61757369656e5061697669656e4c6b6d203d207b33312c2032382c2033312c2033302c2033312c2033302c205c6e202020202020202020202020202020202020202020202020202020202020202020202020202033312c2033312c2033302c2033312c2033302c2033317d3b5c6e222c20226279436f6465223a20222020202020202020436f6e736f6c652e57726974654c696e65286b75756b61757369656e5061697669656e4c6b6d5b305d293b5c6e2020202020202020436f6e736f6c652e57726974654c696e65286b75756b61757369656e5061697669656e4c6b6d5b315d293b5c6e2020202020202020436f6e736f6c652e57726974654c696e65286b75756b61757369656e5061697669656e4c6b6d5b325d293b5c6e2020202020202020436f6e736f6c652e57726974654c696e65286b75756b61757369656e5061697669656e4c6b6d5b335d293b5c6e2020202020202020436f6e736f6c652e57726974654c696e65286b75756b61757369656e5061697669656e4c6b6d5b345d293b5c6e2020202020202020436f6e736f6c652e57726974654c696e65286b75756b61757369656e5061697669656e4c6b6d5b355d293b5c6e2020202020202020436f6e736f6c652e57726974654c696e65286b75756b61757369656e5061697669656e4c6b6d5b365d293b5c6e2020202020202020436f6e736f6c652e57726974654c696e65286b75756b61757369656e5061697669656e4c6b6d5b375d293b5c6e2020202020202020436f6e736f6c652e57726974654c696e65286b75756b61757369656e5061697669656e4c6b6d5b385d293b5c6e2020202020202020436f6e736f6c652e57726974654c696e65286b75756b61757369656e5061697669656e4c6b6d5b395d293b5c6e2020202020202020436f6e736f6c652e57726974654c696e65286b75756b61757369656e5061697669656e4c6b6d5b31305d293b5c6e2020202020202020436f6e736f6c652e57726974654c696e65286b75756b61757369656e5061697669656e4c6b6d5b31315d293b227d</cs-runner></div>
    </div>
    
    <div id="par-1082" class="paragraph">
        <p>Tuntuu kuitenkin tyhmältä toistaa lähes samanlaista koodia useaan kertaan. Tällöin on järkevämpää käyttää jotain toistorakennetta. Toistorakenteet soveltuvat erinomaisesti taulukoiden käsittelyyn, mutta niistä on myös moniin muihin tarkoituksiin. Toistorakenteista käytetään usein myös nimitystä <em>silmukat</em> (loop).</p>
    </div>
    
    <div id="par-1083" class="paragraph">
        <p>Tämä luku on pitkä ja sisältää runsaasti esimerkkejä. Toistorakenteiden hallinta on kuitenkin hyvin tärkeää ohjelmoinnin opettelun alkuvaiheilla.</p>
    </div>
    
    <div id="par-1084" class="paragraph">
        <h2 id="syö-niin-kauan-kuin-puuroa-on-lautasella">16.1 "Syö niin kauan, kuin puuroa on lautasella"</h2>
    </div>
    
    <div id="par-1085" class="paragraph">
        <p>Ideana toistorakenteissa on, että toistamme tiettyä asiaa niin kauan kuin joku ehto on voimassa. Esimerkki ihmiselle suunnatusta toistorakenteesta aamupuuron syöntiin.</p>
    </div>
    
    <div id="par-1086" class="paragraph">
        <pre><code>Syö aamupuuroa niin kauan, kuin puuroa on lautasella.</code></pre>
    </div>
    
    <div id="par-1087" class="paragraph">
        <p>Yllä olevassa esimerkissä on kaikki toistorakenteeseen vaadittavat elementit. Toimenpiteet mitä tehdään: "Syö aamupuuroa.", sekä ehto kuinka toistetaan: "niin kauan kuin puuroa on lautasella". Toinen esimerkki toistorakenteesta voisi olla seuraava:</p>
    </div>
    
    <div id="par-1088" class="paragraph">
        <pre><code>Tulosta kuukausienPaivienLkm-taulukon kaikki luvut.</code></pre>
    </div>
    
    <div id="par-1089" class="paragraph">
        <p>Myös yllä oleva lause sisältää toistorakenteen elementit, vaikka ne onkin hieman vaikeampi tunnistaa. Toimenpiteenä tulostetaan kuukausienPaivienLkm-taulukon lukuja ja ehdoksi voisi muotoilla: "kunnes kaikki luvut on tulostettu". Lauseen voisikin muuttaa muotoon:</p>
    </div>
    
    <div id="par-1090" class="paragraph">
        <pre><code>Tulosta kuukausienPaivienLkm-taulukon lukuja, kunnes kaikki luvut on tulostettu.</code></pre>
    </div>
    
    <div id="par-1091" class="paragraph">
        <p>C#:ssa on neljän tyyppisiä toistorakenteita:</p>
    </div>
    
    <div id="par-1092" class="paragraph">
        <ul>
<li><p>for</p></li>
<li><p>while</p></li>
<li><p>do-while</p></li>
<li><p>foreach</p></li>
</ul>
    </div>
    
    <div id="par-1093" class="paragraph">
        <p>On tilanteita, joissa voimme vapaasti valita näistä minkä tahansa, mutta useimmiten toistorakenteen valinnan kanssa täytyy olla tarkkana. Jokaisella näistä on tietyt ominaispiirteensä, eivätkä kaikki toistorakenteet sovi kaikkiin mahdollisiin tilanteisiin.</p>
    </div>
    
    <div id="par-1094" class="paragraph">
        <h2 id="while-silmukka">16.2 while-silmukka</h2>
    </div>
    
    <div id="par-1095" class="paragraph">
        <p>while-silmukka on yleisessä muodossa seuraava:</p>
    </div>
    
    <div id="par-1096" class="paragraph">
        <pre><code>while (ehto) lause;</code></pre>
    </div>
    
    <div id="par-1097" class="paragraph">
        <p>Kuten ehtolauseissa, täytyy ehdon taas olla jokin lauseke, joka saa joko arvon true tai false. Ehdon jälkeen voi yksittäisen lauseen sijaan olla myös lohko.</p>
    </div>
    
    <div id="par-1098" class="paragraph">
        <pre><code>while (ehto) 
{
  lause1;
  lause2;
  lauseX;
}</code></pre>
    </div>
    
    <div id="par-1099" class="paragraph">
        <p>Silmukan lauseita toistetaan niin kauan, kuin ehto on voimassa, eli sen arvo on true. Ehto tarkastetaan aina ennen kuin siirrytään seuraavalle kierrokselle. Jos ehto saa siis heti alussa arvon false, ei lauseita suoriteta kertaakaan.</p>
    </div>
    
    <div id="par-1100" class="paragraph">
        <h3 id="huomautus-ikuinen-silmukka">16.2.1 Huomautus: ikuinen silmukka</h3>
    </div>
    
    <div id="par-1101" class="paragraph">
        <p>Huomaa, että jos while-silmukan ehto on aina true, on kyseessä <em>ikuinen silmukka</em> (infinite loop). Ikuinen silmukka on nimensä mukaisesti silmukka, joka ei pääty koskaan. Ikuinen silmukka johtuu siitä, että silmukan ehto ei saa koskaan arvoa false. Useimmiten ikuinen silmukka on ohjelmointivirhe, mutta joskus (hallitun) ikuisen silmukan tekeminen on perusteltua. Tällöin silmukasta kuitenkin poistutaan (ennemmin tai myöhemmin) break-lauseen avulla. Tällöinhän silmukka ei oikeastaan ole ikuinen, vaikka tällaisesta silmukasta sitä nimitystä usein käytetäänkin. break-lauseesta puhutaan tässä luvussa myöhemmin kohdassa 16.8.1.</p>
    </div>
    
    <div id="par-1102" class="paragraph">
        <p>Ikuinen silmukka on mahdollista tehdä myös muilla toistorakenteilla.</p>
    </div>
    
    <div id="par-1103" class="paragraph">
        <h3 id="while-silmukka-vuokaaviona">16.2.2 While-silmukka vuokaaviona</h3>
    </div>
    
    <div id="par-1104" class="paragraph">
        <div id='1.k22' data-plugin='/showImage'><img height="256" src="/csimages/ohj1/luentomonistecsUusin_htm_m38354e6c.gif">
<p class="footer">Kuva 22: while-silmukka vuokaaviona.</p>
</div>
    </div>
    
    <div id="par-1105" class="paragraph">
        <h3 id="esimerkki-taulukon-tulostaminen">16.2.3 Esimerkki: Taulukon tulostaminen</h3>
    </div>
    
    <div id="par-1106" class="paragraph">
        <p>Tehdään aliohjelma joka tulostaa int-tyyppisen yksiulotteisen taulukon sisällön.</p>
    </div>
    
    <div id="par-1107" class="paragraph">
        <div id='1.tulostataulukkowhile' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227461736b4944223a2022312e74756c6f7374617461756c756b6b6f7768696c65222c2022757365725f6964223a2022766573616c222c20226279436f6465223a20227573696e672053797374656d3b5c6e7075626c696320636c6173732053696c6d756b6174205c6e7b202020205c6e20202f2f2f203c73756d6d6172793e5c6e20202f2f2f2054756c6f7374616120696e742d74797970706973656e207461756c756b6f6e207369735c75303065346c6c5c75303066366e2e5c6e20202f2f2f203c2f73756d6d6172793e5c6e20202f2f2f203c706172616d206e616d653d5c227461756c756b6b6f5c223e54756c6f7374657474617661207461756c756b6b6f3c2f706172616d3e5c6e20207075626c69632073746174696320766f69642054756c6f7374615461756c756b6b6f28696e745b5d207461756c756b6b6f29205c6e20207b5c6e20202020696e742069203d20303b5c6e202020207768696c65202869203c207461756c756b6b6f2e4c656e677468297b5c6e202020202020436f6e736f6c652e5772697465287461756c756b6b6f5b695d202b205c22205c22293b5c6e202020202020692b2b3b5c6e202020207d5c6e20202020436f6e736f6c652e57726974654c696e6528293b5c6e20207d5c6e20205c6e20202f2f2f203c73756d6d6172793e5c6e20202f2f2f20505c75303065345c75303065346f686a656c6d612e5c6e20202f2f2f203c2f73756d6d6172793e5c6e20207075626c69632073746174696320766f6964204d61696e2829205c6e20207b5c6e20202020696e745b5d206b75756b61757369656e5061697669656e4c6b6d203d205c6e2020202020207b33312c2032382c2033312c2033302c2033312c2033302c2033312c2033312c2033302c2033312c2033302c2033317d3b5c6e2020202054756c6f7374615461756c756b6b6f286b75756b61757369656e5061697669656e4c6b6d293b5c6e20202020436f6e736f6c652e526561644b657928293b5c6e20207d5c6e7d227d</cs-runner></div>
    </div>
    
    <div id="par-1108" class="paragraph">
        <p>Tarkastellaan TulostaTaulukko-aliohjelman sisältöä hieman tarkemmin.</p>
    </div>
    
    <div id="par-1109" class="paragraph">
        <pre><code>int i = 0;</code></pre>
    </div>
    
    <div id="par-1110" class="paragraph">
        <p>Tässä luodaan uusi muuttuja, jolla kontrolloidaan, mitä taulukon alkioita ollaan tulostamassa. Lisäksi sen avulla selvitetään, milloin taulukon kaikki alkiot on tulostettu ruudulle. Muuttuja alustetaan arvoon 0, sillä taulukon ensimmäinen alkio on aina indeksissä 0. Muuttujalle annetaan nimeksi i. Useimmiten pelkät kirjaimet ovat huonoja muuttujan nimiä, koska ne kuvaavat muuttujaa huonosti. Silmukoissa kuitenkin nimi i on vakiinnuttanut asemansa kontrolloimassa silmukoiden kierroksia, joten sitä voidaan hyvällä omallatunnolla käyttää.</p>
    </div>
    
    <div id="par-1111" class="paragraph">
        <pre><code>while (i &lt; taulukko.Length)</code></pre>
    </div>
    
    <div id="par-1112" class="paragraph">
        <p>Aliohjelman toisella rivillä aloitetaan while-silmukka. Ehtona on, että (silmukkaa suoritetaan niin kauan, kuin) muuttujan i arvo on <em>pienempi</em> kuin taulukon pituus. Taulukon pituus saadaan aina selville kirjoittamalla nimen perään .Length. Huomionarvoinen seikka on, että Length-sanan perään ei tule sulkuja, sillä se ei ole metodi vaan attribuutti.</p>
    </div>
    
    <div id="par-1113" class="paragraph">
        <pre><code>Console.Write(taulukko[i] + " ");</code></pre>
    </div>
    
    <div id="par-1114" class="paragraph">
        <p>Ensimmäisessä silmukan lauseessa tulostetaan taulukon alkio indeksissä i. Perään tulostetaan välilyönti erottamaan eri alkiot toisistaan. Console.WriteLine-metodin sijaan käytämme nyt toista Console-luokan metodia. Console.Write-metodi ei tulosta perään rivinvaihtoa, joten sillä voidaan tulostaa taulukon alkiot peräkkäin.</p>
    </div>
    
    <div id="par-1115" class="paragraph">
        <pre><code>i++;</code></pre>
    </div>
    
    <div id="par-1116" class="paragraph">
        <p>Silmukan viimeinen lause kasvattaa muuttujan iarvoa yhdellä. Ilman tätä lausetta saisimme aikaan ikuisen silmukan, sillä indeksin arvo olisi koko ajan 0ja silmukan ehto olisi aina tosi. Lisäksi metodi tulostaisi koko ajan taulukon ensimmäistä alkioita. Indeksimuuttujan hallintaan liittyvät virheet ovat tyypillisiä aloittelevan (ja pidemmällekin edistyneen) ohjelmoijan virheitä. Ongelmalliseksi virheen tekee se, ettei se ole syntaksivirhe, jolloin esimerkiksi Visual Studio ei anna tilanteesta virheilmoitusta.</p>
    </div>
    
    <div id="par-1117" class="paragraph">
        <p>while-silmukkaa tulisi käyttää silloin, kun meillä ei ole tarkkaa tietoa silmukan suorituskierrosten lukumäärästä. Koska taulukon koko on tarkalleen tiedossa taulukon luomisen jälkeen, olisi läpikäyminen käytännössä järkevämpää ja tehdä for-silmukalla, missä vaara ikuisen silmukan syntymiseen on pienempi. Myöhemmin löytyy järkevämpää käyttöä while-silmukalle.</p>
    </div>
    
    <div id="par-1118" class="paragraph">
        <h3 id="esimerkki-monta-palloa">16.2.4 Esimerkki: Monta palloa</h3>
    </div>
    
    <div id="par-1119" class="paragraph">
        <p>Tehdään aliohjelma, joka luo halutun kokoisen pallon haluttuun paikkaan, ja vielä haluamalla värillä. Main-metodi on jätetty listauksesta pois.</p>
    </div>
    
    <div id="par-1120" class="paragraph">
        <div id='1.montapalloa' data-plugin='/csPlugin'><cs-jypeli-runner>xxxHEXJSONxxx7b227461736b4944223a2022312e6d6f6e746170616c6c6f61222c202274797065223a20226a7970656c69222c2022757365725f6964223a2022766573616c222c20226279436f6465223a20227573696e672053797374656d3b5c6e7573696e67204a7970656c693b5c6e5c6e2f2f2f203c73756d6d6172793e5c6e2f2f2f2050616c6a6f6e2070616c6c6f6a612074697070757520616c6173705c7530306534696e2e5c6e2f2f2f203c2f73756d6d6172793e5c6e7075626c696320636c6173732050656c69203a205068797369637347616d655c6e7b5c6e202020202f2f2f203c73756d6d6172793e5c6e202020202f2f2f2052757564756c6c61206e5c75303065346b79765c7530306534207369735c75303065346c745c75303066362e5c6e202020202f2f2f203c2f73756d6d6172793e5c6e202020207075626c6963206f7665727269646520766f696420426567696e28295c6e202020207b5c6e20202020202020204c6576656c2e437265617465426f726465727328293b5c6e202020202020202047726176697479203d206e657720566563746f7228302c202d353030293b205c6e202020202020202043616d6572612e5a6f6f6d546f4c6576656c28293b5c6e5c6e5c6e2020202020202020696e742069203d20303b5c6e20202020202020207768696c65202869203c20313030295c6e20202020202020207b5c6e202020202020202020202020696e742073616465203d2052616e646f6d47656e2e4e657874496e7428352c203230293b5c6e202020202020202020202020646f75626c652078203d2052616e646f6d47656e2e4e657874446f75626c65284c6576656c2e4c656674202b20736164652c204c6576656c2e5269676874202d2073616465293b5c6e202020202020202020202020646f75626c652079203d2052616e646f6d47656e2e4e657874446f75626c65284c6576656c2e426f74746f6d202b20736164652c204c6576656c2e546f70202d2073616465293b5c6e202020202020202020202020436f6c6f722076617269203d2052616e646f6d47656e2e4e657874436f6c6f7228293b5c6e202020202020202020202020506879736963734f626a6563742070616c6c6f203d204c756f50616c6c6f28782c20792c20766172692c2073616465293b5c6e2020202020202020202020204164642870616c6c6f293b5c6e202020202020202020202020692b2b3b5c6e20202020202020207d5c6e202020207d5c6e5c6e202020202f2f2f203c73756d6d6172793e5c6e202020202f2f2f204c756f20796b736974745c75303065346973656e2070616c6c6f6e206a612070616c6175747461612073656e2e5c6e202020202f2f2f203c2f73756d6d6172793e5c6e202020202f2f2f203c706172616d206e616d653d5c22785c223e50616c6c6f6e206b7020782d6b6f6f7264696e61617474693c2f706172616d3e5c6e202020202f2f2f203c706172616d206e616d653d5c22795c223e50616c6c6f6e206b7020792d6b6f6f7264696e61617474693c2f706172616d3e5c6e202020202f2f2f203c706172616d206e616d653d5c22766172695c223e50616c6c6f6e20765c753030653472693c2f706172616d3e5c6e202020202f2f2f203c706172616d206e616d653d5c22736164655c223e50616c6c6f6e20735c753030653464653c2f706172616d3e5c6e202020207075626c69632073746174696320506879736963734f626a656374204c756f50616c6c6f28646f75626c6520782c20646f75626c6520792c20436f6c6f7220766172692c20646f75626c652073616465295c6e202020207b5c6e2020202020202020506879736963734f626a6563742070616c6c6f203d206e657720506879736963734f626a6563742832202a20736164652c2032202a20736164652c2053686170652e436972636c65293b5c6e202020202020202070616c6c6f2e436f6c6f72203d20766172693b5c6e202020202020202070616c6c6f2e58203d20783b5c6e202020202020202070616c6c6f2e59203d20793b5c6e202020202020202072657475726e2070616c6c6f3b5c6e202020207d5c6e7d227d</cs-jypeli-runner></div>
    </div>
    
    <div id="par-1121" class="paragraph">
        <p>Ajettaessa koodin tulisi piirtää ruudulle sata palloa, jotka putoavat alaspäin kohti kentän reunaa. Katso seuraava kuva.</p>
    </div>
    
    <div id="par-1122" class="paragraph">
        <div id='1.k23' data-plugin='/showImage'><img height="275" src="/csimages/ohj1/luentomonistecsUusin_htm_373fc74f.png">
<p class="footer">Kuva 23: Pallot tippuu.</p>
</div>
    </div>
    
    <div id="par-1123" class="paragraph">
        <p>Tutkitaan tarkemmin LuoPallo-aliohjelmaa Aliohjelma palauttaa PhysicsObject-olion, siis paluuarvon tyyppinä on luonnnollisesti PhysicsObject. Parametreja ovat</p>
    </div>
    
    <div id="par-1124" class="paragraph">
        <pre><code>double x, double y, Color vari, double sade</code></pre>
    </div>
    
    <div id="par-1125" class="paragraph">
        <p>siis pallon keskipisteen x- ja y-koordinaatit, väri ja säde.</p>
    </div>
    
    <div id="par-1126" class="paragraph">
        <p>Huomaa, että <code>LuoPallo</code> on tässä funktioaliohjelma, joka ei tee ohjelmassa mitään "näkyvää". Se vain luo pallon, kuten nimikin kertoo, mutta ei lisää sitä ruudulle. Tästä syystä ei tarvita myöskään <code>Game</code>-parametria, joka <code>Lumiukko</code>-esimerkissä aikanaan tarvittiin. Sen sijaan lisääminen tehdään <code>Begin</code>-aliohjelmassa. Yleisesti ottaen aliohjelmissa ei pidä tehdä enempää kuin mitä dokumentaatiossa kerrotaan - jopa aliohjelman nimestä pitäisi kaikkein tärkein selvitä.</p>
    </div>
    
    <div id="par-1127" class="paragraph">
        <p>Jos haluttaisiin, että tämä kyseinen aliohjelma myös lisää pallon ruutuun, tulisi se nimetä jotenkin muuten, esimerkiksi <code>LisaaPallo</code> olisi loogisempi vaihtoehto. Silloin palloa ei palautettaisi kysyjälle ja paluuarvon tyypiksi tulisi void.</p>
    </div>
    
    <div id="par-1128" class="paragraph">
        <p>Siirrytään sitten takaisin <code>Begin</code>-aliohjelmaan.</p>
    </div>
    
    <div id="par-1129" class="paragraph">
        <pre><code>int i = 0;
while (i &lt; 100)</code></pre>
    </div>
    
    <div id="par-1130" class="paragraph">
        <p>Tässä alustetaan <code>int</code>-tyyppinen indeksi <code>i</code> nollaksi ja määritetään <code>while</code>-sanan jälkeen sulkujen sisään ehto jonka perusteella silmukassa etenemistä jatketaan. Aaltosulut on jätetty listauksesta tarkoituksellisesti pois.</p>
    </div>
    
    <div id="par-1131" class="paragraph">
        <pre><code>int sade = RandomGen.NextInt(5, 20);
double x = RandomGen.NextDouble(Level.Left + sade, Level.Right - sade);
double y = RandomGen.NextDouble(Level.Bottom + sade, Level.Top - sade);
Color vari = RandomGen.NextColor();
PhysicsObject pallo = LuoPallo(x, y, vari, sade);
Add(pallo);
i++;</code></pre>
    </div>
    
    <div id="par-1132" class="paragraph">
        <p>Silmukassa arvotaan ensin kunkin pallon säde RandomGen-luokan satunnaislukugeneraattorilla. Ensimmäisenä parametrina NextInt-aliohjelmalle annetaan pienin mahdollinen arvottava luku, toisena parametrina luku, jota pienempi arvottavan luvun tulee olla. Toisin sanoen, luvut tulevat olemaan välillä 5-19. Samoin arvotaan double-tyyppiset koordinaatit sekä Color-tyyppinen väri.</p>
    </div>
    
    <div id="par-1133" class="paragraph">
        <p>Tämän jälkeen luodaan normaalisti PhysicsObject-fysiikkaolio, ja annetaan LuoPallo-aliohjelmalle parametrina juuri tekemämme muuttujat, joka sitten palauttaa haluamamme pallon. Pallo lisätään kentälle Add-metodin avulla.</p>
    </div>
    
    <div id="par-1134" class="paragraph">
        <pre><code>i++;</code></pre>
    </div>
    
    <div id="par-1135" class="paragraph">
        <p>Silmukan jokaisen "kierroksen" jälkeen indeksin arvoa on lisättävä yhdellä, ettemme joutuisi ikuiseen silmukkaan.</p>
    </div>
    
    <div id="par-1136" class="paragraph">
        <h2 id="do-while-silmukka">16.3 do-while-silmukka</h2>
    </div>
    
    <div id="par-1137" class="paragraph">
        <p>do-while-silmukka eroaa while-silmukasta siinä, että do-while-silmukassa ilmoitetaan ensiksi lauseet (mitä tehdään) ja vasta sen jälkeen ehto (kauanko tehdään). Tämän takia do-while -silmukka suoritetaankin joka kerta <em>vähintään</em> yhden kerran. Yleisessä muodossa do-while -silmukka on seuraavanlainen:</p>
    </div>
    
    <div id="par-1138" class="paragraph">
        <pre><code>do 
{
  lause1;
  lause2;
  (...)
  lauseN;
} while (ehto);</code></pre>
    </div>
    
    <div id="par-1139" class="paragraph">
        <p>Vuokaaviona do-while -silmukan voisi esittää seuraavasti:</p>
    </div>
    
    <div id="par-1140" class="paragraph">
        <div id='1.k24' data-plugin='/showImage'><img height="259" src="/csimages/ohj1/luentomonistecsUusin_htm_m6406473.gif">
<p class="footer">Kuva 24: do-while-silmukka vuokaaviona.</p>
</div>
    </div>
    
    <div id="par-1141" class="paragraph">
        <h3 id="esimerkki-nimen-kysyminen-käyttäjältä">16.3.1 Esimerkki: nimen kysyminen käyttäjältä</h3>
    </div>
    
    <div id="par-1142" class="paragraph">
        <p>Seuraavassa esimerkissä käyttäjää pyydetään syöttämään merkkijono Jos käyttäjä antaa tyhjän jonon, kysytään nimeä uudestaan. Tätä toistetaan niin kauan, kunnes käyttäjä antaa jotain muuta kuin tyhjän jonon.</p>
    </div>
    
    <div id="par-1143" class="paragraph">
        <pre><code>using System;

/// &lt;summary&gt;
/// Harjoitellaan do-while-silmukan käyttöä.
/// &lt;/summary&gt;
public class NimenTulostus
{
    /// &lt;summary&gt;
    /// Pyydetään käyttäjältä syöte ja tulostellaan.
    /// &lt;/summary&gt;
    public static void Main()
    {
        String nimi;
        do
        {
            Console.Write("Anna nimi &gt; ");
            nimi = Console.ReadLine();
        } while (nimi.Length == 0);
        Console.WriteLine("Hei, " + nimi + "!");
        Console.ReadKey();
    }
}</code></pre>
    </div>
    
    <div id="par-1144" class="paragraph">
        <p>Tämä kuvaa hyvin <code>do-while</code>-silmukan olemusta: nimi halutaan kysyä varmasti ainakin kerran, mutta mahdollisesti useamminkin - emme kuitenkaan voi olla varmoja kuinka monta kertaa useammin.</p>
    </div>
    
    <div id="par-1145" class="paragraph">
        <p>Todellisuudessa nimen oikeellisuuden tarkistaminen olisi tietenkin monimutkaisempaa, mutta idea <code>do-while</code>-silmukan osalta olisi täsmälleen vastaava.</p>
    </div>
    
    <div id="par-1146" class="paragraph">
        <h2 id="for-silmukka">16.4 for-silmukka</h2>
    </div>
    
    <div id="par-1147" class="paragraph">
        <p>Kun silmukan suoritusten lukumäärä on ennalta tiedossa, on järkevintä käyttää for-silmukkaa. Esimerkiksi taulukoiden käsittelyyn for-silmukka on yleensä paras vaihtoehto. Syntaksiltaan for-silmukka eroaa selvästi edellisistä. Perinteinen for-silmukka on yleisessä muodossa seuraavanlainen:</p>
    </div>
    
    <div id="par-1148" class="paragraph">
        <pre><code>for (muuttujien alustukset; ehto; silmukan lopussa tehtävät toimenpiteet)
{ 
   lauseet; // silmukan runko-osa
}</code></pre>
    </div>
    
    <div id="par-1149" class="paragraph">
        <p>Silmukan <em>kontrollilauseke</em> eli kaarisulkujen sisäpuoli sisältää kolme operaatiota, jotka on erotettu toisistaan puolipisteellä.</p>
    </div>
    
    <div id="par-1150" class="paragraph">
        <ul>
<li><p>Muuttujien alustukset: Useimmiten alustetaan vain yksi muuttuja, mutta myös useampien muuttujien alustaminen on mahdollista.</p></li>
<li><p>Ehto: Kuten muissakin silmukoissa, lauseita toistetaan niin kauan kuin ehto on voimassa.</p></li>
<li><p>Silmukan lopussa tehtävät toimenpiteet: Useimmiten muuttujan tai muuttujien arvoa kasvatetaan yhdellä, mutta myös suuremmalla määrällä kasvattaminen on mahdollista.</p></li>
</ul>
    </div>
    
    <div id="par-1151" class="paragraph">
        <p>Alla for-silmukan syntaksi graafisessa "junarataformaatissa" (ks. luku 28.2) - tosin tarkoitusta varten hieman yksinkertaistettuna.</p>
    </div>
    
    <div id="par-1152" class="paragraph">
        <div class="figure">
<img src="/csimages/ohj1/luentomonistecsUusin_htm_207ef69a.gif" alt='Kuva 25: for-silmukan syntaksi graafisessa "junaratamuodossa".'><p class="caption">Kuva 25: for-silmukan syntaksi graafisessa "junaratamuodossa".</p>
</div>
    </div>
    
    <div id="par-1153" class="paragraph">
        <p>Alla esimerkki yksinkertaisesta for-silmukasta. Siinä tulostetaan 10 kertaa "Hello World!" ja perääni-muuttujan sen hetkinen arvo.</p>
    </div>
    
    <div id="par-1154" class="paragraph">
        <div id='1.for10hello' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a202254554c4f53545553222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022414c4b554f5341222c20227461736b4944223a2022312e666f72313068656c6c6f222c20226279436f6465223a20222020202020202020666f722028696e742069203d20303b2069203c2031303b20692b2b29205c6e20202020202020207b5c6e202020202020202020202020436f6e736f6c652e57726974654c696e65285c2248656c6c6f20576f726c64205c22202b2069293b5c6e20202020202020207d227d</cs-runner></div>
    </div>
    
    <div id="par-1155" class="paragraph">
        <p>Kontrollilausekkeessa alustetaan aluksi muuttujan <code>i</code> arvoksi 0. Seuraavaksi ehtona on, että silmukan suoritusta jatketaan niin kauan kuin muuttujan <code>i</code> arvo on pienempää kuin luku 10. Lopuksi kontrollilausekkeessa todetaan, että muuttujan <code>i</code> arvoa kasvatetaan joka kierroksella yhdellä.</p>
    </div>
    
    <div id="par-1156" class="paragraph">
        <p>Vuokaaviona ylläolevan <code>for</code>-silmukan voisi kuvata alla olevalla tavalla.</p>
    </div>
    
    <div id="par-1157" class="paragraph">
        <div class="figure">
<img src="/csimages/ohj1/luentomonistecsUusin_htm_821ea7c.png" alt="Kuva 26: Vuokaavio for-silmukalle."><p class="caption">Kuva 26: Vuokaavio for-silmukalle.</p>
</div>
    </div>
    
    <div id="par-1158" class="paragraph">
        <p>Huomaa, että <code>i</code>-muuttujan arvo alkaa nollasta, joka tulostetaan ensimmäisenä Hello World! -tekstin jälkeen. Silmukan runko-osan suorittamisen ehtona on, että <code>i</code>-muuttujan arvon on oltava alle 10, joten kun <code>i</code> saavuttaa arvon 10 (10:n kierroksen päätteeksi), poistutaan silmukasta.</p>
    </div>
    
    <div id="par-1159" class="paragraph">
        <p>Silmukan runko-osassa ei suinkaan aina tarvitse tulostaa mitään. Otetaan esimerkki, missä luodun taulukon alkioihin sijoitetaan aina kahden edellisen alkion sisältämien lukujen summa. Ensimmäisiksi alkioden arvoksi asetetaan "manuaalisesti" luku 1.</p>
    </div>
    
    <div id="par-1160" class="paragraph">
        <div id='1.fibonacci10' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c20227265706c616365223a2022414c4b554f5341222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a202254554c4f53545553222c20227461736b4944223a2022312e6669626f6e616363693130222c20226279436f646531223a20222f2f5c6e2020202020202020436f6e736f6c652e57726974654c696e6528537472696e672e4a6f696e285c22205c222c6c7576757429293b222c20226279436f6465223a20222020202020202020696e745b5d206c75767574203d206e657720696e745b31305d3b5c6e20202020202020206c757675745b305d203d20313b5c6e20202020202020206c757675745b315d203d20313b5c6e2020205c6e2020202020202020666f722028696e742069203d20323b2069203c206c757675742e4c656e6774683b20692b2b295c6e20202020202020207b20205c6e2020202020202020202020206c757675745b695d203d206c757675745b69202d20315d202b206c757675745b69202d20325d3b5c6e20202020202020207d227d</cs-runner></div>
    </div>
    
    <div id="par-1161" class="paragraph">
        <p>Huomaa että silmukka on aloitettu indeksistä 2, jotta <code>i-2 &gt;= 0</code> ja näin jokainen indeksi on laillinen lauseessa</p>
    </div>
    
    <div id="par-1162" class="paragraph">
        <pre><code>luvut[i] = luvut[i - 1] + luvut[i - 2];</code></pre>
    </div>
    
    <div id="par-1163" class="paragraph">
        <p>Silmukan jälkeen taulukon sisältö näyttää seuraavalta.</p>
    </div>
    
    <div id="par-1164" class="paragraph">
        <pre><code>      [0] [1] [2] [3] [4] [5] [6] [7] [8] [9]
luvut  1   1   2   3   5   8   13  21  34  55</code></pre>
    </div>
    
    <div id="par-1165" class="paragraph">
        <p>Myös for-silmukalla voidaan tehdä "ikuinen" silmukka:</p>
    </div>
    
    <div id="par-1166" class="paragraph">
        <pre><code>for(;;)
{
  // "ikuisesti" suoritettavat asiat
}</code></pre>
    </div>
    
    <div id="par-1167" class="paragraph">
        <h3 id="huomautus-while-ja-for--silmukoiden-yhtäläisyydet-ja-erot">16.4.1 Huomautus: while ja for -silmukoiden yhtäläisyydet ja erot</h3>
    </div>
    
    <div id="par-1168" class="paragraph">
        <p>for- ja while-silmukkarakenteilla voidaan periaatteessa tehdä täsmälleen samat asiat. for-silmukan yleisen muodon</p>
    </div>
    
    <div id="par-1169" class="paragraph">
        <pre><code>for (muuttujien alustukset; ehto; silmukan lopussa tehtävät toimenpiteet)
{ 
   lauseet; // silmukan runko-osa
}</code></pre>
    </div>
    
    <div id="par-1170" class="paragraph">
        <p>voisi tehdä while-rakenteella seuraavasti.</p>
    </div>
    
    <div id="par-1171" class="paragraph">
        <pre><code>muuttujien alustukset;
while (ehto) 
{
  lauseet; // silmukan runko-osa
  silmukan lopussa tehtävät toimenpiteet;
}</code></pre>
    </div>
    
    <div id="par-1172" class="paragraph">
        <p><em>Mihin for-silmukkaa sitten tarvitaan?</em></p>
    </div>
    
    <div id="par-1173" class="paragraph">
        <p>For-silmukalla taulukon tulostava aliohjelma olisi seuraavanlainen:</p>
    </div>
    
    <div id="par-1174" class="paragraph">
        <div id='1.tulostataulukkofor' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61342e6373222c20227265706c616365223a202246554e4354494f4e53222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a20224d41494e222c20227265706c61636532223a20225445535453222c2022696e64656e74223a202234222c20227461736b4944223a2022312e74756c6f7374617461756c756b6b6f666f72222c20226279436f646533223a20227075626c696320636c617373204c61736b756a61222c20227265706c61636533223a2022506f686a6134222c20226279436f646531223a2022696e745b5d206b75756b61757369656e5061697669656e4c6b6d203d205c6e20207b33312c2032382c2033312c2033302c2033312c2033302c2033312c2033312c2033302c2033312c2033302c2033317d3b5c6e54756c6f7374615461756c756b6b6f286b75756b61757369656e5061697669656e4c6b6d293b5c6e436f6e736f6c652e526561644b657928293b5c6e222c20226279436f6465223a2022202020207075626c69632073746174696320766f69642054756c6f7374615461756c756b6b6f28696e745b5d207461756c756b6b6f29205c6e202020207b5c6e2020202020202020666f722028696e7420693d303b20693c7461756c756b6b6f2e4c656e6774683b20692b2b29205c6e20202020202020207b5c6e202020202020202020202020696e74206c756b75203d207461756c756b6b6f5b695d3b5c6e202020202020202020202020436f6e736f6c652e5772697465286c756b75202b205c22205c22293b5c6e20202020202020207d5c6e2020202020202020436f6e736f6c652e57726974654c696e6528293b5c6e202020207d227d</cs-runner></div>
    </div>
    
    <div id="par-1175" class="paragraph">
        <p>Nuo kolme osaa - muuttujien alustus, ehto, lopussa tehtävät toimenpiteet - ovat osia, jotka jokaisessa silmukkarakenteessa tarvítaan. for-silmukassa ne kirjoitetaan selvästi perättäin yhdelle riville, jolloin ne on helpompi saada kirjoitettua kerralla oikein. Silmukan suoritusta ohjaavat tekijät on myös helpompi lukea yhdeltä riviltä, kuin yrittää selvittää sitä eri riveiltä (silmukkahan voi olla hyvinkin monta koodiriviä pitkä). continue-lauseen osalta for- ja while-silmukat toimivat eri tavalla. while-silmukassa lisäykset voivat jäädä tekemättä continue-lauseen kanssa.</p>
    </div>
    
    <div id="par-1176" class="paragraph">
        <h3 id="esimerkki-lumiukon-pallot-keltaiseksi">16.4.2 Esimerkki: lumiukon pallot keltaiseksi</h3>
    </div>
    
    <div id="par-1177" class="paragraph">
        <p>Palataan esimerkkiin 15.3. Koska pallo-oliot ovat taulukossa, voimme käydä taulukon alkiot läpi silmukan avulla, ja muuttaa kaikkien pallojen värin toiseksi. Main-metodi on jätetty listauksesta pois. Pallojen luomiseen käytämme esimerkissä 16.2.4 esiteltyä LuoPallo-aliohjelmaa.</p>
    </div>
    
    <div id="par-1178" class="paragraph">
        <pre><code>using System;
using Jypeli;</code></pre>
    </div>
    
    <div id="par-1179" class="paragraph">
        <div id='1.pallotkeltaiseksi' data-plugin='/csPlugin'><cs-jypeli-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f4a7970656c692f506f686a61322e6373222c20227265706c616365223a2022494e5345525420594f555220434f44452048455245222c202274797065223a20226a7970656c69222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022494e5345525420594f55522046554e4354494f4e532048455245222c20227461736b4944223a2022312e70616c6c6f746b656c74616973656b7369222c20226279436f646531223a20222f2f5c6e2020202f2f2f203c73756d6d6172793e4c756f20796b736974745c75303065346973656e2070616c6c6f6e206a612070616c6175747461612073656e2e3c2f73756d6d6172793e5c6e2020202f2f2f203c706172616d206e616d653d5c22785c223e50616c6c6f6e206b7020782d6b6f6f7264696e61617474693c2f706172616d3e5c6e2020202f2f2f203c706172616d206e616d653d5c22795c223e50616c6c6f6e206b7020792d6b6f6f7264696e61617474693c2f706172616d3e5c6e2020202f2f2f203c706172616d206e616d653d5c22766172695c223e50616c6c6f6e20765c753030653472693c2f706172616d3e5c6e2020202f2f2f203c706172616d206e616d653d5c22736164655c223e50616c6c6f6e20735c753030653464653c2f706172616d3e5c6e2020207075626c69632073746174696320506879736963734f626a656374204c756f50616c6c6f28646f75626c6520782c20646f75626c6520792c20436f6c6f7220766172692c20646f75626c652073616465295c6e2020207b5c6e20202020202020506879736963734f626a6563742070616c6c6f203d206e657720506879736963734f626a6563742832202a20736164652c2032202a20736164652c2053686170652e436972636c65293b5c6e2020202020202070616c6c6f2e436f6c6f72203d20766172693b5c6e2020202020202070616c6c6f2e58203d20783b5c6e2020202020202070616c6c6f2e59203d20793b5c6e2020202020202072657475726e2070616c6c6f3b5c6e2020207d222c20226279436f6465223a202220202020202020202f2f204c69735c7530306534745c75303065345c75303065346e2070616c6c6f74207461756c756b6b6f6f6e2c206a612073697474656e206c69735c7530306534745c75303065345c75303065346e206b656e745c75303065346c6c655c6e2020202020202020506879736963734f626a6563745b5d2070616c6c6f74203d206e657720506879736963734f626a6563745b335d3b5c6e202020202020202070616c6c6f745b305d203d204c756f50616c6c6f28302c204c6576656c2e426f74746f6d202b203230302c20436f6c6f722e57686974652c20313030293b5c6e202020202020202070616c6c6f745b315d203d204c756f50616c6c6f28302c2070616c6c6f745b305d2e59202b20313030202b2035302c20436f6c6f722e57686974652c203530293b5c6e202020202020202070616c6c6f745b325d203d204c756f50616c6c6f28302c2070616c6c6f745b315d2e59202b203530202b2033302c20436f6c6f722e57686974652c203330293b5c6e20202020202020204164642870616c6c6f745b305d293b204164642870616c6c6f745b315d293b204164642870616c6c6f745b325d293b5c6e5c6e5c6e20202020202020202f2f204d757574657461616e2070616c6c6f6a656e20765c753030653472695c6e2020202020202020666f722028696e742069203d20303b2069203c2070616c6c6f742e4c656e6774683b20692b2b295c6e20202020202020207b5c6e20202020202020202020202070616c6c6f745b695d2e436f6c6f72203d20436f6c6f722e59656c6c6f773b5c6e20202020202020207d227d</cs-jypeli-runner></div>
    </div>
    
    <div id="par-1180" class="paragraph">
        <h3 id="harjoitus-7">16.4.3 Harjoitus</h3>
    </div>
    
    <div id="par-1181" class="paragraph">
        <div id='1.pallojenvaritaliohjelmalla' data-plugin='/csPlugin'><cs-jypeli-runner>xxxHEXJSONxxx7b227265706c616365223a2022494e5345525420594f55522046554e4354494f4e53322048455245222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022494e5345525420594f55522046554e4354494f4e532048455245222c20227374656d223a202254656520616c696f686a656c6d61204d7575746150616c6c6f6a656e566172692870616c6c6f742c76617269292c206a6f6b61206d75757474616120506879736963734f626a6563742d7461756c756b6f737361206f6c657669656e206f6c696f6964656e20765c753030653472696e2068616c7574756b73692e222c202274797065223a20226a7970656c69222c20226279436f6465223a2022222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f4a7970656c692f506f686a61342e6373222c2022696e64656e74223a202234222c2022706c616365686f6c646572223a20224c69735c75303065345c753030653420616c696f686a656c6d61206f7473696b6b6f72697665696e65656e20745c7530306534685c75303065346e222c20227265706c61636532223a2022494e5345525420494e495449414c495a4154494f4e222c20227461736b4944223a2022312e70616c6c6f6a656e7661726974616c696f686a656c6d616c6c61222c20226279436f646533223a20222f2f5c6e20202020202020202f2f204c69735c7530306534745c75303065345c75303065346e2070616c6c6f74207461756c756b6b6f6f6e2c206a612073697474656e206c69735c7530306534745c75303065345c75303065346e206b656e745c75303065346c6c655c6e2020202020202020506879736963734f626a6563745b5d2070616c6c6f74203d206e657720506879736963734f626a6563745b335d3b5c6e202020202020202070616c6c6f745b305d203d204c756f50616c6c6f28302c204c6576656c2e426f74746f6d202b203230302c20436f6c6f722e57686974652c20313030293b5c6e202020202020202070616c6c6f745b315d203d204c756f50616c6c6f28302c2070616c6c6f745b305d2e59202b20313030202b2035302c20436f6c6f722e57686974652c203530293b5c6e202020202020202070616c6c6f745b325d203d204c756f50616c6c6f28302c2070616c6c6f745b315d2e59202b203530202b2033302c20436f6c6f722e57686974652c203330293b5c6e20202020202020204164642870616c6c6f745b305d293b204164642870616c6c6f745b315d293b204164642870616c6c6f745b325d293b5c6e5c6e20202020202020204d7575746150616c6c6f6a656e566172692870616c6c6f742c436f6c6f722e526564293b205c6e222c20227265706c61636533223a2022494e5345525420594f555220434f44452048455245222c20226279436f646531223a20222f2f5c6e2020202f2f2f203c73756d6d6172793e4c756f20796b736974745c75303065346973656e2070616c6c6f6e206a612070616c6175747461612073656e2e3c2f73756d6d6172793e5c6e2020202f2f2f203c706172616d206e616d653d5c22785c223e50616c6c6f6e206b7020782d6b6f6f7264696e61617474693c2f706172616d3e5c6e2020202f2f2f203c706172616d206e616d653d5c22795c223e50616c6c6f6e206b7020792d6b6f6f7264696e61617474693c2f706172616d3e5c6e2020202f2f2f203c706172616d206e616d653d5c22766172695c223e50616c6c6f6e20765c753030653472693c2f706172616d3e5c6e2020202f2f2f203c706172616d206e616d653d5c22736164655c223e50616c6c6f6e20735c753030653464653c2f706172616d3e5c6e2020207075626c69632073746174696320506879736963734f626a656374204c756f50616c6c6f28646f75626c6520782c20646f75626c6520792c20436f6c6f7220766172692c20646f75626c652073616465295c6e2020207b5c6e20202020202020506879736963734f626a6563742070616c6c6f203d206e657720506879736963734f626a6563742832202a20736164652c2032202a20736164652c2053686170652e436972636c65293b5c6e2020202020202070616c6c6f2e436f6c6f72203d20766172693b5c6e2020202020202070616c6c6f2e58203d20783b5c6e2020202020202070616c6c6f2e59203d20793b5c6e2020202020202072657475726e2070616c6c6f3b5c6e2020207d5c6e227d</cs-jypeli-runner></div>
    </div>
    
    <div id="par-1182" class="paragraph">
        <h3 id="esimerkki-keskiarvo-aliohjelma">16.4.4 Esimerkki: Keskiarvo-aliohjelma</h3>
    </div>
    
    <div id="par-1183" class="paragraph">
        <p>Muuttujien yhteydessä teimme aliohjelman, joka laski kahden luvun keskiarvon. Tällainen aliohjelma ei ole kovin hyödyllinen, sillä jos haluaisimme laskea kolmen tai neljän luvun keskiarvon, täytyisi meidän tehdä niillä omat aliohjelmat. Sen sijaan jos annamme luvut taulukossa, pärjäämme yhdellä aliohjelmalla. Tehdään siis nyt aliohjelma Keskiarvo, joka laskee taulukossa olevien kokonaislukujen keskiarvon. Kirjoitetaan sille myös ComTest-testit.</p>
    </div>
    
    <div id="par-1184" class="paragraph">
        <div id='1.keskiarvotaulukosta' data-plugin='/csPlugin'><cs-comtest-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61342e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a20224d41494e222c20226279436f6465223a20222020202f2f2f203c73756d6d6172793e5c6e2020202f2f2f2050616c61757474616120706172616d657472696e61207361616d616e736120696e742d7461756c756b6f6e5c6e2020202f2f2f20616c6b6f6964656e206b65736b696172766f6e2e5c6e2020202f2f2f203c2f73756d6d6172793e5c6e2020202f2f2f203c706172616d206e616d653d5c226c757675745c223e73756d6d61747461766174206c757675743c2f706172616d3e5c6e2020202f2f2f203c72657475726e733e73756d6d613c2f72657475726e733e5c6e2020202f2f2f203c6578616d706c653e5c6e2020202f2f2f203c707265206e616d653d5c22746573745c223e5c6e2020202f2f2f202020696e745b5d206c7576757431203d207b307d3b5c6e2020202f2f2f2020204c61736b756a612e4b65736b696172766f286c757675743129207e7e7e20303b5c6e2020202f2f2f202020696e745b5d206c7576757432203d207b332c20332c20337d3b5c6e2020202f2f2f2020204c61736b756a612e4b65736b696172766f286c757675743229207e7e7e20333b5c6e2020202f2f2f202020696e745b5d206c7576757433203d207b332c202d332c20337d3b5c6e2020202f2f2f2020204c61736b756a612e4b65736b696172766f286c757675743329207e7e7e20313b5c6e2020202f2f2f202020696e745b5d206c7576757434203d207b2d332c202d367d3b5c6e2020202f2f2f2020204c61736b756a612e4b65736b696172766f286c757675743429207e7e7e202d342e353b5c6e2020202f2f2f203c2f7072653e5c6e2020202f2f2f203c2f6578616d706c653e5c6e2020207075626c69632073746174696320646f75626c65204b65736b696172766f28696e745b5d206c75767574295c6e2020207b5c6e20202020202020646f75626c652073756d6d61203d20303b5c6e20202020202020666f722028696e742069203d20303b2069203c206c757675742e4c656e6774683b20692b2b295c6e202020202020207b5c6e202020202020202020202073756d6d61202b3d206c757675745b695d3b5c6e202020202020207d5c6e2020202020202072657475726e2073756d6d61202f206c757675742e4c656e6774683b5c6e2020207d222c20227265706c616365223a202246554e4354494f4e53222c2022696e64656e74223a202234222c202274797065223a2022636f6e736f6c652c636f6d74657374222c20227265706c61636532223a20225445535453222c20227461736b4944223a2022312e6b65736b696172766f7461756c756b6f737461222c20226279436f646533223a20227075626c696320636c617373204c61736b756a61222c20227265706c61636533223a2022506f686a6134222c20226279436f646531223a20222f2f5c6e2020202020202020696e745b5d206c75767574203d207b2031322c20332c20352c20392c20372c20312c20342c2039207d3b5c6e2020202020202020646f75626c65206b61203d20204b65736b696172766f286c75767574293b5c6e2020202020202020436f6e736f6c652e57726974654c696e65286b61293b5c6e227d</cs-comtest-runner></div>
    </div>
    
    <div id="par-1185" class="paragraph">
        <p>Ohjelmassa lasketaan ensiksi kaikkien taulukoiden lukujen summa muuttujaan <code>summa</code>. Koska taulukoiden indeksointi alkaa nollasta, on ehdottoman kätevää asettaa myös laskurimuuttuja i aluksi arvoon 0. Ehtona on, että silmukkaa suoritetaan niin kauan kuin muuttuja i on pienempi kuin taulukon pituus. Jos tuntuu, että ehdossa pitäisi olla yhtä suuri tai pienempi kuin -operaattori (<code>&lt;=</code>), niin pohdi seuraavaa. Jos taulukon koko olisi vaikka 7, niin tällöin viimeinen alkio olisi alkiossa <code>luvut[6]</code>, koska indeksointi alkaa nollasta. Tästä johtuen jos ehdossa olisi "<code>&lt;=</code>"-operaattpri, viitattaisiin viimeisenä taulukon alkioon <code>luvut[7]</code>, joka ei enää kuulu taulukon muistialueeseen. Tällöin ohjelma kaatuisi ja saisimme "IndexOutOfRangeException"-poikkeuksen.</p>
    </div>
    
    <div id="par-1186" class="paragraph">
        <pre><code>return summa / luvut.Length;</code></pre>
    </div>
    
    <div id="par-1187" class="paragraph">
        <p>Aliohjelman lopussa palautetaan lukujen summa jaettuna lukujen määrällä, eli taulukon pituudella.</p>
    </div>
    
    <div id="par-1188" class="paragraph">
        <h3 id="harjoitus-8">16.4.5 Harjoitus</h3>
    </div>
    
    <div id="par-1189" class="paragraph">
        <p>Pohdi, mikä tärkeä tapaus jää huomiotta taulukon keskiarvon laskemisessa.</p>
    </div>
    
    <div id="par-1190" class="paragraph">
        <h3 id="esimerkki-taulukon-kääntäminen-käänteiseen-järjestykseen">16.4.6 Esimerkki: Taulukon kääntäminen käänteiseen järjestykseen</h3>
    </div>
    
    <div id="par-1191" class="paragraph">
        <p>Kontrollirakenteen ensimmäisessä osassa voidaan siis alustaa myös useita muuttujia. Klassinen esimerkki tällaisesta tapauksesta on taulukon alkioiden kääntäminen päinvastaiseen järjestykseen.</p>
    </div>
    
    <div id="par-1192" class="paragraph">
        <p>Tehdään aliohjelma joka saa parametrina int-tyyppisen taulukon ja palauttaa taulukon käänteisessä järjestyksessä.</p>
    </div>
    
    <div id="par-1193" class="paragraph">
        <div id='1.taulukonkaantaminen' data-plugin='/csPlugin'><cs-comtest-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61342e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a20224d41494e222c20226279436f6465223a20222020202f2f2f203c73756d6d6172793e5c6e2020202f2f2f20416c696f686a656c6d61206b5c75303065345c75303065346e745c75303065345c7530306534206b6f6b6f6e6169736c756b752d7461756c756b6f6e20616c6b696f7420705c7530306534696e7661737461697365656e5c6e2020202f2f2f206a5c7530306534726a657374796b7365656e2e5c6e2020202f2f2f203c2f73756d6d6172793e5c6e2020202f2f2f203c706172616d206e616d653d5c227461756c756b6b6f5c223e4b5c75303065345c75303065346e6e6574745c7530306534765c7530306534207461756c756b6b6f2e3c2f706172616d3e5c6e2020202f2f2f203c6578616d706c653e5c6e2020202f2f2f203c707265206e616d653d5c22746573745c223e5c6e2020202f2f2f202020696e745b5d206c75767574203d207b2031322c20332c20352c20392c20372c20312c20342c2039207d3b5c6e2020202f2f2f2020204c61736b756a612e4b61616e6e615461756c756b6b6f286c75767574293b5c6e2020202f2f2f202020537472696e672e4a6f696e285c22205c222c6c7576757429203d3d3d205c22392034203120372039203520332031325c223b5c6e2020202f2f2f202020696e745b5d206c7576757432203d207b2031322c2033207d3b5c6e2020202f2f2f2020204c61736b756a612e4b61616e6e615461756c756b6b6f286c7576757432293b5c6e2020202f2f2f202020537472696e672e4a6f696e285c22205c222c6c757675743229203d3d3d205c22332031325c223b5c6e2020202f2f2f202020696e745b5d206c7576757431203d207b2035207d3b5c6e2020202f2f2f2020204c61736b756a612e4b61616e6e615461756c756b6b6f286c7576757431293b5c6e2020202f2f2f202020537472696e672e4a6f696e285c22205c222c6c757675743129203d3d3d205c22355c223b5c6e2020202f2f2f202020696e745b5d206c7576757430203d207b207d3b5c6e2020202f2f2f2020204c61736b756a612e4b61616e6e615461756c756b6b6f286c7576757430293b5c6e2020202f2f2f202020537472696e672e4a6f696e285c22205c222c6c757675743029203d3d3d205c225c223b5c6e2020202f2f2f203c2f7072653e5c6e2020202f2f2f203c2f6578616d706c653e5c6e2020207075626c69632073746174696320766f6964204b61616e6e615461756c756b6b6f28696e745b5d207461756c756b6b6f29205c6e2020207b5c6e202020202020696e742074656d703b5c6e202020202020696e74206c6f707075203d207461756c756b6b6f2e4c656e6774682d313b5c6e202020202020666f722028696e7420766173656e203d20302c206f696b6561203d206c6f7070753b20766173656e203c206f696b65613b20766173656e2b2b2c206f696b65612d2d29205c6e2020202020207b5c6e20202020202020202074656d70203d207461756c756b6b6f5b766173656e5d3b5c6e2020202020202020207461756c756b6b6f5b766173656e5d203d207461756c756b6b6f5b6f696b65615d3b5c6e2020202020202020207461756c756b6b6f5b6f696b65615d203d2074656d703b5c6e2020202020207d5c6e2020207d222c20227265706c616365223a202246554e4354494f4e53222c2022696e64656e74223a202233222c202274797065223a2022636f6e736f6c652c636f6d74657374222c20227265706c61636532223a20225445535453222c20227461736b4944223a2022312e7461756c756b6f6e6b61616e74616d696e656e222c20226279436f646533223a20227075626c696320636c617373204c61736b756a61222c20227265706c61636533223a2022506f686a6134222c20226279436f646531223a20222f2f5c6e2020202020202020696e745b5d206c75767574203d207b2031322c20332c20352c20392c20372c20312c20342c2039207d3b5c6e2020202020202020436f6e736f6c652e57726974654c696e6528537472696e672e4a6f696e285c22205c222c6c7576757429293b5c6e20202020202020204b61616e6e615461756c756b6b6f286c75767574293b5c6e2020202020202020436f6e736f6c652e57726974654c696e6528537472696e672e4a6f696e285c22205c222c6c7576757429293b5c6e227d</cs-comtest-runner></div>
    </div>
    
    <div id="par-1194" class="paragraph">
        <p>Ideana yllä olevassa aliohjelmassa on, että meillä on kaksi muuttujaa. Muuttujia voisi kuvata kuvainnollisesti osoittimiksi. Osoittimista toinen osoittaa aluksi taulukon alkuun ja toinen taulukon loppuun. Oikeasti osoittimet ovat int-tyyppisiä muuttujia, jotka saavat arvokseen taulukon indeksejä. Taulukon alkuun osoittavan muuttujan nimi on vasen ja taulukon loppuun osoittavan muuttujan nimi on oikea. Vasenta osoitinta liikutetaan taulukon alusta loppuun päin ja oikeaa taulukon lopusta alkuun päin. Jokaisella kierroksella vaihdetaan niiden taulukon alkioiden paikat keskenään, joihin osoittimet osoittavat. Silmukan suoritus lopetetaan juuri ennen kuin osoittimet kohtaavat toisensa.</p>
    </div>
    
    <div id="par-1195" class="paragraph">
        <p>Tarkastellaan aliohjelmaa nyt hieman tarkemmin.</p>
    </div>
    
    <div id="par-1196" class="paragraph">
        <pre><code>int temp;
int loppu = taulukko.Length-1;</code></pre>
    </div>
    
    <div id="par-1197" class="paragraph">
        <p>Ensimmäiseksi metodissa on alustettu <code>temp</code>-niminen muuttuja. Muuttuja tarvitaan, jotta taulukon alkioiden paikkojen vaihtaminen onnistuisi. Samoin on laskettu taulukon viimeisen paikan indeksi <code>loppu</code>.</p>
    </div>
    
    <div id="par-1198" class="paragraph">
        <pre><code>for (int vasen = 0, oikea = loppu; vasen &lt; oikea; vasen++, oikea--) </code></pre>
    </div>
    
    <div id="par-1199" class="paragraph">
        <p>Kontrollirakenteessa alustetaan ja päivitetään nyt kahta eri muuttujaa. Muuttujat erotetaan toisistaan pilkulla. Huomaa, että muuttujan tyyppi kirjoitetaan vain yhden kerran! Ehtona on, että suoritusta jatketaan niin kauan kuin muuttuja <code>vasen</code> on pienempää kuin muuttuja <code>oikea</code>. Lopuksi päivitetään vielä muuttujien arvoja. Eri muuttujien päivitykset erotetaan toisistaan jälleen pilkulla. Muuttujaa vasen kasvatetaan joka kierroksella yhdellä kun taas muuttujaa oikea sen sijaa vähennetään.</p>
    </div>
    
    <div id="par-1200" class="paragraph">
        <pre><code>temp = taulukko[vasen];</code></pre>
    </div>
    
    <div id="par-1201" class="paragraph">
        <p>Seuraavaksi laitetaan vasemman osoittimen osoittama alkio väliaikaiseen säilytykseen temp-muuttujaan.</p>
    </div>
    
    <div id="par-1202" class="paragraph">
        <pre><code>taulukko[vasen] = taulukko[oikea];</code></pre>
    </div>
    
    <div id="par-1203" class="paragraph">
        <p>Nyt voimme tallentaa oikean osoittimen osoittaman alkion vasemman osoittimen osoittaman alkion paikalle.</p>
    </div>
    
    <div id="par-1204" class="paragraph">
        <pre><code>taulukko[oikea] = temp;</code></pre>
    </div>
    
    <div id="par-1205" class="paragraph">
        <p>Yllä olevalla lauseella asetetaan vielä temp-muuttujaan talletettu arvo oikean osoittimen osoittamaan alkioon. Nyt vaihto on suoritettu onnistuneesti.</p>
    </div>
    
    <div id="par-1206" class="paragraph">
        <p>Tässä funktiolla oli sivuvaikutus, eli se muutti parametrina vietyä taulukkoa. Jos haluttaisiin alkuperäisen taulukon säilyvän, pitäisi funktion alussa luoda uusi taulukko tulosta varten, sijoittaa arvot käänteisessä järjestyksessä ja lopuksi <em>palauttaa</em> viite uuteen taulukkoon.</p>
    </div>
    
    <div id="par-1207" class="paragraph">
        <h3 id="harjoitus-9">16.4.7 Harjoitus</h3>
    </div>
    
    <div id="par-1208" class="paragraph">
        <div id='1.taulukonkaantaminen2' data-plugin='/csPlugin'><cs-comtest-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61342e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a20224d41494e222c20227374656d223a20225465652066756e6b74696f737461204b61616e6e615461756c756b6b6f20736976757661696b7574756b7365746f6e2076657273696f2e222c202274797065223a2022636f6e736f6c652c636f6d74657374222c20226279436f6465223a2022222c20227265706c616365223a202246554e4354494f4e53222c2022696e64656e74223a202233222c2022706c616365686f6c646572223a20224c69735c75303065345c75303065342066756e6b74696f206f7473696b6b6f72697665696e65656e20745c7530306534685c75303065346e2e204b6174736f206b6f6b6f206b6f6f646920656e73696e206d6974656e2066756e6b74696f7461206b5c7530306534797465745c75303065345c75303065346e2e222c20227265706c61636532223a20225445535453222c20227461736b4944223a2022312e7461756c756b6f6e6b61616e74616d696e656e32222c20226279436f646533223a20227075626c696320636c617373204c61736b756a61222c20227265706c61636533223a2022506f686a6134222c20226279436f646532223a20222f2f5c6e2020202f2f2f203c73756d6d6172793e5c6e2020202f2f2f20416c696f686a656c6d61206b5c75303065345c75303065346e745c75303065345c7530306534206b6f6b6f6e6169736c756b752d7461756c756b6f6e20616c6b696f7420705c7530306534696e7661737461697365656e5c6e2020202f2f2f206a5c7530306534726a657374796b7365656e2e5c6e2020202f2f2f203c2f73756d6d6172793e5c6e2020202f2f2f203c706172616d206e616d653d5c227461756c756b6b6f5c223e4b5c75303065345c75303065346e6e6574745c7530306534765c7530306534207461756c756b6b6f2e3c2f706172616d3e5c6e2020202f2f2f203c6578616d706c653e5c6e2020202f2f2f203c707265206e616d653d5c22746573745c223e5c6e2020202f2f2f202020696e745b5d206c75767574203d207b2031322c20332c20352c20392c20372c20312c20342c2039207d3b5c6e2020202f2f2f202020696e745b5d20743b5c6e2020202f2f2f20202074203d204c61736b756a612e4b61616e6e615461756c756b6b6f286c75767574293b5c6e2020202f2f2f202020537472696e672e4a6f696e285c22205c222c6c7576757429203d3d3d205c22313220332035203920372031203420395c223b5c6e2020202f2f2f202020537472696e672e4a6f696e285c22205c222c7429203d3d3d205c22392034203120372039203520332031325c223b5c6e2020202f2f2f20202074203d204c61736b756a612e4b61616e6e615461756c756b6b6f286e657720696e745b5d7b2031322c2033207d293b5c6e2020202f2f2f202020537472696e672e4a6f696e285c22205c222c7429203d3d3d205c22332031325c223b5c6e2020202f2f2f20202074203d204c61736b756a612e4b61616e6e615461756c756b6b6f286e657720696e745b5d7b357d293b5c6e2020202f2f2f202020537472696e672e4a6f696e285c22205c222c7429203d3d3d205c22355c223b5c6e2020202f2f2f20202074203d204c61736b756a612e4b61616e6e615461756c756b6b6f286e657720696e745b5d7b7d293b5c6e2020202f2f2f202020537472696e672e4a6f696e285c22205c222c7429203d3d3d205c225c223b5c6e2020202f2f2f203c2f7072653e5c6e2020202f2f2f203c2f6578616d706c653e5c6e222c20226279436f646531223a20222f2f5c6e2020202020202020696e745b5d206c75767574203d207b2031322c20332c20352c20392c20372c20312c20342c2039207d3b5c6e2020202020202020436f6e736f6c652e57726974654c696e6528537472696e672e4a6f696e285c22205c222c6c7576757429293b5c6e2020202020202020696e745b5d2074203d204b61616e6e615461756c756b6b6f286c75767574293b5c6e2020202020202020436f6e736f6c652e57726974654c696e6528537472696e672e4a6f696e285c22205c222c6c7576757429293b5c6e2020202020202020436f6e736f6c652e57726974654c696e6528537472696e672e4a6f696e285c22205c222c7429293b5c6e227d</cs-comtest-runner></div>
    </div>
    
    <div id="par-1209" class="paragraph">
        <h3 id="esimerkki-arvosanan-laskeminen-taulukoilla">16.4.8 Esimerkki: arvosanan laskeminen taulukoilla</h3>
    </div>
    
    <div id="par-1210" class="paragraph">
        <p>Ehtolauseita käsiteltäessä tehtiin aliohjelma, joka laski tenttiarvosanan. Aliohjelma sai parametreina tentin maksimipisteet, läpipääsyrajan ja opiskelijan tenttipisteet ja palautti opiskelijan arvosanan. Tehdään nyt vastaava ohjelma käyttämällä taulukoita. Kirjoitetaan samalla ComTest-testit.</p>
    </div>
    
    <div id="par-1211" class="paragraph">
        <div id='1.arvosanataulukolla' data-plugin='/csPlugin'><cs-comtest-runner>xxxHEXJSONxxx7b227461736b4944223a2022312e6172766f73616e617461756c756b6f6c6c61222c202274797065223a2022636f6e736f6c652c636f6d74657374222c2022757365725f6964223a2022766573616c222c20226279436f6465223a20227573696e672053797374656d3b5c6e7573696e672053797374656d2e436f6c6c656374696f6e732e47656e657269633b5c6e5c6e2f2f2f2040617574686f722020416e7474692d4a75737369204c616b616e656e2c204d6172747469204879765c75303066366e656e5c6e2f2f2f204076657273696f6e2032322e31322e323031315c6e2f2f2f5c6e2f2f2f203c73756d6d6172793e5c6e2f2f2f204861726a6f6974656c6c61616e207669656c5c7530306534207461756c756b6f6964656e206b5c75303065347974745c75303066365c75303065342e5c6e2f2f2f203c2f73756d6d6172793e5c6e7075626c696320636c617373204172766f73616e615c6e7b5c6e202020202f2f2f203c73756d6d6172793e5c6e202020202f2f2f204c61736b6565206f7069736b656c696a616e2074656e7474696172766f73616e616e2061737465696b6f696c6c6120302d352e5c6e202020202f2f2f203c2f73756d6d6172793e5c6e202020202f2f2f203c706172616d206e616d653d5c226d616b73696d69706973746565745c223e54656e74696e206d616b73696d69706973746565742e3c2f706172616d3e5c6e202020202f2f2f203c706172616d206e616d653d5c226c61706169737972616a615c223e54656e74696e206c5c75303065347069705c75303065345c7530306534737972616a612e3c2f706172616d3e5c6e202020202f2f2f203c706172616d206e616d653d5c2274656e747469706973746565745c223e4f7069736b656c696a616e2074656e747469706973746565742e3c2f706172616d3e5c6e202020202f2f2f203c72657475726e733e4f7069736b656c696a616e2074656e7474696172766f73616e612e3c2f72657475726e733e5c6e202020202f2f2f203c6578616d706c653e5c6e202020202f2f2f203c707265206e616d653d5c22746573745c223e5c6e202020202f2f2f204172766f73616e612e4c61736b654172766f73616e612832342c2031322c20313129203d3d3d20303b205c6e202020202f2f2f204172766f73616e612e4c61736b654172766f73616e612832342c2031322c20313229203d3d3d20313b205c6e202020202f2f2f204172766f73616e612e4c61736b654172766f73616e612832342c2031322c20313329203d3d3d20313b205c6e202020202f2f2f204172766f73616e612e4c61736b654172766f73616e612832342c2031322c20313429203d3d3d20313b205c6e202020202f2f2f204172766f73616e612e4c61736b654172766f73616e612832342c2031322c20313529203d3d3d20323b205c6e202020202f2f2f204172766f73616e612e4c61736b654172766f73616e612832342c2031322c20313929203d3d3d20333b205c6e202020202f2f2f204172766f73616e612e4c61736b654172766f73616e612832342c2031322c20323029203d3d3d20343b205c6e202020202f2f2f204172766f73616e612e4c61736b654172766f73616e612832342c2031322c20323229203d3d3d20353b205c6e202020202f2f2f204172766f73616e612e4c61736b654172766f73616e612832342c2031322c20323829203d3d3d20353b205c6e202020202f2f2f203c2f7072653e5c6e202020202f2f2f203c2f6578616d706c653e5c6e202020207075626c69632073746174696320696e74204c61736b654172766f73616e6128696e74206d616b73696d69706973746565742c20696e74206c61706169737972616a612c205c6e202020202020202020202020202020202020202020202020202020202020202020202020696e742074656e74746970697374656574295c6e202020207b5c6e2020202020202020646f75626c655b5d206172766f73616e6152616a6174203d206e657720646f75626c655b365d3b5c6e2020202020202020646f75626c65206172766f73616e6f6a656e506973746545726f74203d20286d616b73696d6970697374656574202d206c61706169737972616a6129202f20352e303b5c6e5c6e5c6e20202020202020202f2f4172766f73616e616e20312072616a616b73692074656e74696e206c5c75303065347069705c75303065345c7530306534737972616a615c6e20202020202020206172766f73616e6152616a61745b315d203d206c61706169737972616a613b5c6e5c6e20202020202020202f2f41736574657461616e207461756c756b6b6f6f6e206a6f6b616973656e206172766f73616e616e2072616a615c6e2020202020202020666f722028696e742069203d20323b2069203c3d20353b20692b2b295c6e20202020202020207b5c6e2020202020202020202020206172766f73616e6152616a61745b695d203d206172766f73616e6152616a61745b69202d20315d202b206172766f73616e6f6a656e506973746545726f743b5c6e20202020202020207d5c6e5c6e20202020202020202f2f4b6174736f7461616e206d6968696e206172766f73616e61616e2074656e747469706973746565742072696974745c7530306534765c7530306534745c6e2020202020202020666f722028696e742069203d20353b2031203c3d20693b20692d2d295c6e20202020202020207b5c6e202020202020202020202020696620286172766f73616e6152616a61745b695d203c3d2074656e74746970697374656574292072657475726e20693b5c6e20202020202020207d5c6e202020202020202072657475726e20303b5c6e202020207d5c6e5c6e202020202f2f2f203c73756d6d6172793e5c6e202020202f2f2f20505c75303065345c75303065346f686a656c6d615c6e202020202f2f2f203c2f73756d6d6172793e5c6e202020207075626c69632073746174696320766f6964204d61696e28295c6e202020207b5c6e2020202020202020436f6e736f6c652e57726974654c696e65284c61736b654172766f73616e612832342c2031322c20313929293b202f2f2074756c6f7374616120335c6e2020202020202020436f6e736f6c652e57726974654c696e65284c61736b654172766f73616e612832342c2031322c20313129293b202f2f2074756c6f7374616120305c6e2020202020202020436f6e736f6c652e526561644b657928293b5c6e202020207d5c6e7d227d</cs-comtest-runner></div>
    </div>
    
    <div id="par-1212" class="paragraph">
        <p>Aliohjelman idea on, että jokaisen arvosanan raja tallennetaan taulukkoon. Kun taulukkoa sitten käydään läpi lopusta alkuun päin, voidaan kokeilla mihin arvosanaan opiskelijan pisteet riittävät.</p>
    </div>
    
    <div id="par-1213" class="paragraph">
        <pre><code>double[] arvosanaRajat = new double[6];</code></pre>
    </div>
    
    <div id="par-1214" class="paragraph">
        <p>Aliohjelman alussa alustetaan tenttiarvosanojen pisterajoille taulukko. Taulukko alustetaan kuuden kokoiseksi, jotta voisimme tallentaa jokaisen arvosanan pisterajan vastaavan taulukon indeksin kohdalle. Arvosanan 1 pisteraja on taulukon indeksissä 1 ja arvosanan 2 indeksissä 2 ja niin edelleen. Näin taulukon ensimmäinen indeksi jää käyttämättä, mutta taulukkoon viittaaminen on selkeämpää. Koska pisterajat voivat olla desimaalilukuja, on taulukon oltava tyypiltään double[].</p>
    </div>
    
    <div id="par-1215" class="paragraph">
        <pre><code>double arvosanojenPisteErot = (maksimipisteet - lapaisyraja) / 5.0;</code></pre>
    </div>
    
    <div id="par-1216" class="paragraph">
        <p>Yllä oleva rivi laskee arvosanojen välisen piste-eron. Mieti, miksi jakoviivan alapuolelle on luku laitettava muodossa 5.0, eikä 5.</p>
    </div>
    
    <div id="par-1217" class="paragraph">
        <pre><code>arvosanaRajat[1] = lapaisyraja;</code></pre>
    </div>
    
    <div id="par-1218" class="paragraph">
        <p>Tällä rivillä asetetaan arvosanan 1 rajaksi tentin läpipääsyraja.</p>
    </div>
    
    <div id="par-1219" class="paragraph">
        <pre><code>for (int i = 2; i &lt;= 5; i++) 
{
   arvosanaRajat[i] = arvosanaRajat[i-1] + arvosanojenPisteErot;
}</code></pre>
    </div>
    
    <div id="par-1220" class="paragraph">
        <p>Yllä oleva silmukka laskee arvosanojen 2-5 pisterajat. Seuraava pisteraja saadaan lisäämällä edelliseen arvosanojen välinen piste-ero.</p>
    </div>
    
    <div id="par-1221" class="paragraph">
        <pre><code>for (int i = 5; 1 &lt;= i; i--) 
{
   if (arvosanaRajat[i] &lt;= tenttipisteet) return i;
}</code></pre>
    </div>
    
    <div id="par-1222" class="paragraph">
        <p>Tällä silmukalla sen sijaan katsotaan mihin arvosanaan opiskelijan tenttipisteet riittävät. Arvosanoja aletaan käydä läpi lopusta alkuun päin. Tämän takia muuttujan i arvo asetetaan aluksi arvoon 5 ja joka kierroksella sitä pienennetään yhdellä. Kun oikea arvosana on löytynyt, palautetaan tenttiarvosana (eli taulukon indeksi) välittömästi, ettei käydä taulukon alkioita turhaan läpi.</p>
    </div>
    
    <div id="par-1223" class="paragraph">
        <p>Pääohjelmassa ohjelmaa on kokeiltu muutamilla testitulostuksilla. Tarkemmat testit on tehty kuitenkin ComTest-testeinä, joita voidaan testata automaattisesti.</p>
    </div>
    
    <div id="par-1224" class="paragraph">
        <p>Jos laskisimme useiden oppilaiden tenttiarvosanoja, niin aliohjelmamme laskisi myös arvosanaRajat-taulukon arvot jokaisella kerralla erikseen. Tämä on melko typerää tietokoneen resurssien tuhlausta. Meidän kannattaakin tehdä oma aliohjelma siitä osasta, joka laskee tenttiarvosanojen rajat. Tämä aliohjelma voisi palauttaa arvosanojen rajat suoraan taulukossa. Nyt voisimme muuttaa LaskeArvosana-aliohjelmaa niin, että se saa parametrikseen arvosanojen rajat taulukossa ja opiskelijan tenttipisteet. Molempien aliohjelmien ComTest-testit ovat myös näkyvillä.</p>
    </div>
    
    <div id="par-1225" class="paragraph">
        <pre><code>using System;
using System.Collections.Generic;
using System.Text;
using System.Globalization;

/// @author  Antti-Jussi Lakanen, Martti Hyvönen
/// @version 22.12.2011
///
/// &lt;summary&gt;
/// Harjoitellaan taulukoiden käyttöä ja lasketaan tenttiarvosanoja.
/// &lt;/summary&gt;
public class Arvosanat
{
    /// &lt;summary&gt;
    /// Laskee tenttiarvosanojen pisterajat taulukkoon.
    /// &lt;/summary&gt;
    /// &lt;param name="maksimipisteet"&gt;tentin maksimipisteet&lt;/param&gt;
    /// &lt;param name="lapaisyraja"&gt;tentin läpipääsyraja&lt;/param&gt;
    /// &lt;returns&gt;arvosanojen pisterajat taulukossa&lt;/returns&gt;
    /// &lt;example&gt;
    /// &lt;pre name="test"&gt;
    /// double[] rajat1 = Arvosanat.LaskeRajat(24, 12);
    /// String rajat1Jono = Arvosanat.TaulukkoJonoksi(rajat1);
    /// rajat1Jono === "0, 12, 14.4, 16.8, 19.2, 21.6";
    /// double[] rajat2 = Arvosanat.LaskeRajat(30, 15);
    /// String rajat2Jono = Arvosanat.TaulukkoJonoksi(rajat2);
    /// rajat2Jono === "0, 15, 18, 21, 24, 27";
    /// &lt;/pre&gt;
    /// &lt;/example&gt;
    public static double[] LaskeRajat(int maksimipisteet, int lapaisyraja)
    {
        double[] arvosanaRajat = new double[6];
        double arvosanojenPisteErot = Math.Round((maksimipisteet - lapaisyraja) / 5.0, 1);

        arvosanaRajat[1] = lapaisyraja;

        // Asetetaan taulukkoon jokaisen arvosanan raja
        for (int i = 2; i &lt;= 5; i++)
            arvosanaRajat[i] = arvosanaRajat[i - 1] + arvosanojenPisteErot;
        return arvosanaRajat;
    }

    /// &lt;summary&gt;
    /// Muuttaa annetun taulukon merkkijonoksi.
    /// Erotinmerkkinä toimii pilkku + välilyönti (", ").
    /// &lt;/summary&gt;
    /// &lt;param name="taulukko"&gt;Jonoksi muutettava taulukko.&lt;/param&gt;
    /// &lt;returns&gt;Taulukko merkkijonona.&lt;/returns&gt;
    /// &lt;example&gt;
    /// &lt;pre name="test"&gt;
    /// double[] taulukko1 = new double[] {15.4, 20, 1.0, 5.9, -2.4};
    /// Arvosanat.TaulukkoJonoksi(taulukko1) === "15.4, 20, 1, 5.9, -2.4";
    /// &lt;/pre&gt;
    /// &lt;/example&gt;
    public static String TaulukkoJonoksi(double[] taulukko)
    {
        String erotin = "";
        StringBuilder jono = new StringBuilder();
        foreach (double luku in taulukko)
        {
            jono.Append(erotin);
            jono.Append(luku.ToString(CultureInfo.InvariantCulture));
            erotin = ", ";
        }
        return jono.ToString();
    }

    /// &lt;summary&gt;
    /// Laskee opiskelijan tenttiarvosanan asteikoilla 0-5.
    /// &lt;/summary&gt;
    /// &lt;param name="pisterajat"&gt;Arvosanojen rajat taulukossa. 
    /// Arvosanan 1 raja taulukon indeksissä 1 jne. &lt;/param&gt;
    /// &lt;param name="tenttiPisteet"&gt;Saadut tenttipisteet.&lt;/param&gt;
    /// &lt;returns&gt;Tenttiarvosana välillä [0..5].&lt;/returns&gt;
    /// &lt;example&gt;
    /// &lt;pre name="test"&gt;
    /// double[] rajat = {0, 12, 14, 16, 18, 20};
    /// Arvosanat.LaskeArvosana(rajat, 11) === 0;
    /// Arvosanat.LaskeArvosana(rajat, 12) === 1;
    /// Arvosanat.LaskeArvosana(rajat, 14) === 2;
    /// Arvosanat.LaskeArvosana(rajat, 22) === 5;
    /// Arvosanat.LaskeArvosana(rajat, 28) === 5;
    /// &lt;/pre&gt;
    /// &lt;/example&gt;
    public static int LaskeArvosana(double[] pisterajat, int tenttiPisteet)
    {
        for (int i = pisterajat.Length - 1; 1 &lt;= i; i--)
        {
            if (pisterajat[i] &lt;= tenttiPisteet) return i;
        }
        return 0;
    }

    /// &lt;summary&gt;
    /// Pääohjelmassa pari esimerkkiä.
    /// &lt;/summary&gt;
    public static void Main()
    {
        double[] pisterajat = LaskeRajat(24, 12);
        Console.WriteLine(LaskeArvosana(pisterajat, 12)); // tulostaa 1
        Console.WriteLine(LaskeArvosana(pisterajat, 20)); // tulostaa 4
        Console.WriteLine(LaskeArvosana(pisterajat, 11)); // tulostaa 0
        Console.ReadKey();
    }
}</code></pre>
    </div>
    
    <div id="par-1226" class="paragraph">
        <p>Yllä olevassa esimerkissä lasketaan nyt arvosanarajat vain kertaalleen taulukkoon ja samaa taulukkoa käytetään nyt eri arvosanojen laskemiseen. Yhden aliohjelman kuuluisikin aina suorittaa vain yksi tehtävä tai toimenpide. Näin aliohjelman koko ei kasva mielettömyyksiin. Lisäksi mahdollisuus, että pystymme hyödyntämään aliohjelmaa joskus myöhemmin toisessa ohjelmassa lisääntyy.</p>
    </div>
    
    <div id="par-1227" class="paragraph">
        <p>Ohjelmassa on testejä varten tehty yksi apufunktio, TaulukkoJonoksi, jonka tehtävä on palauttaa taulukon alkiot yhtenä merkkijonona perättäin lueteltuna pilkulla erotettuna.</p>
    </div>
    
    <div id="par-1228" class="paragraph">
        <h2 id="foreach-silmukka">16.5 foreach-silmukka</h2>
    </div>
    
    <div id="par-1229" class="paragraph">
        <p>Taulukoita käsiteltäessä voidaan käyttää myös foreach-silmukkaa. Se on eräänlainen paranneltu versio for-silmukasta. Nimensä mukaan se käy läpi kaikki taulukon alkiot. Se on syntaksiltaan selkeämpi silloin, kun haluamme tehdä jotain jokaiselle taulukon alkiolle. Sen syntaksi on yleisessä muodossa seuraava.</p>
    </div>
    
    <div id="par-1230" class="paragraph">
        <pre><code>foreach (taulukonAlkionTyyppi alkio in taulukko) 
{
   lauseet;
}</code></pre>
    </div>
    
    <div id="par-1231" class="paragraph">
        <p>Tämä vastaa for-silmukkaa:</p>
    </div>
    
    <div id="par-1232" class="paragraph">
        <pre><code>for (int i=0; i&lt;taulukko.Length; i++) 
{ 
   taulukonAlkionTyyppi alkio = taulukko[i];
   lauseet;
}</code></pre>
    </div>
    
    <div id="par-1233" class="paragraph">
        <p>Nyt foreach-silmukan kontrollilausekkeessa ilmoitetaan vain kaksi asiaa. Ensiksi annetaan tyyppi ja nimi muuttujalle, joka viittaa yksittäiseen taulukon alkioon. Tyypin täytyy olla sama kuin käsiteltävän taulukon alkiotyyppi, mutta nimen saa itse keksiä. Tälle muuttujalle tehdään ne toimenpiteet, mitä jokaiselle taulukon alkiolle halutaan tehdä. Toisena tietona foreach-silmukalle pitää antaa sen taulukon nimi, mitä halutaan käsitellä. Esimerkiksi <code>TulostaTaulukko</code> alkioita voitaisin nyt tehdä seuraavasti.</p>
    </div>
    
    <div id="par-1234" class="paragraph">
        <div id='1.tulostataulukkoforeach' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61342e6373222c20227265706c616365223a202246554e4354494f4e53222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a20224d41494e222c20227265706c61636532223a20225445535453222c2022696e64656e74223a202234222c20227461736b4944223a2022312e74756c6f7374617461756c756b6b6f666f7265616368222c20226279436f646533223a20227075626c696320636c617373204c61736b756a61222c20227265706c61636533223a2022506f686a6134222c20226279436f646531223a2022696e745b5d206b75756b61757369656e5061697669656e4c6b6d203d205c6e20207b33312c2032382c2033312c2033302c2033312c2033302c2033312c2033312c2033302c2033312c2033302c2033317d3b5c6e54756c6f7374615461756c756b6b6f286b75756b61757369656e5061697669656e4c6b6d293b5c6e436f6e736f6c652e526561644b657928293b5c6e222c20226279436f6465223a2022202020207075626c69632073746174696320766f69642054756c6f7374615461756c756b6b6f28696e745b5d207461756c756b6b6f29205c6e202020207b5c6e2020202020202020666f72656163682028696e74206c756b7520696e207461756c756b6b6f29205c6e20202020202020207b5c6e202020202020202020202020436f6e736f6c652e5772697465286c756b75202b205c22205c22293b5c6e20202020202020207d5c6e2020202020202020436f6e736f6c652e57726974654c696e6528293b5c6e202020207d227d</cs-runner></div>
    </div>
    
    <div id="par-1235" class="paragraph">
        <p>Vapaasti suomennettuna: "Jokaiselle luvulle taulukossa (tee)...".</p>
    </div>
    
    <div id="par-1236" class="paragraph">
        <p><strong>Huom!</strong> <code>foreach</code>-silmukalla <strong>ei</strong> voi muuttaa taulukon alkioiden arvoja! Toki jos taulukossa on olioviitteitä, voidaan olioiden sisältöjä muuttaa kuten seuraava esimerkki osoittaa.</p>
    </div>
    
    <div id="par-1237" class="paragraph">
        <h3 id="esimerkki-taulukon-pallot-keltaisiksi">16.5.1 Esimerkki: taulukon pallot keltaisiksi</h3>
    </div>
    
    <div id="par-1238" class="paragraph">
        <p>Esimerkissä 16.4.2 värjäsimme lumiukon pallot keltaisiksi. Koska halusimme muuttaa <em>kaikkien</em> taulukossa olevien olioiden värin, on luontevampaa käyttää tehtävään foreach-silmukkaa. LuoPallo-aliohjelma on sama kuin esimerkissä 16.4.2 ja jätetty listauksesta pois.</p>
    </div>
    
    <div id="par-1239" class="paragraph">
        <div id='1.pallotkeltaiseksiforeach' data-plugin='/csPlugin'><cs-jypeli-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f4a7970656c692f506f686a61342e6373222c20227265706c616365223a2022494e5345525420594f555220434f44452048455245222c202274797065223a20226a7970656c69222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022494e5345525420594f55522046554e4354494f4e532048455245222c20227265706c61636532223a2022494e5345525420494e495449414c495a4154494f4e222c20227461736b4944223a2022312e70616c6c6f746b656c74616973656b7369666f7265616368222c20227265706c61636533223a2022494e5345525420594f55522046554e4354494f4e53322048455245222c20226279436f646532223a20222f2f5c6e20202020202020202f2f204c69735c7530306534745c75303065345c75303065346e2070616c6c6f74207461756c756b6b6f6f6e2c206a612073697474656e206c69735c7530306534745c75303065345c75303065346e206b656e745c75303065346c6c655c6e2020202020202020506879736963734f626a6563745b5d2070616c6c6f74203d206e657720506879736963734f626a6563745b335d3b5c6e202020202020202070616c6c6f745b305d203d204c756f50616c6c6f28302c204c6576656c2e426f74746f6d202b203230302c20436f6c6f722e57686974652c20313030293b5c6e202020202020202070616c6c6f745b315d203d204c756f50616c6c6f28302c2070616c6c6f745b305d2e59202b20313030202b2035302c20436f6c6f722e57686974652c203530293b5c6e202020202020202070616c6c6f745b325d203d204c756f50616c6c6f28302c2070616c6c6f745b315d2e59202b203530202b2033302c20436f6c6f722e57686974652c203330293b5c6e20202020202020204164642870616c6c6f745b305d293b204164642870616c6c6f745b315d293b204164642870616c6c6f745b325d293b5c6e222c20226279436f646531223a20222f2f5c6e2020202f2f2f203c73756d6d6172793e4c756f20796b736974745c75303065346973656e2070616c6c6f6e206a612070616c6175747461612073656e2e3c2f73756d6d6172793e5c6e2020202f2f2f203c706172616d206e616d653d5c22785c223e50616c6c6f6e206b7020782d6b6f6f7264696e61617474693c2f706172616d3e5c6e2020202f2f2f203c706172616d206e616d653d5c22795c223e50616c6c6f6e206b7020792d6b6f6f7264696e61617474693c2f706172616d3e5c6e2020202f2f2f203c706172616d206e616d653d5c22766172695c223e50616c6c6f6e20765c753030653472693c2f706172616d3e5c6e2020202f2f2f203c706172616d206e616d653d5c22736164655c223e50616c6c6f6e20735c753030653464653c2f706172616d3e5c6e2020207075626c69632073746174696320506879736963734f626a656374204c756f50616c6c6f28646f75626c6520782c20646f75626c6520792c20436f6c6f7220766172692c20646f75626c652073616465295c6e2020207b5c6e20202020202020506879736963734f626a6563742070616c6c6f203d206e657720506879736963734f626a6563742832202a20736164652c2032202a20736164652c2053686170652e436972636c65293b5c6e2020202020202070616c6c6f2e436f6c6f72203d20766172693b5c6e2020202020202070616c6c6f2e58203d20783b5c6e2020202020202070616c6c6f2e59203d20793b5c6e2020202020202072657475726e2070616c6c6f3b5c6e2020207d5c6e222c20226279436f6465223a20222020202020202020666f72656163682028506879736963734f626a6563742070616c6c6f20696e2070616c6c6f74295c6e20202020202020207b5c6e20202020202020202020202070616c6c6f2e436f6c6f72203d20436f6c6f722e59656c6c6f773b5c6e20202020202020207d227d</cs-jypeli-runner></div>
    </div>
    
    <div id="par-1240" class="paragraph">
        <h2 id="sisäkkäiset-silmukat">16.6 Sisäkkäiset silmukat</h2>
    </div>
    
    <div id="par-1241" class="paragraph">
        <p>Kaikkia silmukoita voi kirjoittaa myös toisten silmukoiden sisälle. Sisäkkäisiä silmukoita tarvitaan ainakin silloin, kun halutaan tehdä jotain moniulotteisille taulukoille. Luvussa 15.5 määrittelimme kaksiulotteisen taulukon elokuvien tallentamista varten. Tulostetaan nyt sen sisältö käyttämällä kahta for-silmukkaa.</p>
    </div>
    
    <div id="par-1242" class="paragraph">
        <div id='1.elokuvientulostusforfor' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b2266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c20227265706c616365223a202254554c4f53545553222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022414c4b554f5341222c20227461736b4944223a2022312e656c6f6b757669656e74756c6f73747573666f72666f72222c20226279436f646531223a20222f2f5c6e2020202020202020737472696e675b2c5d20656c6f6b75766174203d20207b205c6e202020202020202020207b5c2250756c702046696374696f6e5c222c205c22546f696d696e74615c222c205c22546172616e74696e6f5c2220202020207d2c205c6e202020202020202020207b5c22323030313a20417661727575737365696b6b61696c755c222c205c2253636966695c222c205c224b75627269636b5c227d2c5c6e202020202020202020207b5c2243617361626c616e63615c222c205c22447261616d615c222c205c2243757274697a5c222020202020202020202020207d205c6e20202020202020207d3b5c6e222c20226279436f6465223a20222020202020202020666f722028696e742072203d20303b2072203c20333b20722b2b29202f2f2072697669745c6e20202020202020207b205c6e2020202020202020202020666f722028696e742073203d20303b2073203c20333b20732b2b29202f2f20736172616b6b6565745c6e20202020202020202020207b205c6e2020202020202020202020202020436f6e736f6c652e577269746528656c6f6b757661745b722c20735d202b205c22207c205c22293b5c6e20202020202020202020207d5c6e2020202020202020202020436f6e736f6c652e57726974654c696e6528293b5c6e20202020202020207d227d</cs-runner></div>
    </div>
    
    <div id="par-1243" class="paragraph">
        <p>Ulommassa for-silmukassa käydään läpi taulukon jokainen rivi, eli eri elokuvat. Kun elokuva on "valittu", käydään elokuvan tiedot läpi. Sisemmässä for-silmukassa käydään läpi aina kaikki yhden elokuvan tiedot. Tietyn elokuvan eri tiedot tai kentät on tässä päätetty erottaa "|"-merkillä. Sisemmän for-silmukan jälkeen tulostetaan vielä rivinvaihto Console.WriteLine()-metodilla. Näin eri elokuvat saadaan eri riveille.</p>
    </div>
    
    <div id="par-1244" class="paragraph">
        <p>Tässä täytyy ottaa huomioon, että ulomman taulukon indeksejä käydään läpi eri muuttujalla kuin sisempää taulukkoa. Usein on tapana kirjoittaa ensimmäisen (ulomman) indeksimuuttujan nimeksi i, ja seuraavan nimeksi j. Samannimisiä muuttujia ei voi käyttää, sillä ne ovat nyt samalla näkyvyysalueella. Tässä kyseisessä esimerkissä on loogisempaa käyttää riveihin ja sarakkeisiin viittaavia indeksien nimiä - siis r ja s.</p>
    </div>
    
    <div id="par-1245" class="paragraph">
        <h2 id="esimerkki-rivi-jolla-eniten-vapaata-tilaa">16.7 Esimerkki: rivi, jolla eniten vapaata tilaa</h2>
    </div>
    
    <div id="par-1246" class="paragraph">
        <p>Palataan vielä aikaisempaan laivanupotusesimerkkiin. Tehdään aliohjelma, joka etsii 2-ulotteisen taulukon riveistä sen, jolla on eniten tyhjää (eli missä on eniten tilaa laittaa uusi laiva).</p>
    </div>
    
    <div id="par-1247" class="paragraph">
        <div id='1.enitentilaa' data-plugin='/csPlugin'><cs-comtest-runner>xxxHEXJSONxxx7b227265706c616365223a202246554e4354494f4e53222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a20224d41494e222c202274797065223a2022636f6e736f6c652c636f6d74657374222c20226279436f6465223a2022202020202f2f2f203c73756d6d6172793e5c6e202020202f2f2f20416c696f686a656c6d612070616c6175747461612073656e20726976696e2028696e64656b73696e292c5c6e202020202f2f2f206d696c6c5c7530306534206f6e20656e6974656e20766170616174612028656c6920726976692c206a6f6c6c61205c6e202020202f2f2f20656e6974656e20302d616c6b696f697461292e204a6f73206e5c753030653469745c753030653420726976656a5c7530306534206f6e207573656974612c206e69696e5c6e202020202f2f2f2070616c617574657461616e206e696973745c753030653420656e73696d6d5c7530306534696e656e2e5c6e202020202f2f2f203c2f73756d6d6172793e5c6e202020202f2f2f203c706172616d206e616d653d5c227275756475745c223e7461756c756b6b6f207275756475697374612c206b757373616b696e205c6e202020202f2f2f2072757564757373612030203d2076617061612c206d7575206e756d65726f203d206c616976616e206e756d65726f2e3c2f706172616d3e5c6e202020202f2f2f203c72657475726e733e526976692c206a6f6c6c6120656e6974656e20766170616174612e3c2f72657475726e733e5c6e202020202f2f2f203c6578616d706c653e5c6e202020202f2f2f203c707265206e616d653d5c22746573745c223e5c6e202020202f2f2f20696e745b2c5d2072757564757431203d207b207b312c20302c20327d2c207b302c20302c20327d2c207b332c20332c20337d207d3b5c6e202020202f2f2f204c616976616e75706f7475732e526976694a6f6c6c61456e6974656e56617061617461287275756475743129203d3d3d20313b5c6e202020202f2f2f20696e745b2c5d2072757564757432203d207b207b312c20312c20317d2c207b322c20322c20327d2c207b332c20332c20337d207d3b5c6e202020202f2f2f204c616976616e75706f7475732e526976694a6f6c6c61456e6974656e56617061617461287275756475743229203d3d3d20303b5c6e202020202f2f2f20696e745b2c5d2072757564757433203d207b207b312c20312c20307d2c207b302c20302c20327d2c207b302c20332c20307d207d3b5c6e202020202f2f2f204c616976616e75706f7475732e526976694a6f6c6c61456e6974656e56617061617461287275756475743329203d3d3d20313b5c6e202020202f2f2f203c2f7072653e5c6e202020202f2f2f203c2f6578616d706c653e5c6e202020207075626c69632073746174696320696e7420526976694a6f6c6c61456e6974656e5661706161746128696e745b2c5d20727575647574295c6e202020207b5c6e202020202020696e7420726976694a6f6c6c61456e6974656e56617061617461203d20303b5c6e202020202020696e7420656e6974656e566170616974614d61617261203d20303b5c6e2020202020205c6e202020202020666f722028696e742072203d20303b2072203c207275756475742e4765744c656e6774682830293b20722b2b295c6e2020202020207b5c6e2020202020202020696e742076617061617461203d20303b5c6e2020202020202020666f722028696e742073203d20303b2073203c207275756475742e4765744c656e6774682831293b20732b2b295c6e20202020202020207b5c6e20202020202020202020696620287275756475745b722c20735d203d3d20302920766170616174612b2b3b5c6e20202020202020207d5c6e20202020202020206966202876617061617461203e20656e6974656e566170616974614d61617261295c6e20202020202020207b5c6e20202020202020202020726976694a6f6c6c61456e6974656e56617061617461203d20723b5c6e20202020202020202020656e6974656e566170616974614d61617261203d20766170616174613b5c6e20202020202020207d5c6e2020202020207d5c6e20202020202072657475726e20726976694a6f6c6c61456e6974656e566170616174613b5c6e202020207d222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61342e6373222c2022696e64656e74223a202234222c2022706c616365686f6c646572223a20224b69726a6f6974612066756e6b74696f206f7473696b6b6f72697665696e65656e20745c7530306534685c75303065346e2e222c20227265706c61636532223a20225445535453222c20227461736b4944223a2022312e656e6974656e74696c6161222c20226279436f646533223a20227075626c696320636c617373204c616976616e75706f747573222c20227265706c61636533223a2022506f686a6134222c20226279436f646531223a20222f2f5c6e2020202020202020696e745b2c5d2072757564757431203d207b207b312c20302c20327d2c207b302c20302c20327d2c207b332c20332c20337d207d3b5c6e2020202020202020696e742076617061696e203d204c616976616e75706f7475732e526976694a6f6c6c61456e6974656e566170616174612872757564757431293b5c6e2020202020202020436f6e736f6c652e57726974654c696e652876617061696e293b5c6e227d</cs-comtest-runner></div>
    </div>
    
    <div id="par-1248" class="paragraph">
        <h2 id="silmukan-suorituksen-kontrollointi-break--ja-continue-lauseilla">16.8 Silmukan suorituksen kontrollointi break- ja continue-lauseilla</h2>
    </div>
    
    <div id="par-1249" class="paragraph">
        <p>Silmukoiden normaalia toimintaa voidaan muuttaa break- ja continue-lauseilla. Niiden käyttäminen <em>ei</em> ole tavallisesti suositeltavaa, vaan silmukat pitäisi ensisijaisesti suunnitella niin, ettei niitä tarvittaisi.</p>
    </div>
    
    <div id="par-1250" class="paragraph">
        <h3 id="break">16.8.1 break</h3>
    </div>
    
    <div id="par-1251" class="paragraph">
        <p>break-lauseella hypätään välittömästi pois silmukasta ja ohjelman suoritus jatkuu silmukan jälkeen.</p>
    </div>
    
    <div id="par-1252" class="paragraph">
        <div id='1.breakhuono' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a202254554c4f53545553222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022414c4b554f5341222c20227461736b4944223a2022312e627265616b68756f6e6f222c20226279436f6465223a20222020202020202020696e74206c61736b757269203d20303b5c6e20202020202020207768696c6520287472756529205c6e20202020202020207b5c6e2020202020202020202020696620286c61736b757269203e3d2031302920627265616b3b5c6e2020202020202020202020436f6e736f6c652e57726974654c696e65285c2248656c6c6f20776f726c64215c22293b5c6e20202020202020202020206c61736b7572692b2b3b5c6e20202020202020207d227d</cs-runner></div>
    </div>
    
    <div id="par-1253" class="paragraph">
        <p>Yllä olevassa ohjelmassa muodostetaan ikuinen silmukka asettamalla while-silmukan ehdoksi true. Tällöin ohjelman suoritus jatkuisi loputtomiin ilman break-lausetta. Nyt break-lause suoritetaan, kun laskuri saa arvon 10. Tämä rakennehan on täysin järjetön, sillä if-lauseen ehdon voisi asettaa käänteisenä while-lauseen ehdoksi ja ohjelma toimisi täysin samanlailla. Useimmiten break-lauseen käytön voikin välttää.</p>
    </div>
    
    <div id="par-1254" class="paragraph">
        <div id='1.breakpois' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a202254554c4f53545553222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022414c4b554f5341222c20227461736b4944223a2022312e627265616b706f6973222c20226279436f6465223a20222020202020202020696e74206c61736b757269203d20303b5c6e20202020202020207768696c6520286c61736b757269203c20313029205c6e20202020202020207b5c6e2020202020202020202020436f6e736f6c652e57726974654c696e65285c2248656c6c6f20776f726c64215c22293b5c6e20202020202020202020206c61736b7572692b2b3b5c6e20202020202020207d227d</cs-runner></div>
    </div>
    
    <div id="par-1255" class="paragraph">
        <p>break-lauseen käyttö voi kuitenkin olla järkevää, jos kesken silmukan todetaan, että silmukan jatkaminen on syytä lopettaa.</p>
    </div>
    
    <div id="par-1256" class="paragraph">
        <h3 id="continue">16.8.2 continue</h3>
    </div>
    
    <div id="par-1257" class="paragraph">
        <p>continue-lauseella hypätään silmukan alkuun ja silmukan suoritus jatkuu siitä normaalisti. Sillä voidaan siis ohittaa lohkon loppuosa.</p>
    </div>
    
    <div id="par-1258" class="paragraph">
        <div id='1.continueparillinen' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a202254554c4f53545553222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022414c4b554f5341222c20227461736b4944223a2022312e636f6e74696e7565706172696c6c696e656e222c20226279436f6465223a202220202020202020202f2f2054756c6f7374657461616e206c756b75207661696e206a6f73207365206f6e2070617269746f6e5c6e2020202020202020666f722028696e742069203d20303b2069203c2032303b20692b2b29205c6e20202020202020207b5c6e202020202020202020202020696620286920252032203d3d20302920636f6e74696e75653b5c6e202020202020202020202020436f6e736f6c652e57726974654c696e652869293b5c6e20202020202020207d227d</cs-runner></div>
    </div>
    
    <div id="par-1259" class="paragraph">
        <p>Yllä oleva ohjelmanpätkä siirtyy silmukan alkuun kun muuttujan i ja luvun 2 jakojäännös on 0. Muussa tapauksessa ohjelma tulostaa muuttujan i arvon. Toisin sanoen ohjelma tulostaa vain parittomat luvut. Myös <code>continue</code>-rakennetta voi ja kannattaa pyrkiä välttämään, samoin kuin turhia <code>if</code>-rakenteita. Yllä olevan ohjelmanpätkän voisi kirjoittaa vaikka seuraavasti.</p>
    </div>
    
    <div id="par-1260" class="paragraph">
        <div id='1.continuepois1' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a202254554c4f53545553222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022414c4b554f5341222c20227461736b4944223a2022312e636f6e74696e7565706f697331222c20226279436f6465223a202220202020202020202f2f2054756c6f7374657461616e206c756b75207661696e206a6f73207365206f6e2070617269746f6e5c6e2020202020202020666f722028696e742069203d20303b2069203c2032303b20692b2b29205c6e20202020202020207b5c6e20202020202020202020202069662028692025203220213d203029205c6e202020202020202020202020202020436f6e736f6c652e57726974654c696e652869293b5c6e20202020202020207d227d</cs-runner></div>
    </div>
    
    <div id="par-1261" class="paragraph">
        <p>Tai vielä yksinkertaisemmin seuraavasti.</p>
    </div>
    
    <div id="par-1262" class="paragraph">
        <div id='1.continuepois' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a202254554c4f53545553222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022414c4b554f5341222c20227461736b4944223a2022312e636f6e74696e7565706f6973222c20226279436f6465223a202220202020202020202f2f2054756c6f7374657461616e206c756b75207661696e206a6f73207365206f6e2070617269746f6e5c6e2020202020202020666f722028696e742069203d20313b2069203c2032303b2069202b3d203229205c6e20202020202020207b5c6e202020202020202020202020436f6e736f6c652e57726974654c696e652869293b5c6e20202020202020207d227d</cs-runner></div>
    </div>
    
    <div id="par-1263" class="paragraph">
        <p>Tyypillisesti continue-lausetta käytetään tilanteessa, jossa todetaan joidenkin arvojen olevan sellaisia, että tämä silmukan kierros on syytä lopettaa, mutta silmukan suoritusta täytyy vielä jatkaa.</p>
    </div>
    
    <div id="par-1264" class="paragraph">
        <h2 id="ohjelmointikielistä-puuttuva-silmukkarakenne">16.9 Ohjelmointikielistä puuttuva silmukkarakenne</h2>
    </div>
    
    <div id="par-1265" class="paragraph">
        <p>Silloin tällöin ohjelmoinnissa tarvitsisimme rakennetta, jossa silmukan sisäosa on jaettu kahteen osaan. Ensimmäinen osa suoritetaan vaikka ehto ei enää olisikaan voimassa, mutta jälkimmäinen osa jätetään suorittamatta. Tällaista rakennetta ei C#-kielestä löydy valmiina. Tämän rakenteen voi kuitenkin tehdä itse, jolloin on perusteltua käyttää hallittua ikuista silmukkaa, joka lopetetaan break-lauseella. Rakenne voisi olla suunnilleen seuraavanlainen:</p>
    </div>
    
    <div id="par-1266" class="paragraph">
        <pre><code>while (true) 
{ //ikuinen silmukka
   Silmukan ensimmäinen osa //suoritetaan, vaikka ehto ei pädekkään
   if (ehto) break;
   Silmukan toinen osa //ei suoriteta enää, kun ehto ei ole voimassa
}</code></pre>
    </div>
    
    <div id="par-1267" class="paragraph">
        <p>Jos silmukan ehdoksi asetetaan true, täytyy jossain kohtaa ohjelmassa olla break-lause, ettei silmukasta tulisi ikuista. Tällainen rakenne on näppärä juuri silloin, kun haluamme, että silmukan lopettamista tarkastellaan keskellä silmukkaa.</p>
    </div>
    
    <div id="par-1268" class="paragraph">
        <h2 id="yhteenveto">16.10 Yhteenveto</h2>
    </div>
    
    <div id="par-1269" class="paragraph">
        <p>Silmukan valinta:</p>
    </div>
    
    <div id="par-1270" class="paragraph">
        <ul>
<li><p>for: Jos silmukan kierrosten määrä on ennalta tiedossa</p></li>
<li><p>foreach: Jos haluamme tehdä jotain jonkun Collection-tietorakenteen tai taulukon kaikille alkioille.</p></li>
<li><p>while: Jos silmukan kierrosten määrä ei ole tiedossa (erikoistapauksena hallittu ikuinen silmukka, josta poistutaan break-lauseella), emmekä välttämättä halua suorittaa silmukkaa kertaakaan.</p></li>
<li><p>do-while: Jos silmukan kierrosten määrä ei ole tiedossa, mutta haluamme suorittaa silmukan vähintään yhden kerran.</p></li>
</ul>
    </div>
    
    <div id="par-1271" class="paragraph">
        <p>Seuraava kuva kertaa vielä kaikki C#:n valmiit silmukat:</p>
    </div>
    
    <div id="par-1272" class="paragraph">
        <div class="figure">
<img src="/csimages/ohj1/luentomonistecsUusin_htm_m6ff43568.gif" alt="Kuva 27: C#:n silmukat."><p class="caption">Kuva 27: C#:n silmukat.</p>
</div>
    </div>
    
    <div id="par-1273" class="paragraph">
        <h1 id="merkkijonojen-pilkkominen-ja-muokkaaminen">17. Merkkijonojen pilkkominen ja muokkaaminen</h1>
    </div>
    
    <div id="par-1274" class="paragraph">
        <h2 id="string.split">17.1 String.Split()</h2>
    </div>
    
    <div id="par-1275" class="paragraph">
        <p>Merkkijonoja voidaan pilkkoa <code>String</code>-olion <code>Split</code>-metodilla. Metodi palauttaa palaset merkkijono-tyyppisessä taulukossa String[]. Nyt <code>Split()</code>-metodille annetaan parametrina taulukko niistä merkeistä (<code>char</code>), joiden halutaan toimivan erotinmerkkeinä. Oletetaan syöte, ja lisäksi oletetaan, että haluamme, että välilyönti, puolipiste ja pilkku toimivat erotinmerkkeinä.</p>
    </div>
    
    <div id="par-1276" class="paragraph">
        <div id='1.split1' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a202254554c4f53545553222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022414c4b554f5341222c20227461736b4944223a2022312e73706c697431222c20226279436f6465223a20222020202020202020636861725b5d2065726f7474696d6574203d206e657720636861725b5d207b202720272c20273b272c20272c27207d3b5c6e2020202020202020737472696e67206a6f6e6f31203d205c224b69737361206973747575207075757373612c206e61756b75755c223b5c6e2020202020202020737472696e675b5d2070696c6b6f747475203d206a6f6e6f312e53706c69742865726f7474696d6574293b5c6e2020202020202020666f722028696e7420693d303b20693c70696c6b6f7474752e4c656e6774683b20692b2b295c6e20202020202020207b5c6e202020202020202020202020737472696e672070616c61203d2070696c6b6f7474755b695d3b5c6e202020202020202020202020436f6e736f6c652e57726974654c696e65285c227b302c327d3a20277b317d275c222c20692c2070616c61293b5c6e20202020202020207d20227d</cs-runner></div>
    </div>
    
    <div id="par-1277" class="paragraph">
        <p>Merkkijono katkaistaan, jos merkki on välilyönti, pilkku tai puolipiste. Jos käyttäjä antaa useamman erotinmerkin peräkkäin (vaikkapa kaksi välilyöntiä), niin joskus voi olla toivottavaa, ettei kuitenkaan taulukkoon luoda tyhjää alkiota. Edellä tulee yksi tyhjä alkio. Tämä voidaan hoitaa antamalla Split()-metodille lisäparametri StringSplitOptions.RemoveEmptyEntries.</p>
    </div>
    
    <div id="par-1278" class="paragraph">
        <p>Jättämällä tyhjät alkiot huomiotta esimerkiksi merkkijono "kissa,,,; koira" palauttaisi vain kaksialkioisen taulukon:</p>
    </div>
    
    <div id="par-1279" class="paragraph">
        <div id='1.split2' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a202254554c4f53545553222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022414c4b554f5341222c20227461736b4944223a2022312e73706c697432222c20226279436f6465223a20222020202020202020636861725b5d2065726f7474696d6574203d206e657720636861725b5d207b202720272c20273b272c20272c27207d3b5c6e2020202020202020737472696e67206a6f6e6f31203d205c226b697373612c2c2c3b206b6f6972615c223b5c6e2020202020202020737472696e675b5d2070696c6b6f747475203d206a6f6e6f312e53706c69742865726f7474696d65742c5c6e202020202020202020202020202020202020202020537472696e6753706c69744f7074696f6e732e52656d6f7665456d707479456e7472696573293b5c6e2020202020202020666f722028696e7420693d303b20693c70696c6b6f7474752e4c656e6774683b20692b2b295c6e20202020202020207b5c6e202020202020202020202020737472696e672070616c61203d2070696c6b6f7474755b695d3b5c6e202020202020202020202020436f6e736f6c652e57726974654c696e65285c227b302c327d3a20277b317d275c222c20692c2070616c61293b5c6e20202020202020207d20227d</cs-runner></div>
    </div>
    
    <div id="par-1280" class="paragraph">
        <p>Huomaa, että erotinmerkit eivät tule mukaan taulukkoon, vaan ne "häviävät".</p>
    </div>
    
    <div id="par-1281" class="paragraph">
        <h2 id="string.trim">17.2 String.Trim()</h2>
    </div>
    
    <div id="par-1282" class="paragraph">
        <p>String-olion <code>Trim()</code>-metodi palauttaa merkkijonon, josta on poistettu välilyönnit parametrina annetun merkkijonon alusta ja lopusta. Esimerkiksi seuraava koodi</p>
    </div>
    
    <div id="par-1283" class="paragraph">
        <div id='1.stringtrim' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a202254554c4f53545553222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022414c4b554f5341222c20227461736b4944223a2022312e737472696e677472696d222c20226279436f6465223a20222020202020202020537472696e67206a6f6e6f33203d205c2220206b616c6c652020206a61206b696c6c65202020205c223b5c6e2020202020202020436f6e736f6c652e57726974654c696e65285c227c5c22202b206a6f6e6f33202e5472696d2829202b205c227c5c2220293b202f2f205c227c6b616c6c652020206a61206b696c6c657c5c22227d</cs-runner></div>
    </div>
    
    <div id="par-1284" class="paragraph">
        <p>tulostaisi:</p>
    </div>
    
    <div id="par-1285" class="paragraph">
        <pre><code>|kalle   ja kille|</code></pre>
    </div>
    
    <div id="par-1286" class="paragraph">
        <p>Huomaa, että merkkijonon keskellä olevia "ylimääräisiä" välilyöntejä <code>Trim</code>-metodi ei kuitenkaan poista.</p>
    </div>
    
    <div id="par-1287" class="paragraph">
        <h2 id="esimerkki-merkkijonon-pilkkominen-ja-muuttaminen-kokonaisluvuiksi">17.3 Esimerkki: Merkkijonon pilkkominen ja muuttaminen kokonaisluvuiksi</h2>
    </div>
    
    <div id="par-1288" class="paragraph">
        <p>Tehdään ohjelma, joka kysyy käyttäjältä positiivisia kokonaislukuja, laskee ne yhteen ja tulostaa tuloksen näytölle. Käyttäjä antaa luvut siten, että välilyönti ja pilkku toimivat erotinmerkkeinä. Mikäli käyttäjä antaa jotain muita merkkejä kuin positiivisia kokonaislukuja (ja erotinmerkkejä), ohjelma antaa virheilmoituksen ja suoritus päättyy. Ohjelmassa tehdään seuraavat aliohjelmat.</p>
    </div>
    
    <div id="par-1289" class="paragraph">
        <p><code>int[] MerkkijonoLuvuiksi(String, char[])</code><br> Aliohjelma muuttaa annetun merkkijonon kokonaislukutaulukoksi siten, etta luvut erotellaan annetun merkkitaulukon (erotinmerkkien) perusteella. Syötteen tulee sisältää vain lukuja ja erotinmerkkejä.</p>
    </div>
    
    <div id="par-1290" class="paragraph">
        <p><code>int LaskeYhteen(int[])</code><br> Palauttaa annetun kokonaislukutaulukon alkioiden summan.</p>
    </div>
    
    <div id="par-1291" class="paragraph">
        <p><code>bool OnkoVainLukuja(String, char[])</code><br> Tutkii sisältääkö annettu merkkijono vain lukuja (positiivisia kokonaislukuja) ja erotinmerkkejä. Jos annettu merkkijono on tyhjä (pituus on 0), palautetaan false.</p>
    </div>
    
    <div id="par-1292" class="paragraph">
        <p><code>void TulostaTaulukko(int[])</code><br> Tulostaa annetun kokonaislukutaulukon kaikki alkiot.</p>
    </div>
    
    <div id="par-1293" class="paragraph">
        <pre><code>using System;

/// @author  Antti-Jussi Lakanen
/// @version 22.12.2011
///
/// &lt;summary&gt;
/// Harjoitellaan merkkijonojen pilkkomista.
/// &lt;/summary&gt;
public class MjLuvuiksi
{
    /// &lt;summary&gt;
    /// Kysellaan kayttajalta merkkijonoja ja 
    /// tehdaan niista taulukkoja, lasketaan lukuja yhteen ja tulostellaan.
    /// &lt;/summary&gt;
    public static void Main()
    {
        char[] erottimet = new char[] { ' ', ',' };
        Console.Write("Anna positiivisia kokonaislukuja &gt; ");
        String lukusyote = Console.ReadLine();


        // Jos kayttaja antanut jotain muuta kuin positiivisia 
        // kokonaislukuja, ei yritetakaan laskea lukuja yhteen
        if (OnkoVainLukuja(lukusyote, erottimet))
        {
            int[] luvut = MerkkijonoLuvuiksi(lukusyote, erottimet);
            Console.WriteLine("Tulkittiin luvut:");
            TulostaTaulukko(luvut);
            Console.WriteLine("Antamiesi lukujen summa on : " + LaskeYhteen(luvut));
        }
        else
            Console.WriteLine("Annoit muuta kuin lukuja, tai tyhjan jonon");
        Console.ReadKey();
    }

    /// &lt;summary&gt;
    /// Aliohjelma muuttaa annetun merkkijonon 
    /// kokonaislukutaulukoksi siten, etta luvut 
    /// erotellaan annetun merkkitaulukon (erotinmerkkien)
    /// perusteella. Syötteen tulee sisältää vain
    /// lukuja ja erotinmerkkejä.
    /// &lt;/summary&gt;
    /// &lt;param name="lukusyote"&gt;Muunnettava merkkijono&lt;/param&gt;
    /// &lt;param name="erottimet"&gt;Sallitut erotinmerkit merkkitaulukossa&lt;/param&gt;
    /// &lt;returns&gt;Merkkijonosta selvitetty kokonaislukutaulukko.&lt;/returns&gt;
    /// &lt;example&gt;
    /// &lt;pre name="test"&gt;
    /// int[] luvut1 = MjLuvuiksi.MerkkijonoLuvuiksi("1 2 3", new char[] {' '});
    /// String.Join(",", luvut1) === "1,2,3";
    /// int[] luvut2 = MjLuvuiksi.MerkkijonoLuvuiksi(",,1,, 2 ,3", new char[] {' ', ','});
    /// String.Join(",", luvut2) === "1,2,3";
    /// int[] luvut3 = MjLuvuiksi.MerkkijonoLuvuiksi("", new char[] {' '});
    /// String.Join(",", luvut3) === "";
    /// &lt;/pre&gt;
    /// &lt;/example&gt;
    public static int[] MerkkijonoLuvuiksi(string lukusyote, char[] erottimet)
    {
        // Tyhjat pois edesta ja lopusta (Trim) 
        // Jos on annettu ylimaaraisia valilyonteja, ei lisata niita taulukkoon.            
        String[] pilkottu = 
           lukusyote.Trim().Split(erottimet, StringSplitOptions.RemoveEmptyEntries);
        int[] luvut = new int[pilkottu.Length]; // luvut[] saa kookseen saman kuin
                                                //  pilkottu[]
        for (int i = 0; i &lt; pilkottu.Length; i++)
            luvut[i] = int.Parse(pilkottu[i]);
        return luvut;
    }

    /// &lt;summary&gt;
    /// Laskee kokonaislukutaulukon alkiot yhteen ja palauttaa alkioiden summan.
    /// &lt;/summary&gt;
    /// &lt;param name="luvut"&gt;Tutkittava kokonaislukutaulukko&lt;/param&gt;
    /// &lt;returns&gt;Taulukon alkioiden summa&lt;/returns&gt;
    /// &lt;example&gt;
    /// &lt;pre name="test"&gt;
    /// int[] luvut1 = {5, 7, 9, 10};
    /// MjLuvuiksi.LaskeYhteen(luvut1) === 31;
    /// int[] luvut2 = {-5, 5, -10, 10};
    /// MjLuvuiksi.LaskeYhteen(luvut2) === 0;
    /// int[] luvut3 = {};
    /// MjLuvuiksi.LaskeYhteen(luvut3) === 0;
    /// &lt;/pre&gt;
    /// &lt;/example&gt;
    public static int LaskeYhteen(int[] luvut)
    {
        int summa = 0;
        for (int i = 0; i &lt; luvut.Length; i++)
            summa += luvut[i];
        return summa;
    }

    /// &lt;summary&gt;
    /// Aliohjelmassa tutkitaan sisaltaako merkkijono muitakin
    /// merkkeja kuin positiivisia kokonaislukuja ja erotinmerkkeja.
    /// &lt;/summary&gt;
    /// &lt;param name="lukusyote"&gt;Tutkittava merkkinojo, 
    /// josta etsitaan vieraita merkkeja&lt;/param&gt;
    /// &lt;param name="erottimet"&gt;Sallitut erotinmerkit 
    /// merkkitaulukossa&lt;/param&gt;
    /// &lt;returns&gt;Onko pelkkiä lukuja&lt;/returns&gt;
    /// &lt;example&gt;
    /// &lt;pre name="test"&gt;
    /// MjLuvuiksi.OnkoVainLukuja("1,2,3", new char[]{','}) === true;
    /// MjLuvuiksi.OnkoVainLukuja("1, 2, 3", new char[]{','}) === false;
    /// MjLuvuiksi.OnkoVainLukuja("1, 2, 3", new char[]{',', ' '}) === true;
    /// MjLuvuiksi.OnkoVainLukuja("", new char[]{' '}) === false;
    /// &lt;/pre&gt;
    /// &lt;/example&gt;
    public static bool OnkoVainLukuja(string lukusyote, char[] erottimet)
    {
        // Jos yhtaan merkkia ei ole annettu, 
        // palautetaan automaattisesti kielteinen vastaus.
        if (lukusyote.Length == 0) return false; 
        for (int i = 0; i &lt; erottimet.Length; i++)
            // Korvataan erotinmerkit tyhjalla merkkijonolla, 
            // silla olemme kiinnostuneita vain "varsinaisesta sisallosta"
            lukusyote = lukusyote.Replace(erottimet[i].ToString(), ""); 

        foreach (char merkki in lukusyote)
            // Jos yksikin merkki on jokin muu kuin numero, 
            // palautetaan kielteinen vastaus.
            if (!Char.IsDigit(merkki)) return false; 
        return true;
    }

    /// &lt;summary&gt;
    /// Tulostetaan kokonaislukutaulukon osat foreach-silmukassa
    /// &lt;/summary&gt;
    /// &lt;param name="t"&gt;Tulostettava taulukko&lt;/param&gt;
    public static void TulostaTaulukko(int[] t)
    {
        foreach (int pala in t)
            Console.WriteLine(pala);
        Console.WriteLine("-------------------------------");
    }
}</code></pre>
    </div>
    
    <div id="par-1294" class="paragraph">
        <h1 id="järjestäminen">18. Järjestäminen</h1>
    </div>
    
    <div id="par-1295" class="paragraph">
        <p>Kuinka järjestät satunnaisessa järjestyksessä olevan korttipakan kortit järjestykseen pienimmästä suurimpaan?</p>
    </div>
    
    <div id="par-1296" class="paragraph">
        <p>Yksi tutkituimmista ohjelmointiongelmista ja algoritmeista on järjestämisalgoritmi. Siis kuinka saamme esimerkiksi korttipakan kortit numerojärjestykseen. Tai ohjelmointiin soveltuvammin kuinka saamme järjestettyä taulukon luvut? Vaikka aluksi tuntuu, ettei erilaisia tapoja järjestämiseen ole kovin montaa, on niitä todellisuudessa kymmeniä, ellei satoja.</p>
    </div>
    
    <div id="par-1297" class="paragraph">
        <p>Järjestämisalgoritmeja käsitellään enemmän muilla kursseilla (esim. <a href="https://korppi.jyu.fi/kotka/r.jsp?course=132236">ITKA201 Algoritmit 1</a> ja <a href="https://korppi.jyu.fi/kotka/r.jsp?course=132249">TIEP111 Ohjelmointi 2</a>). Tässä vaiheessa meille riittää, että osaamme käyttää C#:sta valmiina löytyvää järjestämisaliohjelmaa <code>Sort</code>. Tämä on siitäkin syystä järkevää, että kielestä valmiina löytyvä järjestämisalgoritmi on <em>lähes aina nopeampi</em>, kuin itse tehty.</p>
    </div>
    
    <div id="par-1298" class="paragraph">
        <p>Taulukot voidaan järjestää käyttämällä <code>Array</code>-luokasta löytyvää <code>Sort</code>-aliohjelmaa. Parametrina <code>Sort</code>-aliohjelma saa järjestettävän taulukon. Aliohjelman tyyppi on static void, eli se <em>ei</em> palauta mitään, vaan ainoastaan järjestää taulukon.</p>
    </div>
    
    <div id="par-1299" class="paragraph">
        <div id='1.sort' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a202254554c4f53545553222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022414c4b554f5341222c20227461736b4944223a2022312e736f7274222c20226279436f6465223a20222020202020202020696e745b5d207461756c756b6b6f203d207b2d342c20352c202d322c20342c20352c2031322c20397d3b5c6e202020202020202041727261792e536f7274287461756c756b6b6f293b5c6e202020205c6e20202020202020202f2f2054756c6f7374657461616e20616c6b696f742c206574745c7530306534206e5c753030653468645c75303065345c7530306534206f6e6e69737475696b6f206a5c7530306534726a6573745c75303065346d696e656e2e5c6e2020202020202020436f6e736f6c652e57726974654c696e6528537472696e672e4a6f696e285c22205c222c7461756c756b6b6f29293b227d</cs-runner></div>
    </div>
    
    <div id="par-1300" class="paragraph">
        <p>Alkioiden pitäisi nyt tulostua numerojärjestyksessä. Taulukko voitaisiin myös järjestää vain osittain antamalla <code>Sort</code>-aliohjelmalle lisäksi parametreina aloitusindeksi, sekä järjestettävien alkioiden määrä.</p>
    </div>
    
    <div id="par-1301" class="paragraph">
        <div id='1.sort3' data-plugin='/csPlugin'><cs-runner>xxxHEXJSONxxx7b227265706c616365223a202254554c4f53545553222c202266696c65223a202268747470733a2f2f73766e2e63632e6a79752e66692f7372762f73766e2f6f686a312f6c75656e746f6d6f6e6973746563732f6573696d65726b69742f506f686a612f506f686a612f506f686a61332e6373222c2022757365725f6964223a2022766573616c222c20227265706c61636531223a2022414c4b554f5341222c20227461736b4944223a2022312e736f727433222c20226279436f6465223a20222020202020202020696e745b5d207461756c756b6b6f203d207b2d342c20352c202d322c20342c20352c2031322c20397d3b5c6e202020202020202041727261792e536f7274287461756c756b6b6f2c20302c2033293b5c6e202020205c6e20202020202020202f2f2054756c6f7374657461616e20616c6b696f742c206574745c7530306534206e5c753030653468645c75303065345c7530306534206f6e6e69737475696b6f206a5c7530306534726a6573745c75303065346d696e656e2e5c6e2020202020202020436f6e736f6c652e57726974654c696e6528537472696e672e4a6f696e285c22205c222c7461756c756b6b6f29293b227d</cs-runner></div>
    </div>
    
    <div id="par-1302" class="paragraph">
        <pre><code>// Tulostuu -4 -2 5 4 5 12 9</code></pre>
    </div>
    
    <div id="par-1303" class="paragraph">
        <p>Kaikkia alkeistietotyyppisiä taulukoita voidaan järjestää <code>Sort</code>-aliohjelmalla. Lisäksi voidaan järjestää taulukoita, joiden alkioiden tietotyyppi <em>toteuttaa</em> (implements) <code>IComparable</code>-rajapinnan. Esimerkiksi <code>String</code>-luokka toteuttaa tuon rajapinnan. Rajapinnoista puhutaan lisää kohdassa 23.1.</p>
    </div>
    
    <div id="par-1304" class="paragraph">
        <h1 id="olion-ulkonäön-muuttaminen-jypeli">19. Olion ulkonäön muuttaminen (Jypeli)</h1>
    </div>
    
    <div id="par-1305" class="paragraph">
        <p>Olemme tähän mennessä käyttäneet jo monia Jypeli-kirjastoon kirjoitettuja luokkia ja aliohjelmia. Tässä luvussa esitellään muutamia yksittäisiä tärkeitä luokkia, aliohjelmia ja ominaisuuksia.</p>
    </div>
    
    <div id="par-1306" class="paragraph">
        <p>Luodaan ensin olio, jonka ulkonäköä esimerkeissä muutetaan.</p>
    </div>
    
    <div id="par-1307" class="paragraph">
        <pre><code>PhysicsObject palikka = new PhysicsObject(100, 50);</code></pre>
    </div>
    
    <div id="par-1308" class="paragraph">
        <p>Olion on suorakulmio, jonka leveys on 100 ja korkeus 50. Jos haluat olion näkyviin pelikentälle, muista aina lisätä se seuraavalla lauseella.</p>
    </div>
    
    <div id="par-1309" class="paragraph">
        <pre><code>Add(palikka);</code></pre>
    </div>
    
    <div id="par-1310" class="paragraph">
        <h2 id="väri">19.1 Väri</h2>
    </div>
    
    <div id="par-1311" class="paragraph">
        <p>Vaihdetaan seuraavaksi luomamme olion väri. Värin voi vaihtaa seuraavalla tavalla:</p>
    </div>
    
    <div id="par-1312" class="paragraph">
        <pre><code>palikka.Color = Color.Gray;</code></pre>
    </div>
    
    <div id="par-1313" class="paragraph">
        <p>Esimerkissä siis oliosta tehtiin harmaa. Värejä on valmiina paljon ja niistä voi valita haluamansa. Voit esikatsella valmiita värejä osoitteesta</p>
    </div>
    
    <div id="par-1314" class="paragraph">
        <p><a href="https://trac.cc.jyu.fi/projects/npo/wiki/OlionUlkonako#a2.V%C3%A4ri" class="uri">https://trac.cc.jyu.fi/projects/npo/wiki/OlionUlkonako#a2.Väri</a>.</p>
    </div>
    
    <div id="par-1315" class="paragraph">
        <p>Omia värejä voi myös tehdä seuraavasti:</p>
    </div>
    
    <div id="par-1316" class="paragraph">
        <pre><code>palikka.Color = new Color( 0, 0, 0 );</code></pre>
    </div>
    
    <div id="par-1317" class="paragraph">
        <p>Oliosta tuli musta. Ensimmäinen arvo kertoo punaisen värin määrän, toinen arvo vihreän värin määrän ja kolmas sinisen värin määrän. "Värimaailman" lyhenne RGB (<strong>R</strong>ed, <strong>G</strong>reen, <strong>B</strong>lue) tulee tästä. Lyhenteestä on helppo muistaa missä järjestyksessä värit tulevat. Määrät ovat kokonaislukuja välillä 0-255 (byte). Muitakin tapoja värien asettamiseen on olemassa, mutta näillä kahdella pärjää jo hyvin.</p>
    </div>
    
    <div id="par-1318" class="paragraph">
        <h2 id="koko">19.2 Koko</h2>
    </div>
    
    <div id="par-1319" class="paragraph">
        <p>Kokoa voi vaihtaa seuraavasti.</p>
    </div>
    
    <div id="par-1320" class="paragraph">
        <pre><code>palikka.Width = leveys;
palikka.Height = korkeus;</code></pre>
    </div>
    
    <div id="par-1321" class="paragraph">
        <p>Leveys ja korkeus annetaan double-tyyppisinä lukuina. Saman asian voi tehdä myös vektorin avulla yhdellä rivillä.</p>
    </div>
    
    <div id="par-1322" class="paragraph">
        <pre><code>palikka.Size = new Vector(leveys, korkeus);</code></pre>
    </div>
    
    <div id="par-1323" class="paragraph">
        <h2 id="tekstuuri">19.3 Tekstuuri</h2>
    </div>
    
    <div id="par-1324" class="paragraph">
        <p>Tekstuurikuvat kannattaa tallentaa png-muodossa, jolloin kuvaan voidaan tallentaa myös alpha-kanavan tieto (läpinäkyvyys). Tallenna png-kuva projektin Content-kansioon. Klikkaa sitten Visual Studion Solution Explorerissa projektin nimen päällä hiiren oikealla napilla ja Add -&gt; Existing item. Hae kansiorakenteesta juuri tallentamasi kuva.</p>
    </div>
    
    <div id="par-1325" class="paragraph">
        <p>Tämän jälkeen tekstuuri asetetaan kuvalle seuraavasti.</p>
    </div>
    
    <div id="par-1326" class="paragraph">
        <pre><code>Image olionKuva = LoadImage("kuvanNimi");
olio.Image = olionKuva;</code></pre>
    </div>
    
    <div id="par-1327" class="paragraph">
        <p>Huomaa, että png-tunnistetta ei tarvitse laittaa kuvan nimen perään.</p>
    </div>
    
    <div id="par-1328" class="paragraph">
        <p>Saman voi tehdä myös lyhyemmin:</p>
    </div>
    
    <div id="par-1329" class="paragraph">
        <pre><code>palikka.Image = LoadImage("kuvanNimi");</code></pre>
    </div>
    
    <div id="par-1330" class="paragraph">
        <p>Kohta kuvanNimi on Contentiin siirretyn kuvan nimi. Esimerkiksi, jos kuva on kissa.png, niin kuvan nimi on silloin pelkkä kissa.</p>
    </div>
    
    <div id="par-1331" class="paragraph">
        <h2 id="olion-muoto">19.4 Olion muoto</h2>
    </div>
    
    <div id="par-1332" class="paragraph">
        <p>Joskus olion muodon voi antaa jo oliota luotaessa. Muotoa voi kuitenkin myös jälkikäteen muuttaa. Esimerkiksi:</p>
    </div>
    
    <div id="par-1333" class="paragraph">
        <pre><code>olio.Shape = Shape.Circle;</code></pre>
    </div>
    
    <div id="par-1334" class="paragraph">
        <p>Tämä tekee oliostamme ympyrän muotoisen. Muita mahdollisia muotoja on esimerkiksi nelikulmio, Shape.Rectangle.</p>
    </div>
    
    <div id="par-1335" class="paragraph">
        <h1 id="ohjainten-lisääminen-peliin-jypeli">20. Ohjainten lisääminen peliin (Jypeli)</h1>
    </div>
    
    <div id="par-1336" class="paragraph">
        <p>Peli voi ottaa vastaan näppäimistön, Xbox 360 -ohjaimen, hiiren ja Windows Phone 7 -puhelimen ohjausta. Ohjainten liikettä "kuunnellaan" ja jokaiselle ohjaimelle voidaan määrittää erikseen, mitä mistäkin tapahtuu. Kullekin ohjaimelle (näppäimistö, hiiri, Xbox-ohjain, WP7-kosketusnäyttö, WP7-kiihtyvyysanturi) on tehty oma Listen-aliohjelma jolla kuuntelun asettaminen onnistuu.</p>
    </div>
    
    <div id="par-1337" class="paragraph">
        <p>Jokainen Listen-kutsu on muodoltaan samanlainen riippumatta siitä mitä ohjainta kuunnellaan. Ensimmäinen parametri kertoo mitä näppäintä kuunnellaan, esimerkiksi:</p>
    </div>
    
    <div id="par-1338" class="paragraph">
        <pre><code>Näppäimistö: Key.Up
Xbox360-ohjain: Button.DPadLeft
Hiiri: MouseButton.Left</code></pre>
    </div>
    
    <div id="par-1339" class="paragraph">
        <p>Visual Studion kirjoitusapu auttaa löytämään mitä erilaisia näppäinvaihtoehtoja kullakin ohjaimella on.</p>
    </div>
    
    <div id="par-1340" class="paragraph">
        <p>Toinen parametri määrittää minkälaisia näppäinten tapahtumia halutaan kuunnella ja sillä on neljä mahdollista arvoa:</p>
    </div>
    
    <div id="par-1341" class="paragraph">
        <ul>
<li><p>ButtonState.Released: Näppäin on juuri vapautettu</p></li>
<li><p>ButtonState.Pressed: Näppäin on juuri painettu alas</p></li>
<li><p>ButtonState.Up: Näppäin on ylhäällä (vapautettuna)</p></li>
<li><p>ButtonState.Down: Näppäin on alaspainettuna</p></li>
</ul>
    </div>
    
    <div id="par-1342" class="paragraph">
        <p>Kolmas parametri kertoo mitä tehdään, kun näppäin sitten on painettuna. Tähän tulee tapahtuman käsittelijä, eli sen aliohjelman nimi, jonka suoritukseen haluamme siirtyä näppäimen tapahtuman sattuessa.</p>
    </div>
    
    <div id="par-1343" class="paragraph">
        <p>Neljäs parametri on ohjeteksti, joka voidaan näyttää pelaajalle pelin alussa. Tässä tarvitsee vain kertoa mitä tapahtuu kun näppäintä painetaan. Ohjetekstin tyyppi on String eli merkkijono. Merkkijono on jono kirjoitusmerkkejä tietokoneen muistissa. Merkkijonoilla voimme esittää mm. sanoja ja lauseita. Jos ohjetta ei halua tai tarvitse laittaa, neljännen parametrin arvoksi voi antaa null jolloin se jää tyhjäksi.</p>
    </div>
    
    <div id="par-1344" class="paragraph">
        <p>Parametrejä voi antaa enemmänkin sen mukaan mitä pelissä tarvitsee. Omat (eli valinnaiset) parametrit laitetaan edellä mainittujen pakollisten parametrien jälkeen ja ne viedään automaattisesti Listen-kutsussa annetulle käsittelijälle. Tästä esimerkki hetken kuluttua.</p>
    </div>
    
    <div id="par-1345" class="paragraph">
        <p>Esimerkki näppäimistön kuuntelusta:</p>
    </div>
    
    <div id="par-1346" class="paragraph">
        <pre><code>Keyboard.Listen(Key.Left, ButtonState.Down, 
  LiikutaPelaajaaVasemmalle, "Liikuta pelaajaa vasemmalle");</code></pre>
    </div>
    
    <div id="par-1347" class="paragraph">
        <p>Kun vasen (Key.Left) näppäin on alhaalla (ButtonState.Down), niin liikutetaan pelaajaa suorittamalla metodi LiikutaPelaajaaVasemmalle. Viimeisenä parametrina on pelissä näkyvä näppäinohjeteksti.</p>
    </div>
    
    <div id="par-1348" class="paragraph">
        <p>Vastaava esimerkki Xbox 360 -ohjaimen kuuntelusta:</p>
    </div>
    
    <div id="par-1349" class="paragraph">
        <pre><code>ControllerOne.Listen(Button.DPadLeft, ButtonState.Down, LiikutaPelaajaaVasemmalle,
                    "Liikuta pelaajaa vasemmalle");</code></pre>
    </div>
    
    <div id="par-1350" class="paragraph">
        <p>Yhtäaikaisesti voidaan kuunnella jopa neljää XBox-ohjainta. Tässä kuunnellaan ohjaimista ensimmäistä (ControllerOne). Muut ohjaimet ovat ControllerTwo ja niin edelleen. Kunkin ohjaimen järjestysluku näkyy ohjaimen keskellä olevassa Xbox-kuvakkeessa, missä erityinen valo indikoi, mikä ohjain on kysymyksessä.</p>
    </div>
    
    <div id="par-1351" class="paragraph">
        <h2 id="näppäimistö">20.1 Näppäimistö</h2>
    </div>
    
    <div id="par-1352" class="paragraph">
        <p>Tässä esimerkissä asetetaan näppäimistön nuolinäppäimet liikuttamaan pelaajaa.</p>
    </div>
    
    <div id="par-1353" class="paragraph">
        <pre><code>using System;
using Jypeli;

/// &lt;summary&gt;
/// Peli, jossa liikutellaan palloa.
/// &lt;/summary&gt;
public class Peli : PhysicsGame
{
    /// &lt;summary&gt;
    /// Luodaan pelaaja ja asetetaan näppäintenkuuntelijat
    /// &lt;/summary&gt;
    public override void Begin()
    {
        PhysicsObject pelaaja = new PhysicsObject(50, 50, Shape.Circle);
        Add(pelaaja);
        Keyboard.Listen(Key.Left, ButtonState.Down,
            LiikutaPelaajaa, "Liikuta vasemmalle", 
            pelaaja, new Vector(-1000, 0));
        Keyboard.Listen(Key.Right, ButtonState.Down,
            LiikutaPelaajaa, "Liikuta oikealle", pelaaja, new Vector(1000, 0));
        Keyboard.Listen(Key.Up, ButtonState.Down, 
            LiikutaPelaajaa, "Liikuta ylös", pelaaja, new Vector(0, 1000));
        Keyboard.Listen(Key.Down, ButtonState.Down,
            LiikutaPelaajaa, "Liikuta alas", pelaaja, new Vector(0, -1000));
    }

    /// &lt;summary&gt;
    /// Aliohjelmassa liikutetaan 
    /// oliota "työntämällä".
    /// &lt;/summary&gt;
    /// &lt;param name="suunta"&gt;Mihin suuntaan&lt;/param&gt;
    private void LiikutaPelaajaa(PhysicsObject olio, Vector suunta)
    {
        olio.Push(suunta);
    }
}</code></pre>
    </div>
    
    <div id="par-1354" class="paragraph">
        <p><em>Tapahtumankäsittelijän</em> LiikutaPelaajaa parametreista Physicsobject olio ja Vector suunta saadaan tiedot, <em>mitä oliota</em> halutaan liikuttaa ja <em>mihin suuntaan</em>. Huomaa, että nämä tiedot annetaan kutsuvaiheessa "ylimääräisinä parametreina", eli Keyboard.Listen-riveillä.</p>
    </div>
    
    <div id="par-1355" class="paragraph">
        <h2 id="lopetuspainike-ja-näppäinohjepainike">20.2 Lopetuspainike ja näppäinohjepainike</h2>
    </div>
    
    <div id="par-1356" class="paragraph">
        <p>Pelin lopettamiselle ja näppäinohjeen näyttämiselle ruudulla on Jypelissä olemassa valmiit aliohjelmat. Ne voidaan asettaa näppäimiin seuraavasti:</p>
    </div>
    
    <div id="par-1357" class="paragraph">
        <pre><code>Keyboard.Listen(Key.Escape, ButtonState.Pressed, Exit, "Poistu");
Keyboard.Listen(Key.F1, ButtonState.Pressed, ShowControlHelp, "Näytä ohjeet");</code></pre>
    </div>
    
    <div id="par-1358" class="paragraph">
        <p>Tässä näppäimistön Esc-painike lopettaa pelin ja F1-painike näyttää ohjeet.</p>
    </div>
    
    <div id="par-1359" class="paragraph">
        <p>ShowControlHelp näyttää peliruudulla pelissä käytetyt näppäimet ja niille asetetut ohjetekstit. Ohjeteksti on Listen-kutsun neljäntenä parametrina annettu merkkijono.</p>
    </div>
    
    <div id="par-1360" class="paragraph">
        <h2 id="peliohjain">20.3 Peliohjain</h2>
    </div>
    
    <div id="par-1361" class="paragraph">
        <p>Sama esimerkki XBox-peliohjainta käyttäen voidaan tehdä korvaamalla rivit</p>
    </div>
    
    <div id="par-1362" class="paragraph">
        <pre><code>Keyboard.Listen(...);</code></pre>
    </div>
    
    <div id="par-1363" class="paragraph">
        <p>riveillä</p>
    </div>
    
    <div id="par-1364" class="paragraph">
        <pre><code>ControllerOne.Listen(...);</code></pre>
    </div>
    
    <div id="par-1365" class="paragraph">
        <p>esimerkiksi näin</p>
    </div>
    
    <div id="par-1366" class="paragraph">
        <pre><code>ControllerOne.Listen(Button.DPadLeft, ButtonState.Down, LiikutaPelaajaa, "Liikuta vasemmalle", pelaaja, new Vector(-1000, 0));</code></pre>
    </div>
    
    <div id="par-1367" class="paragraph">
        <p>LiikutaPelaajaa-aliohjelmaan sen sijaan ei tarvitse tehdä muutoksia, joten sama aliohjelma kelpaa sekä näppäimen että Xbox-ohjaimen "digipad"-napin kuunteluun.</p>
    </div>
    
    <div id="par-1368" class="paragraph">
        <h3 id="analoginen-tatti">20.3.1 Analoginen "tatti"</h3>
    </div>
    
    <div id="par-1369" class="paragraph">
        <p>Jos halutaan kuunnella ohjaimen tattien liikettä, käytetään ListenAnalog-kutsua.</p>
    </div>
    
    <div id="par-1370" class="paragraph">
        <pre><code>ControllerOne.ListenAnalog(AnalogControl.LeftStick, 0.1, 
                           LiikutaPelaajaa, "Liikuta pelaajaa tattia pyörittämällä.");</code></pre>
    </div>
    
    <div id="par-1371" class="paragraph">
        <p>Kuunnellaan vasenta tattia (AnalogControl.LeftStick). Luku 0.1 kuvaa sitä, miten herkästä liikkeestä tattia kuunteleva aliohjelma suoritetaan. Kuuntelua käsittelee aliohjelma LiikutaPelaajaa.</p>
    </div>
    
    <div id="par-1372" class="paragraph">
        <p>LiikutaPelaajaa-aliohjelman tulee ottaa vastaan seuraavanlainen parametri:</p>
    </div>
    
    <div id="par-1373" class="paragraph">
        <pre><code>private void LiikutaPelaajaa(AnalogState tatinTila)
{
  // Liikutellaan
}</code></pre>
    </div>
    
    <div id="par-1374" class="paragraph">
        <p>Tatin asento saadaan selville parametrina vastaan otettavasta AnalogState-tyyppisestä muuttujasta:</p>
    </div>
    
    <div id="par-1375" class="paragraph">
        <pre><code>private void LiikutaPelaajaa(AnalogState tatinTila)
{
  Vector tatinAsento = tatinTila.StateVector;
  // Tehdään jotain tatin asennolla, esim liikutetaan pelaajaa...
}</code></pre>
    </div>
    
    <div id="par-1376" class="paragraph">
        <p>StateVector antaa siis vektorin, joka kertoo mihin suuntaan tatti osoittaa. Vektorin X ja Y -koordinaattien arvot ovat molemmat väliltä miinus yhdestä yhteen (-1 - 1) tatin suunnasta riippuen. Tämän vektorin avulla voidaan esimerkiksi kertoa pelaajalle mihin suuntaan sen kuuluu liikkua.</p>
    </div>
    
    <div id="par-1377" class="paragraph">
        <div id='1.k28' data-plugin='/showImage'><img height="218" src="/csimages/ohj1/luentomonistecsUusin_htm_54d2cbea.png">
<p class="footer">Kuva 28: Yksikköympyrä.</p>
</div>
    </div>
    
    <div id="par-1378" class="paragraph">
        <p>Tatin asennon tietyllä hetkellä saa selville myös ilman jatkuvaa tatin kuuntelua kirjoittamalla:</p>
    </div>
    
    <div id="par-1379" class="paragraph">
        <pre><code>Vector tatinAsento = ControllerOne.LeftThumbDirection;</code></pre>
    </div>
    
    <div id="par-1380" class="paragraph">
        <p>Tämä palauttaa samoin vektorin tatin sen hetkisestä asennosta (X ja Y väliltä -1, 1).</p>
    </div>
    
    <div id="par-1381" class="paragraph">
        <p>Myös Xbox-ohjaimen liipaisimia voidaan kuunnella. Lue lisää ohjewikistä: <a href="https://trac.cc.jyu.fi/projects/npo/wiki/OhjaintenLisays" class="uri">https://trac.cc.jyu.fi/projects/npo/wiki/OhjaintenLisays</a>.</p>
    </div>
    
    <div id="par-1382" class="paragraph">
        <h2 id="hiiri">20.4 Hiiri</h2>
    </div>
    
    <div id="par-1383" class="paragraph">
        <h3 id="näppäimet">20.4.1 Näppäimet</h3>
    </div>
    
    <div id="par-1384" class="paragraph">
        <p>Hiiren näppäimiä voi kuunnella aivan samaan tapaan kuin näppäimistön ja Xbox-ohjaimenkin.</p>
    </div>
    
    <div id="par-1385" class="paragraph">
        <pre><code>Mouse.Listen(MouseButton.Left, ButtonState.Pressed, Ammu, "Ammu aseella.");</code></pre>
    </div>
    
    <div id="par-1386" class="paragraph">
        <p>Tässä esimerkissä painettaessa hiiren vasenta näppäintä kutsutaan Ammu-nimistä aliohjelmaa. Tuo aliohjelma pitää tietenkin erikseen tehdä:</p>
    </div>
    
    <div id="par-1387" class="paragraph">
        <pre><code>private void Ammu()
{
  /// Kirjoita tähän Ammu()-aliohjelman koodi.
}</code></pre>
    </div>
    
    <div id="par-1388" class="paragraph">
        <h3 id="hiiren-liike">20.4.2 Hiiren liike</h3>
    </div>
    
    <div id="par-1389" class="paragraph">
        <p>Hiirellä ohjauksessa on kuitenkin usein oleellista tietää jotain kursorin sijainnista. Hiiren kursori ei ole oletuksenä näkyvä peliruudulla, mutta sen saa halutessaan helposti näkyviin, kun kirjoittaa koodiin seuraavan rivin vaikkapa kentän luomisen yhteydessä:</p>
    </div>
    
    <div id="par-1390" class="paragraph">
        <pre><code>Mouse.IsCursorVisible = true;</code></pre>
    </div>
    
    <div id="par-1391" class="paragraph">
        <p>Hiiren paikan ruudulla saadaan vektorina kirjoittamalla:</p>
    </div>
    
    <div id="par-1392" class="paragraph">
        <pre><code>Vector paikkaRuudulla = Mouse.PositionOnScreen;</code></pre>
    </div>
    
    <div id="par-1393" class="paragraph">
        <p>Tämä kertoo kursorin paikan näyttökoordinaateissa, ts. origo keskellä. Y-akseli kasvaa ylöspäin.</p>
    </div>
    
    <div id="par-1394" class="paragraph">
        <p>Hiiren paikan pelimaailmassa (peli- ja fysiikkaolioiden koordinaatistossa) voi saada kirjoittamalla</p>
    </div>
    
    <div id="par-1395" class="paragraph">
        <pre><code>Vector paikkaKentalla = Mouse.PositionOnWorld;</code></pre>
    </div>
    
    <div id="par-1396" class="paragraph">
        <p>Tämä kertoo kursorin paikan maailmankoordinaateissa. Origo on keskellä ja Y-akseli kasvaa ylöspäin.</p>
    </div>
    
    <div id="par-1397" class="paragraph">
        <p>Hiiren liikettä voidaan kuunnella aliohjelmalla Mouse.ListenMovement. Sille annetaan parametrina kuuntelun herkkyyttä kuvaava double, käsittelijä sekä ohjeteksti. Näiden lisäksi voidaan antaa myös omia parametreja. Käsittelijällä on yksi pakollinen parametri. Esimerkki hiiren kuuntelusta:</p>
    </div>
    
    <div id="par-1398" class="paragraph">
        <pre><code>private PhysicsObject pallo;

public override void Begin()
{
    pallo = new PhysicsObject(30.0, 30.0, Shape.Circle);
    Add(pallo);
    Mouse.IsCursorVisible = true;
    Mouse.ListenMovement(0.1, KuunteleLiiketta, null);
}

private void KuunteleLiiketta(AnalogState hiirenTila)
{        
    pallo.X = Mouse.PositionOnWorld.X;
    pallo.Y = Mouse.PositionOnWorld.Y;

    Vector hiirenLiike = hiirenTila.MouseMovement;
}</code></pre>
    </div>
    
    <div id="par-1399" class="paragraph">
        <p>Tässä esimerkissä luomamme fysiikkaolio nimeltä pallo seuraa hiiren kursoria. Käsittelijää kutsutaan aina kun hiirtä liikuttaa. ListenMovement:in parametreissa herkkyys (tässä 0.1) tarkoittaa sitä, miten pieni hiiren liike aiheuttaa tapahtuman.</p>
    </div>
    
    <div id="par-1400" class="paragraph">
        <p>Tapahtumankäsittelijällä on pakollinen AnalogState-luokan olio parametrina. Siitä saa myös irti tietoa hiiren liikkeistä. Tässä esimerkissä hiirenTila.MouseMovement antaa hiiren liikevektorin, joka kertoo mihin suuntaan ja miten voimakkaasti kursori on liikkunut (hiiren ollessa paikoillaan se on nollavektori).</p>
    </div>
    
    <div id="par-1401" class="paragraph">
        <h3 id="hiiren-kuunteleminen-vain-tietyille-peliolioille">20.4.3 Hiiren kuunteleminen vain tietyille peliolioille</h3>
    </div>
    
    <div id="par-1402" class="paragraph">
        <p>Jos hiiren painalluksia halutaan kuunnella vain tietyn peliolion (tai fysiikkaolion) kohdalla, voidaan käyttää apuna Mouse.ListenOn-aliohjelmaa:</p>
    </div>
    
    <div id="par-1403" class="paragraph">
        <pre><code>Mouse.ListenOn(pallo, MouseButton.Left, ButtonState.Down, PoimiPallo, null);</code></pre>
    </div>
    
    <div id="par-1404" class="paragraph">
        <p>Parametrina annetaan se olio, jonka päällä hiiren painalluksia halutaan kuunnella. Muut parametrit ovat kuin normaalissa Listen-kutsussa. Käsittelijää PoimiPallo kutsutaan tässä esimerkissä silloin, kun hiiren kursori on pallo-nimisen olion päällä ja hiiren vasen nappi on painettuna pohjaan.</p>
    </div>
    
    <div id="par-1405" class="paragraph">
        <p>Hiirellä on olemassa myös esimerkiksi seuraavanlainen metodi:</p>
    </div>
    
    <div id="par-1406" class="paragraph">
        <pre><code>PhysicsObject kappale = new PhysicsObject(50.0, 50.0);
bool onkoPaalla = Mouse.IsCursorOn(kappale);</code></pre>
    </div>
    
    <div id="par-1407" class="paragraph">
        <p>Mouse.IsCursorOn palauttaa totuusarvon true tai false riippuen siitä, onko kursori sille annetun olion (peli-, fysiikka- tai näyttöolion) päällä.</p>
    </div>
    
    <div id="par-1408" class="paragraph">
        <h1 id="piirtoalusta-jypeli">21. Piirtoalusta (Jypeli)</h1>
    </div>
    
    <div id="par-1409" class="paragraph">
        <p>Piirtoalustalla voidaan peliin piirtää kuvioita. Nämä kuviot ovat siis pelissä näkyviä elementtejä, jotka eivät ole <code>PhysicsObject</code>- tai <code>GameObject</code>-olioita, vaan ne piirretään "erillään" peliolioista. Ne eivät noudata fysiikan lakeja. Tällä hetkellä piirtoalustalle voi piirtää janoja.</p>
    </div>
    
    <div id="par-1410" class="paragraph">
        <p>Piirtämistä varten peliluokkaan lisätään Paint-aliohjelma, joka ylikirjoittaa (<em>override</em>) kantaluokan vastaavan aliohjelman.</p>
    </div>
    
    <div id="par-1411" class="paragraph">
        <pre><code>protected override void Paint(Canvas canvas)
{
  // Tässä välissä piirretään kuviot
  base.Paint(canvas);
}</code></pre>
    </div>
    
    <div id="par-1412" class="paragraph">
        <p>Jypeli-kirjasto kutsuu Paint-aliohjelmaa tasaisin väliajoin (kymmeniä kertoja sekunnissa) pelin ollessa käynnissä. Siinä voi siis toteuttaa animaatioita muuttamalla koordinaatteja sen mukaan millä ajanhetkellä piirretään.</p>
    </div>
    
    <div id="par-1413" class="paragraph">
        <p>Itse piirtäminen tapahtuu parametrina saatavan Canvas-olion metodeilla. Nykyisellään niitä on yksi:</p>
    </div>
    
    <div id="par-1414" class="paragraph">
        <ul>
<li>DrawLine: Piirtää janan. Parametrina alku- ja loppupisteen koordinaatit joko vektoreina tai luettelemalla molempien pisteiden x- ja y-koordinaatit.</li>
</ul>
    </div>
    
    <div id="par-1415" class="paragraph">
        <p>Väri voidaan asettaa BrushColor-ominaisuuden kautta.</p>
    </div>
    
    <div id="par-1416" class="paragraph">
        <p>Piirtoalueen reunojen koordinaatteja voi lukea samaan tapaan kuin kentänkin reunoja:</p>
    </div>
    
    <div id="par-1417" class="paragraph">
        <pre><code>canvas.Left               Vasemman reunan x-koordinaatti
canvas.Right       Oikean reunan x-koordinaatti
canvas.Bottom      Alareunan y-koordinaatti
canvas.Top                 Yläreunan y-koordinaatti
canvas.TopLeft     Vasen ylänurkka
canvas.TopRight    Oikea ylänurkka
canvas.BottomLeft  Vasen alanurkka
canvas.BottomRight Oikea alanurkka</code></pre>
    </div>
    
    <div id="par-1418" class="paragraph">
        <p>Seuraavaksi esimerkkejä.</p>
    </div>
    
    <div id="par-1419" class="paragraph">
        <h2 id="esimerkki-punainen-rasti">21.1 Esimerkki: Punainen rasti</h2>
    </div>
    
    <div id="par-1420" class="paragraph">
        <p>Alla oleva esimerkki piirtää punaisen rastin Canvas-olion vasempaan ylänurkkaan ja mustan rastin oikeaan ylänurkkaan.</p>
    </div>
    
    <div id="par-1421" class="paragraph">
        <pre><code>protected override void Paint(Canvas canvas)
{
  canvas.BrushColor = Color.Red;
  double x = canvas.Left + 100, y = canvas.Top - 100;
  canvas.DrawLine(new Vector(x - 50, y + 50), new Vector(x + 50, y - 50));
  canvas.DrawLine(new Vector(x + 50, y + 50), new Vector(x - 50, y - 50));

  canvas.BrushColor = Color.Black;
  x = canvas.Right - 100;
  y = canvas.Top - 100;
  canvas.DrawLine(new Vector(x - 50, y + 50), new Vector(x + 50, y - 50));
  canvas.DrawLine(new Vector(x + 50, y + 50), new Vector(x - 50, y - 50));

  base.Paint(canvas);
}</code></pre>
    </div>
    
    <div id="par-1422" class="paragraph">
        <p>Alla kuva lopputuloksesta.</p>
    </div>
    
    <div id="par-1423" class="paragraph">
        <div id='1.k29' data-plugin='/showImage'><img height="183" src="/csimages/ohj1/luentomonistecsUusin_htm_m692570a4.png">
<p class="footer">Kuva 29: Punainen ja musta rasti Paint-aliohjelmalla ja Canvas-oliolla piirrettynä.</p>
</div>
    </div>
    
    <div id="par-1424" class="paragraph">
        <h2 id="esimerkki-pyörivä-jana">21.2 Esimerkki: Pyörivä jana</h2>
    </div>
    
    <div id="par-1425" class="paragraph">
        <p>Seuraavassa esimerkissä tehdään satunnaisesti väriään vaihtava jana, joka pyörii alkupisteensä ympäri.</p>
    </div>
    
    <div id="par-1426" class="paragraph">
        <pre><code>protected override void Paint(Canvas canvas)
{
  canvas.BrushColor = RandomGen.NextColor();
  double ajanhetki = Game.Time.SinceStartOfGame.TotalSeconds;
  Vector keskipiste = new Vector(0, 0);
  Vector reunapiste = new Vector(100 * Math.Cos(ajanhetki), 100 * Math.Sin(ajanhetki));
  canvas.DrawLine(keskipiste, keskipiste + reunapiste);
  base.Paint(canvas);
}</code></pre>
    </div>
    
    <div id="par-1427" class="paragraph">
        <h1 id="rekursio">22. Rekursio</h1>
    </div>
    
    <div id="par-1428" class="paragraph">
        <blockquote>
<p>“To iterate is human, to recurse divine.” -L. Peter Deutsch</p>
</blockquote>
    </div>
    
    <div id="par-1429" class="paragraph">
        <p>Rekursiolla tarkoitetaan algoritmia joka tarvitsee itseään ratkaistakseen ongelman. Ohjelmoinnissa esimerkiksi aliohjelmaa, joka kutsuu itseään, sanotaan rekursiiviseksi. Rekursiolla voidaan ratkaista näppärästi ja pienemmällä määrällä koodia monia ongelmia, joiden ratkaiseminen olisi muuten (esim. silmukoilla) melko työlästä. Rakenteeltaan rekursiivinen algoritmi muistuttaa jotain seuraavaa.</p>
    </div>
    
    <div id="par-1430" class="paragraph">
        <pre><code>public static void Rekursio(parametrit) 
{
   if (lopetusehto) return;
   // toimenpiteitä ... 
   Rekursio(uudet parametrit);  // Itsensä kutsuminen
}</code></pre>
    </div>
    
    <div id="par-1431" class="paragraph">
        <p>Oleellista on, että rekursiivisessa aliohjelmassa on joku <em>lopetusehto</em>. Muutoin aliohjelma kutsuu itseään loputtomasti. Toinen oleellinen seikka on, että seuraavan kutsun, tässä Rekursio(uudet parametrit), parametreja jotenkin muutetaan, muutoin rekursiolla ei saada mitään järkevää aikaiseksi.</p>
    </div>
    
    <div id="par-1432" class="paragraph">
        <p>Yksinkertainen esimerkki rekursioista voisi olla <em>kertoman</em> laskeminen. Muistutuksena viiden kertoma on siis tulo <code>5*4*3*2*1</code>. Tämä ei välttämättä ole paras tapa laskea kertomaa, mutta havainnollistaa rekursiota hyvin. Luonnollisesti laitamme mukaan myös ComTest-testit.</p>
    </div>
    
    <div id="par-1433" class="paragraph">
        <pre><code>/// &lt;summary&gt;
/// Lasketaan luvun kertoma kaavasta
/// &lt;code&gt;
/// 0! = 1
/// 1! = 1
/// n! = n*(n-1)!
/// &lt;/code&gt;
/// &lt;/summary&gt;
/// &lt;param name="n"&gt;Minkä luvun kertoma lasketaan&lt;/param&gt;
/// &lt;returns&gt;n!&lt;/returns&gt;
/// &lt;example&gt;
/// &lt;pre name="test"&gt;
/// Rekursio.Kertoma(0) === 1;
/// Rekursio.Kertoma(1) === 1;
/// Rekursio.Kertoma(5) === 120;
/// &lt;/pre&gt;
/// &lt;/example&gt;
public static long Kertoma(int n)
{
    if (n &lt;= 1) return 1;
    return n * Kertoma(n - 1);
}

/// &lt;summary&gt;
/// Pääohjelma
/// &lt;/summary&gt;
public static void Main()
{
    long k = Kertoma(5);
    Console.WriteLine(k);
    Console.ReadLine();
}</code></pre>
    </div>
    
    <div id="par-1434" class="paragraph">
        <p>Aliohjelma <code>Kertoma</code> saa parametrikseen luvun, jonka kertoma halutaan laskea. Tutustutaan aliohjelmaan tarkemmin.</p>
    </div>
    
    <div id="par-1435" class="paragraph">
        <pre><code>if (n &lt;= 1) return 1;</code></pre>
    </div>
    
    <div id="par-1436" class="paragraph">
        <p>Yllä oleva rivi on ikään kuin rekursion lopetusehto. Jos n on pienempää tai yhtä suurta kuin 1, niin palautetaan luku 1. Oleellista on, että lopetusehto on ennen uutta rekursiivista aliohjelmakutsua.</p>
    </div>
    
    <div id="par-1437" class="paragraph">
        <pre><code>return n * Kertoma(n-1);</code></pre>
    </div>
    
    <div id="par-1438" class="paragraph">
        <p>Tällä rivillä tehdään nyt tuo rekursiivinen kutsu eli aliohjelma kutsuu itseään. Yllä oleva rivi onkin oikeastaan tuttu matematiikasta:</p>
    </div>
    
    <div id="par-1439" class="paragraph">
        <pre><code>n! = n * (n-1)!</code></pre>
    </div>
    
    <div id="par-1440" class="paragraph">
        <p>Siinä palautetaan siis n kerrottuna n-1 kertomalla. Esimerkiksi luvun viisi kertoman laskemista yllä olevalla aliohjelmalla voisi havainnollistaa seuraavasti.</p>
    </div>
    
    <div id="par-1441" class="paragraph">
        <div class="figure">
<img src="/csimages/ohj1/luentomonistecsUusin_htm_7fd89c6a.gif" alt="Kuva 30: Kertoman laskeminen rekursiivisesti. Vaiheet numeroitu."><p class="caption">Kuva 30: Kertoman laskeminen rekursiivisesti. Vaiheet numeroitu.</p>
</div>
    </div>
    
    <div id="par-1442" class="paragraph">
        <p>Tulosta voidaan lähteä "kasaamaan" lopusta alkuun päin. Nyt <code>Kertoma(1)</code> palauttaa siis luvun <code>1</code> ja samalla lopettaa rekursiivisten kutsujen tekemisen. <code>Kertoma(2)</code> taas palauttaa <code>2 * Kertoma(1)</code> eli <code>2 * 1</code> eli luvun <code>2</code>. Nyt taas <code>Kertoma(3)</code> palauttaa <code>3 * Kertoma(2)</code> eli <code>3 * 2</code> ja niin edelleen. Lopulta <code>Kertoma(5)</code> palauttaa <code>5 * Kertoma(4)</code> eli <code>5 * 24 = 120</code>. Näin on saatu laskettua viiden kertoma rekursiivisesti. [LIA]</p>
    </div>
    
    <div id="par-1443" class="paragraph">
        <h2 id="sierpinskin-kolmio">22.1 Sierpinskin kolmio</h2>
    </div>
    
    <div id="par-1444" class="paragraph">
        <p>Sierpinskin kolmio on puolalaisen matemaatikko <em>Wacław Sierpińskin</em> vuonna 1915 esittelemä <em>fraktaali</em>. Se on tasasivuinen kolmio, jonka ympärille piirretään kolme uutta tasasivuista kolmiota niin, että kunkin uuden kolmion jokin kärki on edellisen (suuremman) kolmion sivun keskipisteessä. Kunkin uuden kolmion koko on puolet suuremmasta kolmiosta. Uudet kolmiot muodostuvat siis "ison" kolmion yläosaan, vasempaan alakulmaan ja oikeaan alakulmaan. Tilanne selviää paremmin kuvasta. Sierpinskin kolmion toinen vaihe on alla. Kolmion viivojen piirtämiseen käytämme Canvas-oliota (ks. luku 21).</p>
    </div>
    
    <div id="par-1445" class="paragraph">
        <div id='1.k31' data-plugin='/showImage'><img height="260" src="/csimages/ohj1/luentomonistecsUusin_htm_m2a659b.png">
<p class="footer">Kuva 31: Sierpinskin kolmion toisessa vaiheessa ensimmäisen kolmion ympärille on piirretty kolme uutta kolmiota.</p>
</div>
    </div>
    
    <div id="par-1446" class="paragraph">
        <p>sekä "lopputulos", missä pienimpiä kolmioita on jo hyvin vaikea erottaa toisistaan.</p>
    </div>
    
    <div id="par-1447" class="paragraph">
        <div id='1.k32' data-plugin='/showImage'><img height="279" src="/csimages/ohj1/luentomonistecsUusin_htm_m5638d5c8.png">
<p class="footer">Kuva 32: Valmis Sierpinskin kolmio.</p>
</div>
    </div>
    
    <div id="par-1448" class="paragraph">
        <p>Sierpinskin kolmion piirtäminen onnistuu loistavasti rekursiolla, mutta ilman rekursiota kolmion piirtäminen olisi melko työlästä. Sierpinskin kolmiosta voi lukea lisää esim. Wikipediasta: <a href="http://en.wikipedia.org/wiki/Sierpinski_triangle" class="uri">http://en.wikipedia.org/wiki/Sierpinski_triangle</a>.</p>
    </div>
    
    <div id="par-1449" class="paragraph">
        <p>Kirjoitetaan algoritmi pseudokoodiksi:</p>
    </div>
    
    <div id="par-1450" class="paragraph">
        <div class="huomautus">
<p><em>Pseudokoodi</em> = Ohjelmointikieltä muistuttavaa koodia, jonka tarkoitus on piilottaa eri ohjelmointikielten syntaksierot ja jättää jäljelle algoritmin perusrakenne. Algoritmia suunniteltaessa voi olla helpompaa hahmotella ongelmaa ensiksi pseudokielisenä, ennen kuin kirjoittaa varsinaisen ohjelman. Pseudokoodille ei ole mitään standardia, vaan jokainen voi kirjoittaa sitä omalla tavallaan. Järkevintä kuitenkin kirjoittaa niin, että mahdollisimman moni ymmärtäisi sitä.</p>
</div>
    </div>
    
    <div id="par-1451" class="paragraph">
        <pre><code>PiirraSierpinskinKolmio(korkeus, x, y) // x ja y tarkoittavat kärjellään
                                       // seisovan kolmion alakulman koordinaatteja
{
   jos (korkeus &lt; PIENIN_SALLITTU_KORKEUS) poistu
   
   sivunPituus2 = korkeus / sqrt(3) // Sivun pituus jaettuna kahdella
   alakulma = (x, y) // Pistepari
   vasenYlakulma = (x - sivunPituus2, y + korkeus)
   oikeaYlakulma = (x + sivunpituus2, y + korkeus)
   
   PiirraViiva(alakulma, vasenYlakulma) // Viiva alakulmasta vasempaan yläkulmaan
   PiirraViiva(vasenYlakulma, oikeaYlakulma)  // Vastaavasti ...
   PiirraViiva(oikeaYlakulma, alakulma)

   PiirraSierpinskinKolmio(korkeus / 2, x - sivunPituus2, y)
   PiirraSierpinskinKolmio(korkeus / 2, x + sivunPituus2, y)
   PiirraSierpinskinKolmio(korkeus / 2, x, y + korkeus)
}</code></pre>
    </div>
    
    <div id="par-1452" class="paragraph">
        <p>Tämä muistuttaa jo paljon oikeaa koodia. Käytetään seuraavaksi oikeaa koodia.</p>
    </div>
    
    <div id="par-1453" class="paragraph">
        <pre><code>using System;
using Jypeli;

/// &lt;summary&gt;
/// Sierpinskin kolmio
/// &lt;/summary&gt;
public class Sierpinski : Game
{
    private static double pieninKorkeus = 10.0;

    public override void Begin()
    {
        Level.Background.Color = Color.White;
    }

    protected override void Paint(Canvas canvas)
    {
        base.Paint(canvas);
        double korkeus = 300;
        SierpinskinKolmio(canvas, 0, -korkeus, korkeus);
    }

    /// &lt;summary&gt;
    /// Piirtää Sierpinskin kolmion.
    /// &lt;/summary&gt;
    /// &lt;param name="canvas"&gt;Piirtoalusta&lt;/param&gt;
    /// &lt;param name="x"&gt;Alareunan x&lt;/param&gt;
    /// &lt;param name="y"&gt;Alareunan y&lt;/param&gt;
    /// &lt;param name="h"&gt;Korkeus&lt;/param&gt;
    public static void SierpinskinKolmio(Canvas canvas, double x, double y, double h)
    {
        if (h &lt; pieninKorkeus) return;

        double s2 = h / (Math.Sqrt(3)); // sivun pituus s/2
        Vector p1 = new Vector(x, y);
        Vector p2 = new Vector(x - s2, y + h);
        Vector p3 = new Vector(x + s2, y + h);
        canvas.DrawLine(p1, p2);
        canvas.DrawLine(p2, p3);
        canvas.DrawLine(p3, p1);

        SierpinskinKolmio(canvas, x - s2, y, h / 2);
        SierpinskinKolmio(canvas, x + s2, y, h / 2);
        SierpinskinKolmio(canvas, x, y + h, h / 2);
    }
}</code></pre>
    </div>
    
    <div id="par-1454" class="paragraph">
        <p>Tarkastellaan ohjelman tiettyjä osia hieman tarkemmin.</p>
    </div>
    
    <div id="par-1455" class="paragraph">
        <pre><code>private static double pieninKorkeus = 10.0;</code></pre>
    </div>
    
    <div id="par-1456" class="paragraph">
        <p>Attribuuttina määritellään muuttuja, jolla kontrolloidaan kuinka kauan rekursiota jatketaan. Muuttuja pieninKorkeus näkyy siis kaikkialla luokassa Sierpinski. pieninKorkeus on määritelty "globaaliksi" sillä perusteella, ettei muuttujan alustus toistuisi loputtomasti. Tässä ohjelmassa voidaan nimittäin suorittaa aliohjelma SierpinskinKolmio todella monta kertaa, riippuen muuttujan pieninKorkeus arvosta.</p>
    </div>
    
    <div id="par-1457" class="paragraph">
        <p>Yllä oleva muuttuja voisi olla myös vakio. Tämän kyseisen ohjelman tapauksessa se voisi olla jopa perusteltua. Kuitenkin, on myöskin perusteltua olettaa, että ohjelmamme kehittyessä pienimmän kolmion korkeutta olisi mahdollista muuttaa vaikkapa käyttäjän toimesta, ja silloin pieninKorkeus ei olisikaan enää vakio, vaan ohjelman ajon aikana muuttuva luku.</p>
    </div>
    
    <div id="par-1458" class="paragraph">
        <pre><code>protected override void Paint(Canvas canvas)
{
  base.Paint(canvas);
  double korkeus = 300;
  SierpinskinKolmio(canvas, 0, -korkeus, korkeus);
}</code></pre>
    </div>
    
    <div id="par-1459" class="paragraph">
        <p>Paint-aliohjelmassa määrittelemme ensimmäisenä piirrettävän, eli suurimman, kolmion korkeuden. Sen jälkeen kutsumme SierpinskinKolmio-aliohjelmaa, jolle välitämme parametrina canvas-olion, johon kolmioita piirretään, ja kolmion paikan (0, -korkeus) sekä tietenkin korkeuden.</p>
    </div>
    
    <div id="par-1460" class="paragraph">
        <pre><code>public static void SierpinskinKolmio(Canvas canvas, double x, double y, double h)</code></pre>
    </div>
    
    <div id="par-1461" class="paragraph">
        <p>Aliohjelma SierpinskinKolmio on staattinen, sillä sen suorittamiseksi riittää parametrina tulevat tiedot. Se on myös void-tyyppinen, koska emme odota sen palauttavan mitään. Aliohjelma saa neljä parametria: piirtoalusta, johon kolmio piirretään, kolmion alimman pisteen x- ja y-koordinaatit, sekä kolmion korkeuden. Nämä parametrit riittävät tasasivuisen kolmion piirtämiseen Canvas-olion avulla.</p>
    </div>
    
    <div id="par-1462" class="paragraph">
        <p>Sivuutetaan hetkeksi if-rakenne ja tarkastellaan if-lauseen jälkeen tulevia lauseita.</p>
    </div>
    
    <div id="par-1463" class="paragraph">
        <pre><code>double s2 = h / (Math.Sqrt(3)); // sivun pituus s/2</code></pre>
    </div>
    
    <div id="par-1464" class="paragraph">
        <p>Ennen kuin voimme piirtää kolmiot, meidän on selvitettävä, mitkä ovat kolmion sivujen pituudet. Tasasivuisen kolmion kaikki sivut ovat yhtä pitkiä, joten yhden sivun pituuden laskeminen riittää meille! Käytämme vanhaa kunnon Pythagoraan lausetta. Olkoon h kolmion korkeus ja s sivun pituus.</p>
    </div>
    
    <div id="par-1465" class="paragraph">
        <div id='1.k32_1' data-plugin='/showImage'><img height="191" src="/csimages/ohj1/luentomonistecsUusin_htm_51840fcf.png">
</div>
    </div>
    
    <div id="par-1466" class="paragraph">
        <p>Koska x-akselilla siirrymme kolmion alimmasta kärjestä puolen sivun mitan verran joko vasemmalle tai oikealle, on mielekästä jakaa sivun pituus s vielä kahdella, jotta laskut hieman helpottuvat jatkossa.</p>
    </div>
    
    <div id="par-1467" class="paragraph">
        <div id='1.k32_2' data-plugin='/showImage'><img height="39" src="/csimages/ohj1/luentomonistecsUusin_htm_453c7491.png">
</div>
    </div>
    
    <div id="par-1468" class="paragraph">
        <p>Tämä tulos on tallennetaan s2-muuttujaan.</p>
    </div>
    
    <div id="par-1469" class="paragraph">
        <pre><code>Vector p1 = new Vector(x, y);
Vector p2 = new Vector(x - s2, y + h);
Vector p3 = new Vector(x + s2, y + h);</code></pre>
    </div>
    
    <div id="par-1470" class="paragraph">
        <p>Yllä lasketaan kolmion kärkipisteiden paikat edellä laskettua sivun pituutta hyväksi käyttäen. Allaoleva kuva selventää vielä pisteiden laskemista.</p>
    </div>
    
    <div id="par-1471" class="paragraph">
        <div id='1.k33' data-plugin='/showImage'><img height="233" src="/csimages/ohj1/luentomonistecsUusin_htm_m12b38605.png">
<p class="footer">Kuva 33: Kolmion pisteiden laskeminen.</p>
</div>
    </div>
    
    <div id="par-1472" class="paragraph">
        <p>Piirretään sitten yksi kolmio.</p>
    </div>
    
    <div id="par-1473" class="paragraph">
        <pre><code>canvas.DrawLine(p1, p2);
canvas.DrawLine(p2, p3);
canvas.DrawLine(p3, p1);</code></pre>
    </div>
    
    <div id="par-1474" class="paragraph">
        <p>Yllä olevat rivit piirtävät yhden kolmion hyödyntäen laskettuja kärkipisteiden koordinaatteja.</p>
    </div>
    
    <div id="par-1475" class="paragraph">
        <pre><code>SierpinskinKolmio(canvas, x - s2, y, h / 2); // Vasen alakolmio
SierpinskinKolmio(canvas, x + s2, y, h / 2); // Oikea alakolmio
SierpinskinKolmio(canvas, x, y + h, h / 2); // Yläkolmio</code></pre>
    </div>
    
    <div id="par-1476" class="paragraph">
        <p>Kutsutaan tehtyä aliohjelmaa kolmesti, jolloin alkuperäisen kolmion koordinaattien ja koon perusteella piirretään kolme pienempää kolmiota: alkuperäisen kolmion vasemmalle, oikealle ja yläpuolelle.</p>
    </div>
    
    <div id="par-1477" class="paragraph">
        <p>Otetaan hetkeksi askel taaksepäin, ja tarkastellaan, milloin rekursiosta poistutaan.</p>
    </div>
    
    <div id="par-1478" class="paragraph">
        <pre><code>if (h &lt; pieninKorkeus) return;</code></pre>
    </div>
    
    <div id="par-1479" class="paragraph">
        <p>Aliohjelmaan tultaessa saatiin parametrina korkeus, h-muuttuja. Mikäli h:n arvo alittaa annetun pienimmän korkeuden, poistutaan välittömästi return-lauseella. Tällöin h:ta pienempiä kolmioita ei enää piirretä. Toisaalta, mikäli kolmion korkeus h <em>ei alita</em> annettua minimiä, niin silloin piirrellään, kuten aiemmin käytiin läpi.</p>
    </div>
    
    <div id="par-1480" class="paragraph">
        <p>Olennaista tässä on huomata, että niin kauan, kuin korkeus h on <em>enemmän</em> kuin annettu kolmion minimikorkeus, emme pääse ensimmäistä SierpinskinKolmio-aliohjelmakutsua "pidemmälle". Kullakin kutsukerralla näet korkeus h puolittuu, joten vasta h:n ollessa riittävän pieni lopetusehto toteutuu. Rekursion idean mukaisesti vasta sitten etenemme seuraaviin SierpinskinKolmio-kutsuihin (kaksi jälkimmäistä).</p>
    </div>
    
    <div id="par-1481" class="paragraph">
        <h2 id="harjoitus-1">22.2 Harjoitus</h2>
    </div>
    
    <div id="par-1482" class="paragraph">
        <p>Montako kertaa tässä esimerkissä lopulta suoritetaan aliohjelma SierpinskinKolmio?</p>
    </div>
    
    <div id="par-1483" class="paragraph">
        <h1 id="dynaamiset-tietorakenteet">23. Dynaamiset tietorakenteet</h1>
    </div>
    
    <div id="par-1484" class="paragraph">
        <p>Taulukot tarjoavat meille vielä hyvin rajalliset puitteet ohjelmointiin. Mietitäänpä vaikka tilanne, jossa meidän tarvitsisi laskea käyttäjän syöttämiä lukuja yhteen Käyttäjä saisi syöttää niin monta lukua kuin haluaa ja lopuksi painaa enter, jolloin meidän täytyisi laskea ja tulostaa näytölle käyttäjän syöttämien lukujen summan. Minne talletamme käyttäjän syöttämät luvut? Taulukkoon? Minkä kokoisen taulukon luomme? 10 alkiota? 100? vai jopa 1000? Vaikka tekisimme kuinka ison taulukon, aina käyttäjä voi teoriassa syöttää enemmän lukuja ja luvut eivät mahdu taulukkoon. Toisaalta jos teemme 1000 kokoisen taulukon ja käyttäjä syöttääkin vain muutaman luvun, varaamme kohtuuttomasti koneen muistia. Tällaisia tilanteita varten C#:ssä on dynaamisia tietorakenteita, eli kokoelmia. Niiden koko kasvaa sitä mukaan kun alkioita lisätään. Dynaamisia tietorakenteita ovat muun muassa listat, puut, vektorit, pinot ym. Niiden käyttäminen ja rakenne eroaa huomattavasti toisistaan.</p>
    </div>
    
    <div id="par-1485" class="paragraph">
        <h2 id="rajapinnat">23.1 Rajapinnat</h2>
    </div>
    
    <div id="par-1486" class="paragraph">
        <p>C#:ssa on olemassa <em>rajapintoja</em> (interface), joissa määritellään tietyt metodit, ja kaikkien luokkien, jotka toteuttavat (implement) tämän rajapinnan, täytyy sisältää samat metodit. Rajapintojen hienous on siinä, että voimme käyttää samoja metodeja kaikkiin niihin olioihin, jotka toteuttavat saman rajapinnan. Meillä voisi olla, vaikka rajapinta Muodot. Nyt voisimme tehdä luokat Ympyra, Kolmio ja Suorakulmio, jotka kaikki toteuttaisivat Muodot-rajapinnan. Voisimme nyt luoda esimerkiksi Muodot-tyyppisen taulukon, johon voisi nyt tallentaa kaikkia Muodot-rajapinnan toteutettavien luokkien olioita. Jos Muodot-rajapinnassa olisi määritelty metodi Varita(), voisimme värittää silmukassa kerralla taulukollisen ympyröitä, kolmioita ja suorakulmioita samalla metodilla.</p>
    </div>
    
    <div id="par-1487" class="paragraph">
        <p>Kokoelmat ovat olio-ohjelmoinnin taulukoita. Generics-kokoelmaluokat (System.Collections.Generics-nimiavaruus) ovat tyyppiturvallisia, toisin sanoen kokoelman jäsenten (ja mahdollisen avaimen) tyyppi voidaan määritellä. System.Collections.ObjectModel-nimiavaruudessa on geneerisiä kantaluokkia omien kokoelmien toteuttamiseen sekä "wrappereitä" (ns. kääreluokkia), joilla voidaan esimerkiksi tehdä read-only-kokoelmia.</p>
    </div>
    
    <div id="par-1488" class="paragraph">
        <p>Valmiita tietorakenteita on C#:ssa melko paljon, joten ennen oman tietorakenteen tekemistä kannattaa tutustua niihin. Tässä luvussa tutustumme lähinnä geneeriseen listaan (List&lt;T&gt;). Oman tietorakenteen tekeminen onkin jo sitten Ohjelmointi 2-kurssin asiaa.</p>
    </div>
    
    <div id="par-1489" class="paragraph">
        <h2 id="listat-listt">23.2 Listat (List&lt;T&gt;)</h2>
    </div>
    
    <div id="par-1490" class="paragraph">
        <p>Tutustutaan seuraavaksi yhteen C#:n dynaamisista tietorakenteista, List&lt;T&gt;-luokkaan, joka on geneerinen tietorakenne. List&lt;T&gt; muistuttaa jonkin verran taulukkoa; taulukoilla ja listoilla on paljon yhteistä:</p>
    </div>
    
    <div id="par-1491" class="paragraph">
        <ul>
<li><p>Niissä voi olla vain yhden tyyppisiä alkioita</p></li>
<li><p>Yksittäiseen alkioon päästään käsiksi laittamalla alkion paikkaindeksi hakasulkujen sisään, esimerkiksi luvut[15, 14], tai pallot[4].</p></li>
<li><p>Molemmilla on metodeja (funktioita, aliohjelmia) sekä ominaisuuksia</p></li>
</ul>
    </div>
    
    <div id="par-1492" class="paragraph">
        <p>List&lt;T&gt;-olioon ja muihin dynaamisiin tietorakenteisiin voi tallentaa niin alkeistietotyyppejä kuin oliotietotyyppejäkin. Käsittelemämme <em>geneerinen lista</em> vaatii <em>aina</em> tiedon siitä, minkä tyyppisiä alkioita tietorakenteeseen laitetaan. Muun tyyppisiä alkioita listaan ei voi laittaa.</p>
    </div>
    
    <div id="par-1493" class="paragraph">
        <p>Tietotyyppi laitetaan tietorakenneluokan jälkeen kulmasulkujen sisään - tästä esimerkki seuraavaksi.</p>
    </div>
    
    <div id="par-1494" class="paragraph">
        <h3 id="tietorakenteen-määrittäminen">23.2.1 Tietorakenteen määrittäminen</h3>
    </div>
    
    <div id="par-1495" class="paragraph">
        <p>Dynaamisen tietorakenteen määrittämisen syntaksi poikkeaa hieman tavallisen olion määrittelystä. Ehdit jo varmaan ihmetellä, mikä on kulmasulkeissa oleva T List-sanan jälkeen. Kyseinen T tarkoittaa listaan talletettavien alkioiden tyyppiä. Tyyppi voi olla alkeistietotyyppi tai oliotyyppi. Yleisessä muodossa uuden listan määrittely menee seuraavasti:</p>
    </div>
    
    <div id="par-1496" class="paragraph">
        <pre><code>TietorakenneLuokanNimi&lt;TallettavienOlioidenTyyppi&gt; rakenteenNimi =
  new TietorakenneLuokanNimi&lt;TallettavienOlioidenTyyppi&gt;();</code></pre>
    </div>
    
    <div id="par-1497" class="paragraph">
        <p>Voisimme esimerkiksi tallettaa elokuvien nimiä seuraavaan List&lt;String&gt;-rakenteeseen. Määritellään uusi (tyhjä) lista seuraavasti.</p>
    </div>
    
    <div id="par-1498" class="paragraph">
        <pre><code>List&lt;String&gt; elokuvat = new List&lt;String&gt;();</code></pre>
    </div>
    
    <div id="par-1499" class="paragraph">
        <h3 id="alkioiden-lisääminen-ja-poistaminen">23.2.2 Alkioiden lisääminen ja poistaminen</h3>
    </div>
    
    <div id="par-1500" class="paragraph">
        <p>Alkioiden lisääminen List&lt;T&gt;-olioon, ja itse asiassa kaikkiin Collections.Generic-nimiavaruuden luokkien olioihin, onnistuu Add-metodilla. Add-metodi lisää alkion aina tietorakenteen "loppuun", eli loogisessa mielessä viimeiseksi. Kun indeksointi alkaa jälleen nollasta, niin ensimmäinen lisätty alkio löytyy siis indeksistä 0, seuraava 1 jne. Elokuvia voitaisiin nyt lisätä seuraavasti:</p>
    </div>
    
    <div id="par-1501" class="paragraph">
        <pre><code>elokuvat.Add("Casablanca");
elokuvat.Add("Star Wars");
elokuvat.Add("Toy Story");</code></pre>
    </div>
    
    <div id="par-1502" class="paragraph">
        <p>Alkion poistaminen halutusta paikasta (indeksistä) tehdään RemoveAt-metodilla. Parametriksi annetaan sen alkion indeksi, joka halutaan poistaa. Alkion "Casablanca" poistaminen onnistuisi seuraavasti.</p>
    </div>
    
    <div id="par-1503" class="paragraph">
        <pre><code>elokuvat.RemoveAt(0);</code></pre>
    </div>
    
    <div id="par-1504" class="paragraph">
        <p>Koska rakenne on dynaaminen, muuttuu listan alkioiden järjestys lennosta. Nyt "Star Wars"-merkkijono löytyisi indeksistä 0. Poistaa voi myös suoraan alkion sisällöllä.</p>
    </div>
    
    <div id="par-1505" class="paragraph">
        <pre><code>elokuvat.Remove("Star Wars");</code></pre>
    </div>
    
    <div id="par-1506" class="paragraph">
        <p>Remove-metodi toimii siten, että se poistaa listasta ensimmäisen esiintymän, joka vastaa annettua parametria. Metodi palauttaa true, mikäli listasta poistettiin alkio. Vastaavasti palautetaan false, mikäli annettua parametria vastaavaa alkiota ei löytynyt, jolloin listasta ei poistettu mitään.</p>
    </div>
    
    <div id="par-1507" class="paragraph">
        <p>Tietorakenteen koon, tai oikeammin sanottuna tietorakenteen sisältämien alkioiden lukumäärän, tietää olion Count-ominaisuus.</p>
    </div>
    
    <div id="par-1508" class="paragraph">
        <pre><code>Console.WriteLine(elokuvat.Count); //tulostaa 1
elokuvat.Add("Full Metal Jacket");
Console.WriteLine(elokuvat.Count); //tulostaa 2</code></pre>
    </div>
    
    <div id="par-1509" class="paragraph">
        <p>Tiettyyn alkioon pääsee käsiksi taulukon tapaan, eli laittamalla haluttu paikkaindeksi hakasulkeiden sisään. Ensimmäisen alkion voisi tulostaa esimerkiksi seuraavaksi:</p>
    </div>
    
    <div id="par-1510" class="paragraph">
        <pre><code>Console.WriteLine(elokuvat[0]); // tulostaa "Toy Story"</code></pre>
    </div>
    
    <div id="par-1511" class="paragraph">
        <p>Näillä metodeilla pärjää jo melko hyvin. Muista metodeista voi lukea List&lt;T&gt;-luokan dokumentaatiosta:<br><a href="http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx" class="uri">http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx</a>.</p>
    </div>
    
    <div id="par-1512" class="paragraph">
        <p>Tehdään toinen esimerkki int-tyyppisillä luvuilla. Annetaan listalle sisältö heti listaa alustettaessa.</p>
    </div>
    
    <div id="par-1513" class="paragraph">
        <pre><code>List&lt;int&gt; luvut = new List&lt;int&gt;() { 3, 3, 1, 7, 3, 5, 7 };</code></pre>
    </div>
    
    <div id="par-1514" class="paragraph">
        <p>Huomaa, että edellä olevaan listaan ei voi tallentaa muita kuin int-tyyppisiä kokonaislukuja.</p>
    </div>
    
    <div id="par-1515" class="paragraph">
        <pre><code>luvut.Add(5.3); // Kääntäjä ilmoittaa virheestä!</code></pre>
    </div>
    
    <div id="par-1516" class="paragraph">
        <p>Yllä oleva esimerkki osoittaa, että näiden <em>vahvasti tyypitettyjen</em> tietorakenteiden käyttö on myös turvallista - tietorakenteeseen ei voi "vahingossa" laittaa väärän tyyppisiä alkioita, joka saattaisi sitten myöhemmin aiheuttaa vakavia ongelmia.</p>
    </div>
    
    <div id="par-1517" class="paragraph">
        <p>Tarkistetaan vielä listan sisältämien alkioiden lukumäärä.</p>
    </div>
    
    <div id="par-1518" class="paragraph">
        <pre><code>Console.WriteLine(luvut.Count); // Tulostaa 7</code></pre>
    </div>
    
    <div id="par-1519" class="paragraph">
        <p>Poistetaan sitten kaikki ne alkiot, joiden arvo on 3. Tässä voimme käyttää tehokkaasti hyväksemme while-silmukkaa ja Remove-funktiota. Remove-funktion totuusarvotyyppinen paluuarvo käy hyvin while-ehdoksi.</p>
    </div>
    
    <div id="par-1520" class="paragraph">
        <pre><code>While (luvut.Remove(3));</code></pre>
    </div>
    
    <div id="par-1521" class="paragraph">
        <p>Listan alkiot näyttävät tämän jälkeen seuraavalta.</p>
    </div>
    
    <div id="par-1522" class="paragraph">
        <pre><code>1, 7, 5, 7</code></pre>
    </div>
    
    <div id="par-1523" class="paragraph">
        <h1 id="poikkeukset">24. Poikkeukset</h1>
    </div>
    
    <div id="par-1524" class="paragraph">
        <blockquote>
<p>“If you don’t handle [exceptions], we shut your application down. That dramatically increases the reliability of the system.”<br> - Anders Hejlsberg</p>
</blockquote>
    </div>
    
    <div id="par-1525" class="paragraph">
        <p>Poikkeus (exception) on ohjelman suorituksen aikana ilmenevä ongelma. Jos poikkeusta ei käsitellä, ohjelman suoritus yleensä kaatuu ja konsoliin tulostetaan jokin virheilmoitus. Tässä vaiheessa kurssia näin on varmasti käynyt jo monta kertaa. Poikkeus voi tapahtua jos esimerkiksi yritämme viitata taulukon alkioon, jota ei ole olemassa.</p>
    </div>
    
    <div id="par-1526" class="paragraph">
        <pre><code>int[] taulukko = new int[5];
taulukko[5] = 5;</code></pre>
    </div>
    
    <div id="par-1527" class="paragraph">
        <p>Esimerkiksi yllä oleva koodinpätkä aiheuttaisi IndexOutOfRangeException-nimisen poikkeuksen. Näitä poikkeuksia tulee aluksi usein silloin, kun taulukoita käsitellään silmukoiden avulla ja silmukan lopetusehto on väärin. Poikkeuksia aiheuttavat myös esimerkiksi jonkun luvun jakaminen nollalla, sekä yritys muuttaa tekstiä sisältävä merkkijono joksikin numeeriseksi tietotyypiksi.</p>
    </div>
    
    <div id="par-1528" class="paragraph">
        <p>Poikkeuksia voidaan kuitenkin käsitellä hallitusti poikkeustenhallinnan (exception handling) avulla. Tällöin poikkeukseen varaudutaan ja ohjelman suoritusta voidaan jatkaa poikkeuksen sattuessa. Poikkeusten hallinta sisältää aina try- ja catch-lohkon. Lisäksi voidaan käyttää myös finally-lohkoa.</p>
    </div>
    
    <div id="par-1529" class="paragraph">
        <p>C#:n poikkeukset ovat olioita. [VES][KOS][DEI]</p>
    </div>
    
    <div id="par-1530" class="paragraph">
        <h2 id="try-catch">24.1 try-catch</h2>
    </div>
    
    <div id="par-1531" class="paragraph">
        <p>Ideana try-catch -rakenteessa on, että poikkeusalttiit lauseet sijoitetaan try-lohkon sisään. Tämän jälkeen catch-lohkossa kerrotaan mitä poikkeustilanteessa tehdään. Ennen catch-lohkoa täytyy kuitenkin kertoa mitä poikkeuksia yritetään ottaa kiinni (catch). Tämä ilmoitetaan sulkeissa catch-sanan jälkeen, ennen catch-lohkoa aloittavaa aaltosulkua. Yleisessä muodossa try-catch rakenne olisi seuraava:</p>
    </div>
    
    <div id="par-1532" class="paragraph">
        <pre><code>try 
{
   //jotain lauseita mitä koitetaan suorittaa
} 
catch (PoikkeusLuokanNimi poikkeukselleAnnettavaNimi) 
{
   //jotain toimenpiteitä mitä tehdään kun poikkeus ilmenee
}</code></pre>
    </div>
    
    <div id="par-1533" class="paragraph">
        <p>catch-lohkoon mennään vain siinä tapauksessa, että try-lohko aiheuttaa sen tietyn poikkeuksen, jota catch-osassa ilmoitetaan otettavan kiinni. Muissa tapauksissa catch-lohko ohitetaan. Jos try-lohkossa on useita lauseita, catch-lohkoon mennään heti ensimmäisen poikkeuksen sattuessa, eikä loppuja lauseita enää suoriteta. Otetaan esimerkiksi nollalla jakaminen. Nollalla jako aiheuttaisi DivideByZeroException-poikkeuksen.</p>
    </div>
    
    <div id="par-1534" class="paragraph">
        <pre><code>int n1 = 7, n2 = 0, n3 = 4;
        
try 
{
   Console.WriteLine("{0}", 10 / n1);
   Console.WriteLine("{0}", 10 / n2);
   Console.WriteLine("{0}", 10 / n3);
} 
catch (DivideByZeroException e) 
{
   Console.WriteLine("Nollalla jako: " + e.Message);
}</code></pre>
    </div>
    
    <div id="par-1535" class="paragraph">
        <p>Yllä olevassa esimerkissä keskimmäinen tulostus aiheuttaisi DivideByZeroException-poikkeuksen ja tällöin siirryttäisiin välittömästi catch-lohkoon. Kolmesta try-lohkossa olevasta tulostusrivistä tulostuisi siis vain ensimmäinen. Jos haluaisimme, että kaikki lauseet, jotka eivät heitä poikkeusta suoritettaisiin, täytyisi meidän tehdä jokaiselle lauseelle oma try-catch -rakenteensa. Tällöin saisimme aikaan melkoisen try-catch -viidakon. Useimmiten tällaisissa tilanteissa olisikin järkevää tehdä suoritettavasta toimenpiteestä aliohjelma, joka sisältäisi try-catch -rakenteen. Tällöin koodi siistiytyisi ja lyhenisi huomattavasti.</p>
    </div>
    
    <div id="par-1536" class="paragraph">
        <p>Esimerkissämme catch-lohkossa tulostetaan nyt virheilmoitus. Poikkeusolio on nimetty "e":ksi, joka on hyvin yleinen poikkeusolion viitemuuttujalle annettava nimi. Koska C#:n poikkeukset olivat olioita, on niillä myös joukko metodeja ja ominaisuuksia. catch-lohkossa on kutsuttu DivideByZeroException-luokan Message-ominaisuutta, joka sisältää poikkeukselle määritellyn virheilmoituksen, jonka siis tulostamme tässä konsoli-ikkunaan.</p>
    </div>
    
    <div id="par-1537" class="paragraph">
        <p>Voidaan määritellä myös useita catch-lohkoja, jolloin voimme ottaa kiinni monia erityyppisiä poikkeuksia.</p>
    </div>
    
    <div id="par-1538" class="paragraph">
        <pre><code>try 
{
   //jotain lauseita mitä koitetaan suorittaa
} 
catch (PoikkeusTyyppiA e) 
{
   //jotain toimenpiteitä mitä tehdään kun poikkeus ilmenee
} 
catch (PoikkeusTyyppiB e) 
{
   //jotain toimenpiteitä mitä tehdään kun poikkeus ilmenee
} 
catch (PoikkeusTyyppiC e) 
{
   //jotain toimenpiteitä mitä tehdään kun poikkeus ilmenee
}</code></pre>
    </div>
    
    <div id="par-1539" class="paragraph">
        <p>Jos poikkeustapauksessa tehtävät toimenpiteet eivät vaihtele riippuen poikkeuksen tyypistä, voimme ottaa kiinni yksinkertaisesti Exception-luokan olioita. Kaikki C#:n poikkeusluokat perivät Exception-luokan, joten sitä käyttämällä saamme kiinni kaikki mahdolliset poikkeukset. Joskus voi olla järkevää laittaa viimeinen catch-lohko nappaamaan Exception-poikkeuksia, jolloin saamme kaikki loputkin mahdolliset poikkeukset kiinni. Monesti kuitenkin tiedämme hyvin tarkkaan, mitä poikkeuksia toimenpiteemme voivat aiheuttaa, joten tämä olisi turhaa. Ja jos emme tiedä mitään poikkeuksesta, emme sitä osaa käsitelläkään ja siksi Exception-luokan poikkeuksen kiinniottamisessa on oltava todella varovainen. [VES][KOS][DEI]</p>
    </div>
    
    <div id="par-1540" class="paragraph">
        <h2 id="finally-lohko">24.2 finally-lohko</h2>
    </div>
    
    <div id="par-1541" class="paragraph">
        <p>finally-lohkon käyttäminen ei ole pakollista, mutta kun sitä käytetään, kirjoitetaan se catch-lohkojen jälkeen. Mikäli finally-lohko kirjoitetaan mukaan, suoritetaan se joka tapauksessa riippumatta siitä aiheuttiko try-lohko poikkeuksia.</p>
    </div>
    
    <div id="par-1542" class="paragraph">
        <p>finally-lohko on hyödyllinen muun muassa käsiteltäessä tiedostoja, jolloin tiedosto on suljettava aina käsittelyn jälkeen poikkeuksista riippumatta. finally-lohkon sisältävä try-catch -rakenne olisi yleisessä muodossa seuraava:</p>
    </div>
    
    <div id="par-1543" class="paragraph">
        <pre><code>try 
{
   //jotain lauseita mitä koitetaan suorittaa
} 
catch (PoikkeusLuokanNimi poikkeukselleAnnettavaNimi) 
{
   //jotain toimenpiteitä mitä tehdään kun poikkeus ilmenee
} 
finally 
{
   //joka tapauksessa suoritettavat lauseet
}</code></pre>
    </div>
    
    <div id="par-1544" class="paragraph">
        <h2 id="yleistä">24.3 Yleistä</h2>
    </div>
    
    <div id="par-1545" class="paragraph">
        <p>Poikkeukset ovat nimensä mukaan säännöstä poikkeavia tapahtumia. Niitä ei tulisikaan käyttää periaatteella: "En ole varma toimiiko tämä, joten laitan try-catch-rakenteen sisään." Poikkeukset ovat sitä varten, että hyvinkin suunnitellussa ja mietityssä koodissa voi joskus tapahtua jotain odottamatonta, johon varautuminen voi parhaimmillaan pitää lentokoneen kurssissa tai hätäkeskuspäivystyksen tietojärjestelmän pystyssä.</p>
    </div>
    
    <div id="par-1546" class="paragraph">
        <h1 id="tietojen-lukeminen-ulkoisesta-lähteestä">25. Tietojen lukeminen ulkoisesta lähteestä</h1>
    </div>
    
    <div id="par-1547" class="paragraph">
        <p>Muuttujat toimivat tiedon talletuksessa niin kauan, kun ohjelma on käynnissä. Ohjelman suorituksen loputtua muuttujien muistipaikat luovutetaan kuitenkin muiden prosessien käyttöön. Tämän takia muuttujat eivät sovellu sellaisen tiedon talletukseen, jonka pitäisi säilyä kun ohjelma suljetaan. Pitkäaikaiseen tiedon talletukseen soveltuvat hyvin tiedostot ja tietokannat. Tiedostot ovat yksinkertaisempia ja ehkä helpompia käyttää, kun taas tietokannat tarjoavat paljon monipuolisempia ominaisuuksia. Tiedostoihin voidaan tallentaa myös esimerkiksi jotain ohjelman tarvitsemia alkuasetuksia. Tässä luvussa selvitetään yksinkertaisten esimerkkien avulla tiedon lukeminen tiedostosta, sekä tiedon hakeminen WWW:stä.</p>
    </div>
    
    <div id="par-1548" class="paragraph">
        <p>Tutkitaan seuraavaksi esimerkkiä tekstin lukemisesta tiedostosta Windows-ympäristössä. Muuntyyppisten tiedostojen lukeminen, tiedostoon kirjoittaminen, sekä toiminta Windows Phone 7- ja Xbox-ympäristöissä jätetään tämän kurssin osaamistavoitteiden ulkopuolelle.</p>
    </div>
    
    <div id="par-1549" class="paragraph">
        <h2 id="tekstin-lukeminen-tiedostosta">25.1 Tekstin lukeminen tiedostosta</h2>
    </div>
    
    <div id="par-1550" class="paragraph">
        <p>System.IO-nimiavaruus sisältää muun muassa tiedostojen käsittelyyn tarvittavia aliohjelmia. Seuraavassa esimerkissä luetaan tekstitiedostosta tietoa, sekä kirjoitetaan tiedostoon.</p>
    </div>
    
    <div id="par-1551" class="paragraph">
        <pre><code>Kalle, 5
Pekka, 10
Janne, 0
Irmeli, 15</code></pre>
    </div>
    
    <div id="par-1552" class="paragraph">
        <p>Näiden voidaan ajatella olevan vaikka topten-listan pisteitä. Annetaan tiedoston nimeksi data.txt.</p>
    </div>
    
    <div id="par-1553" class="paragraph">
        <pre><code>using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;

/// &lt;summary&gt;
/// Harjoitellaan tiedostoon kirjoittamista
/// sekä tiedostosta lukua.
/// &lt;/summary&gt;
public class TiedostostaLuku
{
    /// &lt;summary&gt;
    /// Luetaan ja kirjoitetaan tekstitiedostosta.
    /// &lt;/summary&gt;
    public static void Main()
    {
        // Määritellään tiedostopolku vakioksi
        const string POLKU = @"C:\MyTemp\data.txt";

        // Jos tiedostoa ei ole olemassa, luodaan se ja kirjoitetaan sinne
        if (!File.Exists(POLKU))
        {
            // Taulukon alkiot ovat tiedoston rivejä
            string[] uudetRivit = { "A-J, 0", "Pekka, 0", "Kalle, 0" };
            File.WriteAllLines(POLKU, uudetRivit);
        }

        // Tämä teksti lisätään jokaisella ajokerralla,
        // jolloin tiedosto pitenee aina yhdellä rivillä
        string appendText = "Tämä on ylimääräinen rivi" + Environment.NewLine;
        File.AppendAllText(POLKU, appendText);

        // Avataan tiedosto ja kirjoitetaan sen sisältö ruudulle
        string[] luetutRivit = File.ReadAllLines(POLKU);
        foreach (string s in luetutRivit)
        {
            Console.WriteLine(s);
        }
    }
}</code></pre>
    </div>
    
    <div id="par-1554" class="paragraph">
        <p>Tutkitaan tärkeimpiä kohtia hieman tarkemmin</p>
    </div>
    
    <div id="par-1555" class="paragraph">
        <pre><code>if (!File.Exists(POLKU))</code></pre>
    </div>
    
    <div id="par-1556" class="paragraph">
        <p>Tarkistetaan, onko tiedostoa olemassa. Mikäli ei ole, kirjoitetaan polun osoittamaan tiedostoon muutama nimi, ja nimien perään pilkku, sekä "pistemäärä".</p>
    </div>
    
    <div id="par-1557" class="paragraph">
        <pre><code>File.WriteAllLines(POLKU, uudetRivit);</code></pre>
    </div>
    
    <div id="par-1558" class="paragraph">
        <p>File-luokka sisältää WriteAllLines-metodin, joka kirjoittaa kaikki String-taulukon alkiot annettuun tiedostoon.</p>
    </div>
    
    <div id="par-1559" class="paragraph">
        <pre><code>File.AppendAllText(POLKU, appendText);</code></pre>
    </div>
    
    <div id="par-1560" class="paragraph">
        <p>AppendAllText-metodi lisää annettuun tiedostoon String-olion sisältämän tekstin siten, että teksti tulee tiedoston loppuun.</p>
    </div>
    
    <div id="par-1561" class="paragraph">
        <pre><code>string[] luetutRivit = File.ReadAllLines(POLKU);</code></pre>
    </div>
    
    <div id="par-1562" class="paragraph">
        <p>ReadAllLines-metodi lukee annetusta polusta kaikki rivit String-taulukkoon. Yksi tiedoston rivi vastaa yhtä taulukon alkiota.</p>
    </div>
    
    <div id="par-1563" class="paragraph">
        <p>Huomaa, että mikäli tiedostolle ei ole annettu absoluuttista polkua, ohjelma hakee tiedostoa suhteessa siihen kansioon, missä ajettava exe-tiedosto on. Tässä esimerkissä annettiin tiedoston absoluuttinen polku kokonaisuudessaan.</p>
    </div>
    
    <div id="par-1564" class="paragraph">
        <h2 id="tekstin-lukeminen-netistä">25.2 Tekstin lukeminen netistä</h2>
    </div>
    
    <div id="par-1565" class="paragraph">
        <p>Luetaan seuraavaksi tietoja netistä. Tässä koko HTML-sivun data tallennetaan rivi kerrallaan List&lt;String&gt;-tietorakenteeseen ilman sen kummempaa jatkokäsittelyä. Lopuksi listan sisältö tulostetaan ruudulle rivi kerrallaan.</p>
    </div>
    
    <div id="par-1566" class="paragraph">
        <pre><code>using System;
using System.Collections.Generic;
using System.IO;
using System.Net;
using System.Text;

/// @author  Antti-Jussi Lakanen
/// @version 22.8.2012
///
/// &lt;summary&gt;
/// Tulostetaan kayttajan antaman www-osoitteen
/// sisältö (GET-pyynnön palauttama HTML-koodi).
/// &lt;/summary&gt;
public class TiedotNetista
{
    /// &lt;summary&gt;
    /// Paaohjelmassa haetaan tiedot netistä listaan ja tulostetaan listan sisältö.
    /// &lt;/summary&gt;
    public static void Main()
    {
        List&lt;String&gt; lista = new List&lt;string&gt;();
        LueNetistaListaan("https://www.jyu.fi", lista);

        foreach (String rivi in lista)
        {
            Console.WriteLine(rivi);
        }
        Console.ReadKey();
    }

    /// &lt;summary&gt;
    /// Luetaan annetun url-osoitteen koko html-koodi
    /// ja laitetaan rivi kerrallaan String-listaan.
    /// &lt;/summary&gt;
    /// &lt;param name="url"&gt;URL-osoite, mika halutaan lukea.&lt;/param&gt;
    /// &lt;param name="lista"&gt;Lista, johon riveja kirjoitetaan.&lt;/param&gt;
    public static void LueNetistaListaan(String url, List&lt;String&gt; lista)
    {
        HttpWebResponse response = null;
        StreamReader reader = null;
        try
        {
            // Lahetetaan HTTP-pyynto palvelimelle
            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url); 
            request.Method = "GET"; // Maaritellaan pyynnon tyypiksi GET
            response = (HttpWebResponse)request.GetResponse();
            reader = new StreamReader(response.GetResponseStream(), Encoding.UTF8); 
            while (!reader.EndOfStream)
            {
                String rivi = reader.ReadLine();
                lista.Add(rivi);
            }
        }
        catch (WebException we) // Ellei saada luotua verkkoyhteytta sopivalla protokollalla
        {
            Console.WriteLine(we.Message);
        }
        finally
        {
            if (reader != null)
                reader.Close();
            if (response != null)
            // Tietovirta taytyy sulkea, jottei sovelluksessa 
            // jouduttaisi tilaan, missa yhteydet "loppuvat kesken".
                response.Close(); 
        }
    }
}</code></pre>
    </div>
    
    <div id="par-1567" class="paragraph">
        <p>Mukana on yksi try-catch-finally-rakenne. Verkkoyhteydet ovat alttiita kaikenlaisille virheille, joten poikkeusten "kiinniottaminen" on perusteltua ja suorastaan välttämätöntä.</p>
    </div>
    
    <div id="par-1568" class="paragraph">
        <h2 id="satunnaisluvut">25.3 Satunnaisluvut</h2>
    </div>
    
    <div id="par-1569" class="paragraph">
        <p>Random-luokka sijaitsee System-nimiavaruudessa. Random-luokasta löytyy metodeja joilla voimme arpoa erityyppisiä satunnaislukuja. Arpomista varten meidän täytyy luoda Random-olio, jotta metodeja voitaisiin kutsua. Random-oliolla on metodi Next, joka saa parametrikseen kokonaisluvun ja arpoo sitten satunnaisen luvun 0 ja parametrinaan saamansa luvun väliltä niin, että parametrina annettava luku ei enää kuulu arvottaviin lukuihin. Arvottava luku on siis aina puoliavoimella välillä [0, parametri[. Jos haluaisimme arpoa luvun suljetulta väliltä [0, 10] täytyisi meidän siis muuttaa parametria vastaavasti, sillä kun käsitellään kokonaislukuja, suljettu väli [0, 10] on sama asia kuin puoliavoin väli [0, 11[. Alla oleva koodinpätkä arpoisi nyt siis luvun 0:n ja 10:n väliltä niin, että luvut 0 ja 10 kuuluvat arvottaviin lukuihin.</p>
    </div>
    
    <div id="par-1570" class="paragraph">
        <pre><code>Random rand = new Random();
int satunnaisluku = rand.Next(11);</code></pre>
    </div>
    
    <div id="par-1571" class="paragraph">
        <p>Jos haluaisimme arpoa luvun esimerkiksi suljetulta väliltä [50, 99], sanoisimme</p>
    </div>
    
    <div id="par-1572" class="paragraph">
        <pre><code>Random rand = new Random();
int satunnaisluku = rand.Next(50, 100);</code></pre>
    </div>
    
    <div id="par-1573" class="paragraph">
        <p>Liukuluku arvotaan NextDouble-metodilla.</p>
    </div>
    
    <div id="par-1574" class="paragraph">
        <p>Jypelissä olevasta RandomGen-luokasta löytyy useita staattisia metodeja, joilla satunnaislukujen (ja -värien, totuusarvojen, jne.) luominen on helpompaa. Lue RandomGen-luokan dokumentaatio osoitteesta:</p>
    </div>
    
    <div id="par-1575" class="paragraph">
        <p><a href="http://kurssit.it.jyu.fi/npo/material/latest/documentation/html/" class="uri">http://kurssit.it.jyu.fi/npo/material/latest/documentation/html/</a></p>
    </div>
    
    <div id="par-1576" class="paragraph">
        <h1 id="lukujen-esitys-tietokoneessa">26. Lukujen esitys tietokoneessa</h1>
    </div>
    
    <div id="par-1577" class="paragraph">
        <h2 id="lukujärjestelmät">26.1 Lukujärjestelmät</h2>
    </div>
    
    <div id="par-1578" class="paragraph">
        <p>Meille tutuin lukujärjestelmä on 10-järjestelmä. Siinä on 10 eri symbolia lukujen esittämiseen (0...9). Lukua 10 sanotaan 10-järjestelmän <em>kantaluvuksi</em>. Tietotekniikassa käytetään kuitenkin myös muita lukujärjestelmiä. Yleisimpiä ovat 2-järjestelmä (binäärijärjestelmä), 8-järjestelmä (oktaalijärjestelmä) ja 16-järjestelmä (heksajärjestelmä). Binäärijärjestelmässä luvut esitetään kahdella symbolilla (0 ja 1) ja oktaalijärjestelmässä vastaavasti kahdeksalla symbolilla (0..7). Samalla periaatteella heksajärjestelmässä käytetään 16 symbolia, mutta koska numerot loppuvat kesken, otetaan avuksi aakkoset. Symbolin 9 jälkeen tulee siis symboli A, jonka jälkeen B ja näin jatketaan edelleen F:n asti, joka vastaa siis 10-järjestelmän lukua 15. Heksajärjestelmä sisältää siis symbolit 0..9 ja (jatkuen) A..F.</p>
    </div>
    
    <div id="par-1579" class="paragraph">
        <p>Koska lukujärjestelmät sisältävät samoja symboleja, täytyy ne osata jotenkin erottaa toisistaan. Tämä tehdään usein alaindekseillä. Esimerkiksi binääriluku 11 voitaisiin kirjoittaa muodossa 11<sub>2</sub>.Tällöin sen erottaa 10-järjestelmän luvusta 11, joka voitaisiin vastaavasti kirjoittaa muodossa 11<sub>10</sub>. Koska alaindeksien kirjoittaminen koneella on hieman haastavaa, käytetään usein myös merkintää, jossa binääriluvun perään lisätään B-kirjain. Esimerkiksi 11B tarkoittaisi samaa kuin 11<sub>2</sub>.</p>
    </div>
    
    <div id="par-1580" class="paragraph">
        <p>Kaikissa yllä mainituissa lukujärjestelmissä symbolin paikalla on oleellinen merkitys. Kun symboleja laitetaan peräkkäin, ei siis ole yhdentekevää millä paikalla luvussa tietty symboli on. [MÄN]</p>
    </div>
    
    <div id="par-1581" class="paragraph">
        <h2 id="paikkajärjestelmät">26.2 Paikkajärjestelmät</h2>
    </div>
    
    <div id="par-1582" class="paragraph">
        <p>Käyttämämme lukujärjestelmät ovat paikkajärjestelmiä, eli jokaisen numeron paikka luvussa on merkitsevä. Jos numeroiden paikkaa luvussa vaihdetaan, muuttuu luvun arvokin. Luvun</p>
    </div>
    
    <div id="par-1583" class="paragraph">
        <div class="kaava">
<p><em>n</em><sub>3</sub><em>n</em><sub>2</sub><em>n</em><sub>1</sub><em>n</em><sub>0</sub></p>
</div>
    </div>
    
    <div id="par-1584" class="paragraph">
        <p>arvo on</p>
    </div>
    
    <div id="par-1585" class="paragraph">
        <div class="kaava">
<p><em>n</em><sub>3</sub> · <em>k</em><sup>3</sup> + <em>n</em><sub>2</sub> · <em>k</em><sup>2</sup> + <em>n</em><sub>1</sub> · <em>k</em><sup>1</sup> + <em>n</em><sub>0</sub> · <em>k</em><sup>0</sup></p>
</div>
    </div>
    
    <div id="par-1586" class="paragraph">
        <p>missä <em>k</em> on käytetyn järjestelmän kantaluku. Esimerkiksi 10-järjestelmässä:</p>
    </div>
    
    <div id="par-1587" class="paragraph">
        <div class="kaava">
<p>2536<sub>10</sub> = 2 · 10<sup>3</sup> + 5 · 10<sup>2</sup> + 3 · 10<sup>1</sup> + 6 · 10<sup>0</sup><br> = 2 · 1000 + 5 · 100 + 3 · 10 + 6 · 1</p>
</div>
    </div>
    
    <div id="par-1588" class="paragraph">
        <p>Sanomme siis, että luvussa 2536 on 2 kappaletta tuhansia, 5 kappaletta satoja, 3 kappaletta kymmeniä ja 6 kappaletta ykkösiä.</p>
    </div>
    
    <div id="par-1589" class="paragraph">
        <p>Jos luvussa olevat symbolien paikat siis numeroidaan oikealta vasemmalle alkaen nollasta, saadaan luvun arvo selville summaamalla kussakin paikassa oleva arvo kerrottuna kantaluku potenssiin paikan numero. Tämä toimii myös desimaaliluvuille kun numeroidaan desimaalimerkin oikealla puolella olevat paikat -1, -2, -3 jne. Esimerkiksi</p>
    </div>
    
    <div id="par-1590" class="paragraph">
        <div class="kaava">
<p>25.36 = 2 · 10<sup>1</sup> + 5 · 10<sup>0</sup> + 3 · 10<sup>-1</sup> + 6 · 10<sup>-2</sup><br>= 2 · 10 + 5 · 1 + 3 · 0.1 + 6 · 0.01</p>
</div>
    </div>
    
    <div id="par-1591" class="paragraph">
        <h2 id="binääriluvut">26.3 Binääriluvut</h2>
    </div>
    
    <div id="par-1592" class="paragraph">
        <p>Binäärijärjestelmässä kantalukuna on 2 ja siten on käytössä kaksi symbolia: 0 ja 1. Binäärijärjestelmä on tietotekniikassa oleellisin järjestelmä, sillä lopulta laskenta suurimmassa osassa nykyprosessoreita tapahtuu binäärilukuina. Tarkemmin sanottuna binääriluvut esitetään prosessorissa jännitteinä. Tietty jänniteväli vastaa arvoa 0 ja tietty jänniteväli arvoa 1.</p>
    </div>
    
    <div id="par-1593" class="paragraph">
        <h3 id="binääriluku-10-järjestelmän-luvuksi">26.3.1 Binääriluku 10-järjestelmän luvuksi</h3>
    </div>
    
    <div id="par-1594" class="paragraph">
        <p>Esimerkiksi binääriluku 10110 voidaan muuttaa 10-järjestelmän luvuksi seuraavasti.</p>
    </div>
    
    <div id="par-1595" class="paragraph">
        <div class="kaava">
<p>10110<sub>2</sub> = 1·2<sup>4</sup> + 0·2<sup>3</sup> + 1·2<sup>2</sup> + 1·2<sup>1</sup> + 0·2<sup>0</sup> = 0 + 2 + 4 + 0 + 16 = 22<sub>10</sub></p>
</div>
    </div>
    
    <div id="par-1596" class="paragraph">
        <p>Binäärimuodossa oleva desimaaliluku 101.1011 saadaan muutettua 10-järjestelmän luvuksi seuraavasti. Muuttaminen tehdään samalla periaatteella kun yllä. Nyt desimaaliosaan mentäessä potenssien vähentämistä edelleen jatketaan, jolloin potenssit muuttuvat negatiivisiksi:</p>
    </div>
    
    <div id="par-1597" class="paragraph">
        <div class="kaava">
<p>101.1011<sub>2</sub> = 1 · 2<sup>2</sup> + 0 · 2<sup>1</sup> + 1 · 2<sup>0</sup> + 1 · 2<sup>-1</sup> + 0 · 2<sup>-2</sup> + 1 · 2<sup>-3</sup> + 1 · 2<sup>-4</sup><br>= 4 + 0 + 1 + 0.5 + 0 + 0.125 + 0.0625 = 5.687510</p>
</div>
    </div>
    
    <div id="par-1598" class="paragraph">
        <p>Binääriluku 101.1011 on siis 10-järjestelmän lukuna 5.6875.</p>
    </div>
    
    <div id="par-1599" class="paragraph">
        <h3 id="järjestelmän-luku-binääriluvuksi">26.3.2 10-järjestelmän luku binääriluvuksi</h3>
    </div>
    
    <div id="par-1600" class="paragraph">
        <p>10-järjestelmän luku saadaan muutettua binääriluvuksi jakamalla sen kokonaisosaa toistuvasti kahdella ja merkkaamalla paperin syrjään 0, jos jako meni tasan ja muuten 1. Kun lukua ei voi enää jakaa, saa binääriluvun selville kun lukee jakojäännökset päinvastaisesta suunnasta, kuin mistä aloitimme laskemisen. Esimerkiksi luku 19<sub>10</sub> voidaan muuttaa binääriluvuksi seuraavasti:</p>
    </div>
    
    <div id="par-1601" class="paragraph">
        <pre><code>19/2 = 9, jakojäännös 1
 9/2 = 4, jakojäännös 1
 4/2 = 2, jakojäännös 0
 2/2 = 1, jakojäännös 0
 1/2 = 0, jakojäännös 1</code></pre>
    </div>
    
    <div id="par-1602" class="paragraph">
        <p>Kun jakojäännökset luetaan nyt alhaalta ylöspäin, saamme binääriluvun 10011. Vastaavasti laskenta voitaisiin hahmotella kuten alla, josta jakojäännös selviää paremmin. Idea molemmissa on kuitenkin sama.</p>
    </div>
    
    <div id="par-1603" class="paragraph">
        <pre><code>19 = 2*9+1
 9 = 2*4+1
 4 = 2*2+0
 2 = 2*1+0
 1 = 2*0+1</code></pre>
    </div>
    
    <div id="par-1604" class="paragraph">
        <p>Muutetaan vielä luku 126<sub>10</sub> binääriluvuksi.</p>
    </div>
    
    <div id="par-1605" class="paragraph">
        <pre><code>126 = 2*63+0
 63 = 2*31+1
 31 = 2*15+1
 15 =  2*7+1
  7 =  2*3+1
  3 =  2*1+1
  1 =  2*0+1</code></pre>
    </div>
    
    <div id="par-1606" class="paragraph">
        <p>Valmis binääriluku on siis 1111110</p>
    </div>
    
    <div id="par-1607" class="paragraph">
        <p>Desimaaliluvuissa täytyy kokonaisosa ja desimaaliosa muuttaa binääriluvuiksi erikseen. Kokonaisosa muutetaan binääriluvuksi kuten yllä. Desimaaliosa muutetaan kertomalla desimaaliosaa toistuvasti kahdella ja merkkaamalla paperin syrjään nyt 1, jos tulo oli suurempaa tai yhtä suurta kuin 1 ja 0 jos tulo jäi alle yhden. Muutetaan luku 0.8125<sub>10</sub> binääriluvuksi.</p>
    </div>
    
    <div id="par-1608" class="paragraph">
        <pre><code>0.8125 * 2 = 1.625
 0.625 * 2 = 1.25
  0.25 * 2 = 0.5
   0.5 * 2 = 1.0</code></pre>
    </div>
    
    <div id="par-1609" class="paragraph">
        <p>Luku meni tasan, eli luku 0.8125<sub>10</sub> = 0.1101<sub>2</sub>. Binääriluku voidaan siis lukea kuten alla olevassa kuvassa.</p>
    </div>
    
    <div id="par-1610" class="paragraph">
        <div class="figure">
<img src="/csimages/ohj1/luentomonistecsUusin_htm_m373c2e01.png" alt="Kuva 34: Luvun 0.8125 muuttaminen binääriluvuksi"><p class="caption">Kuva 34: Luvun 0.8125 muuttaminen binääriluvuksi</p>
</div>
    </div>
    
    <div id="par-1611" class="paragraph">
        <p>Muutetaan vielä luku 0.675<sub>10</sub> binääriluvuksi.</p>
    </div>
    
    <div id="par-1612" class="paragraph">
        <pre><code>0.675 * 2 = 1.35
 0.35 * 2 = 0.7
  0.7 * 2 = 1.4
  0.4 * 2 = 0.8
  0.8 * 2 = 1.6
  0.6 * 2 = 1.2
  0.2 * 2 = 0.4
  0.4 * 2 = 0.8</code></pre>
    </div>
    
    <div id="par-1613" class="paragraph">
        <p>Kun kerromme uudelleen samaa desimaaliosaa kahdella, voidaan laskeminen lopettaa. Tällöin kyseessä on päättymätön luku. Luvussa rupeaisi siis toistumaan jakso 11001100. Nyt luku luetaan samasta suunnasta, josta laskeminenkin aloitettiin. Enää meidän tarvitsee päättää millä tarkkuudella luku esitetään. Mitä enemmän bittejä käytämme, sitä tarkempi luvusta tulee.</p>
    </div>
    
    <div id="par-1614" class="paragraph">
        <div class="kaava">
<p>0.675<sub>10</sub> = 0.101011001100110011<sub>2</sub></p>
</div>
    </div>
    
    <div id="par-1615" class="paragraph">
        <p>Jaksoa voitaisiin siis jatkaa loputtomiin, mutta oleellista on, että lukua 0.675 ei pystytä esittämään tarkasti binääriluvuilla.</p>
    </div>
    
    <div id="par-1616" class="paragraph">
        <p>Koitetaan muuttaa luku 23.375<sub>10</sub> binääriluvuksi. Ensiksi muutetaan kokonaisosa.</p>
    </div>
    
    <div id="par-1617" class="paragraph">
        <pre><code>23 = 2*11+1
11 = 2 *5+1
 5 = 2 *2+1
 2 = 2* 1+0
 1 = 2* 0+1</code></pre>
    </div>
    
    <div id="par-1618" class="paragraph">
        <p>Kokonaisosa on siis 10111<sub>2</sub>. Muutetaan vielä desimaaliosa.</p>
    </div>
    
    <div id="par-1619" class="paragraph">
        <pre><code>0.375 * 2 = 0.75
 0.75 * 2 = 1.5
  0.5 * 2 = 1.0</code></pre>
    </div>
    
    <div id="par-1620" class="paragraph">
        <p>Eli 23.375<sub>10</sub> = 10111.011<sub>2</sub>.</p>
    </div>
    
    <div id="par-1621" class="paragraph">
        <h2 id="negatiiviset-binääriluvut">26.4 Negatiiviset binääriluvut</h2>
    </div>
    
    <div id="par-1622" class="paragraph">
        <p>Negatiivinen luku voidaan esittää joko suorana, 1-komplementtina tai 2-komplementtina.</p>
    </div>
    
    <div id="par-1623" class="paragraph">
        <h3 id="suora-tulkinta">26.4.1 Suora tulkinta</h3>
    </div>
    
    <div id="par-1624" class="paragraph">
        <p>Suorassa tulkinnassa varataan yksi bitti ilmoittamaan luvun etumerkkiä (+/-). Jos meillä on käytössä 4 bittiä, niin tällöin luku +3<sub>10</sub> = 0011 ja -3<sub>10</sub> = 1011. Suoran esityksen mukana tulee ongelmia laskutoimituksia suoritettaessa; mm. luvulla nolla on tällöin kaksi esitystä, 0000 ja 1000, mikä ei ole toivottava ominaisuus.</p>
    </div>
    
    <div id="par-1625" class="paragraph">
        <h3 id="komplementti">26.4.2 1-komplementti</h3>
    </div>
    
    <div id="par-1626" class="paragraph">
        <p>Jos luku on positiivinen, kirjoitetaan se normaalisti, ja jos luku on negatiivinen, niin käännetään kaikki bitit päinvastaisiksi. Esimerkiksi luku +3<sub>10</sub> = 0011 ja -3<sub>10</sub> = 1100. Tässäkin systeemissä luvulla nolla on kaksi esitystä, 0000 ja 1111.</p>
    </div>
    
    <div id="par-1627" class="paragraph">
        <h3 id="komplementti-1">26.4.3 2-komplementti</h3>
    </div>
    
    <div id="par-1628" class="paragraph">
        <p>Yleisimmin käytetty tapa ilmoittaa negatiiviset luvut on 2-komplementti. Tällöin positiivisesta luvusta otetaan ensin 1-komplementti, eli muutetaan nollat ykkösiksi ja ykköset nolliksi ("käännetään" kaikki bitit vastakkaisiksi), minkä jälkeen tulokseen lisätään 1. Tämän esitystavan etuna on se, että yhteenlasku toimii totuttuun tapaan myös negatiivisilla luvuilla. Vähennyslasku suoritetaan summaamalla luvun vastaluku:</p>
    </div>
    
    <div id="par-1629" class="paragraph">
        <div class="kaava">
<p>2-3 = 2+(-3)</p>
</div>
    </div>
    
    <div id="par-1630" class="paragraph">
        <p>Muodostetaan luvusta 1 negatiivinen luku:</p>
    </div>
    
    <div id="par-1631" class="paragraph">
        <pre><code>luku 1:           0001
käännetään bitit: 1110
lisätään 1:       1111</code></pre>
    </div>
    
    <div id="par-1632" class="paragraph">
        <p>Luku -1 on siis kahden komplementtina 1111. Kokeillaan tehdä samaa luvulle 2.</p>
    </div>
    
    <div id="par-1633" class="paragraph">
        <pre><code>luku 2:           0010
käännetään bitit: 1101
lisätään 1:       1110</code></pre>
    </div>
    
    <div id="par-1634" class="paragraph">
        <p>Saatiin siis, että -2 on kahden komplementtina 1110. Kokeillaan vielä muuttaa 3 vastaavaksi negatiiviseksi luvuksi.</p>
    </div>
    
    <div id="par-1635" class="paragraph">
        <pre><code>luku 3:           0011
käännetään bitit: 1100
lisätään 1:       1101</code></pre>
    </div>
    
    <div id="par-1636" class="paragraph">
        <p>Saatiin, että -3 on kahden komplementtina 1101.</p>
    </div>
    
    <div id="par-1637" class="paragraph">
        <p>Voidaanko luvut muuttaa samalla menetelmällä takaisin positiivisiksi luvuiksi? Kokeile!</p>
    </div>
    
    <div id="par-1638" class="paragraph">
        <h3 id="komplementin-yhteenlasku">26.4.4 2-komplementin yhteenlasku</h3>
    </div>
    
    <div id="par-1639" class="paragraph">
        <p>Jos vastauksen merkitsevin bitti (vasemman puoleisin) on 1, on vastaus negatiivinen ja 2-komplementtimuodossa. Tällöin vastauksen tulkitsemiseksi sille suoritetaan muunnos edellä esitetyllä tavalla (ensin käännetään bitit, sitten lisätään 1). Muunnoksen tuloksena saadaan luvun itseisarvo, itse luku on siis tällöin aina negatiivinen. Jos merkitsevin bitti on 0, on vastaus positiivinen, eikä mitään muunnosta tarvitse suorittaa.</p>
    </div>
    
    <div id="par-1640" class="paragraph">
        <p>Lasketaan esimerkiksi 2+1</p>
    </div>
    
    <div id="par-1641" class="paragraph">
        <pre><code> 00   
  0010
+ 0001
 -----
  0011</code></pre>
    </div>
    
    <div id="par-1642" class="paragraph">
        <p>Merkitsevin bitti on 0, joten vastaus on 0011<sub>2</sub> = 3<sub>10</sub>. Lasketaan seuraavaksi 1-2.</p>
    </div>
    
    <div id="par-1643" class="paragraph">
        <pre><code> 00   
  0001
+ 1110
  ----
  1111</code></pre>
    </div>
    
    <div id="par-1644" class="paragraph">
        <p>Merkitsevin bitti on nyt 1 eli luku on kahden komplementti. Kun käännetään bitit ja lisätään 1 saadaan luku 0001. Koska merkitsevin bitti oli 1 on luku siis negatiivinen, joten saatiin vastaukseksi -1.</p>
    </div>
    
    <div id="par-1645" class="paragraph">
        <p>Lasketaan vielä -2-3.</p>
    </div>
    
    <div id="par-1646" class="paragraph">
        <pre><code> 11   
  1110
+ 1101
  ----
  1011</code></pre>
    </div>
    
    <div id="par-1647" class="paragraph">
        <p>Luku on jälleen negatiivinen. Kun käännetään bitit ja lisätään 1, saadaan 0101<sub>2</sub> = 5<sub>10</sub>. Vastaus on siis -5<sub>10</sub>.</p>
    </div>
    
    <div id="par-1648" class="paragraph">
        <p>Lopuksi vielä pari laskua joiden tulos ei mahdu 4:ään bittiin. Aluksi 6 + 7</p>
    </div>
    
    <div id="par-1649" class="paragraph">
        <pre><code>  11   
  0110
+ 0111
  ----
  1101   =&gt; 0010 + 1  =&gt; -3 (siis neg. luku kahden pos. luvun yhteenlaskusta)</code></pre>
    </div>
    
    <div id="par-1650" class="paragraph">
        <p>Vastaavasti -7-6</p>
    </div>
    
    <div id="par-1651" class="paragraph">
        <pre><code> 10   
  1001
+ 1010 
  ----
  0011  =&gt; +3 (positiivinen luku kahden negatiivisen yhteenlaskusta)</code></pre>
    </div>
    
    <div id="par-1652" class="paragraph">
        <p>Kahdessa viimeisessä laskussa päädyttiin väärään tulokseen! Tämä on luonnollista, sillä tietenkään rajallisella bittimäärällä ei voida esittää rajaansa isompia lukuja. Meidän esimerkkimme 4 bitin lukualueella saadaan vain lukualue [-8, 7]. Vertaa alkeistietotyyppien lukualueisiin, jotka esiteltiin kohdassa 7.2. 2-komplementin yksi lisäetu on se, että siinä mainitunkaltainen <em>ylivuoto</em> (overflow), eli lukualueen ylitys, on helppo todeta: viimeiseen bittiin (merkkibittiin) tuleva ja sieltä lähtevä muistinumero on erisuuri. Edellisissäkin esimerkeissä oikeaan tulokseen päätyneissä laskuissa ne olivat samat ja väärän tulokseen päätyneissä laskuissa eri suuret. <em>Alivuoto</em> (underflow) tulee vastaavasti liukuluvuilla silloin kun laskutoimituksen tulos tuottaa nollan, vaikka oikeassa maailmassa tulos ei vielä olisikaan nolla.</p>
    </div>
    
    <div id="par-1653" class="paragraph">
        <h2 id="lukujärjestelmien-suhde-toisiinsa">26.5 Lukujärjestelmien suhde toisiinsa</h2>
    </div>
    
    <div id="par-1654" class="paragraph">
        <p>Koska binääriluvuista muodostuu usein hyvin pitkiä, ilmoitetaan ne usein ihmiselle helpommin luettavassa muodossa joko 8- tai 16-järjestelmän lukuina. Tutustutaan nyt jälkimmäiseen, eli heksajärjestelmään. Heksajärjestelmässä on käytössä merkit 0...9A...F, eli yhteensä 16 symbolia. Näin yhdellä symbolilla voidaan esittää jopa luku 15<sub>10</sub> = 1111<sub>2</sub>. Heksalukuja A...F vastaavat 10-järjestelmän luvut näet alla olevasta taulukosta.</p>
    </div>
    
    <div id="par-1655" class="paragraph">
        <table>
<tbody>
<tr class="odd">
<td align="left">A<sub>16</sub></td>
<td align="left">10<sub>10</sub></td>
</tr>
<tr class="even">
<td align="left">B<sub>16</sub></td>
<td align="left">11<sub>10</sub></td>
</tr>
<tr class="odd">
<td align="left">C<sub>16</sub></td>
<td align="left">12<sub>10</sub></td>
</tr>
<tr class="even">
<td align="left">D<sub>16</sub></td>
<td align="left">13<sub>10</sub></td>
</tr>
<tr class="odd">
<td align="left">E<sub>16</sub></td>
<td align="left">14<sub>10</sub></td>
</tr>
<tr class="even">
<td align="left">F<sub>16</sub></td>
<td align="left">15<sub>10</sub></td>
</tr>
</tbody>
</table>
    </div>
    
    <div id="par-1656" class="paragraph">
        <p>Yhdellä 16-järjestelmä symbolilla voidaan siis esittää 4-bittinen binääriluku. Binääriluku voidaankin muuttaa heksajärjestelmän luvuksi järjestelemällä bitit oikealta alkaen neljän bitin ryhmiin ja käyttämällä kunkin 4-bitin yhdistelmän heksavastinetta. Muutetaan luku 11101101<sub>2</sub> heksajärjestelmään.</p>
    </div>
    
    <div id="par-1657" class="paragraph">
        <ul>
<li>11101101<sub>2</sub> =1110 1101<sub>2</sub></li>
<li>1110<sub>2</sub> = E<sub>16</sub></li>
<li>1101<sub>2</sub> = D<sub>16</sub></li>
<li>11101101<sub>2</sub> =1110 1101<sub>2</sub> = ED<sub>16</sub></li>
</ul>
    </div>
    
    <div id="par-1658" class="paragraph">
        <p>Vastaavasti voitaisiin muuttaa binääriluku 8-järjestelmän luvuksi, mutta nyt vain järjesteltäisiin bitit oikealta alkaen kolmen bitin ryhmiin.</p>
    </div>
    
    <div id="par-1659" class="paragraph">
        <p>Alla olevassa taulukossa on esitetty 10-, 2-, 8- ja 16-järjestelmän luvut 0<sub>10</sub>..15<sub>10</sub>. Lisäksi on esitetty mikä olisi vastaavan binääriluvun 2-komplementti -tulkinta.</p>
    </div>
    
    <div id="par-1660" class="paragraph">
        <p>Taulukko 9: Lukujen vastaavuus eri lukujärjestelmissä.</p>
    </div>
    
    <div id="par-1661" class="paragraph">
        <table>
<tbody>
<tr class="odd">
<td align="left">10-järj.</td>
<td align="left">2-järj.</td>
<td align="left">8-järj.</td>
<td align="left">16-järj.</td>
<td align="left">2-komplementti</td>
</tr>
<tr class="even">
<td align="left">0</td>
<td align="left">0000</td>
<td align="left">00</td>
<td align="left">0</td>
<td align="left">0</td>
</tr>
<tr class="odd">
<td align="left">1</td>
<td align="left">0001</td>
<td align="left">01</td>
<td align="left">1</td>
<td align="left">1</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="left">0010</td>
<td align="left">02</td>
<td align="left">2</td>
<td align="left">2</td>
</tr>
<tr class="odd">
<td align="left">3</td>
<td align="left">0011</td>
<td align="left">03</td>
<td align="left">3</td>
<td align="left">3</td>
</tr>
<tr class="even">
<td align="left">4</td>
<td align="left">0100</td>
<td align="left">04</td>
<td align="left">4</td>
<td align="left">4</td>
</tr>
<tr class="odd">
<td align="left">5</td>
<td align="left">0101</td>
<td align="left">05</td>
<td align="left">5</td>
<td align="left">5</td>
</tr>
<tr class="even">
<td align="left">6</td>
<td align="left">0110</td>
<td align="left">06</td>
<td align="left">6</td>
<td align="left">6</td>
</tr>
<tr class="odd">
<td align="left">7</td>
<td align="left">0111</td>
<td align="left">07</td>
<td align="left">7</td>
<td align="left">7</td>
</tr>
<tr class="even">
<td align="left">8</td>
<td align="left">1000</td>
<td align="left">10</td>
<td align="left">8</td>
<td align="left">-8</td>
</tr>
<tr class="odd">
<td align="left">9</td>
<td align="left">1001</td>
<td align="left">11</td>
<td align="left">9</td>
<td align="left">-7</td>
</tr>
<tr class="even">
<td align="left">10</td>
<td align="left">1010</td>
<td align="left">12</td>
<td align="left">A</td>
<td align="left">-6</td>
</tr>
<tr class="odd">
<td align="left">11</td>
<td align="left">1011</td>
<td align="left">13</td>
<td align="left">B</td>
<td align="left">-5</td>
</tr>
<tr class="even">
<td align="left">12</td>
<td align="left">1100</td>
<td align="left">14</td>
<td align="left">C</td>
<td align="left">-4</td>
</tr>
<tr class="odd">
<td align="left">13</td>
<td align="left">1101</td>
<td align="left">15</td>
<td align="left">D</td>
<td align="left">-3</td>
</tr>
<tr class="even">
<td align="left">14</td>
<td align="left">1110</td>
<td align="left">16</td>
<td align="left">E</td>
<td align="left">-2</td>
</tr>
<tr class="odd">
<td align="left">15</td>
<td align="left">1111</td>
<td align="left">17</td>
<td align="left">F</td>
<td align="left">-1</td>
</tr>
</tbody>
</table>
    </div>
    
    <div id="par-1662" class="paragraph">
        <h2 id="liukuluku-floating-point">26.6 Liukuluku (floating-point)</h2>
    </div>
    
    <div id="par-1663" class="paragraph">
        <p>Liukulukua käytetään siis reaalilukujen esitykseen tietokoneissa. Liukulukuesitykseen kuuluu neljä osaa: etumerkki (s), mantissa (m), kantaluku (k) ja eksponentti (c). Kantaluvulla ja eksponentilla määritellään luvun suuruusluokka ja mantissa kuvaa luvun merkitseviä numeroita. Luku x saadaan laskettua kaavalla:</p>
    </div>
    
    <div id="par-1664" class="paragraph">
        <div class="kaava">
<p><em>x</em> = (-1)<sup><em>s</em></sup> · <em>m</em> · <em>k</em><sup><em>c</em></sup></p>
</div>
    </div>
    
    <div id="par-1665" class="paragraph">
        <p>Tietotekniikassa yleisimmin käytetyssä standardissa IEE 754 kantaluku on 2, jolloin kaava saadaan muotoon:</p>
    </div>
    
    <div id="par-1666" class="paragraph">
        <div class="kaava">
<p><em>x</em> = (-1)<sup><em>s</em></sup> · <em>m</em> · 2<sup><em>c</em></sup></p>
</div>
    </div>
    
    <div id="par-1667" class="paragraph">
        <p>IEE 754-standardissa luvun etumerkki (s) ilmoitetaan bittimuodossa ensimmäisellä bitillä, jolloin s voi saada joko arvon 0, joka tarkoittaa positiivista lukua tai arvon 1, joka tarkoittaa siis negatiivista lukua.</p>
    </div>
    
    <div id="par-1668" class="paragraph">
        <p>Tutustutaan seuraavaksi kuinka float ja double esitetään bittimuodossa.</p>
    </div>
    
    <div id="par-1669" class="paragraph">
        <p>float on kooltaan 32 bittiä. Siinä ensimmäinen bitti siis tarkoittaa etumerkkiä, seuraavat 8 bittiä eksponenttia ja jäljelle jäävät 23 bittiä mantissaa.</p>
    </div>
    
    <div id="par-1670" class="paragraph">
        <div class="figure">
<img src="/csimages/ohj1/luentomonistecsUusin_htm_7deb6236.png" alt="Kuva 35: Float 0.875 liukulukuna bittimuodossa"><p class="caption">Kuva 35: Float 0.875 liukulukuna bittimuodossa</p>
</div>
    </div>
    
    <div id="par-1671" class="paragraph">
        <p>double on kooltaan 64 bittiä. Siinäkin ensimmäinen bitti tarkoittaa etumerkkiä, seuraavat 11 bittiä eksponenttia ja jäljelle jäävät 52 bittiä kuvaavat mantissaa.</p>
    </div>
    
    <div id="par-1672" class="paragraph">
        <div class="figure">
<img src="/csimages/ohj1/luentomonistecsUusin_htm_4ce95e8f.png" alt="Kuva 36: Double 0.800 liukulukuna bittiesityksenä"><p class="caption">Kuva 36: Double 0.800 liukulukuna bittiesityksenä</p>
</div>
    </div>
    
    <div id="par-1673" class="paragraph">
        <p>Eksponentti esitetään niin, että siitä vähennetään ns. BIAS arvo. BIAS arvo floatissa on 127 ja doublessa se on 1023. Näin samalla binääriluvulla saadaan esitettyä sekä positiiviset että negatiiviset eksponentit. Jos floatin eksponenttia kuvaavat bitit olisivat esimerkiksi 01111110, eli desimaalimuodossa 126, niin eksponentti olisi 126 - 127 = -1.</p>
    </div>
    
    <div id="par-1674" class="paragraph">
        <p>Mantissa puolestaan esitetään niin, että se on aina vähintään 1. Mantissaa kuvaavat bitit esittävätkin ainoastaan mantissan desimaaliosaa. Jos floatin mantissaa kuvaavat bitit olisivat esimerkiksi 10100000000000000000000, olisi mantissa tällöin binäärimuodossa 1.101 eli desimaalimuodossa 1.625.</p>
    </div>
    
    <div id="par-1675" class="paragraph">
        <h3 id="liukuluvun-binääriesityksen-muuttaminen-10-järjestelmään">26.6.1 Liukuluvun binääriesityksen muuttaminen 10-järjestelmään</h3>
    </div>
    
    <div id="par-1676" class="paragraph">
        <p>Kokeillaan nyt muuttaa muutama binäärimuodossa oleva float kokonaisuudessaan 10-järjestelmän luvuksi. Esimerkkinä liukuluku:</p>
    </div>
    
    <div id="par-1677" class="paragraph">
        <pre><code>00111111 10000000 00000000 00000000</code></pre>
    </div>
    
    <div id="par-1678" class="paragraph">
        <p>Bitit on järjestetty nyt tavuittain. Voisimme järjestellä bitit niin, että liukuluvun eri osat näkyvät selkeämmin:</p>
    </div>
    
    <div id="par-1679" class="paragraph">
        <pre><code>0 01111111 00000000000000000000000</code></pre>
    </div>
    
    <div id="par-1680" class="paragraph">
        <p>Ensimmäinen bitti on nolla, eli luku on positiivinen. Seuraavat 8 bittiä ovat 01111111, joka on 10-järjestelemän lukuna 127 eli eksponentti on 127-127 = 0. Mantissaa esittäviksi biteiksi jää pelkkiä nollia, eli mantissa on 1.0, koska mantissahan oli aina vähintään 1. Nyt liukuluvun kaavalla voidaan laskea mikä luku on kyseessä:</p>
    </div>
    
    <div id="par-1681" class="paragraph">
        <div class="kaava">
<p><em>x</em> = (-1)<sup>0</sup> · 1.0 · 2<sup>0</sup> = 1.0</p>
</div>
    </div>
    
    <div id="par-1682" class="paragraph">
        <p>Kyseessä olisi siis reaaliluku 1.0. Kunhan muistetaan ottaa huomioon ensimmäinen bitti etumerkkinä, voidaan liukuluvun laskemiseen käyttää vielä yksinkertaisempaa kaavaa:</p>
    </div>
    
    <div id="par-1683" class="paragraph">
        <div class="kaava">
<p><em>x</em> = <em>m</em> · 2<sup><em>c</em></sup></p>
</div>
    </div>
    
    <div id="par-1684" class="paragraph">
        <p>Muutetaan vielä toinen liukuluvun binääriesitys 10-järjestelmän luvuksi.</p>
    </div>
    
    <div id="par-1685" class="paragraph">
        <pre><code> 00111111 01100000 00000000 00000000</code></pre>
    </div>
    
    <div id="par-1686" class="paragraph">
        <p>Ensimmäinen bitti on jälleen 0, eli luku on positiivinen. Seuraavat 8 bittiä ovat 01111110, joka on desimaalilukuna 126. Eksponentti on siis 126-127 = -1. Mantissaan jää nyt bitit 11000000000000000000000 eli mantissa on binääriluku 1.11, joka on 10-järjestelmässä luku 1.75. Liukuluvun esittämäksi reaaliluvuksi saadaan siis:</p>
    </div>
    
    <div id="par-1687" class="paragraph">
        <div class="kaava">
<p>1.75 · 2<sup>-1</sup> = 0.875</p>
</div>
    </div>
    
    <div id="par-1688" class="paragraph">
        <h3 id="järjestelmän-luku-liukuluvun-binääriesitykseksi">26.6.2 10-järjestelmän luku liukuluvun binääriesitykseksi</h3>
    </div>
    
    <div id="par-1689" class="paragraph">
        <p>Kun muutetaan 10-järjestelmän luku liukuluvun binääriesitykseksi, täytyy ensiksi selvittää liukuluvun eksponentti. Tämä saadaan selville skaalaamalla luku välille [1,2[ kertomalla tai jakamalla lukua toistuvasti luvulla 2, niin, että luku x on aluksi muodossa:</p>
    </div>
    
    <div id="par-1690" class="paragraph">
        <div class="kaava">
<p><em>x</em> · 2<sup>0</sup></p>
</div>
    </div>
    
    <div id="par-1691" class="paragraph">
        <p>Nyt jos jaamme luvun kahdella, niin samalla eksponentti kasvaa yhdellä. Jos taas kerromme luvun kahdella, niin eksponentti vähenee yhdellä. Näin luvun arvo ei muutu ja saamme luvun muotoon</p>
    </div>
    
    <div id="par-1692" class="paragraph">
        <div class="kaava">
<p><em>m</em> · 2<sup><em>c</em></sup></p>
</div>
    </div>
    
    <div id="par-1693" class="paragraph">
        <p>jossa m on välillä [1,2[. Tämä onkin jo liukuluvun esitysmuoto. Enää meidän ei tarvitsisi kuin muuttaa se tietokoneen ymmärtämäksi binääriesitykseksi.</p>
    </div>
    
    <div id="par-1694" class="paragraph">
        <p>Muutetaan esimerkkinä 10-järjestelmän luku -0.1 liukuluvun binääriesitykseksi. Etumerkki huomioidaan sitten ensimmäisessä bitissä, joten nyt voidaan käsitellä lukua 0.1. Luku voidaan nyt kirjoittaa muodossa :</p>
    </div>
    
    <div id="par-1695" class="paragraph">
        <div class="kaava">
<p>0.1 = 0.1 · 2<sup>0</sup></p>
</div>
    </div>
    
    <div id="par-1696" class="paragraph">
        <p>Nyt kerrotaan lukua kahdella kunnes se on välillä [1,2[ ja muistetaan vähentää jokaisen kertomisen jälkeen eksponenttia yhdellä, jotta luvun arvo ei muutu.</p>
    </div>
    
    <div id="par-1697" class="paragraph">
        <div class="kaava">
<p>0.1 = 0.1 · 2<sup>0</sup> = 0.2 · 2<sup>-1</sup> = 0.4 · 2<sup>-2</sup> = 0.8 · 2<sup>-3</sup> = 1.6 · 2<sup>-4</sup></p>
</div>
    </div>
    
    <div id="par-1698" class="paragraph">
        <p>Eksponentiksi saatiin -4, eli liukuluvun binääriesitykseen siihen lisätään BIAS, eli saadaan 10-järjestelmän luku -4 + 127 = 123, joka on binäärilukuna 1111011. Muutetaan nyt mantissa binääriluvuksi. Muista, että mantissan kokonaisosaa ei merkitty liukuluvun binääriesitykseen.</p>
    </div>
    
    <div id="par-1699" class="paragraph">
        <pre><code>Ensimmäinen bitti  =&gt; 1  (jota ei merkitä)
0.6 * 2  = 1.2     =&gt; 1
0.2 * 2  = 0.4     =&gt; 0
0.4 * 2  = 0.8     =&gt; 0
0.8 * 2  = 1.6     =&gt; 1
0.6 * 2  = 1.2     =&gt; 1</code></pre>
    </div>
    
    <div id="par-1700" class="paragraph">
        <p>Tästä nähdään jo, että kyseessä on päättymätön luku, koska meidän täytyy jälleen kertoa lukua 0.6 kahdella. Laskeminen voidaan siis lopettaa, sillä jakso on jo nähtävillä. Kun jaksoa jatketaan 23 bitin mittaiseksi, saadaan mantissaksi binääriluku 10011001100110011001100. Seuraavat kaksi bittiä olisivat 11, joten luku pyöristyy vielä muotoon 10011001100110011001101. Nyt kaikki liukuluvun osat ovat selvillä:</p>
    </div>
    
    <div id="par-1701" class="paragraph">
        <ul>
<li><p>Etumerkkibitti: 1, sillä alkuperäinen luku oli -0.1</p></li>
<li><p>Eksponentti: 1111011</p></li>
<li><p>Mantissa: 10011001100110011001101</p></li>
</ul>
    </div>
    
    <div id="par-1702" class="paragraph">
        <p>Eli yhdistämällä saadaan:</p>
    </div>
    
    <div id="par-1703" class="paragraph">
        <pre><code>1 1111011 10011001100110011001101</code></pre>
    </div>
    
    <div id="par-1704" class="paragraph">
        <p>Binääriluku voidaan vielä järjestellä tavuittain:</p>
    </div>
    
    <div id="par-1705" class="paragraph">
        <pre><code>1111101 11001100 11001100 11001101</code></pre>
    </div>
    
    <div id="par-1706" class="paragraph">
        <p>Lukua 0.1 ei siis voi esittää liukulukuna tarkasti, vaan pientä heittoa tulee aina.</p>
    </div>
    
    <div id="par-1707" class="paragraph">
        <h3 id="huomio-doublen-lukualue">26.6.3 Huomio: doublen lukualue</h3>
    </div>
    
    <div id="par-1708" class="paragraph">
        <p>Liukuluku esitys on siitä näppärä, että eksponentin ansiosta sillä saadaan todella suuri lukualue käyttöön. double:n eksponenttiin oli käytössä 11 bittiä. Tällöin suurin mahdollinen eksponentti on binääriluku 11111111111 vähennettynä double:n BIAS arvolla. Tästä saadaan desimaalilukuna 2047 - 1023 = 1024. Kun mantissa voi olla välillä [1, 2[, saadaan double:n maksimiarvoksi 2*2^1024, joka on likimain 3.59 * 10<sup>308</sup>. double:n lukualue on siis suunnilleen [-3.59* 10<sup>308</sup>, 3.59 * 10<sup>308</sup>], kun long-tyypin lukualue oli [-2<sup>63</sup>,2<sup>63</sup>[. double-tyypillä pystytään siis esittämään paljon suurempia lukuja kuin long-tyypillä.</p>
    </div>
    
    <div id="par-1709" class="paragraph">
        <h3 id="liukulukujen-tarkkuus">26.6.4 Liukulukujen tarkkuus</h3>
    </div>
    
    <div id="par-1710" class="paragraph">
        <p>Liukuluvut ovat tarkkoja, jos niillä esitettävä luku on esitettävissä mantissan bittien määrän mukaisena kahden potenssien kombinaatioina. Esimerkiksi luvut 0.5, 0.25 jne. ovat tarkkoja. Harmittavasti kuitenkin edellä todettiin että 10-järjestelmän luku 0.1 ei ole tarkka. Siksi esimerkiksi rahalaskuissa on käytettävä joko senttejä tai esimerkiksi C#:n Decimal-luokkaa (Javan BigDecimal). Laskuissa kuitenkin nämä erikoistyypit ovat hitaampia, tilanteesta riippuen eivät kuitenkaan välttämättä merkitsevästi.</p>
    </div>
    
    <div id="par-1711" class="paragraph">
        <p>Toisaalta liukuluvulla voi esittää tarkasti kokonaislukuja aina arvoon 2<sup>mantissan_bittien_lukumäärä</sup> saakka. Eli doublella (52 bittiä mantissalle) voi tarkasti käsitellä suurempia kokonaislukuja kuin int-tyypillä (32 bittiä luvun esittämiseen). long-tyypin 64-bitillä päästään vielä doublea suurempiin tarkkoihin kokonaislukuihin. Valmiit kokonaislukutyypit ovat yleensä laskennassa liukulukutyyppejä nopeampia, joten siksi kokonaislukutyyppejä kannattaa suosia. Nykyprosessoreissa sen sijaan double ja float tyyppien laskut eivät merkittävästi poikkea suoritusnopeudeltaan, joten siksi doublea on pidettävä ensisijaisena valintana kun tarvitaan reaalilukua. Kaikissa mobiilialustoissa ei välttämättä ole käytössä liukulukutyyppejä ja tämä on otettava erikoistapauksissa huomioon. Joissakin tapauksissa kieli (esimerkiksi Java) voi tukea liukulukuja, mutta kohdealustassa ei ole niille prosessoritason tukea. Tällöin liukulukujen käyttö voi olla hidasta. Tarvittaessa laskuja voi suorittaa niin, että skaalaa lukualueen kuvitteellisesti niin, että vaikka sisäisesti luku 1000 on loogisesti 1 ja 1 on loogisesti 0.001 (fixed point arithmetic).</p>
    </div>
    
    <div id="par-1712" class="paragraph">
        <h3 id="intelin-prosessorikaan-ei-ole-aina-osannut-laskea-liukulukuja-oikein">26.6.5 Intelin prosessorikaan ei ole aina osannut laskea liukulukuja oikein</h3>
    </div>
    
    <div id="par-1713" class="paragraph">
        <p>Wired-lehden 10 pahimman ohjelmistobugin listalle on päässyt Intelin prosessorit, joissa ilmeni vuonna 1993 virheitä, kun suoritettiin jakolaskuja tietyllä välillä olevilla liukuluvuilla. Prosessorien korvaaminen aiheutti Intelille arviolta 475 miljoonan dollarin kulut. Tosin virhe esiintyi käytännössä vain muutamissa harvoissa erittäin matemaattisissa ongelmissa, eikä oikeasta häirinnyt tavallista toimistokäyttäjää millään tavalla. Tästä ja muista listan bugeista voi lukea lisää alla olevasta linkistä.</p>
    </div>
    
    <div id="par-1714" class="paragraph">
        <p><a href="http://www.wired.com/software/coolapps/news/2005/11/69355" class="uri">http://www.wired.com/software/coolapps/news/2005/11/69355</a></p>
    </div>
    
    <div id="par-1715" class="paragraph">
        <h1 id="ascii-koodi">27. ASCII-koodi</h1>
    </div>
    
    <div id="par-1716" class="paragraph">
        <p>ASCII (American Standard Code for Information Interchange) on merkistö, joka käyttää seitsemän-bittistä koodausta. Sillä voidaan siis esittää ainoastaan 128 merkkiä. Nimestäkin voi päätellä, että skandinaaviset merkit eivät ole mukana, mistä seuraa ongelmia tietotekniikassa vielä tänäkin päivänä, kun siirrytään "skandeja" tukevasta koodistosta ASCII-koodistoon.</p>
    </div>
    
    <div id="par-1717" class="paragraph">
        <p>ASCII-koodistossa siis jokaista merkkiä vastaa yksi 7-bittinen binääriluku. Vastaavuudet näkyvät alla olevasta taulukosta, jossa selkeyden vuoksi binääriluku on esitetty 10-järjestelmän lukuna, sekä heksalukuna.</p>
    </div>
    
    <div id="par-1718" class="paragraph">
        <p>Taulukko 10: ASCII-merkistö.</p>
    </div>
    
    <div id="par-1719" class="paragraph">
        <table>
<colgroup>
<col width="6%">
<col width="6%">
<col width="18%">
<col width="5%">
<col width="5%">
<col width="8%">
<col width="5%">
<col width="5%">
<col width="5%">
<col width="6%">
<col width="5%">
<col width="5%">
</colgroup>
<tbody>
<tr class="odd">
<td align="left">Des</td>
<td align="left">Hex</td>
<td align="left">Merkki</td>
<td align="left">Des</td>
<td align="left">Hex</td>
<td align="left">Merkki</td>
<td align="left">Des</td>
<td align="left">Hex</td>
<td align="left">Mer</td>
<td align="left">Des</td>
<td align="left">Hex</td>
<td align="left">Mer</td>
</tr>
<tr class="even">
<td align="left">0</td>
<td align="left">0</td>
<td align="left">NUL (null)</td>
<td align="left">32</td>
<td align="left">20</td>
<td align="left">Space</td>
<td align="left">64</td>
<td align="left">40</td>
<td align="left">@</td>
<td align="left">96</td>
<td align="left">60</td>
<td align="left">`</td>
</tr>
<tr class="odd">
<td align="left">1</td>
<td align="left">1</td>
<td align="left">SOH (otsikon alku)</td>
<td align="left">33</td>
<td align="left">21</td>
<td align="left">!</td>
<td align="left">65</td>
<td align="left">41</td>
<td align="left">A</td>
<td align="left">97</td>
<td align="left">61</td>
<td align="left">a</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="left">2</td>
<td align="left">STX (tekstin alku)</td>
<td align="left">34</td>
<td align="left">22</td>
<td align="left">"</td>
<td align="left">66</td>
<td align="left">42</td>
<td align="left">B</td>
<td align="left">98</td>
<td align="left">62</td>
<td align="left">b</td>
</tr>
<tr class="odd">
<td align="left">3</td>
<td align="left">3</td>
<td align="left">ETX (tekstin loppu)</td>
<td align="left">35</td>
<td align="left">23</td>
<td align="left">#</td>
<td align="left">67</td>
<td align="left">43</td>
<td align="left">C</td>
<td align="left">99</td>
<td align="left">63</td>
<td align="left">c</td>
</tr>
<tr class="even">
<td align="left">4</td>
<td align="left">4</td>
<td align="left">EOT (end of transmission)</td>
<td align="left">36</td>
<td align="left">24</td>
<td align="left">$</td>
<td align="left">68</td>
<td align="left">44</td>
<td align="left">D</td>
<td align="left">100</td>
<td align="left">64</td>
<td align="left">d</td>
</tr>
<tr class="odd">
<td align="left">5</td>
<td align="left">5</td>
<td align="left">ENQ (enquiry)</td>
<td align="left">37</td>
<td align="left">25</td>
<td align="left">%</td>
<td align="left">69</td>
<td align="left">45</td>
<td align="left">E</td>
<td align="left">101</td>
<td align="left">65</td>
<td align="left">e</td>
</tr>
<tr class="even">
<td align="left">6</td>
<td align="left">6</td>
<td align="left">ACK (acknowledge)</td>
<td align="left">38</td>
<td align="left">26</td>
<td align="left">&amp;</td>
<td align="left">70</td>
<td align="left">46</td>
<td align="left">F</td>
<td align="left">102</td>
<td align="left">66</td>
<td align="left">f</td>
</tr>
<tr class="odd">
<td align="left">7</td>
<td align="left">7</td>
<td align="left">BEL (bell)</td>
<td align="left">39</td>
<td align="left">27</td>
<td align="left">'</td>
<td align="left">71</td>
<td align="left">47</td>
<td align="left">G</td>
<td align="left">103</td>
<td align="left">67</td>
<td align="left">g</td>
</tr>
<tr class="even">
<td align="left">8</td>
<td align="left">8</td>
<td align="left">BS (backspace)</td>
<td align="left">40</td>
<td align="left">28</td>
<td align="left">(</td>
<td align="left">72</td>
<td align="left">48</td>
<td align="left">H</td>
<td align="left">104</td>
<td align="left">68</td>
<td align="left">h</td>
</tr>
<tr class="odd">
<td align="left">9</td>
<td align="left">9</td>
<td align="left">TAB (tabulaattori)</td>
<td align="left">41</td>
<td align="left">29</td>
<td align="left">)</td>
<td align="left">73</td>
<td align="left">49</td>
<td align="left">I</td>
<td align="left">105</td>
<td align="left">69</td>
<td align="left">i</td>
</tr>
<tr class="even">
<td align="left">10</td>
<td align="left">A</td>
<td align="left">LF (uusi rivi)</td>
<td align="left">42</td>
<td align="left">2A</td>
<td align="left">*</td>
<td align="left">74</td>
<td align="left">4A</td>
<td align="left">J</td>
<td align="left">106</td>
<td align="left">6A</td>
<td align="left">j</td>
</tr>
<tr class="odd">
<td align="left">11</td>
<td align="left">B</td>
<td align="left">VT (vertical tab)</td>
<td align="left">43</td>
<td align="left">2B</td>
<td align="left">+</td>
<td align="left">75</td>
<td align="left">4B</td>
<td align="left">K</td>
<td align="left">107</td>
<td align="left">6B</td>
<td align="left">k</td>
</tr>
<tr class="even">
<td align="left">12</td>
<td align="left">C</td>
<td align="left">FF (uusi sivu)</td>
<td align="left">44</td>
<td align="left">2C</td>
<td align="left">,</td>
<td align="left">76</td>
<td align="left">4C</td>
<td align="left">L</td>
<td align="left">108</td>
<td align="left">6C</td>
<td align="left">l</td>
</tr>
<tr class="odd">
<td align="left">13</td>
<td align="left">D</td>
<td align="left">CR (carriage return)</td>
<td align="left">45</td>
<td align="left">2D</td>
<td align="left">-</td>
<td align="left">77</td>
<td align="left">4D</td>
<td align="left">M</td>
<td align="left">109</td>
<td align="left">6D</td>
<td align="left">m</td>
</tr>
<tr class="even">
<td align="left">14</td>
<td align="left">E</td>
<td align="left">SO (shift out)</td>
<td align="left">46</td>
<td align="left">2E</td>
<td align="left">,</td>
<td align="left">78</td>
<td align="left">4E</td>
<td align="left">N</td>
<td align="left">110</td>
<td align="left">6E</td>
<td align="left">n</td>
</tr>
<tr class="odd">
<td align="left">15</td>
<td align="left">F</td>
<td align="left">SI (shift in)</td>
<td align="left">47</td>
<td align="left">2F</td>
<td align="left">/</td>
<td align="left">79</td>
<td align="left">4F</td>
<td align="left">O</td>
<td align="left">111</td>
<td align="left">6F</td>
<td align="left">o</td>
</tr>
<tr class="even">
<td align="left">16</td>
<td align="left">10</td>
<td align="left">DLE (data link escape)</td>
<td align="left">48</td>
<td align="left">30</td>
<td align="left">0</td>
<td align="left">80</td>
<td align="left">50</td>
<td align="left">P</td>
<td align="left">112</td>
<td align="left">70</td>
<td align="left">p</td>
</tr>
<tr class="odd">
<td align="left">17</td>
<td align="left">11</td>
<td align="left">DC1 (device control 1)</td>
<td align="left">49</td>
<td align="left">31</td>
<td align="left">1</td>
<td align="left">81</td>
<td align="left">51</td>
<td align="left">Q</td>
<td align="left">113</td>
<td align="left">71</td>
<td align="left">q</td>
</tr>
<tr class="even">
<td align="left">18</td>
<td align="left">12</td>
<td align="left">DC2 (device control 2)</td>
<td align="left">50</td>
<td align="left">32</td>
<td align="left">2</td>
<td align="left">82</td>
<td align="left">52</td>
<td align="left">R</td>
<td align="left">114</td>
<td align="left">72</td>
<td align="left">r</td>
</tr>
<tr class="odd">
<td align="left">19</td>
<td align="left">13</td>
<td align="left">DC3 (device control 3)</td>
<td align="left">51</td>
<td align="left">33</td>
<td align="left">3</td>
<td align="left">83</td>
<td align="left">53</td>
<td align="left">S</td>
<td align="left">115</td>
<td align="left">73</td>
<td align="left">s</td>
</tr>
<tr class="even">
<td align="left">20</td>
<td align="left">14</td>
<td align="left">DC4 (device control 4)</td>
<td align="left">52</td>
<td align="left">34</td>
<td align="left">4</td>
<td align="left">84</td>
<td align="left">54</td>
<td align="left">T</td>
<td align="left">116</td>
<td align="left">74</td>
<td align="left">t</td>
</tr>
<tr class="odd">
<td align="left">21</td>
<td align="left">15</td>
<td align="left">NAK (negative acknowledge)</td>
<td align="left">53</td>
<td align="left">35</td>
<td align="left">5</td>
<td align="left">85</td>
<td align="left">55</td>
<td align="left">U</td>
<td align="left">117</td>
<td align="left">75</td>
<td align="left">u</td>
</tr>
<tr class="even">
<td align="left">22</td>
<td align="left">16</td>
<td align="left">SYN (synchronous table)</td>
<td align="left">54</td>
<td align="left">36</td>
<td align="left">6</td>
<td align="left">86</td>
<td align="left">56</td>
<td align="left">V</td>
<td align="left">118</td>
<td align="left">76</td>
<td align="left">v</td>
</tr>
<tr class="odd">
<td align="left">23</td>
<td align="left">17</td>
<td align="left">ETB (end of trans. block)</td>
<td align="left">55</td>
<td align="left">37</td>
<td align="left">7</td>
<td align="left">87</td>
<td align="left">57</td>
<td align="left">W</td>
<td align="left">119</td>
<td align="left">77</td>
<td align="left">w</td>
</tr>
<tr class="even">
<td align="left">24</td>
<td align="left">18</td>
<td align="left">CAN (cancel)</td>
<td align="left">56</td>
<td align="left">38</td>
<td align="left">8</td>
<td align="left">88</td>
<td align="left">58</td>
<td align="left">X</td>
<td align="left">120</td>
<td align="left">78</td>
<td align="left">x</td>
</tr>
<tr class="odd">
<td align="left">25</td>
<td align="left">19</td>
<td align="left">EM (end of medium)</td>
<td align="left">57</td>
<td align="left">39</td>
<td align="left">9</td>
<td align="left">89</td>
<td align="left">59</td>
<td align="left">Y</td>
<td align="left">121</td>
<td align="left">79</td>
<td align="left">y</td>
</tr>
<tr class="even">
<td align="left">26</td>
<td align="left">1A</td>
<td align="left">SUB (substitute)</td>
<td align="left">58</td>
<td align="left">3A</td>
<td align="left">:</td>
<td align="left">90</td>
<td align="left">5A</td>
<td align="left">Z</td>
<td align="left">122</td>
<td align="left">7A</td>
<td align="left">z</td>
</tr>
<tr class="odd">
<td align="left">27</td>
<td align="left">1B</td>
<td align="left">ESC (escape)</td>
<td align="left">59</td>
<td align="left">3B</td>
<td align="left">;</td>
<td align="left">91</td>
<td align="left">5B</td>
<td align="left">[</td>
<td align="left">123</td>
<td align="left">7B</td>
<td align="left">{</td>
</tr>
<tr class="even">
<td align="left">28</td>
<td align="left">1C</td>
<td align="left">FS (file separator)</td>
<td align="left">60</td>
<td align="left">3C</td>
<td align="left">&lt;</td>
<td align="left">92</td>
<td align="left">5C</td>
<td align="left">\</td>
<td align="left">124</td>
<td align="left">7C</td>
<td align="left">|</td>
</tr>
<tr class="odd">
<td align="left">29</td>
<td align="left">1D</td>
<td align="left">GS (group separator)</td>
<td align="left">61</td>
<td align="left">3D</td>
<td align="left">=</td>
<td align="left">93</td>
<td align="left">5D</td>
<td align="left">]</td>
<td align="left">125</td>
<td align="left">7D</td>
<td align="left">}</td>
</tr>
<tr class="even">
<td align="left">30</td>
<td align="left">1E</td>
<td align="left">RS (record separator)</td>
<td align="left">62</td>
<td align="left">3E</td>
<td align="left">&gt;</td>
<td align="left">94</td>
<td align="left">5E</td>
<td align="left">^</td>
<td align="left">126</td>
<td align="left">7E</td>
<td align="left">~</td>
</tr>
<tr class="odd">
<td align="left">31</td>
<td align="left">1F</td>
<td align="left">US (unit separator)</td>
<td align="left">63</td>
<td align="left">3F</td>
<td align="left">?</td>
<td align="left">95</td>
<td align="left">5F</td>
<td align="left">_</td>
<td align="left">127</td>
<td align="left">7F</td>
<td align="left">DEL</td>
</tr>
</tbody>
</table>
    </div>
    
    <div id="par-1720" class="paragraph">
        <p>Monissa ohjelmointikielissä, esimerkiksi C:ssä ja Javassa, ASCII-merkkien desimaaliarvoja voidaan sijoittaa suoraan char-tyyppisiin muuttujiin. Esimerkiksi pikku-a:n (a) voisi sijoittaa muuttujaan c seuraavasti:</p>
    </div>
    
    <div id="par-1721" class="paragraph">
        <pre><code>char c = 97;</code></pre>
    </div>
    
    <div id="par-1722" class="paragraph">
        <p>C#:ssa näin ei voi tehdä, vaan on tehtävä tyypinmuunoksen kautta:</p>
    </div>
    
    <div id="par-1723" class="paragraph">
        <pre><code>char c = (char)97;</code></pre>
    </div>
    
    <div id="par-1724" class="paragraph">
        <p>Esimerkiksi tiedosto, jonka sisältö olisi loogisesti</p>
    </div>
    
    <div id="par-1725" class="paragraph">
        <pre><code>Kissa istuu 
puussa</code></pre>
    </div>
    
    <div id="par-1726" class="paragraph">
        <p>koostuisi oikeasti Windows-käyttöjärjestelmässä biteistä (joiden arvot on lukemisen helpottamiseksi seuraavassa kuvattu heksana):</p>
    </div>
    
    <div id="par-1727" class="paragraph">
        <pre><code>4B 69 73 73 61 20 69 73 74 75 75 0D 0A 70 75 75 73 73 61</code></pre>
    </div>
    
    <div id="par-1728" class="paragraph">
        <p>Erona eri käyttöjärjestelmissä on se, miten rivinvaihto kuvataan. Windowsissa rivinvaihto on CR LF (0D 0A) ja Unix-pohjaisissa järjestelmissä pelkkä LF (0A).</p>
    </div>
    
    <div id="par-1729" class="paragraph">
        <p>Tiedoston sisältöä voit katsoa esimerkiksi antamalla komentoriviltä komennot (jos tiedosto on kirjoitettu tiedostoon kissa.txt)</p>
    </div>
    
    <div id="par-1730" class="paragraph">
        <pre><code>C:\MyTemp&gt;debug kissa.txt
-d
0D2F:0100  4B 69 73 73 61 20 69 73-74 75 75 0D 0A 70 75 75   Kissa istuu..puu
0D2F:0110  73 73 61 61 61 6D 65 74-65 72 73 20 34 00 1E 0D   ssaaameters 4...
...
-q</code></pre>
    </div>
    
    <div id="par-1731" class="paragraph">
        <h1 id="syntaksin-kuvaaminen">28. Syntaksin kuvaaminen</h1>
    </div>
    
    <div id="par-1732" class="paragraph">
        <h2 id="bnf">28.1 BNF</h2>
    </div>
    
    <div id="par-1733" class="paragraph">
        <p>Tässä luvussa kuvataan Java-kielen syntaksia. Syntaksia eli kielioppia voidaan kuvata ns. BNF:llä (Backus-Naur Form). Kielen peruselementit on käyty läpi alla olevassa taulukossa:</p>
    </div>
    
    <div id="par-1734" class="paragraph">
        <table>
<tbody>
<tr class="odd">
<td align="left">&lt;&gt;</td>
<td align="left">BNF-kaavio koostuu <em>non-terminaaleista</em> (välikesymbolit) ja <em>terminaaleista</em> (päätesymbolit)<em>.</em> Non-terminaalit kirjoitetaan pienempi kuin (&lt;)- ja suurempi kuin (&gt;)-merkkien väliin. Jokaiselle non-terminaalille on oltava jossain määrittely. Terminaali sen sijaan kirjoitetaan koodin sellaisenaan.</td>
</tr>
<tr class="even">
<td align="left">::=</td>
<td align="left">Aloittaa non-terminaalin määrittelyn. Määrittely voi sisältää uusia non-terminaaleja ja terminaaleja.</td>
</tr>
<tr class="odd">
<td align="left">|</td>
<td align="left">"|"-merkki kuvaa sanaa "tai". Tällöin "|"-merkin vasemmalla puolella olevan osan sijasta voidaan kirjoittaa oikealla puolella oleva osa.</td>
</tr>
</tbody>
</table>
    </div>
    
    <div id="par-1735" class="paragraph">
        <p>Määrittely on yleisessä muodossa seuraava:</p>
    </div>
    
    <div id="par-1736" class="paragraph">
        <pre><code>&lt;nonterminaali&gt; ::= _lause_</code></pre>
    </div>
    
    <div id="par-1737" class="paragraph">
        <p>Jossa _lause_ voi sisältää uusia non-terminaaleja ja terminaaleja, sekä "|"-merkkejä.</p>
    </div>
    
    <div id="par-1738" class="paragraph">
        <p>Kielen syntaksin kuvaaminen aloitetaan käännösyksikön (complitatonunit) määrittelystä. Tämä on Javassa .java-päätteinen tiedosto. Tämä on siis ensimmäinen non-terminaali, joka määritellään. Tämä määrittely sisältää sitten toisia non-terminaaleja, joille kaikille on olemassa omat määrittelyt. Näin jatketaan, kunnes lopulta on jäljellä pelkkiä terminaaleja ja kielen syntaksi on yksiselitteisesti määritelty.</p>
    </div>
    
    <div id="par-1739" class="paragraph">
        <p>Esimerkiksi muuttujan määrittelyn syntaksin voisi kuvata seuraavasti. Esimerkissä on lihavoituna kaikki terminaalit.</p>
    </div>
    
    <div id="par-1740" class="paragraph">
        <pre><code>&lt;local variable declaration statement&gt; ::= &lt;local variable declaration&gt;;
&lt;local variable declaration&gt; ::= &lt;type&gt; &lt;variable declarators&gt;

&lt;type&gt; ::= &lt;primitive type&gt; | &lt;reference type&gt; 
&lt;primitive type&gt; ::= &lt;numeric type&gt; | boolean
&lt;numeric type&gt; ::= &lt;integral type&gt; | &lt;floating-point type&gt;
&lt;integral type&gt; ::= byte | short | int | long | char
&lt;floating-point type&gt; ::= float | double
&lt;reference type&gt; ::= &lt;class or interface type&gt; | &lt;array type&gt;
&lt;class or interface type&gt; ::= &lt;class type&gt; | &lt;interface type&gt;
&lt;class type&gt; ::= &lt;type name&gt;
&lt;interface type&gt; ::= &lt;type name&gt;
&lt;array type&gt; ::= &lt;type&gt; []

&lt;variable declarators&gt; ::= &lt;variable declarator&gt; | &lt;variable declarators&gt; , 
                               &lt;variable declarator&gt;
&lt;variable declarator&gt; ::= &lt;variable declarator id&gt; | &lt;variable declarator id&gt;= &lt;variable initializer&gt;
&lt;variable declarator id&gt; ::= &lt;identifier&gt; | &lt;variable declarator id&gt; []
&lt;variable initializer&gt; ::= &lt;expression&gt; | &lt;array initializer&gt;</code></pre>
    </div>
    
    <div id="par-1741" class="paragraph">
        <p>Lopetetaan muuttujan määrittelyn kuvaaminen tähän. Kokonaisuudessaan siitä tulisi todella pitkä. Koko Javan syntaksin BNF:nä löytää seuraavasta linkistä.</p>
    </div>
    
    <div id="par-1742" class="paragraph">
        <p><a href="http://www.daimi.au.dk/dRegAut/JavaBNF.html" class="uri">http://www.daimi.au.dk/dRegAut/JavaBNF.html</a>.</p>
    </div>
    
    <div id="par-1743" class="paragraph">
        <h2 id="laajennettu-bnf-ebnf">28.2 Laajennettu BNF (EBNF)</h2>
    </div>
    
    <div id="par-1744" class="paragraph">
        <p>Alkuperäisellä BNF:llä syntaksin kuvaaminen on melko työlästä. Tämän takia on otettu käyttöön laajennettu BNF (extended BNF). Siinä terminaalit kirjoitetaan lainausmerkkien sisään ja non-terminaalit nyt ilman "&lt;&gt;"-merkkejä. Lisäksi tulee kaksi uutta ominaisuutta.</p>
    </div>
    
    <div id="par-1745" class="paragraph">
        <table>
<tbody>
<tr class="odd">
<td align="left">{}</td>
<td align="left">Aaltosulkeiden sisään kirjoitetut osat voidaan jättää joko kokonaan pois tai toistaa yhden tai useamman kerran.</td>
</tr>
<tr class="even">
<td align="left">[]</td>
<td align="left">Hakasulkeiden sisään kirjoitetut osat voidaan suorittaa joko kerran tai ei ollenkaan.</td>
</tr>
</tbody>
</table>
    </div>
    
    <div id="par-1746" class="paragraph">
        <p>Nyt muuttujan määrittelyn syntaksi saadaan kuvattua hieman helpommin:</p>
    </div>
    
    <div id="par-1747" class="paragraph">
        <pre><code>variable_declaration ::= { modifier } type variable_declarator 
                               { "," variable_declarator } ";"
modifier ::= "public" | "private" | "protected" | "static" | "final" | "native" |
             "synchronized" | "abstract" | "threadsafe" | "transient"
type ::= type_specifier { "[" "]" }
type_specifier  ::= "boolean" | "byte" | "char" | "short" | "int" | "float" | "long" 
                               | "double" | class_name | interface_name
variable_declarator ::= identifier { "[" "]" } [ "="variable_initializer ]
identifier ::= "a..z,$,_" { "a..z,$,_,0..9,unicode character over 00C0" }
variable_initializer ::= expression | ( "{" [ variable_initializer 
                               { "," variable_initializer } [ "," ] ] "}" )</code></pre>
    </div>
    
    <div id="par-1748" class="paragraph">
        <p>Lausekkeen (expression) avaamisesta aukeaisi jälleen uusia ja uusia non-terminaaleja, joten muuttujan määrittelyn kuvaaminen kannattaa lopettaa tähän. Voit katsoa loput seuraavasta linkistä:</p>
    </div>
    
    <div id="par-1749" class="paragraph">
        <p><a href="http://cui.unige.ch/db-research/Enseignement/analyseinfo/JAVA/BNFindex.html" class="uri">http://cui.unige.ch/db-research/Enseignement/analyseinfo/JAVA/BNFindex.html</a></p>
    </div>
    
    <div id="par-1750" class="paragraph">
        <p>Vastaavasti syntaksia voidaan kuvata "junaradoilla".</p>
    </div>
    
    <div id="par-1751" class="paragraph">
        <div id='1.junanradat' data-plugin='/showVideo'><small-video-runner 
height='600'
width='700'
iframe='True'
videoname='Yllä oleva syntaksi junanradoilla tehtynä'
user_id='vesal'
type='small'
hidetext='Piilota syntaksi'
taskid='1.junanradat'
videoicon='False'
file='http://kurssit.it.jyu.fi/ITKP102/materiaalia/junanradat.xhtml'

></video-runner></div>
    </div>
    
    <div id="par-1752" class="paragraph">
        <p>Tämä on eräs graafinen tapa kuvata syntaksia. Junaradoissa non-terminaalit on kuvattu suorakulmiolla ja terminaalit vähän pyöreämmillä suorakulmiolla. Vaihtoehdot kuvataan taas niin, että risteyskohdassa voidaan valita vain yksi vaihtoehtoisista raiteista. Lisäksi raiteissa on "silmukoita", joissa voidaan tehdä useampi kierros. Silmukoilla kuvataan siis "{}"-merkkien välissä olevia lauseita. Lisäksi on "ohitusraiteita", joilla voidaan ohittaa joku osa kokonaan. Tällä kuvataan "[]"-merkkien välissä olevia lauseita.</p>
    </div>
    
    <div id="par-1753" class="paragraph">
        <div class="figure">
<img src="http://kurssit.it.jyu.fi/ITKP102/materiaalia/muuttujarata.png" alt='Kuva 37: Muuttujan määrittelyn syntaksia "junaradoilla" esitettynä'><p class="caption">Kuva 37: Muuttujan määrittelyn syntaksia "junaradoilla" esitettynä</p>
</div>
    </div>
    
    <div id="par-1754" class="paragraph">
        <p>Kuvasta puuttuu vielä tekstiesimerkissä olevien identifier ja variable_intializer non-terminaalien junarataesitys. Piirrä niiden "junaradat" samaan tapaan.</p>
    </div>
    
    <div id="par-1755" class="paragraph">
        <p>Junanratoja voit piirrellä vaikkapa <a href="http://bottlecaps.de/rr/ui%5D">Railroad Diagram Generatorilla</a>. Huomaa kuitenkin että tuossa käytetään hieman eri syntaksi mm. toiston esittämiseen.</p>
    </div>
    
    <div id="par-1756" class="paragraph">
        <p>Lisätietoa:</p>
    </div>
    
    <div id="par-1757" class="paragraph">
        <ul>
<li><p><a href="https://korppi.jyu.fi/kotka/r.jsp?course=69997">TIEA241 Automaatit ja kieliopit</a> .</p></li>
<li><p>Paavo Niemisen 2007 pitämän <a href="http://users.jyu.fi/~nieminen/ohj1/materiaalia/luento02.pdf">Ohjelmointi 1-kurssin luentokalvot</a>. Junaratoja löytyy myös muista Paavon kalvoista.</p></li>
<li><p><a href="http://cui.unige.ch/db-research/Enseignement/analyseinfo/JAVA/BNFindex.html">Javan syntaksi EBNF:nä kuvattuna</a>. Sisältää myös graafiset junaradat. Tämä kuvaus ei ole ihan yhtä tarkka kuin <a href="http://docs.oracle.com/javase/specs/jls/se8/html/jls-19.html">Oraclen oma</a>.</p></li>
<li><p>Wikipedia: <a href="http://en.wikipedia.org/wiki/Backus%E2%80%93Naur_Form">Bachus Naur Form</a></p></li>
<li><p>C#:n syntaksia on kuvattu muun muassa <a href="http://msdn.microsoft.com/en-us/library/Aa664812">MSDN-dokumentaatiossa</a> ja EBNF-muodossa esim <a href="http://www.externsoft.ch/download/csharp.html">Extern Softin sivuilla</a>.</p></li>
</ul>
    </div>
    
    <div id="par-1758" class="paragraph">
        <h1 id="jälkisanat">29. Jälkisanat</h1>
    </div>
    
    <div id="par-1759" class="paragraph">
        <p>Joskus ohjelmoidessa tulee vaan tämmöinen olo:</p>
    </div>
    
    <div id="par-1760" class="paragraph">
        <p><a href="http://www.youtube.com/watch?v=K21fuhDo5Bo&amp;eurl=http%3A%2F%2Fwww.devtopics.com%2Fbest-computer-programming-videos%2F&amp;feature=player_embedded">http://www.youtube.com/watch?v=K21fuhDo5Bo</a></p>
    </div>
    
    <div id="par-1761" class="paragraph">
        <p>Totu siihen ja keitä lisää kahvia.</p>
    </div>
    
    <div id="par-1762" class="paragraph">
        <h1 id="liite-sanasto">Liite: Sanasto</h1>
    </div>
    
    <div id="par-1763" class="paragraph">
        <p>Internetistä löytyy ohjelmoinnista paremmin tietoa englanniksi. Tässä tiedonhakua auttava sanasto ohjelmoinnin perustermeistä.</p>
    </div>
    
    <div id="par-1764" class="paragraph">
        <table>
<colgroup>
<col width="56%">
</colgroup>
<thead>
<tr class="header">
<th align="left">aliohjelm subprogram konstrukt construct rajapinta interface a , o o subroutine ri r , procedure alirajapi subinterfa koodaus- code roskienke garbage n c käytäntee conventio r collection ta e t n uu s alivuoto underflow kääntäjä compiler roskienke garbage r collector ääjä alkeistie primitive kääriä wrap sijoitus- assignment t types lause statement o- tyyppi alkio element lause statement sijoitus- assignment operaatto operator r i alustaa intialize lippu flag silmukka loop aritmeett arithmetic lohko block sovellus- Integrated i operation kehitin Development nen Environment operaatio aritmeett arithmetic luokka class staattine static i expression n nen lauseke bugi bug metodi method standardi standard input syöttövir stream t a destrukto destructor muuttuja variable standardi standard output r tulostusv stream i i rta dokumenta documentat määritell declare standardi standard error a i ä virhetulo output stream tio on s tus- virta funktio function olio object syntaksi syntax globaali global ottaa catch taulukko array vakio constant kiinni globaali global paketti package testaus testing muuttuja variable indeksi index parametri parameter toteuttaa implement julkinen public periytymi inheritan tuoda import n c en e keskeytys breakpoint poikkeus exception vakio constant</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">kohta</td>
</tr>
<tr class="even">
<td align="left">komentori Command poikkeust exception yksikköte unit testing v Prompt e handling s framework i n- taus- hallinta rajapinta</td>
</tr>
<tr class="odd">
<td align="left">        ylivuoto overflow</td>
</tr>
</tbody>
</table>
    </div>
    
    <div id="par-1765" class="paragraph">
        <h1 id="liite-yleisimmät-virheilmoitukset-ja-niiden-syyt">Liite: Yleisimmät virheilmoitukset ja niiden syyt</h1>
    </div>
    
    <div id="par-1766" class="paragraph">
        <p>Aloittavan ohjelmoijan voi joskus olla vaikeaa saada selvää kääntäjän virheilmoituksista. Kootaan tänne muutamia yleisimpiä C#-kääntäjän virheilmoituksia. Osa virheilmoituksista on Jypeli-spesifisiä.</p>
    </div>
    
    <div id="par-1767" class="paragraph">
        <h2 id="tyyppiä-tai-nimiavaruutta-ei-löydy">Tyyppiä tai nimiavaruutta ei löydy</h2>
    </div>
    
    <div id="par-1768" class="paragraph">
        <pre><code>The type or namespace name 'PhysisObject' could not be found (are you missing a using directive or an assembly reference?)</code></pre>
    </div>
    
    <div id="par-1769" class="paragraph">
        <p>Syitä</p>
    </div>
    
    <div id="par-1770" class="paragraph">
        <ul>
<li><p>Oletko kirjoittanut esim. jonkun aliohjelman tai tyypin nimen väärin? Katso sanoja, jotka on väritetty punakynällä. Äskeisessä virheviestissä PhysisObject pitäisi kirjoittaa PhysicsObject. Käytä Visual Studion koodin täydennystä kirjoitusvirheiden välttämiseksi.</p></li>
<li><p>Jokin kirjasto puuttuu (kts Kirjastojen liittäminen projektiin: <a href="https://trac.cc.jyu.fi/projects/npo/wiki/KirjastojenLiittaminenKasin">wiki</a>, <a href="http://www.youtube.com/watch?v=vlqaRwu1ScY">video</a>)</p></li>
<li><p>Jokin using-lause puuttuu. Jypeli-pelien projektimalleissa ovat vakiona seuraavat using-lauseet:</p>
<p>using System; using Jypeli; using Jypeli.Widgets; using Jypeli.Assets;</p></li>
</ul>
    </div>
    
    <div id="par-1771" class="paragraph">
        <h2 id="peli.aliohjelma-not-all-code-paths-return-a-value">Peli.Aliohjelma(): not all code paths return a value</h2>
    </div>
    
    <div id="par-1772" class="paragraph">
        <p>Aliohjelmalle on määritelty paluuarvo, mutta se ei palauta mitään (eli return-lause puuttuu).</p>
    </div>
    
    <div id="par-1773" class="paragraph">
        <p>Seuraavassa aliohjelmassa paluuarvoksi on määritelty PhysicsObject, mutta aliohjelma ei palauta mitään arvoa.</p>
    </div>
    
    <div id="par-1774" class="paragraph">
        <pre><code>PhysicsObject LuoPallo()
{
    PhysicsObject pallo = new PhysicsObject(50.0, 50.0, Shape.Circle);
}</code></pre>
    </div>
    
    <div id="par-1775" class="paragraph">
        <p>Tällöin Visual Studio antaa virheilmoituksen.</p>
    </div>
    
    <div id="par-1776" class="paragraph">
        <div class="figure">
<img src="/csimages/ohj1/luentomonistecsUusin_htm_77f7f118.png">
</div>
    </div>
    
    <div id="par-1777" class="paragraph">
        <p>Jos pallo halutaan palauttaa aliohjelmasta, niin aliohjelmaa pitää korjata seuraavasti.</p>
    </div>
    
    <div id="par-1778" class="paragraph">
        <pre><code>PhysicsObject LuoPallo()
{
    PhysicsObject pallo = new PhysicsObject(50.0, 50.0, Shape.Circle);
    return pallo;
}</code></pre>
    </div>
    
    <div id="par-1779" class="paragraph">
        <h2 id="muuttujaa-ei-ole-olemassa-nykyisessä-kontekstissa">Muuttujaa ei ole olemassa nykyisessä kontekstissa</h2>
    </div>
    
    <div id="par-1780" class="paragraph">
        <pre><code>The name 'massa' does not exist in the current context</code></pre>
    </div>
    
    <div id="par-1781" class="paragraph">
        <p>Seuraavassa koodinpätkässä käytetään muuttujaa nimeltä massa, mutta tuota muuttujaa ei ole esitelty missään. Jokainen muuttuja, jota ohjelmassa käytetään, tulee esitellä jossakin. Esittely tarkoittaa, että jollakin rivillä kirjoitetaan muuttujan tyyppi sekä nimi seuraavasti:</p>
    </div>
    
    <div id="par-1782" class="paragraph">
        <pre><code>double massa;</code></pre>
    </div>
    
    <div id="par-1783" class="paragraph">
        <p>Samalla rivillä esittelyn kanssa voi myös sijoittaa muuttujalle alkuarvon:</p>
    </div>
    
    <div id="par-1784" class="paragraph">
        <pre><code>double massa = 100.0;</code></pre>
    </div>
    
    <div id="par-1785" class="paragraph">
        <p>Niinpä äskeisen koodin virhe voidaan korjata kertomalla muuttujan massa tyyppi (tyyppi on double) siinä missä tuo muuttuja ensimmäisen kerran otetaan käyttöön:</p>
    </div>
    
    <div id="par-1786" class="paragraph">
        <p>Jos muuttuja esitellään aliohjelmassa lokaalina muuttujana, se pitää alustaa ennen sen käyttöä. Jos muuttujaa tarvitaan useammassa metodissa, voi sen esitellä attribuuttina luokan sisällä:</p>
    </div>
    
    <div id="par-1787" class="paragraph">
        <pre><code>public class Peli : PhysicsGame
{
    private double massa; // Attribuutti, joka näkyy kaikille luokan metodeille

    public override void Begin()
    {
        massa = 100.0;
        PhysicsObject pallo = new PhysicsObject(50.0, 50.0, Shape.Circle);
        pallo.Mass = massa;
        TulostaMassa();
    }

    public void TulostaMassa() // HUOM! Ei ole static
    {
        MessageDisplay.Add("Massa on " + massa);
    }
}</code></pre>
    </div>
    
    <div id="par-1788" class="paragraph">
        <p>Lähdeluettelo</p>
    </div>
    
    <div id="par-1789" class="paragraph">
        <p><strong>DOC</strong>: Sun, , ,http://java.sun.com/j2se/javadoc/writingdoccomments/index.html<br><strong>HYV</strong>: Hyvönen Martti, Lappalainen Vesa, Ohjelmointi 1, 2009<br><strong>KOSK</strong>: Jussi Koskinen, Ohjelmistotuotanto-kurssin luentokalvot(Osa: Ohjelmistojen ylläpito),<br><strong>KOS</strong>: Kosonen, Pekka; Peltomäki, Juha; Silander, Simo, Java 2 Ohjelmoinnin peruskirja, 2005<br><strong>VES</strong>: Vesterholm, Mika; Kyppö, Jorma, Java-ohjelmointi, 2003<br><strong>LAP</strong>: Vesa Lappalainen, Ohjelmointi 2, ,http://users.jyu.fi/~vesal/kurssit/ohj2/moniste/html/m-Title.htm<br><strong>MÄN</strong>: Männikkö, Timo, Johdatus ohjelmointiin- moniste, 2002<br><strong>LIA</strong>: Y. Daniel Liang, Introduction to Java programming, 2003<br><strong>DEI</strong>: Deitel, H.M; Deitel, P.J, Java How to Program, 2003<br></p>
    </div>
    
    <div id="par-1790" class="paragraph">
        <p>Jyväskylän yliopisto University of Jyväskylä</p>
    </div>
    
    <div id="par-1791" class="paragraph">
        <p>Tietotekniikan laitos Department of Mathematical</p>
    </div>
    
    <div id="par-1792" class="paragraph">
        <p>Information Technology</p>
    </div>
    
    <div id="par-1793" class="paragraph">
        <h2 id="luentomoniste-17-lecture-notes-17">Luentomoniste 17 Lecture Notes 17</h2>
    </div>
    
    <div id="par-1794" class="paragraph">
        <ol>
<li>MÄKINEN, RAINO A. E., Numeeriset menetelmät. 1999 (107 s.)</li>
<li>LAPPALAINEN, VESA ja RISTO LAHDELMA, Olio-ohjelmointi ja C++. 1999 (107 s.)</li>
<li>LAPPALAINEN, VESA, Windows-ohjelmointi C-kielellä. 1999 (150 s.)</li>
<li>ORPONEN, PEKKA, Tietorakenteet ja algoritmit 2. 2.p., 2000 (50 s.)</li>
<li>LAPPALAINEN, VESA, Ohjelmointi++. 1999 (315 s.)</li>
<li>MÄNNIKKÖ, TIMO, Johdatus ohjelmointiin. 2000 (155 s.)</li>
<li>KOIKKALAINEN, PASI ja PEKKA ORPONEN, Tietotekniikan perusteet. 2001 (150 s.)</li>
<li>ARNĂUTU, VIOREL, Numerical methods for variational problems. 2001 (100 s.)</li>
<li>KRAVCHUK, ALEXANDER, Mathematical modelling of the biomedical tomography: The 12<sup>th</sup> Jyväskylä Summer School. 2003 (83 s.)</li>
<li>MIETTINEN, KAISA, Epälineaarinen optimointi. 2003 (146 s.)</li>
<li>LAPPALAINEN VESA &amp; VIITANEN SANTTU, Ohjelmointi 2. 2012 (240 s.)</li>
<li>KAIJANAHO, ANTTI-JUHANI &amp; KÄRKKÄINEN TOMMI, Formaalit menetelmät. 2005 (171 s.)</li>
<li>HOPPE, RONALD H. W., Numerical solution of optimization problems with PDE constraints: Lecture notes of a course given in the 14<sup>th</sup> Jyväskylä Summer School, August 9-27, 2004. 2006 (65 s.)</li>
<li>JYRKI JOUTSENSALO, TIMO HÄMÄLÄINEN &amp; ALEXANDER SAYENKO, QoS Supported Networks, Scheduling, and Pricing; Theory and Applications (214 s.)</li>
<li>MARTTI HYVÖNEN, VESA LAPPALAINEN, Ohjelmointi 1. 2009. (132 s.)</li>
<li>ANTTI-JUHANI KAIJANAHO, Ohjelmointikielten periaatteet. 2010. (153 s.)</li>
<li>MARTTI HYVÖNEN, VESA LAPPALAINEN, ANTTI-JUSSI LAKANEN, Ohjelmointi 1 C#. 3. korjattu painos, 2013. (158 s.)</li>
</ol>
    </div>
    
    <div id="par-1795" class="paragraph">
        <p>ISBN 978-951-39-4859-7 (3. korjattu painos)</p>
    </div>
    
    <div id="par-1796" class="paragraph">
        <p>ISSN 1456-9787</p>
    </div>
    
    <div id="par-1797" class="paragraph">
        <p><a href="#sdfootnote1anc">1</a>Array.Resize-metodi ei muuta alkuperäistä taulukkoa, vaan luo uuden taulukon, kopioi alkuperäisen taulukon kaikki alkiot uuteen taulukkoon, ja sen jälkeen korvaa alkuperäisen taulukon (viitteen) uudella taulukolla (viitteellä). Ks. <a href="http://msdn.microsoft.com/en-us/library/bb348051.aspx" class="uri">http://msdn.microsoft.com/en-us/library/bb348051.aspx</a>.</p>
    </div>
    
    <div id="par-1798" class="paragraph">
        <p>Jyväskylä 2013</p>
    </div>
    
    </div>

</div>
<div id="footer">
    
    
</div>
</body>
</html>